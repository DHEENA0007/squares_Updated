import{j as e}from"./ui-DOY6021Z.js";import{R as W,r as c}from"./router-2SVJvIbS.js";import{A as Ue,a as x,b as g,c as j,ad as $,e as h,M as H,$ as he,B as I,U as ie,f as C,m as b,t as m,x as Te,X as Ve,O as ze,Q as De,R as qe,I as N,y as Be,ai as $e,T as Oe,K as Ge,L as O,ac as G,q as Q,r as X,s as Z,v as ee,w as se,C as ce,p as He,aq as Je,h as We,S as Ye}from"./index-DJqidggL.js";import{L as p}from"./label-B9O-vWmY.js";import{T as de}from"./textarea-DO9hd5Hf.js";import{S as ae}from"./switch-simAip1U.js";import{vendorService as L}from"./vendorService-BtSoYHTS.js";import{m as me}from"./messageService-DGuX3xJM.js";import{P as Ke}from"./PincodeAutocomplete-DMRtTwZt.js";import{P as _e}from"./PasswordChangeDialog-SLz-uVbz.js";import{S as pe}from"./separator-b0f6TR0i.js";import{G as Qe}from"./globe-BYxmLUMV.js";import{T as J}from"./trending-up-BhzOTv6v.js";import{C as fe}from"./circle-alert-BOzTmcnj.js";import{S as Xe}from"./smartphone-4kNKDbMA.js";import{u as te}from"./uploadService-CFdVKia9.js";import{L as ue}from"./loader-circle-C0zUPQir.js";import{S as Ze}from"./save-CDsOycSg.js";import{S as es}from"./square-pen-DCzYARLy.js";import{C as ss}from"./camera-B6KGjwpp.js";import{C as ts}from"./calendar-B7ilpZNA.js";import{K as is}from"./key-DIHXHtaA.js";import"./vendor-Dazix4UH.js";import"./dialog-DsaUnv7s.js";import"./alert-diF-BNS3.js";import"./userService-uIioZVG9.js";import"./triangle-alert-0uhB3Tk-.js";import"./eye-off-PYFqqvjM.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=Ue("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),as=({preferences:d,businessPreferences:k,onChange:M,onBusinessChange:V,onTestPushNotification:w,onTestEmail:y,showTestButtons:v=!1,supportEmail:z="support@buildhomemartsquares.com"})=>{const t=[{key:"email",icon:H,color:"text-blue-500",title:"Email Notifications",description:"Receive updates and alerts via email",isCore:!0},{key:"push",icon:$,color:"text-purple-500",title:"Push Notifications",description:"Browser notifications for instant updates",isCore:!0},{key:"newMessages",icon:he,color:"text-indigo-500",title:"New Message Alerts",description:"Get notified when you receive new messages from customers",requiresEmail:!0},{key:"newsUpdates",icon:Qe,color:"text-teal-500",title:"News & Updates",description:"Real estate market news and platform updates",requiresEmail:!0},{key:"marketing",icon:J,color:"text-green-500",title:"Marketing Communications",description:"Platform announcements and promotional content",requiresEmail:!0}],S=[{key:"emailNotifications",icon:H,color:"text-blue-600",title:"Business Email Notifications",description:"General business communications and updates",isCore:!0},{key:"smsNotifications",icon:Xe,color:"text-green-600",title:"SMS Notifications",description:"Urgent alerts and time-sensitive notifications via SMS",isCore:!0},{key:"leadAlerts",icon:ie,color:"text-orange-600",title:"Lead Alerts",description:"Instant notifications when you receive new property inquiries",requiresBusiness:!0},{key:"weeklyReports",icon:J,color:"text-purple-600",title:"Weekly Reports",description:"Weekly performance reports and analytics",requiresBusiness:!0},{key:"marketingEmails",icon:J,color:"text-pink-600",title:"Marketing Emails",description:"Business growth tips and marketing opportunities",requiresBusiness:!0}],U=l=>l.requiresEmail&&!d.email,T=l=>l.requiresBusiness&&!k.emailNotifications;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"General Notification Preferences"]})}),e.jsx(h,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:t.map((l,R)=>e.jsxs(W.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.icon,{className:`w-5 h-5 ${l.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:l.title}),l.isCore&&e.jsx(I,{variant:"outline",className:"text-xs",children:"Core"}),U(l)&&e.jsx(I,{variant:"secondary",className:"text-xs",children:"Requires Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),U(l)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(fe,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable email notifications first"})]})]})]}),e.jsx(ae,{checked:d[l.key],onCheckedChange:E=>M(l.key,E),disabled:U(l)})]}),R<t.length-1&&e.jsx(pe,{})]},l.key))})})]}),e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"}),"Business Notification Preferences"]})}),e.jsx(h,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:S.map((l,R)=>e.jsxs(W.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.icon,{className:`w-5 h-5 ${l.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:l.title}),l.isCore&&e.jsx(I,{variant:"outline",className:"text-xs",children:"Core"}),T(l)&&e.jsx(I,{variant:"secondary",className:"text-xs",children:"Requires Business Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),T(l)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(fe,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable business email notifications first"})]})]})]}),e.jsx(ae,{checked:k[l.key],onCheckedChange:E=>V(l.key,E),disabled:T(l)})]}),R<S.length-1&&e.jsx(pe,{})]},l.key))})})]}),v&&e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"Test Notifications"]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex gap-2",children:[w&&e.jsxs(C,{variant:"outline",size:"sm",onClick:w,disabled:!d.push,children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Test Push Notification"]}),y&&e.jsxs(C,{variant:"outline",size:"sm",onClick:y,disabled:!d.email,children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Test Email"]})]})})]})]})},Ms=()=>{const[d,k]=c.useState(!1),[M,V]=c.useState(!0),[w,y]=c.useState(!1),[v,z]=c.useState(null),[t,S]=c.useState(null),[U,T]=c.useState("profile"),[l,R]=c.useState(null),[E,re]=c.useState(!1),D=W.useRef(null),[ne,ge]=c.useState([]),[je,Y]=c.useState([]),[ve,K]=c.useState([]),[P,A]=c.useState({states:!1,districts:!1,cities:!1,pincode:!1}),[rs,q]=c.useState({country:"India",state:"",district:"",city:""}),[a,_]=c.useState({notifications:{email:!0,push:!0,newMessages:!0,newsUpdates:!0,marketing:!1},business:{emailNotifications:!0,smsNotifications:!1,leadAlerts:!0,marketingEmails:!1,weeklyReports:!0,autoResponseEnabled:!1,autoResponseMessage:"Thank you for your interest! I'll get back to you soon."}}),[Ne,oe]=c.useState(!1),B=c.useCallback(async(s,i,r)=>{_(o=>({...o,[s]:{...o[s],[i]:r}}));try{await Se(s,i,r)}catch(o){console.error("Failed to sync setting:",o)}},[v]);c.useEffect(()=>{le(),ye(),Re()},[]),c.useEffect(()=>{(async()=>{A(i=>({...i,states:!0}));try{await b.initialize();const i=b.getStates();ge(i),console.log(`Loaded ${i.length} states from loca.json`)}catch(i){console.error("Error initializing loca service:",i),m({title:"Error",description:"Failed to load location data. Please refresh the page.",variant:"destructive"})}finally{A(i=>({...i,states:!1}))}})()},[]),c.useEffect(()=>{if(!t?.profile?.address?.state){Y([]);return}A(s=>({...s,districts:!0}));try{const s=b.getDistricts(t.profile.address.state);if(Y(s),console.log(`Loaded ${s.length} districts for ${t.profile.address.state}`),t.profile.address.district){const i=t.profile.address.district;s.some(o=>o.toLowerCase()===i.toLowerCase()||o===i)?console.log(`District "${i}" found in list, keeping...`):(console.log(`District "${i}" not found in list, clearing...`),n("profile.address.district",""),n("profile.address.city",""))}}catch(s){console.error("Error loading districts:",s),m({title:"Error",description:"Failed to load districts. Please try again.",variant:"destructive"})}finally{A(s=>({...s,districts:!1}))}},[t?.profile?.address?.state]),c.useEffect(()=>{if(!t?.profile?.address?.state||!t?.profile?.address?.district){K([]);return}A(s=>({...s,cities:!0}));try{const s=b.getCities(t.profile.address.state,t.profile.address.district);K(s),console.log(`Loaded ${s.length} cities for ${t.profile.address.district}`),t.profile.address.city&&!s.includes(t.profile.address.city)&&n("profile.address.city",""),q(i=>({...i,city:""}))}catch(s){console.error("Error loading cities:",s),m({title:"Error",description:"Failed to load cities. Please try again.",variant:"destructive"})}finally{A(s=>({...s,cities:!1}))}},[t?.profile?.address?.state,t?.profile?.address?.district]),c.useEffect(()=>{t?.profile?.address?.state&&q(s=>({...s,state:t.profile.address.state}))},[t?.profile?.address?.state]),c.useEffect(()=>{t?.profile?.address?.district&&q(s=>({...s,district:t.profile.address.district}))},[t?.profile?.address?.district]),c.useEffect(()=>{t?.profile?.address?.city&&q(s=>({...s,city:t.profile.address.city}))},[t?.profile?.address?.city]),c.useEffect(()=>{if(!M){const s=setTimeout(()=>{be()},1500);return()=>clearTimeout(s)}},[a,M]);const le=async()=>{try{V(!0);const s=await L.getVendorProfile(),i={...s,profile:{...s.profile,preferences:s.profile.preferences||{language:"en",currency:"INR",notifications:{email:!0,push:!0,newMessages:!0,newsUpdates:!0,marketing:!0}}}};console.log("Loaded vendor profile:",i),console.log("Profile address:",i.profile?.address),z(i),S(i),localStorage.setItem("user",JSON.stringify(i))}catch(s){console.error("Failed to load vendor profile:",s),m({title:"Error",description:"Failed to load vendor profile. Please try again.",variant:"destructive"})}finally{V(!1)}},ye=async()=>{try{const s=localStorage.getItem("vendorSettings");if(s){const i=JSON.parse(s);_(r=>({...r,...i}))}try{const i=await L.getVendorProfile();if(i&&i.profile.vendorInfo?.vendorPreferences){const r=i.profile.vendorInfo.vendorPreferences,o={notifications:{email:i.profile?.preferences?.notifications?.email||a.notifications.email,push:i.profile?.preferences?.notifications?.push||a.notifications.push,newMessages:i.profile?.preferences?.notifications?.newMessages||a.notifications.newMessages,newsUpdates:i.profile?.preferences?.notifications?.newsUpdates||a.notifications.newsUpdates,marketing:i.profile?.preferences?.notifications?.marketing||a.notifications.marketing},business:{emailNotifications:r.emailNotifications||a.business.emailNotifications,smsNotifications:r.smsNotifications||a.business.smsNotifications,leadAlerts:r.leadAlerts||a.business.leadAlerts,marketingEmails:r.marketingEmails||a.business.marketingEmails,weeklyReports:r.weeklyReports||a.business.weeklyReports,autoResponseEnabled:r.autoResponseEnabled||a.business.autoResponseEnabled,autoResponseMessage:r.autoResponseMessage||a.business.autoResponseMessage}};_(o),localStorage.setItem("vendorSettings",JSON.stringify(o))}}catch{console.log("Using local settings - API unavailable")}}catch(s){console.error("Settings load failed:",s),m({title:"Settings Loaded",description:"Using saved settings.",variant:"default"})}},be=async()=>{try{y(!0);const s=we(a);s.isValid||m({title:"Validation Warning",description:s.message,variant:"default"});try{const i={profile:{preferences:{notifications:{email:a.notifications.email,push:a.notifications.push,newMessages:a.notifications.newMessages,newsUpdates:a.notifications.newsUpdates,marketing:a.notifications.marketing}},vendorInfo:{vendorPreferences:{emailNotifications:a.business.emailNotifications,smsNotifications:a.business.smsNotifications,leadAlerts:a.business.leadAlerts,marketingEmails:a.business.marketingEmails,weeklyReports:a.business.weeklyReports,autoResponseEnabled:a.business.autoResponseEnabled,autoResponseMessage:a.business.autoResponseMessage}}}};await L.updateVendorProfile(i),localStorage.setItem("vendorSettings",JSON.stringify(a)),R(new Date().toISOString()),m({title:"Settings Saved",description:"Your preferences have been updated"})}catch(i){console.error("Failed to save settings:",i),localStorage.setItem("vendorSettings",JSON.stringify(a)),m({title:"Settings Saved",description:"Your preferences have been saved",variant:"default"})}}catch(s){console.error("Settings save failed:",s),m({title:"Save Failed",description:s.message||"Unable to save vendor settings.",variant:"destructive"})}finally{y(!1)}},we=s=>s.business.emailNotifications&&!s.business.leadAlerts&&!s.notifications.newMessages?{isValid:!1,message:"Business email enabled but no notification types selected. Consider enabling lead alerts or new message notifications."}:s.business.autoResponseEnabled&&!s.business.autoResponseMessage.trim()?{isValid:!1,message:"Auto-response enabled but no message set. Please provide a response message."}:{isValid:!0,message:""},Se=async(s,i,r)=>{try{y(!0),await L.updateVendorPreferences(`${s}.${i}`,r);const o=i.replace(/([A-Z])/g," $1").toLowerCase(),f=typeof r=="boolean"?r?"enabled":"disabled":"updated";R(new Date().toISOString()),i==="autoResponseEnabled"&&r===!0&&await Ce(),m({title:"Setting Updated",description:`${o} ${f}`})}catch(o){console.error("Save failed:",o),m({title:"Setting Saved",description:"Your preference has been saved",variant:"default"})}finally{y(!1)}},Ce=async()=>{try{const s=a.business.autoResponseMessage;if(!s.trim()){m({title:"Auto-Response Setup",description:"Please set an auto-response message below",variant:"default"});return}console.log("Auto-response integration activated:",{message:s,timestamp:new Date().toISOString(),vendorId:v?.id}),m({title:"Auto-Response Active",description:"Auto-responses will be sent to new inquiries"})}catch(s){console.error("Auto-response integration test failed:",s)}},Ie=async(s,i)=>{try{if(!a.business.autoResponseEnabled||!a.business.autoResponseMessage.trim())return;const r=await me.sendAutoResponse(s,i,a.business.autoResponseMessage);r&&console.log("Auto-response sent:",{messageId:r._id,conversationId:s,recipientId:i,timestamp:new Date().toISOString()})}catch(r){console.error("Failed to send auto-response:",r)}},ke=async s=>{try{(s.type==="inquiry"||s.type==="lead"||s.type==="property_inquiry")&&(me.isAutoResponse(s)||await Ie(s.conversationId,s.sender._id))}catch(i){console.error("Failed to handle incoming message for auto-response:",i)}};W.useEffect(()=>(a.business.autoResponseEnabled?window.vendorAutoResponseHandler=ke:delete window.vendorAutoResponseHandler,()=>{delete window.vendorAutoResponseHandler}),[a.business.autoResponseEnabled,a.business.autoResponseMessage]);const Re=async()=>{try{b.isReady()||await b.initialize()}catch(s){console.error("Failed to initialize location service:",s)}},Ee=()=>{const s=t?.profile?.address;return s&&s.zipCode&&s.state&&s.district&&s.city&&!b.getLocationByPincode(s.zipCode).some(o=>o.state.toUpperCase()===s.state?.toUpperCase()&&o.district.toUpperCase()===s.district?.toUpperCase()&&o.city.toUpperCase()===s.city?.toUpperCase())?(console.warn("Location mismatch detected between pincode and selected location"),!1):!0},Pe=async()=>{if(t){Ee()||m({title:"Location Validation",description:"Please verify that your PIN code matches the selected location",variant:"default"});try{y(!0);const s={profile:{firstName:t.profile.firstName,lastName:t.profile.lastName,phone:t.profile.phone,bio:t.profile.bio,preferences:t.profile.preferences,address:{...t.profile.address,street:t.profile.address?.street||"",state:t.profile.address?.state||"",district:t.profile.address?.district||"",city:t.profile.address?.city||"",zipCode:t.profile.address?.zipCode||"",country:t.profile.address?.country||"India"},vendorInfo:t.profile.vendorInfo}};console.log("Saving vendor profile with address:",s.profile.address);const i=await L.updateVendorProfile(s);console.log("Received updated profile:",i),console.log("Updated profile address:",i.profile?.address),z(i),S(i),k(!1),m({title:"Success",description:"Profile updated successfully!"})}catch(s){console.error("Failed to update profile:",s)}finally{y(!1)}}},Ae=()=>{S(v),k(!1)},Fe=async s=>{const i=s.target.files?.[0];if(!i)return;const r=te.validateImageFile(i);if(!r.valid){m({title:"Invalid File",description:r.error,variant:"destructive"});return}try{re(!0);const o=await te.compressImage(i),f=await te.uploadAvatar(o);n("profile.avatar",f);const u={profile:{...t?.profile,avatar:f}},F=await L.updateVendorProfile(u);z(F),S(F),m({title:"Success",description:"Profile picture updated successfully!"})}catch(o){console.error("Avatar upload error:",o),m({title:"Upload Failed",description:"Failed to upload profile picture. Please try again.",variant:"destructive"})}finally{re(!1),D.current&&(D.current.value="")}},n=(s,i)=>{if(!t)return;const r=s.split("."),o={...t};let f=o;for(let u=0;u<r.length-1;u++)f[r[u]]||(f[r[u]]={}),f=f[r[u]];f[r[r.length-1]]=i,console.log(`Updated ${s} to:`,i),console.log("Full address after update:",o.profile?.address),S(o)};if(M)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ue,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading vendor profile..."})]})});if(!v||!t)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:"Failed to load vendor profile"}),e.jsx(C,{onClick:le,children:"Retry"})]})});`${t.profile.firstName}${t.profile.lastName}`;const Le=t.profile.vendorInfo?.memberSince?new Date(t.profile.vendorInfo.memberSince).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Unknown";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Te,{className:"w-8 h-8 text-primary"}),"My Profile"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile information and preferences."})]}),e.jsx("div",{className:"flex gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsxs(C,{variant:"outline",onClick:Ae,disabled:w,children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(C,{onClick:Pe,disabled:w,children:[w?e.jsx(ue,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Save Profile"]})]}):e.jsxs(C,{onClick:()=>k(!0),children:[e.jsx(es,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(ze,{className:"h-24 w-24",children:[e.jsx(De,{src:t.profile.avatar||""}),e.jsxs(qe,{className:"text-lg",children:[t.profile.firstName.charAt(0),t.profile.lastName.charAt(0)]})]}),e.jsx("input",{ref:D,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:Fe,className:"hidden"}),e.jsx(C,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0",onClick:()=>D.current?.click(),disabled:E,children:E?e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx(ss,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"firstName",children:"First Name"}),d?e.jsx(N,{id:"firstName",value:t.profile.firstName,onChange:s=>n("profile.firstName",s.target.value)}):e.jsx("p",{className:"text-lg font-semibold",children:t.profile.firstName})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"lastName",children:"Last Name"}),d?e.jsx(N,{id:"lastName",value:t.profile.lastName,onChange:s=>n("profile.lastName",s.target.value)}):e.jsx("p",{className:"text-lg font-semibold",children:t.profile.lastName})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),t.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"w-4 h-4 mr-1"}),d?e.jsx(N,{value:t.profile.phone,onChange:s=>n("profile.phone",s.target.value),className:"h-6 text-sm w-32"}):t.profile.phone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ts,{className:"w-4 h-4 mr-1"}),"Member since ",Le]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($e,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"font-medium",children:(t.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",t.profile.vendorInfo?.rating?.count||0," reviews)"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm",children:[t.profile.vendorInfo?.responseTime||"Not calculated"," avg response"]})})]})]})]})})}),e.jsxs(Oe,{value:U,onValueChange:T,className:"space-y-6",children:[e.jsxs(Ge,{className:"grid w-full grid-cols-4",children:[e.jsx(O,{value:"profile",children:"Personal Info"}),e.jsx(O,{value:"company",children:"Company Details"}),e.jsx(O,{value:"specializations",children:"Specializations"}),e.jsx(O,{value:"notifications",children:"Settings"})]}),e.jsx(G,{value:"profile",className:"space-y-6",children:e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(ie,{className:"w-5 h-5 mr-2"}),"Personal Information"]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"bio",children:"Bio"}),d?e.jsx(de,{id:"bio",value:t.profile.bio||"",onChange:s=>n("profile.bio",s.target.value),placeholder:"Tell us about yourself and your experience...",rows:4}):e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.profile.bio||"No bio provided"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"street",children:"Street Address"}),d?e.jsx(N,{id:"street",value:t.profile.address?.street||"",onChange:s=>n("profile.address.street",s.target.value),placeholder:"Enter street address..."}):e.jsx("p",{className:"text-sm",children:t.profile.address?.street||"Not provided"})]}),d?e.jsxs("div",{children:[e.jsx(p,{className:"text-sm font-medium",children:"Location Details"}),e.jsxs("div",{className:"mt-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"state",children:"State"}),e.jsxs(Q,{value:t.profile.address?.state||"",onValueChange:s=>{n("profile.address.state",s),n("profile.address.district",""),n("profile.address.city",""),n("profile.address.zipCode","")},disabled:P.states,children:[e.jsx(X,{children:e.jsx(Z,{placeholder:P.states?"Loading states...":"Select state"})}),e.jsx(ee,{children:ne.map(s=>e.jsx(se,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"district",children:"District"}),e.jsxs(Q,{value:t.profile.address?.district||"",onValueChange:s=>{n("profile.address.district",s),n("profile.address.city",""),n("profile.address.zipCode","")},disabled:!t.profile.address?.state||P.districts,children:[e.jsx(X,{children:e.jsx(Z,{placeholder:t.profile.address?.state?P.districts?"Loading districts...":"Select district":"Select state first"})}),e.jsx(ee,{children:je.map(s=>e.jsx(se,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"city",children:"City"}),e.jsxs(Q,{value:t.profile.address?.city||"",onValueChange:s=>{n("profile.address.city",s),n("profile.address.zipCode","")},disabled:!t.profile.address?.district||P.cities,children:[e.jsx(X,{children:e.jsx(Z,{placeholder:t.profile.address?.district?P.cities?"Loading cities...":"Select city":"Select district first"})}),e.jsx(ee,{children:ve.map(s=>e.jsx(se,{value:s,children:s},s))})]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{children:"State"}),e.jsx("p",{className:"text-sm",children:t.profile.address?.state||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"District"}),e.jsx("p",{className:"text-sm",children:t.profile.address?.district||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"City"}),e.jsx("p",{className:"text-sm",children:t.profile.address?.city||"Not provided"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"zipCode",children:"PIN Code"}),d?e.jsx(Ke,{value:t.profile.address?.zipCode||"",onChange:(s,i)=>{if(n("profile.address.zipCode",s),i&&(console.log("Auto-filling location from pincode:",i),i.state)){const r=i.state.toUpperCase();ne.includes(r)&&(n("profile.address.state",r),n("profile.address.stateCode",r),setTimeout(()=>{const o=b.getDistricts(r);if(Y(o),i.district){const f=o.find(u=>u.toUpperCase()===i.district.toUpperCase());f&&(n("profile.address.district",f),n("profile.address.districtCode",f),setTimeout(()=>{const u=b.getCities(r,f);if(K(u),i.city){const F=u.find(Me=>Me.toUpperCase()===i.city.toUpperCase());F&&(n("profile.address.city",F),n("profile.address.cityCode",F))}},100))}},100))}},state:t.profile.address?.state,district:t.profile.address?.district,city:t.profile.address?.city,placeholder:t.profile.address?.city?`Enter PIN code for ${t.profile.address.city}...`:"Enter PIN code to auto-fill location...",className:"w-full"}):e.jsx("p",{className:"text-sm",children:t.profile.address?.zipCode||"Not provided"}),d&&e.jsxs("div",{className:"space-y-1 mt-1",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"ðŸ’¡ Select your location first or enter PIN code to auto-fill location details"}),t.profile.address?.zipCode&&t.profile.address?.city&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(ce,{className:"w-3 h-3"}),"Location validated with PIN code"]})]})]})]})]})]})}),e.jsx(G,{value:"company",className:"space-y-6",children:e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(He,{className:"w-5 h-5 mr-2"}),"Company Information"]})}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"companyName",children:"Company Name"}),d?e.jsx(N,{id:"companyName",value:t.profile.vendorInfo?.companyName||"",onChange:s=>n("profile.vendorInfo.companyName",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.companyName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"experience",children:"Experience (Years)"}),d?e.jsx(N,{id:"experience",type:"number",value:t.profile.vendorInfo?.experience||0,onChange:s=>n("profile.vendorInfo.experience",parseInt(s.target.value)||0)}):e.jsxs("p",{className:"text-sm",children:[t.profile.vendorInfo?.experience||0," years"]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"website",children:"Website"}),d?e.jsx(N,{id:"website",value:t.profile.vendorInfo?.website||"",onChange:s=>n("profile.vendorInfo.website",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.website||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"licenseNumber",children:"License Number"}),d?e.jsx(N,{id:"licenseNumber",value:t.profile.vendorInfo?.licenseNumber||"",onChange:s=>n("profile.vendorInfo.licenseNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.licenseNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"gstNumber",children:"GST Number"}),d?e.jsx(N,{id:"gstNumber",value:t.profile.vendorInfo?.gstNumber||"",onChange:s=>n("profile.vendorInfo.gstNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.gstNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"panNumber",children:"PAN Number"}),d?e.jsx(N,{id:"panNumber",value:t.profile.vendorInfo?.panNumber||"",onChange:s=>n("profile.vendorInfo.panNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.panNumber||"Not provided"})]})]})})]})}),e.jsxs(G,{value:"specializations",className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(Je,{className:"w-5 h-5 mr-2"}),"Specializations"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(t.profile.vendorInfo?.specializations||[]).length>0?t.profile.vendorInfo.specializations.map((s,i)=>e.jsx(I,{variant:"secondary",className:"flex items-center",children:s},i)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No specializations added yet"})})})})]}),e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(We,{className:"w-5 h-5 mr-2"}),"Service Areas"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(t.profile.vendorInfo?.serviceAreas||[]).length>0?t.profile.vendorInfo.serviceAreas.map((s,i)=>e.jsx(I,{variant:"outline",className:"flex items-center",children:s},i)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No service areas added yet"})})})})]}),e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(xe,{className:"w-5 h-5 mr-2"}),"Certifications"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:(t.profile.vendorInfo?.certifications||[]).length>0?t.profile.vendorInfo.certifications.map((s,i)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(xe,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Issued by ",s.issuedBy," â€¢ ",s.date]})]})]}),s.verified&&e.jsxs(I,{className:"bg-green-100 text-green-800",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),"Verified"]})]},i)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No certifications added yet"})})})]})]}),e.jsxs(G,{value:"notifications",className:"space-y-6",children:[e.jsx(as,{preferences:a.notifications,businessPreferences:{emailNotifications:a.business.emailNotifications,smsNotifications:a.business.smsNotifications,leadAlerts:a.business.leadAlerts,marketingEmails:a.business.marketingEmails,weeklyReports:a.business.weeklyReports},onChange:(s,i)=>B("notifications",s,i),onBusinessChange:(s,i)=>B("business",s,i),showTestButtons:!0,onTestPushNotification:()=>{m({title:"Test Push Notification",description:"Push notification test sent successfully!"})},onTestEmail:()=>{m({title:"Test Email",description:"Test email sent successfully!"})}}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Auto-Response Settings"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure automatic replies to new customer inquiries."})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"autoResponse",children:"Enable Auto-Response"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic replies to new inquiries"})]}),e.jsx(ae,{id:"autoResponse",checked:a.business.autoResponseEnabled,onCheckedChange:async s=>{await B("business","autoResponseEnabled",s)},disabled:w})]}),a.business.autoResponseEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"autoResponseMessage",children:"Auto-Response Message"}),e.jsx(de,{id:"autoResponseMessage",value:a.business.autoResponseMessage,onChange:async s=>{const i=s.target.value;await B("business","autoResponseMessage",i)},placeholder:"Enter your automatic response message...",rows:3,disabled:w}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This message will be automatically sent to new inquiries"})]})]})]}),e.jsxs(x,{className:"mb-6",children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"Security Settings"]})}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Change Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your account password with secure OTP verification"})]}),e.jsxs(C,{variant:"outline",onClick:()=>oe(!0),className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),"Change Password"]})]})})]}),e.jsx(_e,{open:Ne,onOpenChange:oe})]})]}),v.statistics&&e.jsxs(x,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(J,{className:"w-5 h-5 mr-2"}),"Performance Statistics"]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.statistics.totalProperties}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Listed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.statistics.totalValue||"???0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(t.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:v.statistics.totalMessages}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Messages"})]})]})})]})]})};export{Ms as default};
