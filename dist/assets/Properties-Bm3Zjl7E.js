import{j as e}from"./ui-BNZSgpjP.js";import{d as s,r as a}from"./router-D8v2YSKU.js";import{D as r,z as t,aK as i,t as l,a2 as n,G as c,Z as o,f as d,a9 as m,a as p,b as u,c as h,e as x,d as j,L as v,I as f,as as g,au as y,av as b,aw as N,ax as w,ay as C,az as P,aA as k,a4 as S,a5 as E,a6 as R,a7 as F,a8 as A,T,ae as O,a3 as _,B as L,aL as $,aD as V,aE as q,aF as D,aG as I,aH as M,aI as Q,E as U,ad as z,Q as H}from"./index-CWpkTP43.js";import{u as B}from"./usePagination-1Z845fFX.js";import{P as G,a as J,b as W,c as K,d as Z,e as X}from"./pagination-DFMQvqqK.js";import{D as Y}from"./DataTable-D4C21Mi8.js";import{u as ee,S as se}from"./usePermissions-BomnIRno.js";import{C as ae}from"./checkbox-D5xGP9Cy.js";import{V as re}from"./ViewPropertyDialog-D28M9zWm.js";import{E as te}from"./ellipsis-BadItLm2.js";import{S as ie}from"./square-pen-aGUA79bW.js";import"./vendor-BxThA0WO.js";import"./table-myWg3CMl.js";import"./propertyUtils-41DuwCMc.js";import"./external-link-DE0JjkoQ.js";import"./indian-rupee-Ds37LzBo.js";const le=r("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const ne=new class{async makeRequest(e,s={}){const a=t.getToken(),r={headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...s.headers},...s},l=await fetch(`https://app.buildhomemartsquares.com/api/admin${e}`,r);if(i(l),!l.ok){const e=await l.json().catch(()=>({}));throw new Error(e.message||`HTTP error! status: ${l.status}`)}return l.json()}async getProperties(e={}){try{const s=new URLSearchParams;Object.entries(e).forEach(([e,a])=>{null!=a&&""!==a&&s.append(e,String(a))});const a="/properties"+(s.toString()?`?${s.toString()}`:"");return await this.makeRequest(a)}catch(s){const e=s instanceof Error?s.message:"Failed to fetch properties";throw l({title:"Error",description:e,variant:"destructive"}),s}}async approveProperty(e){try{await this.makeRequest(`/properties/${e}/approve`,{method:"POST"}),l({title:"Success",description:"Property approved successfully!"})}catch(s){const e=s instanceof Error?s.message:"Failed to approve property";throw l({title:"Error",description:e,variant:"destructive"}),s}}async rejectProperty(e,s){try{await this.makeRequest(`/properties/${e}/reject`,{method:"POST",body:JSON.stringify({reason:s})}),l({title:"Success",description:"Property rejected successfully!"})}catch(a){const e=a instanceof Error?a.message:"Failed to reject property";throw l({title:"Error",description:e,variant:"destructive"}),a}}async deleteProperty(e){try{await this.makeRequest(`/properties/${e}`,{method:"DELETE"}),l({title:"Success",description:"Property deleted successfully!"})}catch(s){const e=s instanceof Error?s.message:"Failed to delete property";throw l({title:"Error",description:e,variant:"destructive"}),s}}async togglePropertyFeatured(e,s){try{await this.makeRequest(`/properties/${e}/featured`,{method:"PATCH",body:JSON.stringify({featured:s})}),l({title:"Success",description:`Property ${s?"marked as featured":"removed from featured"}!`})}catch(a){const e=a.response?.data||a,s=e.message||a.message||"Failed to update property";throw e.upgradeRequired||e.limitReached?l({title:e.limitReached?"Featured Limit Reached":"Upgrade Required",description:`${s} Visit the Subscription Plans page to upgrade.`,variant:"destructive"}):l({title:"Error",description:s,variant:"destructive"}),a}}getStatusOptions(){return[{label:"Active",value:"active"},{label:"Available",value:"available"},{label:"Pending",value:"pending"},{label:"Sold",value:"sold"},{label:"Rented",value:"rented"},{label:"Rejected",value:"rejected"}]}getStatusColor(e){switch(e.toLowerCase()){case"active":case"available":return"bg-green-500";case"pending":return"bg-yellow-500";case"sold":return"bg-blue-500";case"rented":return"bg-purple-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}getStatusText(e){return{available:"Available",pending:"Pending Review",sold:"Sold",rented:"Rented",rejected:"Rejected"}[e.toLowerCase()]||e.charAt(0).toUpperCase()+e.slice(1)}getPropertyTypeOptions(){return[{label:"Apartment",value:"apartment"},{label:"House",value:"house"},{label:"Villa",value:"villa"},{label:"Plot",value:"plot"},{label:"Commercial",value:"commercial"},{label:"Office",value:"office"}]}},ce=()=>{const r=s(),{toast:i}=n(),{hasPermission:l}=ee(),[ce,oe]=a.useState(""),[de,me]=a.useState("all"),[pe,ue]=a.useState("all"),[he,xe]=a.useState([0,5e7]),[je,ve]=a.useState([]),[fe,ge]=a.useState(!0),[ye,be]=a.useState(!1),[Ne,we]=a.useState(!1),[Ce,Pe]=a.useState(!1),[ke,Se]=a.useState(!1),[Ee,Re]=a.useState(null),[Fe,Ae]=a.useState(""),[Te,Oe]=a.useState(null),[_e,Le]=a.useState([]),[$e,Ve]=a.useState(!0),[qe,De]=a.useState(""),[Ie,Me]=a.useState({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),[Qe,Ue]=a.useState("");a.useEffect(()=>{(async()=>{const e=await t.getCurrentUser(),s=e?.data?.user||e;Oe(s),s?.profile&&De(`${s.profile.firstName||""} ${s.profile.lastName||""}`.trim()),ze()})();(async()=>{try{Ve(!0);const e=(await _.getAllPropertyTypes(!1)).sort((e,s)=>(e.displayOrder||0)-(s.displayOrder||0)).map(e=>({value:e.value,label:e.name}));Le(e)}catch(e){i({title:"Warning",description:"Failed to load property types from configuration. Using defaults.",variant:"default"}),Le([{value:"house",label:"House"},{value:"apartment",label:"Apartment"},{value:"land",label:"Land"},{value:"commercial",label:"Commercial"}])}finally{Ve(!1)}})()},[]);const ze=async()=>{try{ge(!0);const e=await ne.getProperties({limit:1e3});e.success&&ve(e.data.properties)}catch(e){i({title:"Error",description:"Failed to load properties",variant:"destructive"})}finally{ge(!1)}},He=a.useMemo(()=>je.filter(e=>{const s=e.title.toLowerCase().includes(ce.toLowerCase())||e.address.city.toLowerCase().includes(ce.toLowerCase())||e.address.state.toLowerCase().includes(ce.toLowerCase()),a="all"===de||e.type===de,r="all"===pe||e.status===pe,t=e.price>=he[0]&&e.price<=he[1];return s&&a&&r&&t}),[je,ce,de,pe,he]),{paginatedItems:Be,currentPage:Ge,totalPages:Je,goToPage:We,nextPage:Ke,previousPage:Ze}=B(He,10),Xe=()=>{Me({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),Ue(""),Te?.profile&&De(`${Te.profile.firstName||""} ${Te.profile.lastName||""}`.trim())},Ye=[{key:"sNo",label:"S.no",render:s=>e.jsx("span",{className:"font-medium",children:s.sNo})},{key:"title",label:"Property Title",render:s=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.address.district?`${s.address.city}, ${s.address.district}, ${s.address.state}`:`${s.address.city}, ${s.address.state}`})]})},{key:"type",label:"Type",render:s=>e.jsx(L,{variant:"secondary",className:"capitalize",children:s.type?s.type.replace("_"," "):"property"})},{key:"listingType",label:"Listing",render:s=>e.jsx(L,{variant:"sale"===s.listingType?"default":"outline",children:"sale"===s.listingType?"For Sale":"For Rent"})},{key:"price",label:"Price",render:s=>e.jsx("span",{className:"font-semibold",children:$.formatPrice(s.price,s.listingType)})},{key:"area",label:"Area",render:s=>e.jsx("span",{children:$.formatArea(s.area)})},{key:"status",label:"Status",render:s=>e.jsx(L,{variant:{available:"default",pending:"outline",rejected:"destructive",sold:"secondary",rented:"secondary"}[s.status]||"secondary",children:s.status})},{key:"featured",label:"Featured",render:s=>e.jsx(L,{variant:s.featured?"default":"secondary",children:s.featured?"Featured":"Regular"})},{key:"actions",label:"Actions",render:s=>{const a=(e=>!!e.owner&&(!(!Te||e.owner._id!==Te.id)||!e.vendor&&"available"===e.status))(s),t="pending"===s.status;return e.jsxs(V,{children:[e.jsx(q,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(te,{className:"w-4 h-4"})})}),e.jsxs(D,{align:"end",children:[e.jsx(I,{children:"Actions"}),e.jsx(M,{}),l(o.PROPERTIES_VIEW)&&e.jsxs(Q,{onClick:()=>(e=>{Re(e),Se(!0)})(s),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"View Details"]}),a&&l(o.PROPERTIES_EDIT)&&e.jsxs(Q,{onClick:()=>r(`/admin/properties/edit/${s._id}`),children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Edit Property"]}),!a&&t&&l(o.PROPERTIES_APPROVE)&&e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsxs(Q,{onClick:()=>(e=>{Re(e),Xe(),Pe(!0)})(s),className:"text-green-600",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Approve & Publish"]}),e.jsxs(Q,{onClick:()=>(e=>{Re(e),Xe(),we(!0)})(s),className:"text-red-600",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),"available"===s.status&&l(o.PROPERTIES_EDIT)&&e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsx(Q,{onClick:()=>(async e=>{try{await ne.togglePropertyFeatured(e._id,!e.featured),ve(je.map(s=>s._id===e._id?{...s,featured:!s.featured}:s)),i({title:"Success",description:`Property ${e.featured?"removed from":"marked as"} featured`})}catch(s){i({title:"Error",description:"Failed to update featured status",variant:"destructive"})}})(s),children:s.featured?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Remove Featured"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Mark Featured"]})})]}),l(o.PROPERTIES_DELETE)&&e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsxs(Q,{onClick:()=>(e=>{Re(e),be(!0)})(s),className:"text-red-600",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}}];return fe?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(c,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"dashboard-header-responsive",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"dashboard-title-responsive",children:"Property Management"}),e.jsx("p",{className:"text-muted-foreground mt-1 md:mt-2 text-sm md:text-base",children:"Manage property listings and details"})]}),l(o.PROPERTIES_CREATE)&&e.jsxs(d,{onClick:()=>r("/admin/properties/add"),className:"w-full sm:w-auto",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Property"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs(p,{className:"stats-card-responsive",children:[e.jsx(u,{className:"pb-2",children:e.jsx(h,{className:"stats-label-responsive",children:"Total Properties"})}),e.jsx(x,{children:e.jsx("div",{className:"stats-value-responsive",children:je.length})})]}),e.jsxs(p,{className:"stats-card-responsive",children:[e.jsx(u,{className:"pb-2",children:e.jsx(h,{className:"stats-label-responsive",children:"Pending Approval"})}),e.jsx(x,{children:e.jsx("div",{className:"stats-value-responsive text-yellow-600",children:je.filter(e=>"pending"===e.status).length})})]}),e.jsxs(p,{className:"stats-card-responsive",children:[e.jsx(u,{className:"pb-2",children:e.jsx(h,{className:"stats-label-responsive",children:"Available Properties"})}),e.jsx(x,{children:e.jsx("div",{className:"stats-value-responsive text-green-600",children:je.filter(e=>"available"===e.status).length})})]}),e.jsxs(p,{className:"stats-card-responsive",children:[e.jsx(u,{className:"pb-2",children:e.jsx(h,{className:"stats-label-responsive",children:"Featured"})}),e.jsx(x,{children:e.jsx("div",{className:"stats-value-responsive text-blue-600",children:je.filter(e=>e.featured).length})})]})]}),e.jsxs(p,{children:[e.jsxs(u,{children:[e.jsx(h,{className:"text-lg md:text-xl",children:"Property Approvals"}),e.jsxs(j,{className:"text-sm md:text-base",children:[He.length," propert",1!==He.length?"ies":"y"," found"]})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 items-end mb-6",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsx(se,{searchTerm:ce,onSearchChange:oe})}),e.jsxs("div",{className:"flex gap-4 flex-wrap xl:flex-nowrap w-full xl:w-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-28 sm:w-32",children:[e.jsx(v,{className:"text-xs text-muted-foreground mb-1.5 block",children:"Min Price"}),e.jsx(f,{type:"number",value:he[0],onChange:e=>xe([Number(e.target.value),he[1]]),min:0,max:5e7,className:"h-10",placeholder:"Min"})]}),e.jsxs("div",{className:"w-28 sm:w-32",children:[e.jsx(v,{className:"text-xs text-muted-foreground mb-1.5 block",children:"Max Price"}),e.jsx(f,{type:"number",value:he[1],onChange:e=>xe([he[0],Number(e.target.value)]),min:0,max:5e7,className:"h-10",placeholder:"Max"})]})]}),e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(v,{htmlFor:"type-filter",className:"text-xs text-muted-foreground mb-1.5 block",children:"Property Type"}),e.jsxs("select",{id:"type-filter",value:de,onChange:e=>me(e.target.value),className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:$e,children:[e.jsx("option",{value:"all",children:$e?"Loading...":"All Types"}),_e.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(v,{htmlFor:"status-filter",className:"text-xs text-muted-foreground mb-1.5 block",children:"Property Status"}),e.jsxs("select",{id:"status-filter",value:pe,onChange:e=>ue(e.target.value),className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"sold",children:"Sold"}),e.jsx("option",{value:"rented",children:"Rented"}),e.jsx("option",{value:"leased",children:"Leased"})]})]})]})]}),e.jsx("div",{className:"table-responsive-wrapper",children:e.jsx(Y,{columns:Ye,data:Be.map((e,s)=>({...e,id:e._id,sNo:10*(Ge-1)+s+1})),hideDefaultActions:!0})}),Je>1&&e.jsx("div",{className:"mt-4 md:mt-6",children:e.jsx(G,{children:e.jsxs(J,{className:"pagination-responsive",children:[e.jsx(W,{children:e.jsx(K,{onClick:Ze,className:"pagination-button-responsive "+(1===Ge?"pointer-events-none opacity-50":"cursor-pointer")})}),Array.from({length:Je},(e,s)=>s+1).map(s=>e.jsx(W,{children:e.jsx(Z,{onClick:()=>We(s),isActive:Ge===s,className:"pagination-button-responsive cursor-pointer",children:s})},s)),e.jsx(W,{children:e.jsx(X,{onClick:Ke,className:"pagination-button-responsive "+(Ge===Je?"pointer-events-none opacity-50":"cursor-pointer")})})]})})})]})]}),e.jsx(g,{open:ye,onOpenChange:be,children:e.jsxs(y,{children:[e.jsxs(b,{children:[e.jsx(N,{children:"Delete Property"}),e.jsxs(w,{children:['Are you sure you want to delete "',Ee?.title,'"? This action cannot be undone.']})]}),e.jsxs(C,{children:[e.jsx(P,{children:"Cancel"}),e.jsx(k,{onClick:async()=>{if(Ee)try{await ne.deleteProperty(Ee._id),ve(je.filter(e=>e._id!==Ee._id)),be(!1),Re(null),i({title:"Success",description:"Property deleted successfully"})}catch(e){i({title:"Error",description:"Failed to delete property",variant:"destructive"})}},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(S,{open:Ce,onOpenChange:Pe,children:e.jsxs(E,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(R,{children:[e.jsx(F,{children:"Approve Property"}),e.jsxs(A,{children:['Complete the verification checklist and provide your approval for "',Ee?.title,'".']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"approver-name",children:"Approver Name *"}),e.jsx(f,{id:"approver-name",placeholder:"Enter your full name",value:qe,readOnly:!0,className:"mt-1 bg-muted cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{className:"text-base font-semibold",children:"Verification Checklist"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"documents",checked:Ie.documentsVerified,onCheckedChange:e=>Me({...Ie,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents",className:"text-sm font-medium cursor-pointer",children:"All required documents are verified"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"location",checked:Ie.locationVerified,onCheckedChange:e=>Me({...Ie,locationVerified:e})}),e.jsx("label",{htmlFor:"location",className:"text-sm font-medium cursor-pointer",children:"Property location is verified and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"price",checked:Ie.priceReasonable,onCheckedChange:e=>Me({...Ie,priceReasonable:e})}),e.jsx("label",{htmlFor:"price",className:"text-sm font-medium cursor-pointer",children:"Price is reasonable and competitive"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"images",checked:Ie.imagesQuality,onCheckedChange:e=>Me({...Ie,imagesQuality:e})}),e.jsx("label",{htmlFor:"images",className:"text-sm font-medium cursor-pointer",children:"Images are of good quality and relevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"description",checked:Ie.descriptionComplete,onCheckedChange:e=>Me({...Ie,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description",className:"text-sm font-medium cursor-pointer",children:"Description is complete and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"ownership",checked:Ie.ownershipConfirmed,onCheckedChange:e=>Me({...Ie,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership",className:"text-sm font-medium cursor-pointer",children:"Ownership is confirmed and legitimate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"handwritten-comments",children:"Additional Comments"}),e.jsx(T,{id:"handwritten-comments",placeholder:"Type your handwritten comments or notes here...",value:Qe,onChange:e=>Ue(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional observations, notes, or special remarks about this property"})]})]}),e.jsxs(O,{children:[e.jsx(d,{variant:"outline",onClick:()=>Pe(!1),children:"Cancel"}),e.jsx(d,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{if(Ee&&qe.trim())try{await ne.approveProperty(Ee._id),ve(je.map(e=>e._id===Ee._id?{...e,status:"available",verified:!0}:e)),Pe(!1),Re(null),Xe(),i({title:"Success",description:"Property approved and listed successfully!"})}catch(e){i({title:"Error",description:"Failed to approve property",variant:"destructive"})}else i({title:"Error",description:"Approver name is required",variant:"destructive"})},disabled:!qe.trim(),children:"Approve & Publish Property"})]})]})}),e.jsx(S,{open:Ne,onOpenChange:we,children:e.jsxs(E,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(R,{children:[e.jsx(F,{children:"Reject Property"}),e.jsxs(A,{children:['Complete the form and provide a reason for rejecting "',Ee?.title,'". The vendor will be notified.']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"approver-name-reject",children:"Approver Name *"}),e.jsx(f,{id:"approver-name-reject",placeholder:"Enter your full name",value:qe,readOnly:!0,className:"mt-1 bg-muted cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{className:"text-base font-semibold",children:"Issues Found (Check applicable items)"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"documents-reject",checked:Ie.documentsVerified,onCheckedChange:e=>Me({...Ie,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents-reject",className:"text-sm font-medium cursor-pointer",children:"Documents are incomplete or invalid"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"location-reject",checked:Ie.locationVerified,onCheckedChange:e=>Me({...Ie,locationVerified:e})}),e.jsx("label",{htmlFor:"location-reject",className:"text-sm font-medium cursor-pointer",children:"Property location is incorrect or unclear"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"price-reject",checked:Ie.priceReasonable,onCheckedChange:e=>Me({...Ie,priceReasonable:e})}),e.jsx("label",{htmlFor:"price-reject",className:"text-sm font-medium cursor-pointer",children:"Price is unreasonable or suspicious"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"images-reject",checked:Ie.imagesQuality,onCheckedChange:e=>Me({...Ie,imagesQuality:e})}),e.jsx("label",{htmlFor:"images-reject",className:"text-sm font-medium cursor-pointer",children:"Images are poor quality or irrelevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"description-reject",checked:Ie.descriptionComplete,onCheckedChange:e=>Me({...Ie,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description-reject",className:"text-sm font-medium cursor-pointer",children:"Description is incomplete or misleading"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"ownership-reject",checked:Ie.ownershipConfirmed,onCheckedChange:e=>Me({...Ie,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership-reject",className:"text-sm font-medium cursor-pointer",children:"Ownership cannot be confirmed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"rejection-reason",children:"Rejection Reason *"}),e.jsx(T,{id:"rejection-reason",placeholder:"Enter the detailed reason for rejection...",value:Fe,onChange:e=>Ae(e.target.value),className:"mt-1",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"handwritten-comments-reject",children:"Additional Comments"}),e.jsx(T,{id:"handwritten-comments-reject",placeholder:"Type your handwritten comments or notes here...",value:Qe,onChange:e=>Ue(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional feedback or suggestions for the vendor"})]})]}),e.jsxs(O,{children:[e.jsx(d,{variant:"outline",onClick:()=>we(!1),children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:async()=>{if(Ee&&Fe.trim()&&qe.trim())try{await ne.rejectProperty(Ee._id,Fe),ve(je.map(e=>e._id===Ee._id?{...e,status:"rejected"}:e)),we(!1),Re(null),Ae(""),Xe(),i({title:"Property Rejected",description:"Property has been rejected and vendor has been notified."})}catch(e){i({title:"Error",description:"Failed to reject property",variant:"destructive"})}else i({title:"Error",description:"Approver name and rejection reason are required",variant:"destructive"})},disabled:!Fe.trim()||!qe.trim(),children:"Reject Property"})]})]})}),e.jsx(re,{property:Ee,open:ke,onOpenChange:Se})]})};export{ce as default};
