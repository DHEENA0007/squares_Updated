import{j as e}from"./ui-DYmpZ3pJ.js";import{d as f,u as j,r as n}from"./router-2SVJvIbS.js";import{u as v,N,I as m,f as y,F as w,t as L}from"./index-BbgqWuYN.js";import{L as u}from"./label-DRahLfWI.js";import"./vendor-Dazix4UH.js";const B=()=>{const s=f(),h=j(),{login:g}=v(),[o,x]=n.useState(""),[t,p]=n.useState(""),[i,d]=n.useState(!1),l=h.state?.from?.pathname||null,b=async a=>{if(a.preventDefault(),!o||!t){L({title:"Validation Error",description:"Please enter both email and password",variant:"destructive"});return}d(!0);try{if(await g(o,t))if(l)s(l,{replace:!0});else{const r=JSON.parse(localStorage.getItem("user")||"{}");console.log("Login: User role detected:",r.role),r.role==="superadmin"?(console.log("Login: Redirecting superadmin to admin dashboard"),s("/admin/dashboard")):r.role==="subadmin"?(console.log("Login: Redirecting subadmin to admin dashboard"),s("/admin/dashboard")):r.role==="admin"?(console.log("Login: Redirecting admin to admin dashboard"),s("/admin/dashboard")):r.role==="agent"?(console.log("Login: Redirecting vendor to vendor dashboard"),s("/vendor/dashboard")):(console.log("Login: Redirecting customer to customer dashboard"),s("/customer/dashboard"))}}catch(c){console.error("Login error:",c)}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(N,{}),e.jsx("main",{className:"container mx-auto px-4 py-12",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-center text-muted-foreground mb-8",children:"Sign in to your BuildHomeMart account"}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",type:"email",placeholder:"you@example.com",required:!0,value:o,onChange:a=>x(a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"password",children:"Password"}),e.jsx("a",{href:"#",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),e.jsx(m,{id:"password",type:"password",placeholder:"Enter your password",required:!0,value:t,onChange:a=>p(a.target.value)})]}),e.jsx(y,{type:"submit",className:"w-full",disabled:i,children:i?"Signing In...":"Sign In"})]}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",e.jsx("a",{href:"/signup",className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})}),e.jsx(w,{})]})};export{B as default};
