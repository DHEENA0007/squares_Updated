import{j as e}from"./ui-CEFKCYQo.js";import{h as s,r}from"./router-Bi51YGN-.js";import{P as t,a}from"./PropertyCard-CNOk4cg9.js";import{Q as i,I as l,G as o,f as n,aw as c,t as p}from"./index-Ds-LUfCl.js";import{P as d,a as m,b as x,c as j,d as h,f as g,e as u}from"./pagination-BpE6F8as.js";import"./vendor-eVk5PToZ.js";import"./propertyUtils-41DuwCMc.js";import"./PropertyContactDialog-WD14seAM.js";import"./messageService-Uk0RKWA-.js";import"./uploadService-CgQM9V6q.js";import"./send-BcDgms9K.js";import"./EnterprisePropertyContactDialog-Db2imk-C.js";import"./indian-rupee-Bxz217zj.js";import"./vendorService-DaSf1bV0.js";import"./reviewsService-BjiyFrCd.js";import"./favoriteService-BQ5QkAl-.js";import"./square-DcJMVZes.js";import"./ellipsis-CAI-P-n6.js";const f=()=>{const[f]=s(),[v,y]=r.useState(1),[N,b]=r.useState(""),[S,C]=r.useState([]),[P,w]=r.useState(!0),[F,k]=r.useState(0),[D,E]=r.useState(0),[T,A]=r.useState({});r.useEffect(()=>{const e=f.get("listingType"),s=f.get("propertyType"),r=f.get("search"),t={};e&&"all"!==e&&(t.listingType=e),s&&"all"!==s&&(t.propertyType=s),r&&b(r),A(t),y(1)},[f]),r.useEffect(()=>{(async()=>{w(!0);try{const e={page:v,limit:12,search:N||void 0,...T},s=await c.getProperties(e);s.success&&(C(s.data.properties),k(s.data.pagination.totalPages),E(s.data.pagination.totalProperties))}catch(e){p({title:"Error",description:"Failed to load properties. Please try again.",variant:"destructive"})}finally{w(!1)}})()},[v,N,T]);const L=12*(v-1),q=Math.min(L+12,D);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(l,{type:"text",placeholder:"Search properties by location, type...",className:"pl-10 h-12 border-2 border-border focus-visible:border-primary",value:N,onChange:e=>{return s=e.target.value,b(s),void y(1);var s}})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:e.jsx(t,{onFilterChange:e=>{A(e),y(1)},initialFilters:T})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),e.jsx("p",{className:"text-muted-foreground",children:P?"Loading properties...":e.jsxs(e.Fragment,{children:["Showing ",L+1,"-",q," of ",D," properties"]})})]}),P?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(o,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):0===S.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No properties found matching your criteria."}),e.jsx(n,{onClick:()=>{A({}),b(""),y(1)},variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6 mb-8",children:S.map(s=>e.jsx(a,{property:s},s._id))}),!P&&S.length>0&&F>1&&e.jsx(d,{children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(j,{href:"#",onClick:e=>{e.preventDefault(),v>1&&y(v-1)},className:1===v?"pointer-events-none opacity-50":""})}),[...Array(F)].map((s,r)=>{const t=r+1;return 1===t||t===F||t>=v-1&&t<=v+1?e.jsx(x,{children:e.jsx(h,{href:"#",onClick:e=>{e.preventDefault(),y(t)},isActive:v===t,children:t})},t):t===v-2||t===v+2?e.jsx(x,{children:e.jsx(g,{})},t):null}),e.jsx(x,{children:e.jsx(u,{href:"#",onClick:e=>{e.preventDefault(),v<F&&y(v+1)},className:v===F?"pointer-events-none opacity-50":""})})]})})]})]})]})};export{f as default};
