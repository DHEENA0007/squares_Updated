import{j as e}from"./ui-DHQhougw.js";import{r as s}from"./router-Bi51YGN-.js";import{z as a,Q as t,R as r,V as n,W as i,ae as l,Y as o,L as c,I as d,T as m,a0 as x,f as h,t as p,x as u,aG as j,w as N,l as g,M as f}from"./index-BXXWUbfo.js";import{M as y}from"./messageService-DAgthUDl.js";import{g as b,b as v}from"./propertyUtils-41DuwCMc.js";import{S as w}from"./send-Drjq9XK8.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=a("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),S=({open:a,onOpenChange:u,property:j,onMessageSent:N})=>{const[g,f]=s.useState(`Inquiry about ${j.title}`),[v,C]=s.useState(""),[S,k]=s.useState(!1);return e.jsx(t,{open:a,onOpenChange:u,children:e.jsxs(r,{className:"sm:max-w-[525px]",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-5 h-5"}),"Send Message"]}),e.jsxs(o,{children:["Send a message to ",j.vendor?.name?j.vendor.name:b(j.owner)," about this property"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:j.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.address.city,", ",j.address.state]}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-1",children:["₹",j.price.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"subject",children:"Subject"}),e.jsx(d,{id:"subject",value:g,onChange:e=>f(e.target.value),placeholder:"Enter subject"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"message",children:"Message"}),e.jsx(m,{id:"message",value:v,onChange:e=>C(e.target.value),placeholder:"Type your message here...",rows:6,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Introduce yourself and let the owner know what you're looking for"})]})]}),e.jsxs(x,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>u(!1),disabled:S,children:"Cancel"}),e.jsx(h,{type:"button",onClick:async()=>{if(v.trim())try{k(!0),await y.sendPropertyInquiry(j._id,g.trim(),v.trim()),p({title:"Success",description:"Your message has been sent successfully!"}),C(""),f(`Inquiry about ${j.title}`),N&&N(),u(!1)}catch(e){}finally{k(!1)}else p({title:"Error",description:"Please enter a message",variant:"destructive"})},disabled:S||!v.trim(),children:S?e.jsx(e.Fragment,{children:"Sending..."}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})]})})},k=({open:a,onOpenChange:l,property:c})=>{const[d,m]=s.useState(!1),[x,y]=s.useState(!1),[b,w]=s.useState(!1),S=v(c),k=(e,s)=>{navigator.clipboard.writeText(e).then(()=>{"phone"===s?(m(!0),setTimeout(()=>m(!1),2e3)):(y(!0),setTimeout(()=>y(!1),2e3)),p({title:"Copied!",description:("phone"===s?"Phone number":"Email")+" copied to clipboard"})})};return e.jsx(t,{open:a,onOpenChange:l,children:e.jsxs(r,{className:"sm:max-w-[425px]",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"Contact Information"]}),e.jsx(o,{children:"Get in touch with the property owner"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:c.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.address.city,", ",c.address.state]}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-1",children:["₹",c.price.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:"Vendor"===S.type?e.jsx(j,{className:"w-5 h-5 text-primary"}):e.jsx(N,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:S.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:S.type})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(u,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium truncate",children:S.phone})]}),"Not available"!==S.phone&&e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>k(S.phone,"phone"),children:d?e.jsx(g,{className:"w-4 h-4 text-green-600"}):e.jsx(C,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(f,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm font-medium truncate",children:S.email})]}),"Not available"!==S.email&&e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>k(S.email,"email"),children:x?e.jsx(g,{className:"w-4 h-4 text-green-600"}):e.jsx(C,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsxs(h,{variant:"outline",onClick:()=>{S.phone&&"Not available"!==S.phone&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location.href=`tel:${S.phone}`:(w(!0),p({title:"Phone Number",description:S.phone})))},disabled:"Not available"===S.phone,className:"w-full",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Call Now"]}),e.jsxs(h,{variant:"outline",onClick:()=>{S.email&&"Not available"!==S.email&&(window.location.href=`mailto:${S.email}?subject=Inquiry about ${c.title}`)},disabled:"Not available"===S.email,className:"w-full",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Send Email"]})]}),b&&"Not available"!==S.phone&&e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Contact Number:"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:S.phone}),e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>k(S.phone,"phone"),children:d?e.jsx(g,{className:"w-4 h-4 text-green-600"}):e.jsx(C,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the number to copy or use the copy button"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Contact during business hours for the best response"})]})]})})};export{S as P,k as a};
