import{j as e}from"./ui-CEFKCYQo.js";import{d as s,r as a}from"./router-Bi51YGN-.js";import{an as t,Q as r,I as i,S as l,r as n,s as c,v as d,w as o,f as m,a as x,e as p,a9 as h,aa as g,ab as u,ac as j,E as b,aq as f,B as v}from"./index-DbnZmv1f.js";import{u as y,f as w}from"./useRealTimeNotifications-BdWJSkPT.js";import{C as N,A as k}from"./check-check-DGaNXFFE.js";import{E as _}from"./ellipsis-vertical-iVuKNVWh.js";import{T as C}from"./trash-2-HWhiIvIZ.js";import"./vendor-eVk5PToZ.js";import"./en-US-Blz_tpgH.js";const A=()=>{const{notifications:A,markAsRead:S,clearNotifications:z}=y(),L=s(),[R,$]=a.useState("all"),[D,E]=a.useState(""),I=e=>({property_alert:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",price_alert:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",new_message:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",property_update:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",service_update:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",news_update:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",broadcast:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",announcement:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",welcome:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",test:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}[e]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"),M=e=>{try{return w(new Date(e),{addSuffix:!0})}catch{return"Unknown time"}},T=e=>{if(S(e.timestamp),e.data?.action)switch(e.data.action){case"view_property":e.data.propertyId&&L(`/customer/property/${e.data.propertyId}`);break;case"view_properties":L("/customer/search");break;case"view_messages":L("/customer/messages");break;case"view_dashboard":L("/customer/dashboard");break;case"view_favorites":L("/customer/favorites");break;case"view_services":L("/customer/services")}},U=A.filter(e=>{const s="all"===R||"unread"===R&&!e.read||e.type===R,a=!D||e.title.toLowerCase().includes(D.toLowerCase())||e.message.toLowerCase().includes(D.toLowerCase());return s&&a}),V=A.filter(e=>!e.read).length;return e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(t,{className:"w-8 h-8 text-primary"}),"Notifications"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Stay updated with property alerts, messages, and important updates"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(i,{type:"text",placeholder:"Search notifications...",value:D,onChange:e=>E(e.target.value),className:"pl-10 w-64"})]}),e.jsxs(l,{value:R,onValueChange:e=>$(e),children:[e.jsx(n,{className:"w-40",children:e.jsx(c,{placeholder:"Filter"})}),e.jsxs(d,{children:[e.jsx(o,{value:"all",children:"All Notifications"}),e.jsxs(o,{value:"unread",children:["Unread (",V,")"]}),e.jsx(o,{value:"property_alert",children:"Property Alerts"}),e.jsx(o,{value:"price_alert",children:"Price Alerts"}),e.jsx(o,{value:"new_message",children:"Messages"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>{A.forEach(e=>S(e.timestamp))},disabled:0===V,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Mark All Read"]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:z,disabled:0===A.length,children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]}),e.jsx(x,{children:e.jsx(p,{className:"p-0",children:0===U.length?e.jsxs("div",{className:"text-center py-12 px-4 text-muted-foreground",children:[e.jsx(t,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:D?"No matching notifications":"No notifications yet"}),e.jsx("p",{className:"text-sm",children:D?"Try adjusting your search or filter settings":"You'll see updates about properties, messages, and more here"})]}):e.jsx("div",{className:"divide-y",children:U.map((s,a)=>{return e.jsx("div",{className:"p-4 transition-all duration-200 hover:bg-muted/50 "+(s.read?"opacity-70":"bg-background"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-2xl mt-1",children:(t=s.type,{property_alert:"ðŸ ",price_alert:"ðŸ’°",new_message:"ðŸ’¬",property_update:"ðŸ“‹",service_update:"ðŸ”§",news_update:"ðŸ“°",broadcast:"ðŸ“¢",announcement:"ðŸ“£",welcome:"ðŸ‘‹",test:"ðŸ§ª"}[t]||"ðŸ””")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-1 flex items-center gap-2",children:[s.title,!s.read&&e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.message})]}),e.jsxs(h,{children:[e.jsx(g,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(_,{className:"w-4 h-4"})})}),e.jsxs(u,{align:"end",children:[e.jsxs(j,{onClick:()=>T(s),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(j,{onClick:()=>S(s.timestamp),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Mark as Read"]}),e.jsx(f,{}),e.jsxs(j,{className:"text-red-600",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{variant:"secondary",className:`text-xs ${I(s.type)}`,children:s.type.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:M(s.timestamp)})]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>T(s),className:"text-xs h-7",children:"View"})]})]})]})},`${s.timestamp}-${a}`);var t})})})})]})};export{A as default};
