import{j as e}from"./ui-s1SEoZIF.js";import{h as s,r}from"./router-D8v2YSKU.js";import{P as t,a}from"./PropertyCard-B3V_KhsM.js";import{X as i,I as l,x as o,f as n,ax as c,t as p}from"./index-YrVmIx3a.js";import{P as d,a as m,b as x,c as j,d as h,f as u,e as g}from"./pagination-BsAF6nms.js";import"./vendor-BxThA0WO.js";import"./propertyUtils-41DuwCMc.js";import"./PropertyContactDialog-CEb66K_0.js";import"./messageService-Su2xQswC.js";import"./uploadService-C_cH8Ofp.js";import"./send-IVeIvFQ5.js";import"./EnterprisePropertyContactDialog-C_OgieUi.js";import"./indian-rupee-EkOzOuU4.js";import"./vendorService-DCrWkx_G.js";import"./reviewsService-E1EyDdEs.js";import"./favoriteService-DwzATwTP.js";import"./square-Cto-ijCZ.js";import"./ellipsis-XCtCMAGV.js";const f=()=>{const[f]=s(),[v,y]=r.useState(1),[N,b]=r.useState(""),[S,C]=r.useState([]),[P,w]=r.useState(!0),[F,k]=r.useState(0),[D,T]=r.useState(0),[E,A]=r.useState({});r.useEffect(()=>{const e=f.get("listingType"),s=f.get("propertyType"),r=f.get("search"),t={};e&&"all"!==e&&(t.listingType=e),s&&"all"!==s&&(t.propertyType=s),r&&b(r),A(t),y(1)},[f]),r.useEffect(()=>{(async()=>{w(!0);try{const e={page:v,limit:12,search:N||void 0,...E},s=await c.getProperties(e);s.success&&(C(s.data.properties),k(s.data.pagination.totalPages),T(s.data.pagination.totalProperties))}catch(e){p({title:"Error",description:"Failed to load properties. Please try again.",variant:"destructive"})}finally{w(!1)}})()},[v,N,E]);const I=12*(v-1),L=Math.min(I+12,D);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(l,{type:"text",placeholder:"Search properties by location, type...",className:"pl-10 h-12 border-2 border-border focus-visible:border-primary",value:N,onChange:e=>{return s=e.target.value,b(s),void y(1);var s}})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:e.jsx(t,{onFilterChange:e=>{A(e),y(1)},initialFilters:E})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),e.jsx("p",{className:"text-muted-foreground",children:P?"Loading properties...":e.jsxs(e.Fragment,{children:["Showing ",I+1,"-",L," of ",D," properties"]})})]}),P?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(o,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):0===S.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No properties found matching your criteria."}),e.jsx(n,{onClick:()=>{A({}),b(""),y(1)},variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6 mb-8",children:S.map(s=>e.jsx(a,{property:s},s._id))}),!P&&S.length>0&&F>1&&e.jsx(d,{children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(j,{href:"#",onClick:e=>{e.preventDefault(),v>1&&y(v-1)},className:1===v?"pointer-events-none opacity-50":""})}),[...Array(F)].map((s,r)=>{const t=r+1;return 1===t||t===F||t>=v-1&&t<=v+1?e.jsx(x,{children:e.jsx(h,{href:"#",onClick:e=>{e.preventDefault(),y(t)},isActive:v===t,children:t})},t):t===v-2||t===v+2?e.jsx(x,{children:e.jsx(u,{})},t):null}),e.jsx(x,{children:e.jsx(g,{href:"#",onClick:e=>{e.preventDefault(),v<F&&y(v+1)},className:v===F?"pointer-events-none opacity-50":""})})]})})]})]})]})};export{f as default};
