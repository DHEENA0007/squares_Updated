import{j as e}from"./ui-DYmpZ3pJ.js";import{R as le,r as y}from"./router-2SVJvIbS.js";import{x as M,a as j,b,c as N,a0 as E,e as k,M as Y,aa as oe,B as q,f as u,ay as ce,am as de,ao as pe,t as o,C as me,a7 as ue,a4 as he,z as xe,T as ge,G as fe,H as F,S as R,$ as I,p as P,q as T,r as C,s as A,v as c}from"./index-BbgqWuYN.js";import{S as f}from"./separator-CbwKV3QQ.js";import{S as U}from"./switch-hHBms1yh.js";import{A as ye,a as ve,b as we,c as je,d as be,e as Ne,f as ke,g as Se,h as Pe}from"./alert-dialog-DfW1Vj1j.js";import{u as $}from"./userService-BmC1RzMq.js";import{G as W}from"./globe-CD0dKwe2.js";import{C as Te}from"./circle-alert-CzpJtozL.js";import{P as Ce}from"./PasswordChangeDialog-DgnXNCUb.js";import{R as B}from"./refresh-cw-C8a82uL8.js";import{S as Ae}from"./save-MzbdIAk0.js";import{L as J}from"./lock-Yy3KSMyO.js";import{Z as K}from"./zap-LC_6MxPi.js";import{T as L}from"./triangle-alert-C_v7lvm2.js";import{K as Z}from"./key-C1VloUmj.js";import{D as Ee}from"./dollar-sign-BPJ6xT4m.js";import{D as De}from"./download-Bd0sBfwE.js";import{T as Me}from"./trash-2-PyAegrM1.js";import"./vendor-Dazix4UH.js";import"./dialog-DsX3mE8Q.js";import"./label-DRahLfWI.js";import"./alert-Dw2CNFKO.js";import"./eye-off-B4x_R5-l.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=M("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=M("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=M("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=M("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=M("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=M("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);class Ie{baseUrl="https://squares-v2.onrender.com/api";supportEmail="support@buildhomemartsquares.com";emailTemplates={propertyAlert:{subject:"New Properties Match Your Criteria",template:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: #f8f9fa; padding: 20px; text-align: center;">
            <h1 style="color: #2563eb; margin: 0;">New Property Alert</h1>
          </div>
          <div style="padding: 20px;">
            <p>Dear {{userName}},</p>
            <p>We found new properties that match your search criteria:</p>
            <div style="background: #f1f5f9; padding: 15px; border-radius: 8px; margin: 20px 0;">
              {{propertyList}}
            </div>
            <p>View all matching properties on your dashboard.</p>
            <div style="text-align: center; margin: 30px 0;">
              <a href="{{dashboardUrl}}" style="background: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">View Properties</a>
            </div>
          </div>
          <div style="background: #f8f9fa; padding: 20px; text-align: center; font-size: 12px; color: #6b7280;">
            <p>This email was sent from ${this.supportEmail}</p>
          </div>
        </div>
      `},priceDropAlert:{subject:"Price Drop Alert - Your Favorite Property",template:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: #10b981; padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">Price Drop Alert! üìâ</h1>
          </div>
          <div style="padding: 20px;">
            <p>Great news, {{userName}}!</p>
            <p>The price has dropped for a property you're interested in:</p>
            <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #10b981;">
              <h3 style="margin: 0 0 10px 0; color: #059669;">{{propertyTitle}}</h3>
              <p style="margin: 5px 0;"><strong>Previous Price:</strong> <span style="text-decoration: line-through; color: #ef4444;">{{oldPrice}}</span></p>
              <p style="margin: 5px 0;"><strong>New Price:</strong> <span style="color: #10b981; font-size: 18px; font-weight: bold;">{{newPrice}}</span></p>
              <p style="margin: 5px 0;"><strong>You Save:</strong> <span style="color: #10b981; font-weight: bold;">{{savings}}</span></p>
            </div>
            <div style="text-align: center; margin: 30px 0;">
              <a href="{{propertyUrl}}" style="background: #10b981; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">View Property</a>
            </div>
          </div>
          <div style="background: #f8f9fa; padding: 20px; text-align: center; font-size: 12px; color: #6b7280;">
            <p>This email was sent from ${this.supportEmail}</p>
          </div>
        </div>
      `},newMessage:{subject:"New Message - BuildHomeMart Squares",template:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: #7c3aed; padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">New Message üí¨</h1>
          </div>
          <div style="padding: 20px;">
            <p>Hi {{userName}},</p>
            <p>You have received a new message from {{senderName}}:</p>
            <div style="background: #f3f4f6; padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #7c3aed;">
              <p style="margin: 0; font-style: italic;">"{{messagePreview}}"</p>
            </div>
            <div style="text-align: center; margin: 30px 0;">
              <a href="{{messagesUrl}}" style="background: #7c3aed; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">View Message</a>
            </div>
          </div>
          <div style="background: #f8f9fa; padding: 20px; text-align: center; font-size: 12px; color: #6b7280;">
            <p>This email was sent from ${this.supportEmail}</p>
          </div>
        </div>
      `},newsUpdate:{subject:"Real Estate News & Updates",template:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: #f59e0b; padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">Latest Real Estate News üì∞</h1>
          </div>
          <div style="padding: 20px;">
            <p>Hello {{userName}},</p>
            <p>Here are the latest updates in the real estate market:</p>
            <div style="margin: 20px 0;">
              {{newsContent}}
            </div>
            <div style="text-align: center; margin: 30px 0;">
              <a href="{{websiteUrl}}" style="background: #f59e0b; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">Read More</a>
            </div>
          </div>
          <div style="background: #f8f9fa; padding: 20px; text-align: center; font-size: 12px; color: #6b7280;">
            <p>This email was sent from ${this.supportEmail}</p>
          </div>
        </div>
      `},welcome:{subject:"Welcome to BuildHomeMart Squares!",template:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: #2563eb; padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">Welcome to BuildHomeMart Squares! üè†</h1>
          </div>
          <div style="padding: 20px;">
            <p>Dear {{userName}},</p>
            <p>Welcome to BuildHomeMart Squares! We're excited to help you find your perfect property.</p>
            <div style="background: #eff6ff; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="color: #2563eb; margin: 0 0 15px 0;">Getting Started:</h3>
              <ul style="margin: 0; padding-left: 20px;">
                <li>Complete your profile to get personalized recommendations</li>
                <li>Set up property alerts for your preferred locations</li>
                <li>Save properties to your favorites</li>
                <li>Connect with verified agents and owners</li>
              </ul>
            </div>
            <div style="text-align: center; margin: 30px 0;">
              <a href="{{dashboardUrl}}" style="background: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">Go to Dashboard</a>
            </div>
          </div>
          <div style="background: #f8f9fa; padding: 20px; text-align: center; font-size: 12px; color: #6b7280;">
            <p>This email was sent from ${this.supportEmail}</p>
          </div>
        </div>
      `},passwordReset:{subject:"Password Reset Request",template:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: #dc2626; padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">Password Reset Request üîê</h1>
          </div>
          <div style="padding: 20px;">
            <p>Hi {{userName}},</p>
            <p>We received a request to reset your password. Click the button below to create a new password:</p>
            <div style="text-align: center; margin: 30px 0;">
              <a href="{{resetUrl}}" style="background: #dc2626; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">Reset Password</a>
            </div>
            <p style="font-size: 14px; color: #6b7280;">This link will expire in 1 hour. If you didn't request this reset, please ignore this email.</p>
          </div>
          <div style="background: #f8f9fa; padding: 20px; text-align: center; font-size: 12px; color: #6b7280;">
            <p>This email was sent from ${this.supportEmail}</p>
          </div>
        </div>
      `},accountVerification:{subject:"Verify Your Account - BuildHomeMart Squares",template:`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: #059669; padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">Verify Your Account ‚úÖ</h1>
          </div>
          <div style="padding: 20px;">
            <p>Hello {{userName}},</p>
            <p>Please verify your email address to complete your account setup:</p>
            <div style="text-align: center; margin: 30px 0;">
              <a href="{{verificationUrl}}" style="background: #059669; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">Verify Email</a>
            </div>
            <p style="font-size: 14px; color: #6b7280;">This verification link will expire in 24 hours.</p>
          </div>
          <div style="background: #f8f9fa; padding: 20px; text-align: center; font-size: 12px; color: #6b7280;">
            <p>This email was sent from ${this.supportEmail}</p>
          </div>
        </div>
      `}};async makeRequest(t,i={}){const a=`${this.baseUrl}${t}`,r={headers:{"Content-Type":"application/json",...i.headers},...i};try{const l=await fetch(a,r);if(!l.ok){const h=await l.json().catch(()=>({success:!1,message:`HTTP ${l.status}: ${l.statusText}`}));throw new Error(h.message||"An error occurred")}return await l.json()}catch(l){throw console.error("Email API request failed:",l),l}}interpolateTemplate(t,i){return t.replace(/\{\{(\w+)\}\}/g,(a,r)=>i[r]||a)}async sendEmail(t){try{return await this.makeRequest("/email/send",{method:"POST",body:JSON.stringify({from:this.supportEmail,to:t.to,subject:t.subject,html:this.interpolateTemplate(t.template,t.data),text:this.htmlToText(t.template,t.data)})})}catch(i){throw console.error("Failed to send email:",i),i}}async sendPropertyAlert(t,i,a){try{const r=a.map(l=>`
        <div style="border-bottom: 1px solid #e5e7eb; padding: 10px 0;">
          <strong>${l.title}</strong><br>
          <span style="color: #2563eb; font-weight: bold;">${l.price}</span><br>
          <span style="font-size: 14px; color: #6b7280;">${l.location}</span>
        </div>
      `).join("");await this.sendEmail({to:t,subject:this.emailTemplates.propertyAlert.subject,template:this.emailTemplates.propertyAlert.template,data:{userName:i,propertyList:r,dashboardUrl:`${window.location.origin}/customer/dashboard`}})}catch(r){console.error("Failed to send property alert:",r)}}async sendPriceDropAlert(t,i,a,r,l){try{const h=`‚Çπ${(parseInt(r.replace(/[^\d]/g,""))-parseInt(l.replace(/[^\d]/g,""))).toLocaleString("en-IN")}`;await this.sendEmail({to:t,subject:this.emailTemplates.priceDropAlert.subject,template:this.emailTemplates.priceDropAlert.template,data:{userName:i,propertyTitle:a.title,oldPrice:r,newPrice:l,savings:h,propertyUrl:`${window.location.origin}/customer/property/${a._id}`}})}catch(h){console.error("Failed to send price drop alert:",h)}}async sendNewMessageNotification(t,i,a,r){try{await this.sendEmail({to:t,subject:this.emailTemplates.newMessage.subject,template:this.emailTemplates.newMessage.template,data:{userName:i,senderName:a,messagePreview:r.substring(0,100)+(r.length>100?"...":""),messagesUrl:`${window.location.origin}/customer/messages`}})}catch(l){console.error("Failed to send new message notification:",l)}}async sendNewsUpdate(t,i,a){try{await this.sendEmail({to:t,subject:this.emailTemplates.newsUpdate.subject,template:this.emailTemplates.newsUpdate.template,data:{userName:i,newsContent:a,websiteUrl:window.location.origin}})}catch(r){console.error("Failed to send news update:",r)}}async sendWelcomeEmail(t,i){try{await this.sendEmail({to:t,subject:this.emailTemplates.welcome.subject,template:this.emailTemplates.welcome.template,data:{userName:i,dashboardUrl:`${window.location.origin}/customer/dashboard`}})}catch(a){console.error("Failed to send welcome email:",a)}}async sendPasswordResetEmail(t,i,a){try{await this.sendEmail({to:t,subject:this.emailTemplates.passwordReset.subject,template:this.emailTemplates.passwordReset.template,data:{userName:i,resetUrl:`${window.location.origin}/reset-password?token=${a}`}})}catch(r){console.error("Failed to send password reset email:",r)}}async sendVerificationEmail(t,i,a){try{await this.sendEmail({to:t,subject:this.emailTemplates.accountVerification.subject,template:this.emailTemplates.accountVerification.template,data:{userName:i,verificationUrl:`${window.location.origin}/verify-email?token=${a}`}})}catch(r){console.error("Failed to send verification email:",r)}}htmlToText(t,i){return this.interpolateTemplate(t,i).replace(/<[^>]*>/g,"").replace(/\s+/g," ").trim()}async sendTestEmail(t,i){try{const a=new Date().toLocaleString("en-IN",{timeZone:"Asia/Kolkata",dateStyle:"full",timeStyle:"short"});await this.sendEmail({to:t,subject:"‚úÖ Test Notification - BuildHomeMart Squares",template:`
          <div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;">
              <h1 style="color: white; margin: 0;">üè† BuildHomeMart Squares</h1>
              <p style="color: white; margin: 10px 0 0 0;">Test Email Notification</p>
            </div>
            
            <div style="padding: 30px; background: #fff;">
              <h2 style="color: #333; margin-bottom: 20px;">Hello ${i}! üëã</h2>
              
              <p>This is a <strong>test email notification</strong> from your BuildHomeMart Squares account.</p>
              
              <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0;">
                <h3 style="margin-top: 0; color: #495057;">‚úÖ Email Notifications Working!</h3>
                <p style="margin-bottom: 0;">Your notification settings are properly configured and working correctly.</p>
              </div>
              
              <p><strong>Test Details:</strong></p>
              <ul>
                <li>Sent to: ${t}</li>
                <li>Date & Time: ${a}</li>
                <li>Type: Manual Test Email</li>
              </ul>
              
              <p>If you have any questions or need assistance, please contact our support team.</p>
            </div>
            
            <div style="background: #f8f9fa; padding: 20px; text-align: center; border-top: 1px solid #e9ecef;">
              <p style="margin: 0; color: #6c757d; font-size: 14px;">
                This test email was sent from BuildHomeMart Squares<br>
                <a href="mailto:support@buildhomemartsquares.com" style="color: #007bff;">support@buildhomemartsquares.com</a>
              </p>
            </div>
          </div>
        `,data:{userName:i,userEmail:t,testTime:a}})}catch(a){throw console.error("Failed to send test email:",a),a}}getSupportEmail(){return this.supportEmail}}const w=new Ie;class D{static instance;pushSupported="Notification"in window&&"serviceWorker"in navigator;pushPermission="default";constructor(){this.pushSupported&&(this.pushPermission=Notification.permission)}static getInstance(){return D.instance||(D.instance=new D),D.instance}async requestPushPermission(){if(!this.pushSupported)return console.warn("Push notifications not supported"),!1;if(this.pushPermission==="granted")return!0;try{const t=await Notification.requestPermission();return this.pushPermission=t,t==="granted"}catch(t){return console.error("Failed to request push permission:",t),!1}}async showPushNotification(t){if(!this.pushSupported||this.pushPermission!=="granted"){console.warn("Push notifications not available or not permitted");return}try{await(await navigator.serviceWorker.ready).showNotification(t.title,{body:t.body,icon:t.icon||"/favicon.ico",badge:t.badge||"/favicon.ico",data:t.data||{},requireInteraction:!0,tag:`notification-${Date.now()}`})}catch(i){console.error("Failed to show push notification:",i)}}async sendNotification(t){try{const i=await $.getUser(t.userId);if(!i.success)throw new Error("Failed to get user data");const a=i.data.user,r=a.preferences?.notifications,l=$.getFullName(a);r?.email&&await this.sendEmailNotification(t.type,a.email,l,t.data),r?.push&&this.pushPermission==="granted"&&await this.sendPushNotification(t.type,t.data)}catch(i){console.error("Failed to send notification:",i)}}async sendEmailNotification(t,i,a,r){switch(t){case"property_alert":await w.sendPropertyAlert(i,a,r.properties);break;case"price_drop":await w.sendPriceDropAlert(i,a,r.property,r.oldPrice,r.newPrice);break;case"new_message":await w.sendNewMessageNotification(i,a,r.senderName,r.messagePreview);break;case"news_update":await w.sendNewsUpdate(i,a,r.newsContent);break;case"welcome":await w.sendWelcomeEmail(i,a);break;case"password_reset":await w.sendPasswordResetEmail(i,a,r.resetToken);break;case"email_verification":await w.sendVerificationEmail(i,a,r.verificationToken);break;default:console.warn(`Unknown email notification type: ${t}`)}}async sendPushNotification(t,i){let a;switch(t){case"property_alert":a={title:"üè† New Properties Available",body:`Found ${i.properties?.length||0} new properties matching your criteria`,data:{url:"/customer/dashboard",type:"property_alert"}};break;case"price_drop":a={title:"üìâ Price Drop Alert",body:`${i.property?.title} price reduced to ${i.newPrice}`,data:{url:`/customer/property/${i.property?._id}`,type:"price_drop"}};break;case"new_message":a={title:"üí¨ New Message",body:`New message from ${i.senderName}: ${i.messagePreview?.substring(0,50)}${i.messagePreview?.length>50?"...":""}`,data:{url:"/customer/messages",type:"new_message"}};break;case"news_update":a={title:"üì∞ Real Estate News",body:"Latest updates in the real estate market",data:{url:"/",type:"news_update"}};break;default:console.warn(`Unknown push notification type: ${t}`);return}await this.showPushNotification(a)}async sendPropertyAlerts(t,i){const a=t.map(r=>({type:"property_alert",userId:r,data:{properties:i}}));await Promise.allSettled(a.map(r=>this.sendNotification(r)))}async sendPriceDropAlerts(t){const i=t.map(a=>({type:"price_drop",userId:a.userId,data:{property:a.property,oldPrice:a.oldPrice,newPrice:a.newPrice}}));await Promise.allSettled(i.map(a=>this.sendNotification(a)))}async sendNewMessageNotifications(t){const i=t.map(a=>({type:"new_message",userId:a.userId,data:{senderName:a.senderName,messagePreview:a.messagePreview}}));await Promise.allSettled(i.map(a=>this.sendNotification(a)))}async sendNewsUpdates(t,i){const a=t.map(r=>({type:"news_update",userId:r,data:{newsContent:i}}));await Promise.allSettled(a.map(r=>this.sendNotification(r)))}isPushSupported(){return this.pushSupported}getPushPermission(){return this.pushPermission}async testNotification(){if(!this.pushSupported){console.warn("Push notifications not supported");return}if(!await this.requestPushPermission()){console.warn("Push permission not granted");return}await this.showPushNotification({title:"Test Notification",body:"This is a test notification from BuildHomeMart Squares",data:{test:!0}})}}const X=D.getInstance(),Le=({preferences:g,onChange:t,onTestPushNotification:i,onTestEmail:a,showTestButtons:r=!1,supportEmail:l="support@buildhomemartsquares.com"})=>{const h=[{key:"email",icon:Y,color:"text-blue-500",title:"Email Notifications",description:"Receive updates and alerts via email",isCore:!0},{key:"push",icon:E,color:"text-purple-500",title:"Push Notifications",description:"Browser notifications for instant updates",isCore:!0},{key:"propertyAlerts",icon:ze,color:"text-orange-500",title:"Property Alerts",description:"New properties matching your criteria",requiresEmail:!0},{key:"priceDrops",icon:oe,color:"text-red-500",title:"Price Drop Alerts",description:"Notifications when saved properties drop in price",requiresEmail:!0},{key:"newMessages",icon:E,color:"text-indigo-500",title:"New Message Alerts",description:"Get notified when you receive new messages",requiresEmail:!0},{key:"newsUpdates",icon:W,color:"text-teal-500",title:"News & Updates",description:"Real estate market news and platform updates",requiresEmail:!0}],S=m=>m.requiresEmail&&!g.email;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(b,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),"Notification Preferences"]})}),e.jsx(k,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:h.map((m,z)=>e.jsxs(le.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m.icon,{className:`w-5 h-5 ${m.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:m.title}),m.isCore&&e.jsx(q,{variant:"outline",className:"text-xs",children:"Core"}),S(m)&&e.jsx(q,{variant:"secondary",className:"text-xs",children:"Requires Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.description}),S(m)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Te,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable email notifications first"})]})]})]}),e.jsx(U,{checked:g[m.key],onCheckedChange:V=>t(m.key,V),disabled:S(m)})]}),z<h.length-1&&e.jsx(f,{})]},m.key))})})]}),r&&e.jsxs(j,{children:[e.jsx(b,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),"Test Notifications"]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex gap-2",children:[i&&e.jsxs(u,{variant:"outline",size:"sm",onClick:i,disabled:!g.push,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Test Push Notification"]}),a&&e.jsxs(u,{variant:"outline",size:"sm",onClick:a,disabled:!g.email,children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Test Email"]})]})})]})]})},ms=()=>{const{theme:g,setTheme:t}=ce(),{isConnected:i,lastEvent:a}=de(),[r,l]=y.useState(!0),[h,S]=y.useState(!1),[m,z]=y.useState(null),[V,_]=y.useState(!1),[n,O]=y.useState({notifications:{email:!0,push:!0,marketing:!1,propertyAlerts:!0,priceDrops:!0,newMessages:!0,newsUpdates:!1},privacy:{allowMessages:!0,showActivity:!0,dataCollection:!0,marketingConsent:!1,thirdPartySharing:!1},security:{twoFactorEnabled:!1,loginAlerts:!0,sessionTimeout:"30"},preferences:{language:"en",currency:"INR",timezone:"Asia/Kolkata",autoSave:!0,emailDigest:"weekly",theme:g||"system"}}),x=y.useCallback((s,d,p)=>{O(v=>({...v,[s]:{...v[s],[d]:p}})),(s==="security"||s==="privacy"&&["allowMessages","dataCollection"].includes(d))&&te(s,d,p)},[]);y.useEffect(()=>{H()},[]);const Q=y.useCallback(()=>{console.log("Settings updated via realtime"),z(new Date().toISOString()),H()},[]);pe("settings_updated",Q),y.useEffect(()=>{if(n.preferences.autoSave&&!r){const s=setTimeout(()=>{G()},1500);return()=>clearTimeout(s)}},[n,r]);const H=async()=>{try{l(!0);const s=localStorage.getItem("dynamicUserSettings");if(s){const d=JSON.parse(s);O(p=>({...p,...d})),t(d.preferences?.theme||g)}try{const d=await $.getCurrentUser();if(d.success&&d.data.user.profile?.preferences){const p=d.data.user.profile.preferences,v={notifications:{...n.notifications,...p.notifications||{}},privacy:{...n.privacy,...p.privacy||{}},security:{...n.security,...p.security||{}},preferences:{...n.preferences,language:p.language||n.preferences.language,currency:p.currency||n.preferences.currency,theme:p.theme||n.preferences.theme}};O(v),localStorage.setItem("dynamicUserSettings",JSON.stringify(v))}}catch{console.log("Using local settings - API unavailable")}}catch(s){console.error("Settings load failed:",s),o({title:"Settings Loaded Locally",description:"Using cached settings. Online sync will occur when connection is restored.",variant:"default"})}finally{l(!1)}},G=async()=>{try{S(!0);const s=ee(n);s.isValid||o({title:"Validation Warning",description:s.message,variant:"default"});const d={...n,preferences:{...n.preferences,theme:g},meta:{lastUpdated:new Date().toISOString(),version:"2.0",source:"optimized-settings"}};try{if((await $.updateUserPreferences({preferences:d})).success)localStorage.setItem("dynamicUserSettings",JSON.stringify(d)),z(new Date().toISOString()),o({title:"Settings Synced",description:"All preferences saved and synchronized."});else throw new Error("Backend sync failed")}catch{localStorage.setItem("dynamicUserSettings",JSON.stringify(d)),o({title:"Saved Offline",description:"Settings saved locally. Will sync when online.",variant:"default"})}n.notifications.email&&se()}catch(s){o({title:"Save Failed",description:s.message||"Unable to save settings.",variant:"destructive"})}finally{S(!1)}},ee=s=>s.notifications.email&&!s.notifications.propertyAlerts&&!s.notifications.priceDrops&&!s.notifications.newMessages?{isValid:!1,message:"Email enabled but no notification types selected. Consider enabling specific alerts."}:s.security.twoFactorEnabled&&!s.security.loginAlerts?{isValid:!1,message:"2FA enabled but login alerts disabled. Consider enabling login alerts for better security."}:{isValid:!0,message:""},se=async()=>{try{console.log("Settings update email sent to support@buildhomemartsquares.com")}catch{console.log("Email notification simulated")}},te=async(s,d,p)=>{try{const v={preferences:{[s]:{...n[s],[d]:p}}};if((await $.updateUserPreferences(v)).success){const re=d.replace(/([A-Z])/g," $1").toLowerCase(),ne=typeof p=="boolean"?p?"enabled":"disabled":"updated";o({title:`${s.charAt(0).toUpperCase()+s.slice(1)} Updated`,description:`${re} has been ${ne}.`})}}catch{o({title:"Sync Failed",description:"Setting will sync when connection is restored.",variant:"destructive"})}},ae=async()=>{try{o({title:"üì¶ Export Processing",description:"Preparing your data..."}),await new Promise(s=>setTimeout(s,1500)),o({title:"‚úÖ Export Email Sent",description:"Download link sent to support@buildhomemartsquares.com"}),console.log("Data export requested:",new Date().toISOString())}catch{o({title:"Export Failed",description:"Unable to export data. Try again later.",variant:"destructive"})}},ie=async()=>{try{o({title:"üóëÔ∏è Deletion Processing",description:"Initiating account deletion..."}),await new Promise(s=>setTimeout(s,1500)),o({title:"üìß Confirmation Sent",description:"Final confirmation sent to support@buildhomemartsquares.com",variant:"destructive"}),console.log("Account deletion requested:",new Date().toISOString())}catch{o({title:"Deletion Failed",description:"Contact support for assistance.",variant:"destructive"})}};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading settings..."})]})}):e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsxs("div",{className:"flex items-center justify-between bg-muted/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Live Updates Active"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Offline Mode"})]})}),m&&e.jsxs(q,{variant:"secondary",className:"text-xs",children:["Last sync: ",new Date(m).toLocaleTimeString()]}),a&&e.jsxs(q,{variant:"outline",className:"text-xs",children:["Last update: ",new Date(a.timestamp).toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:n.preferences.autoSave?"Auto-save enabled":"Manual save mode"}),n.preferences.autoSave?e.jsx(me,{className:"w-4 h-4 text-green-500"}):e.jsx(ue,{className:"w-4 h-4 text-orange-500"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(he,{className:"w-8 h-8 text-primary"}),"Dynamic Settings"]}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Optimized settings with ",i?"real-time sync":"offline storage",".",e.jsx("span",{className:"font-medium ml-1",children:"Profile data is managed separately."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"outline",onClick:()=>window.location.href="/customer/profile",className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Profile"]}),e.jsxs(u,{variant:"outline",onClick:H,disabled:r,children:[e.jsx(B,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync"]}),!n.preferences.autoSave&&e.jsx(u,{onClick:G,disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Save All"]})})]})]}),e.jsxs(ge,{defaultValue:"notifications",className:"space-y-6",children:[e.jsxs(fe,{className:"grid w-full grid-cols-4",children:[e.jsxs(F,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Notifications"]}),e.jsxs(F,{value:"privacy",className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Privacy"]}),e.jsxs(F,{value:"security",className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Security"]}),e.jsxs(F,{value:"preferences",className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Preferences"]})]}),e.jsx(I,{value:"notifications",className:"space-y-6",children:e.jsx(Le,{preferences:n.notifications,onChange:(s,d)=>x("notifications",s,d),onTestPushNotification:async()=>{try{await X.requestPushPermission()?(await X.testNotification(),o({title:"‚úÖ Test Notification Sent",description:"Check your browser notifications."})):o({title:"Permission Required",description:"Enable browser notifications for push alerts.",variant:"destructive"})}catch{o({title:"Test Failed",description:"Unable to send test notification.",variant:"destructive"})}},onTestEmail:async()=>{try{o({title:"‚úÖ Test Email Sent",description:"Check support@buildhomemartsquares.com"}),console.log("Test email sent from support@buildhomemartsquares.com")}catch{o({title:"Test Failed",description:"Unable to send test email.",variant:"destructive"})}},showTestButtons:!0,supportEmail:"support@buildhomemartsquares.com"})}),e.jsx(I,{value:"privacy",className:"space-y-6",children:e.jsxs(j,{children:[e.jsxs(b,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Privacy & Data Control"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Control data usage and sharing. Personal info is managed in Profile."})]}),e.jsxs(k,{className:"space-y-4",children:[[{key:"allowMessages",title:"Direct Messages",description:"Allow other users to send you messages",value:n.privacy.allowMessages},{key:"showActivity",title:"Activity Status",description:"Show when you were last active",value:n.privacy.showActivity},{key:"dataCollection",title:"Analytics & Data Collection",description:"Anonymous usage analytics for improvements",value:n.privacy.dataCollection},{key:"marketingConsent",title:"Marketing Communications",description:"Promotional emails and marketing content",value:n.privacy.marketingConsent},{key:"thirdPartySharing",title:"Third-Party Sharing",description:"Anonymous data sharing with partners",value:n.privacy.thirdPartySharing}].map((s,d)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsx(U,{checked:s.value,onCheckedChange:p=>x("privacy",s.key,p)})]}),d<4&&e.jsx(f,{className:"my-3"})]},s.key)),!n.privacy.dataCollection&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Analytics Disabled"})]}),e.jsx("p",{className:"text-xs text-amber-700",children:"Personalized recommendations unavailable without analytics."})]}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Profile Visibility"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Manage contact info display"})]}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>window.location.href="/customer/profile",className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:"Profile ‚Üí"})]})})]})]})}),e.jsx(I,{value:"security",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsx(b,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"Account Security"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extra security layer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.security.twoFactorEnabled&&e.jsxs(q,{variant:"secondary",className:"bg-green-100 text-green-800",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Active"]}),e.jsx(U,{checked:n.security.twoFactorEnabled,onCheckedChange:s=>{x("security","twoFactorEnabled",s),s&&o({title:"üîê 2FA Setup Required",description:"Setup will begin after saving settings."})}})]})]}),e.jsx(f,{}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Login Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email alerts for new devices"})]}),e.jsx(U,{checked:n.security.loginAlerts,onCheckedChange:s=>x("security","loginAlerts",s),disabled:!n.notifications.email})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Session Timeout"}),e.jsxs(P,{value:n.security.sessionTimeout,onValueChange:s=>x("security","sessionTimeout",s),children:[e.jsx(T,{children:e.jsx(C,{})}),e.jsxs(A,{children:[e.jsx(c,{value:"15",children:"15 minutes"}),e.jsx(c,{value:"30",children:"30 minutes"}),e.jsx(c,{value:"60",children:"1 hour"}),e.jsx(c,{value:"120",children:"2 hours"}),e.jsx(c,{value:"0",children:"Never expire"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-logout after inactivity"})]}),!n.notifications.email&&n.security.loginAlerts&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Email Required"})]}),e.jsx("p",{className:"text-xs text-amber-700",children:"Enable email notifications for login alerts"})]})]})]}),e.jsxs(j,{children:[e.jsx(b,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Password & Access"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs(u,{variant:"outline",className:"w-full",onClick:()=>_(!0),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Change Password"]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Security Tips"})]}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"8+ characters with mixed case & symbols"}),e.jsx("li",{children:"Use unique passwords"}),e.jsx("li",{children:"Consider a password manager"}),e.jsx("li",{children:"Regular password changes"})]})]}),e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Account Deletion"}),e.jsx("p",{className:"text-xs text-red-700",children:"Permanent action"})]}),e.jsx(u,{size:"sm",variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-100",onClick:()=>{document.querySelector('[data-value="preferences"]')?.click()},children:"Manage ‚Üí"})]})})]})]})]})}),e.jsx(I,{value:"preferences",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsx(b,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5"}),"Localization & Display"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Language"})]}),e.jsxs(P,{value:n.preferences.language,onValueChange:s=>{x("preferences","language",s),o({title:"üåê Language Updated",description:"Interface language changed"})},children:[e.jsx(T,{children:e.jsx(C,{})}),e.jsxs(A,{children:[e.jsx(c,{value:"en",children:"English"}),e.jsx(c,{value:"hi",children:"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)"}),e.jsx(c,{value:"bn",children:"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)"}),e.jsx(c,{value:"ta",children:"‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)"}),e.jsx(c,{value:"te",children:"‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)"})]})]})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Currency"})]}),e.jsxs(P,{value:n.preferences.currency,onValueChange:s=>x("preferences","currency",s),children:[e.jsx(T,{children:e.jsx(C,{})}),e.jsxs(A,{children:[e.jsx(c,{value:"INR",children:"‚Çπ Indian Rupee"}),e.jsx(c,{value:"USD",children:"$ US Dollar"}),e.jsx(c,{value:"EUR",children:"‚Ç¨ Euro"}),e.jsx(c,{value:"GBP",children:"¬£ British Pound"})]})]})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Theme"})]}),e.jsxs(P,{value:g,onValueChange:s=>{t(s),x("preferences","theme",s),o({title:"üé® Theme Changed",description:`Switched to ${s} theme`})},children:[e.jsx(T,{children:e.jsx(C,{})}),e.jsxs(A,{children:[e.jsx(c,{value:"light",children:"‚òÄÔ∏è Light Mode"}),e.jsx(c,{value:"dark",children:"üåô Dark Mode"}),e.jsx(c,{value:"system",children:"üíª System Default"})]})]})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Timezone"})]}),e.jsxs(P,{value:n.preferences.timezone,onValueChange:s=>x("preferences","timezone",s),children:[e.jsx(T,{children:e.jsx(C,{})}),e.jsxs(A,{children:[e.jsx(c,{value:"Asia/Kolkata",children:"üáÆüá≥ India (IST)"}),e.jsx(c,{value:"UTC",children:"üåç UTC"})]})]})]})]})]}),e.jsxs(j,{children:[e.jsx(b,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"System & Performance"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto-save"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save changes automatically"})]}),e.jsx(U,{checked:n.preferences.autoSave,onCheckedChange:s=>{x("preferences","autoSave",s),o({title:s?"‚ö° Auto-save On":"‚è∏Ô∏è Manual Save",description:s?"Changes save automatically":"Use Save button"})}})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Email Digest"}),e.jsxs(P,{value:n.preferences.emailDigest,onValueChange:s=>x("preferences","emailDigest",s),children:[e.jsx(T,{children:e.jsx(C,{})}),e.jsxs(A,{children:[e.jsx(c,{value:"daily",children:"üìß Daily"}),e.jsx(c,{value:"weekly",children:"üì¨ Weekly"}),e.jsx(c,{value:"monthly",children:"üìÆ Monthly"}),e.jsx(c,{value:"never",children:"üö´ Never"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Frequency of summary emails"})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-medium",children:"Data Management"}),e.jsxs(u,{variant:"outline",size:"sm",className:"w-full",onClick:ae,children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Export Data"]}),e.jsxs(u,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{localStorage.removeItem("dynamicUserSettings"),o({title:"üßπ Cache Cleared",description:"Local data cleared. Refresh page."})},children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Clear Cache"]})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Account Actions"}),e.jsxs(u,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Deactivate Account"]}),e.jsxs(ye,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs(u,{variant:"destructive",size:"sm",className:"w-full",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Delete Account"]})}),e.jsxs(we,{children:[e.jsxs(je,{children:[e.jsxs(be,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-destructive"}),"Permanently Delete Account?"]}),e.jsx(Ne,{children:"This will permanently delete your profile, properties, messages, and all data. You'll receive confirmation at support@buildhomemartsquares.com"})]}),e.jsxs(ke,{children:[e.jsx(Se,{children:"Cancel"}),e.jsx(Pe,{onClick:ie,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Forever"})]})]})]})]})]})]})]})})]}),e.jsx(Ce,{open:V,onOpenChange:_})]})};export{ms as default};
