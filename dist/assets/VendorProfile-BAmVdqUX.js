import{j as e}from"./ui-CEt46o3G.js";import{r as c}from"./router-2SVJvIbS.js";import{C as d,d as o,a as m,b as x}from"./card-YvDMUmzt.js";import{t as U,a as v,X as D,A as G,j as H,k as W,I as l,z as $,T as q,h as K,i as g,v as b,U as X,b as Y,K as _,B as I,M as J}from"./index-CiYV0Sy0.js";import{L as t}from"./label-BV_cIshD.js";import{T as O}from"./textarea-BbecYreM.js";import{S as N}from"./switch-b3R448ud.js";import{vendorService as A}from"./vendorService-bcricvQk.js";import{E as Q}from"./EnhancedLocationSelector-5QzPfpiR.js";import{L as E}from"./loader-circle-Cj-dvH02.js";import{S as Z}from"./save-Br7oaQ85.js";import{S as ee}from"./square-pen-HkJ1oMBu.js";import{C as se}from"./camera-2k-Wb9vt.js";import{M as re}from"./mail-hCxVaHOS.js";import{P as ie}from"./phone-BlyPoB6i.js";import{C as ae}from"./calendar-DWj9NFdt.js";import{G as te}from"./globe-CegXA2qw.js";import{A as T}from"./award-D7BvAXpP.js";import{C as le}from"./circle-check-big-CdpP5k9T.js";import{S as ne}from"./shield-CFIF9xqz.js";import{T as de}from"./trending-up-BLutZFyR.js";import"./vendor-Dazix4UH.js";import"./index-DHzxUTm5.js";import"./command-O7w0ihSy.js";import"./dialog-B2oiH0OC.js";import"./popover-lkJ8tobj.js";import"./chevron-down-DeDu0PPf.js";const Me=()=>{const[a,y]=c.useState(!1),[L,w]=c.useState(!0),[C,S]=c.useState(!1),[f,P]=c.useState(null),[s,u]=c.useState(null),[z,R]=c.useState("profile");c.useEffect(()=>{k()},[]);const k=async()=>{try{w(!0);const r=await A.getVendorProfile();P(r),u(r)}catch(r){console.error("Failed to load vendor profile:",r),U({title:"Error",description:"Failed to load vendor profile. Please try again.",variant:"destructive"})}finally{w(!1)}},M=async()=>{if(s)try{S(!0);const r={profile:{firstName:s.profile.firstName,lastName:s.profile.lastName,phone:s.profile.phone,bio:s.profile.bio,address:s.profile.address,vendorInfo:s.profile.vendorInfo}},n=await A.updateVendorProfile(r);P(n),u(n),y(!1)}catch(r){console.error("Failed to update profile:",r)}finally{S(!1)}},V=()=>{u(f),y(!1)},i=(r,n)=>{if(!s)return;const h=r.split("."),F={...s};let p=F;for(let j=0;j<h.length-1;j++)p[h[j]]||(p[h[j]]={}),p=p[h[j]];p[h[h.length-1]]=n,u(F)};if(L)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading vendor profile..."})]})});if(!f||!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:"Failed to load vendor profile"}),e.jsx(v,{onClick:k,children:"Retry"})]})});`${s.profile.firstName}${s.profile.lastName}`;const B=s.profile.vendorInfo?.memberSince?new Date(s.profile.vendorInfo.memberSince).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Unknown";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Vendor Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your profile and company information"})]}),e.jsx("div",{className:"flex gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsxs(v,{variant:"outline",onClick:V,disabled:C,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(v,{onClick:M,disabled:C,children:[C?e.jsx(E,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]}):e.jsxs(v,{onClick:()=>y(!0),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),e.jsx(d,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(G,{className:"h-24 w-24",children:[e.jsx(H,{src:s.profile.avatar||""}),e.jsxs(W,{className:"text-lg",children:[s.profile.firstName.charAt(0),s.profile.lastName.charAt(0)]})]}),a&&e.jsx(v,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0",children:e.jsx(se,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"firstName",children:"First Name"}),a?e.jsx(l,{id:"firstName",value:s.profile.firstName,onChange:r=>i("profile.firstName",r.target.value)}):e.jsx("p",{className:"text-lg font-semibold",children:s.profile.firstName})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"lastName",children:"Last Name"}),a?e.jsx(l,{id:"lastName",value:s.profile.lastName,onChange:r=>i("profile.lastName",r.target.value)}):e.jsx("p",{className:"text-lg font-semibold",children:s.profile.lastName})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),s.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{className:"w-4 h-4 mr-1"}),a?e.jsx(l,{value:s.profile.phone,onChange:r=>i("profile.phone",r.target.value),className:"h-6 text-sm w-32"}):s.profile.phone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Member since ",B]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"font-medium",children:(s.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",s.profile.vendorInfo?.rating?.count||0," reviews)"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm",children:[s.profile.vendorInfo?.responseTime||"Not calculated"," avg response"]})})]})]})]})})}),e.jsxs(q,{value:z,onValueChange:R,className:"space-y-6",children:[e.jsxs(K,{className:"grid w-full grid-cols-4",children:[e.jsx(g,{value:"profile",children:"Personal Info"}),e.jsx(g,{value:"company",children:"Company Details"}),e.jsx(g,{value:"specializations",children:"Specializations"}),e.jsx(g,{value:"settings",children:"Settings"})]}),e.jsx(b,{value:"profile",className:"space-y-6",children:e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2"}),"Personal Information"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"bio",children:"Bio"}),a?e.jsx(O,{id:"bio",value:s.profile.bio||"",onChange:r=>i("profile.bio",r.target.value),placeholder:"Tell us about yourself and your experience...",rows:4}):e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.profile.bio||"No bio provided"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"street",children:"Street Address"}),a?e.jsx(l,{id:"street",value:s.profile.address?.street||"",onChange:r=>i("profile.address.street",r.target.value),placeholder:"Enter street address..."}):e.jsx("p",{className:"text-sm",children:s.profile.address?.street||"Not provided"})]}),a?e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Location Details"}),e.jsx("div",{className:"mt-2",children:e.jsx(Q,{value:{country:s.profile.address?.country||"India",countryCode:"IN",state:s.profile.address?.state||"",stateCode:s.profile.address?.stateCode||"",district:s.profile.address?.district||"",districtCode:s.profile.address?.districtCode||"",city:s.profile.address?.city||"",cityCode:s.profile.address?.cityCode||""},onChange:r=>{i("profile.address.country",r.country||"India"),i("profile.address.countryCode",r.countryCode||"IN"),i("profile.address.state",r.state||""),i("profile.address.stateCode",r.stateCode||""),i("profile.address.district",r.district||""),i("profile.address.districtCode",r.districtCode||""),i("profile.address.city",r.city||""),i("profile.address.cityCode",r.cityCode||"")},showLabels:!1,placeholder:{state:"Select your state...",district:"Select your district...",city:"Select your city..."},showValidation:!0})})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"State"}),e.jsx("p",{className:"text-sm",children:s.profile.address?.state||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(t,{children:"District"}),e.jsx("p",{className:"text-sm",children:s.profile.address?.district||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(t,{children:"City"}),e.jsx("p",{className:"text-sm",children:s.profile.address?.city||"Not provided"})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"zipCode",children:"PIN Code"}),a?e.jsx(l,{id:"zipCode",value:s.profile.address?.zipCode||"",onChange:r=>i("profile.address.zipCode",r.target.value),placeholder:"Enter 6-digit PIN code...",maxLength:6}):e.jsx("p",{className:"text-sm",children:s.profile.address?.zipCode||"Not provided"})]})]})]})]})}),e.jsx(b,{value:"company",className:"space-y-6",children:e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),"Company Information"]})}),e.jsx(o,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"companyName",children:"Company Name"}),a?e.jsx(l,{id:"companyName",value:s.profile.vendorInfo?.companyName||"",onChange:r=>i("profile.vendorInfo.companyName",r.target.value)}):e.jsx("p",{className:"text-sm",children:s.profile.vendorInfo?.companyName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"experience",children:"Experience (Years)"}),a?e.jsx(l,{id:"experience",type:"number",value:s.profile.vendorInfo?.experience||0,onChange:r=>i("profile.vendorInfo.experience",parseInt(r.target.value)||0)}):e.jsxs("p",{className:"text-sm",children:[s.profile.vendorInfo?.experience||0," years"]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"website",children:"Website"}),a?e.jsx(l,{id:"website",value:s.profile.vendorInfo?.website||"",onChange:r=>i("profile.vendorInfo.website",r.target.value)}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),e.jsx("a",{href:s.profile.vendorInfo?.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:s.profile.vendorInfo?.website||"Not provided"})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"licenseNumber",children:"License Number"}),a?e.jsx(l,{id:"licenseNumber",value:s.profile.vendorInfo?.licenseNumber||"",onChange:r=>i("profile.vendorInfo.licenseNumber",r.target.value)}):e.jsx("p",{className:"text-sm",children:s.profile.vendorInfo?.licenseNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"gstNumber",children:"GST Number"}),a?e.jsx(l,{id:"gstNumber",value:s.profile.vendorInfo?.gstNumber||"",onChange:r=>i("profile.vendorInfo.gstNumber",r.target.value)}):e.jsx("p",{className:"text-sm",children:s.profile.vendorInfo?.gstNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"panNumber",children:"PAN Number"}),a?e.jsx(l,{id:"panNumber",value:s.profile.vendorInfo?.panNumber||"",onChange:r=>i("profile.vendorInfo.panNumber",r.target.value)}):e.jsx("p",{className:"text-sm",children:s.profile.vendorInfo?.panNumber||"Not provided"})]})]})})]})}),e.jsxs(b,{value:"specializations",className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),"Specializations"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(s.profile.vendorInfo?.specializations||[]).length>0?s.profile.vendorInfo.specializations.map((r,n)=>e.jsx(I,{variant:"secondary",className:"flex items-center",children:r},n)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No specializations added yet"})})})})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(J,{className:"w-5 h-5 mr-2"}),"Service Areas"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(s.profile.vendorInfo?.serviceAreas||[]).length>0?s.profile.vendorInfo.serviceAreas.map((r,n)=>e.jsx(I,{variant:"outline",className:"flex items-center",children:r},n)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No service areas added yet"})})})})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),"Certifications"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:(s.profile.vendorInfo?.certifications||[]).length>0?s.profile.vendorInfo.certifications.map((r,n)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(T,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Issued by ",r.issuedBy," â€¢ ",r.date]})]})]}),r.verified&&e.jsxs(I,{className:"bg-green-100 text-green-800",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),"Verified"]})]},n)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No certifications added yet"})})})]})]}),e.jsx(b,{value:"settings",className:"space-y-6",children:e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 mr-2"}),"Notification Preferences"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"emailNotifications",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(N,{id:"emailNotifications",checked:s.profile.vendorInfo?.vendorPreferences?.emailNotifications||!1,onCheckedChange:r=>i("profile.vendorInfo.vendorPreferences.emailNotifications",r),disabled:!a})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"smsNotifications",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via SMS"})]}),e.jsx(N,{id:"smsNotifications",checked:s.profile.vendorInfo?.vendorPreferences?.smsNotifications||!1,onCheckedChange:r=>i("profile.vendorInfo.vendorPreferences.smsNotifications",r),disabled:!a})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"leadAlerts",children:"Lead Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about new leads"})]}),e.jsx(N,{id:"leadAlerts",checked:s.profile.vendorInfo?.vendorPreferences?.leadAlerts||!1,onCheckedChange:r=>i("profile.vendorInfo.vendorPreferences.leadAlerts",r),disabled:!a})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"weeklyReports",children:"Weekly Reports"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive weekly performance reports"})]}),e.jsx(N,{id:"weeklyReports",checked:s.profile.vendorInfo?.vendorPreferences?.weeklyReports||!1,onCheckedChange:r=>i("profile.vendorInfo.vendorPreferences.weeklyReports",r),disabled:!a})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"marketingEmails",children:"Marketing Emails"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive promotional emails"})]}),e.jsx(N,{id:"marketingEmails",checked:s.profile.vendorInfo?.vendorPreferences?.marketingEmails||!1,onCheckedChange:r=>i("profile.vendorInfo.vendorPreferences.marketingEmails",r),disabled:!a})]})]})]})})]}),f.statistics&&e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(de,{className:"w-5 h-5 mr-2"}),"Performance Statistics"]})}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.statistics.totalProperties}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Listed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.statistics.totalValue||"???0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(s.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f.statistics.totalMessages}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Messages"})]})]})})]})]})};export{Me as default};
