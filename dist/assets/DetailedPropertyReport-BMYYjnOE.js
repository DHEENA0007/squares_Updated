import{D as e,b2 as t,a2 as r,a as n,b as i,c as a,e as o,d as s,f as c,$ as l,I as u,q as d,r as p,aj as f,s as m,v as h,w as y,M as v,y as x,B as g}from"./index-RW7CCy7D.js";import{c as b,r as j,n as w,o as A,p as k,i as O,q as N,s as P,b as S,t as E,v as I,w as T,D as R,d as D,h as C,l as L,S as M,A as _,x as F,e as V,g as B,y as K,k as U,u as G,G as H,z as $,f as q,a as z,F as Z,H as W,I as J,J as Q,K as X}from"./generateCategoricalChart-Uvn7TIlb.js";import{R as Y,r as ee}from"./router-D8v2YSKU.js";import{g as te}from"./vendor-BxThA0WO.js";import{j as re}from"./ui-BNZSgpjP.js";import{T as ne,a as ie,b as ae,c as oe,d as se,e as ce}from"./table-BYzp5MI2.js";import{E as le}from"./exportUtils-DT_I1Dwc.js";import{a as ue}from"./Line-CQ37j9mr.js";import{D as de}from"./download-C-8zRh4U.js";import{U as pe}from"./user-x-DidycpAp.js";import{M as fe}from"./message-circle-Co-FIRPT.js";import{S as me}from"./share-2-CFAQmHBy.js";import{T as he}from"./thumbs-up-D0kN9glI.js";import{f as ye}from"./format-C1ZR1wBB.js";const ve=e("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),xe=e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var ge=["points","className","baseLinePoints","connectNulls"];function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},be.apply(this,arguments)}function je(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function we(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke,Oe,Ne=function(e){return e&&e.x===+e.x&&e.y===+e.y},Pe=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){Ne(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),Ne(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(r=[r.reduce(function(e,t){return[].concat(we(e),we(t))},[])]);var n=r.map(function(e){return e.reduce(function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===r.length?"".concat(n,"Z"):n},Se=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,o=je(e,ge);if(!r||!r.length)return null;var s=t("recharts-polygon",n);if(i&&i.length){var c=o.stroke&&"none"!==o.stroke,l=function(e,t,r){var n=Pe(e,r);return"".concat("Z"===n.slice(-1)?n.slice(0,-1):n,"L").concat(Pe(t.reverse(),r).slice(1))}(r,i,a);return Y.createElement("g",{className:s},Y.createElement("path",be({},b(o,!0),{fill:"Z"===l.slice(-1)?o.fill:"none",stroke:"none",d:l})),c?Y.createElement("path",be({},b(o,!0),{fill:"none",d:Pe(r,a)})):null,c?Y.createElement("path",be({},b(o,!0),{fill:"none",d:Pe(i,a)})):null)}var u=Pe(r,a);return Y.createElement("path",be({},b(o,!0),{fill:"Z"===u.slice(-1)?o.fill:"none",className:s,d:u}))};const Ee=te(function(){if(Oe)return ke;Oe=1;var e=j(),t=w(),r=A();return ke=function(n,i){return n&&n.length?e(n,r(i,2),t):void 0}}());var Ie,Te;const Re=te(function(){if(Te)return Ie;Te=1;var e=j(),t=A(),r=k();return Ie=function(n,i){return n&&n.length?e(n,t(i,2),r):void 0}}());var De=["cx","cy","angle","ticks","axisLine"],Ce=["ticks","tick","angle","tickFormatter","stroke"];function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Me.apply(this,arguments)}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach(function(t){$e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ve(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qe(n.key),n)}}function Ke(e,t,r){return t=Ge(t),function(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ue()?Reflect.construct(t,r||[],Ge(e).constructor):t.apply(e,r))}function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ue=function(){return!!e})()}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $e(e,t,r){return(t=qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Le(t)?t:t+""}var ze=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ke(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(e,ee.PureComponent),r=e,i=[{key:"renderTickItem",value:function(e,t,r){return Y.isValidElement(e)?Y.cloneElement(e,t):O(e)?e(t):Y.createElement(N,Me({},t,{className:"recharts-polar-radius-axis-tick-value"}),r)}}],(n=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,n=r.angle,i=r.cx,a=r.cy;return P(i,a,t,n)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,i=e.ticks,a=Ee(i,function(e){return e.coordinate||0});return{cx:t,cy:r,startAngle:n,endAngle:n,innerRadius:Re(i,function(e){return e.coordinate||0}).coordinate||0,outerRadius:a.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,i=e.ticks,a=e.axisLine,o=Ve(e,De),s=i.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),c=P(t,r,s[0],n),l=P(t,r,s[1],n),u=Fe(Fe(Fe({},b(o,!1)),{},{fill:"none"},b(a,!1)),{},{x1:c.x,y1:c.y,x2:l.x,y2:l.y});return Y.createElement("line",Me({className:"recharts-polar-radius-axis-line"},u))}},{key:"renderTicks",value:function(){var r=this,n=this.props,i=n.ticks,a=n.tick,o=n.angle,s=n.tickFormatter,c=n.stroke,l=Ve(n,Ce),u=this.getTickTextAnchor(),d=b(l,!1),p=b(a,!1),f=i.map(function(n,i){var l=r.getTickValueCoord(n),f=Fe(Fe(Fe(Fe({textAnchor:u,transform:"rotate(".concat(90-o,", ").concat(l.x,", ").concat(l.y,")")},d),{},{stroke:"none",fill:c},p),{},{index:i},l),{},{payload:n});return Y.createElement(S,Me({className:t("recharts-polar-radius-axis-tick",E(a)),key:"tick-".concat(n.coordinate)},I(r.props,n,i)),e.renderTickItem(a,f,s?s(n.value,i):n.value))});return Y.createElement(S,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var e=this.props,r=e.ticks,n=e.axisLine,i=e.tick;return r&&r.length?Y.createElement(S,{className:t("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),i&&this.renderTicks(),T.renderCallByParent(this.props,this.getViewBox())):null}}])&&Be(r.prototype,n),i&&Be(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},We.apply(this,arguments)}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach(function(t){nt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,it(n.key),n)}}function Ye(e,t,r){return t=tt(t),function(e,t){if(t&&("object"===Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,et()?Reflect.construct(t,r||[],tt(e).constructor):t.apply(e,r))}function et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(et=function(){return!!e})()}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nt(e,t,r){return(t=it(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ze(t)?t:t+""}$e(ze,"displayName","PolarRadiusAxis"),$e(ze,"axisType","radiusAxis"),$e(ze,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var at,ot=Math.PI/180,st=1e-5,ct=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ye(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}(e,ee.PureComponent),r=e,i=[{key:"renderTickItem",value:function(e,t,r){return Y.isValidElement(e)?Y.cloneElement(e,t):O(e)?e(t):Y.createElement(N,We({},t,{className:"recharts-polar-angle-axis-tick-value"}),r)}}],(n=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,n=t.cy,i=t.radius,a=t.orientation,o=t.tickSize||8,s=P(r,n,i,e.coordinate),c=P(r,n,i+("inner"===a?-1:1)*o,e.coordinate);return{x1:s.x,y1:s.y,x2:c.x,y2:c.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*ot);return r>st?"outer"===t?"start":"end":r<-st?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.radius,i=e.axisLine,a=e.axisLineType,o=Qe(Qe({},b(this.props,!1)),{},{fill:"none"},b(i,!1));if("circle"===a)return Y.createElement(R,We({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var s=this.props.ticks.map(function(e){return P(t,r,n,e.coordinate)});return Y.createElement(Se,We({className:"recharts-polar-angle-axis-line"},o,{points:s}))}},{key:"renderTicks",value:function(){var r=this,n=this.props,i=n.ticks,a=n.tick,o=n.tickLine,s=n.tickFormatter,c=n.stroke,l=b(this.props,!1),u=b(a,!1),d=Qe(Qe({},l),{},{fill:"none"},b(o,!1)),p=i.map(function(n,i){var p=r.getTickLineCoord(n),f=Qe(Qe(Qe({textAnchor:r.getTickTextAnchor(n)},l),{},{stroke:"none",fill:c},u),{},{index:i,payload:n,x:p.x2,y:p.y2});return Y.createElement(S,We({className:t("recharts-polar-angle-axis-tick",E(a)),key:"tick-".concat(n.coordinate)},I(r.props,n,i)),o&&Y.createElement("line",We({className:"recharts-polar-angle-axis-tick-line"},d,p)),a&&e.renderTickItem(a,f,s?s(n.value,i):n.value))});return Y.createElement(S,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var e=this.props,r=e.ticks,n=e.radius,i=e.axisLine;return n<=0||!r||!r.length?null:Y.createElement(S,{className:t("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}])&&Xe(r.prototype,n),i&&Xe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ut.apply(this,arguments)}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach(function(t){xt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gt(n.key),n)}}function mt(e,t,r){return t=yt(t),function(e,t){if(t&&("object"===lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ht()?Reflect.construct(t,r||[],yt(e).constructor):t.apply(e,r))}function ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ht=function(){return!!e})()}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){return(vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xt(e,t,r){return(t=gt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gt(e){var t=function(e,t){if("object"!=lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==lt(t)?t:t+""}nt(ct,"displayName","PolarAngleAxis"),nt(ct,"axisType","angleAxis"),nt(ct,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var bt=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xt(r=mt(this,e,[t]),"pieRef",null),xt(r,"sectorRefs",[]),xt(r,"id",G("recharts-pie-")),xt(r,"handleAnimationEnd",function(){var e=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),O(e)&&e()}),xt(r,"handleAnimationStart",function(){var e=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),O(e)&&e()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(e,ee.PureComponent),r=e,i=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,r,n){if(Y.isValidElement(e))return Y.cloneElement(e,r);if(O(e))return e(r);var i=t("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return Y.createElement(D,ut({},r,{key:n,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(e,r,n){if(Y.isValidElement(e))return Y.cloneElement(e,r);var i=n;if(O(e)&&(i=e(r),Y.isValidElement(i)))return i;var a=t("recharts-pie-label-text","boolean"==typeof e||O(e)?"":e.className);return Y.createElement(N,ut({},r,{alignmentBaseline:"middle",className:a}),i)}}],(n=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.label,i=r.labelLine,a=r.dataKey,o=r.valueKey,s=b(this.props,!1),c=b(n,!1),l=b(i,!1),u=n&&n.offsetRadius||20,d=t.map(function(t,r){var d=(t.startAngle+t.endAngle)/2,p=P(t.cx,t.cy,t.outerRadius+u,d),f=pt(pt(pt(pt({},s),t),{},{stroke:"none"},c),{},{index:r,textAnchor:e.getTextAnchor(p.x,t.cx)},p),m=pt(pt(pt(pt({},s),t),{},{fill:"none",stroke:t.fill},l),{},{index:r,points:[P(t.cx,t.cy,t.outerRadius,d),p]}),h=a;return C(a)&&C(o)?h="value":C(a)&&(h=o),Y.createElement(S,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(r)},i&&e.renderLabelLineItem(i,m,"line"),e.renderLabelItem(n,f,L(t,h)))});return Y.createElement(S,{className:"recharts-pie-labels"},d)}},{key:"renderSectorsStatically",value:function(e){var t=this,r=this.props,n=r.activeShape,i=r.blendStroke,a=r.inactiveShape;return e.map(function(r,o){if(0===(null==r?void 0:r.startAngle)&&0===(null==r?void 0:r.endAngle)&&1!==e.length)return null;var s=t.isActiveIndex(o),c=a&&t.hasActiveIndex()?a:null,l=s?n:c,u=pt(pt({},r),{},{stroke:i?r.fill:r.stroke,tabIndex:-1});return Y.createElement(S,ut({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},I(t.props,r,o),{key:"sector-".concat(null==r?void 0:r.startAngle,"-").concat(null==r?void 0:r.endAngle,"-").concat(r.midAngle,"-").concat(o)}),Y.createElement(M,ut({option:l,isActive:s,shapeType:"sector"},u)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,r=t.sectors,n=t.isAnimationActive,i=t.animationBegin,a=t.animationDuration,o=t.animationEasing,s=t.animationId,c=this.state,l=c.prevSectors,u=c.prevIsAnimationActive;return Y.createElement(_,{begin:i,duration:a,isActive:n,easing:o,from:{t:0},to:{t:1},key:"pie-".concat(s,"-").concat(u),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var n=t.t,i=[],a=(r&&r[0]).startAngle;return r.forEach(function(e,t){var r=l&&l[t],o=t>0?F(e,"paddingAngle",0):0;if(r){var s=V(r.endAngle-r.startAngle,e.endAngle-e.startAngle),c=pt(pt({},e),{},{startAngle:a+o,endAngle:a+s(n)+o});i.push(c),a=c.endAngle}else{var u=e.endAngle,d=e.startAngle,p=V(0,u-d)(n),f=pt(pt({},e),{},{startAngle:a+o,endAngle:a+p+o});i.push(f),a=f.endAngle}}),Y.createElement(S,null,e.renderSectorsStatically(i))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var n=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,n=this.state.prevSectors;return!(r&&t&&t.length)||n&&B(n,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,r=this.props,n=r.hide,i=r.sectors,a=r.className,o=r.label,s=r.cx,c=r.cy,l=r.innerRadius,u=r.outerRadius,d=r.isAnimationActive,p=this.state.isAnimationFinished;if(n||!i||!i.length||!K(s)||!K(c)||!K(l)||!K(u))return null;var f=t("recharts-pie",a);return Y.createElement(S,{tabIndex:this.props.rootTabIndex,className:f,ref:function(t){e.pieRef=t}},this.renderSectors(),o&&this.renderLabels(i),T.renderCallByParent(this.props,null,!1),(!d||p)&&U.renderCallByParent(this.props,i,!1))}}])&&ft(r.prototype,n),i&&ft(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();at=bt,xt(bt,"displayName","Pie"),xt(bt,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!H.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),xt(bt,"parseDeltaAngle",function(e,t){return $(t-e)*Math.min(Math.abs(t-e),360)}),xt(bt,"getRealPieData",function(e){var t=e.data,r=e.children,n=b(e,!1),i=q(r,z);return t&&t.length?t.map(function(e,t){return pt(pt(pt({payload:e},n),e),i&&i[t]&&i[t].props)}):i&&i.length?i.map(function(e){return pt(pt({},n),e.props)}):[]}),xt(bt,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,a=t.height,o=Z(i,a);return{cx:n+W(e.cx,i,i/2),cy:r+W(e.cy,a,a/2),innerRadius:W(e.innerRadius,o,0),outerRadius:W(e.outerRadius,o,.8*o),maxRadius:e.maxRadius||Math.sqrt(i*i+a*a)/2}}),xt(bt,"getComposedData",function(e){var t=e.item,r=e.offset,n=void 0!==t.type.defaultProps?pt(pt({},t.type.defaultProps),t.props):t.props,i=at.getRealPieData(n);if(!i||!i.length)return null;var a=n.cornerRadius,o=n.startAngle,s=n.endAngle,c=n.paddingAngle,l=n.dataKey,u=n.nameKey,d=n.valueKey,p=n.tooltipType,f=Math.abs(n.minAngle),m=at.parseCoordinateOfPie(n,r),h=at.parseDeltaAngle(o,s),y=Math.abs(h),v=l;C(l)&&C(d)?(J(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v="value"):C(l)&&(J(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v=d);var x,g,b=i.filter(function(e){return 0!==L(e,v,0)}).length,j=y-b*f-(y>=360?b:b-1)*c,w=i.reduce(function(e,t){var r=L(t,v,0);return e+(K(r)?r:0)},0);w>0&&(x=i.map(function(e,t){var r,n=L(e,v,0),i=L(e,u,t),s=(K(n)?n:0)/w,l=(r=t?g.endAngle+$(h)*c*(0!==n?1:0):o)+$(h)*((0!==n?f:0)+s*j),d=(r+l)/2,y=(m.innerRadius+m.outerRadius)/2,x=[{name:i,value:n,payload:e,dataKey:v,type:p}],b=P(m.cx,m.cy,y,d);return g=pt(pt(pt({percent:s,cornerRadius:a,name:i,tooltipPayload:x,midAngle:d,middleRadius:y,tooltipPosition:b},e),m),{},{value:L(e,v),startAngle:r,endAngle:l,payload:e,paddingAngle:$(h)*c})}));return pt(pt({},m),{},{sectors:x,data:i})});var jt=Q({chartName:"PieChart",GraphicalChild:bt,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ct},{axisType:"radiusAxis",AxisComp:ze}],formatAxisMap:X,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const wt=({dateRange:e,propertyId:t,customStartDate:b,customEndDate:j})=>{const{toast:w}=r(),[A,k]=ee.useState(!0),[O,N]=ee.useState(null),[P,S]=ee.useState(""),[E,I]=ee.useState("all"),[T,R]=ee.useState([]);ee.useEffect(()=>{D()},[e,t]),ee.useEffect(()=>{if(O?.viewers){const e=P.toLowerCase();let t=O.viewers.filter(t=>t.property?.title?.toLowerCase().includes(e)||t.viewer?.firstName?.toLowerCase().includes(e)||t.viewer?.lastName?.toLowerCase().includes(e)||t.viewer?.email?.toLowerCase().includes(e)||t.viewer?.phone?.toLowerCase().includes(e)||!t.viewer&&"guest".includes(e));"all"!==E&&(t=t.filter(e=>"phone"===E?e.interactions?.clickedPhone:"message"===E?e.interactions?.clickedMessage:"share"===E?e.interactions?.sharedProperty:"interest"===E?e.interactions?.clickedInterest:"any"!==E||(e.interactions?.clickedPhone||e.interactions?.clickedMessage||e.interactions?.sharedProperty||e.interactions?.clickedInterest))),R(t)}},[P,E,O]);const D=async()=>{k(!0);try{const r=await ue.getAllPropertyViewers(e,t,b,j);N(r.data),R(r.data.viewers)}catch(r){w({title:"Error",description:"Failed to fetch detailed report data",variant:"destructive"})}finally{k(!1)}};return A?re.jsx("div",{className:"p-8 text-center",children:"Loading detailed report..."}):re.jsxs("div",{className:"space-y-6",children:[re.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[re.jsxs(n,{children:[re.jsx(i,{className:"pb-2",children:re.jsx(a,{className:"text-sm font-medium text-muted-foreground",children:"Total Views"})}),re.jsxs(o,{children:[re.jsx("div",{className:"text-2xl font-bold",children:O?.summary?.totalViews||0}),re.jsxs("p",{className:"text-xs text-muted-foreground",children:[O?.summary?.uniqueViewers||0," unique viewers"]})]})]}),re.jsxs(n,{children:[re.jsx(i,{className:"pb-2",children:re.jsx(a,{className:"text-sm font-medium text-muted-foreground",children:"Registered vs Guest"})}),re.jsxs(o,{children:[re.jsxs("div",{className:"flex items-end gap-2",children:[re.jsx("div",{className:"text-2xl font-bold text-green-600",children:O?.summary?.registeredViewers||0}),re.jsx("span",{className:"text-sm text-muted-foreground mb-1",children:"/"}),re.jsx("div",{className:"text-2xl font-bold text-orange-600",children:O?.summary?.guestViewers||0})]}),re.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered / Guest"})]})]}),re.jsxs(n,{children:[re.jsx(i,{className:"pb-2",children:re.jsx(a,{className:"text-sm font-medium text-muted-foreground",children:"Total Interactions"})}),re.jsxs(o,{children:[re.jsx("div",{className:"text-2xl font-bold",children:O?.summary?.totalInteractions||0}),re.jsx("p",{className:"text-xs text-muted-foreground",children:"Clicks & Shares"})]})]}),re.jsxs(n,{children:[re.jsx(i,{className:"pb-2",children:re.jsx(a,{className:"text-sm font-medium text-muted-foreground",children:"Avg. Duration"})}),re.jsxs(o,{children:[re.jsxs("div",{className:"text-2xl font-bold",children:[O?.summary?.avgDuration||0,"s"]}),re.jsx("p",{className:"text-xs text-muted-foreground",children:"Per view"})]})]})]}),re.jsxs(n,{children:[re.jsxs(i,{children:[re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsxs("div",{children:[re.jsx(a,{children:"Detailed View Report"}),re.jsx(s,{children:"Detailed list of all property views including guest and registered users"})]}),re.jsxs(c,{onClick:()=>{if(!O?.viewers)return;const e=ye(new Date,"yyyy-MM-dd"),t=O.viewers.map(e=>{const t=e.viewer&&(e.viewer.firstName||e.viewer.email)?`${e.viewer.firstName||""} ${e.viewer.lastName||""}`.trim()||e.viewer.email:"Guest",r=[];return e.interactions?.clickedPhone&&r.push("Phone"),e.interactions?.clickedMessage&&r.push("Message"),e.interactions?.sharedProperty&&r.push("Share"),e.interactions?.clickedInterest&&r.push("Interest"),{Date:ye(new Date(e.viewedAt),"yyyy-MM-dd HH:mm:ss"),Property:e.property?.title||"Unknown",Location:e.property?.location||"No location","Viewer Name":t,Email:e.viewer?.email||"N/A",Phone:e.viewer?.phone||"N/A",Interactions:r.join("; ")||"None"}}),r=O.viewers.filter(e=>e.interactions?.clickedInterest).map(e=>({Date:ye(new Date(e.viewedAt),"yyyy-MM-dd HH:mm:ss"),"User Name":e.viewer?`${e.viewer.firstName||""} ${e.viewer.lastName||""}`.trim():"Guest",Email:e.viewer?.email||"N/A",Phone:e.viewer?.phone||"N/A","Property Interested In":e.property?.title||"Unknown"})),n=new Map;O.viewers.forEach(e=>{if(e.interactions?.clickedInterest&&e.property){const t=e.property._id||e.property.title;n.has(t)||n.set(t,{"Property Title":e.property.title,Location:e.property.location,"Interest Count":0}),n.get(t)["Interest Count"]++}});const i=Array.from(n.values()),a=new Map;O.viewers.forEach(e=>{if(e.property){const t=e.property._id||e.property.title;n.has(t)||a.has(t)||a.set(t,{"Property Title":e.property.title,Location:e.property.location,"Total Views":0}),a.has(t)&&a.get(t)["Total Views"]++}});const o=Array.from(a.values()),s={filename:`detailed_property_report_${e}`,title:"Detailed Property Report",metadata:{"Generated on":e,"Total Views":O.viewers.length.toString()}},c=[{name:"All Interactions",data:t,columns:[{wch:20},{wch:30},{wch:20},{wch:20},{wch:25},{wch:15},{wch:20}]},{name:"Interested Users",data:r,columns:[{wch:20},{wch:20},{wch:25},{wch:15},{wch:30}]},{name:"Properties with Interest",data:i,columns:[{wch:30},{wch:20},{wch:15}]},{name:"Properties w/o Interest",data:o,columns:[{wch:30},{wch:20},{wch:15}]}];le.generateExcelReport(s,c),w({title:"Detailed Report Downloaded"})},variant:"outline",className:"gap-2",children:[re.jsx(de,{className:"h-4 w-4"}),"Export Excel"]})]}),re.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[re.jsxs("div",{className:"relative flex-1",children:[re.jsx(l,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),re.jsx(u,{placeholder:"Search by property, viewer name, email...",className:"pl-8",value:P,onChange:e=>S(e.target.value)})]}),re.jsxs(d,{value:E,onValueChange:I,children:[re.jsxs(p,{className:"w-full sm:w-[180px]",children:[re.jsx(f,{className:"h-4 w-4 mr-2"}),re.jsx(m,{placeholder:"Filter by"})]}),re.jsxs(h,{children:[re.jsx(y,{value:"all",children:"All Views"}),re.jsx(y,{value:"any",children:"With Interactions"}),re.jsx(y,{value:"phone",children:"Phone Clicks"}),re.jsx(y,{value:"message",children:"Message Clicks"}),re.jsx(y,{value:"interest",children:"Interest Clicks"}),re.jsx(y,{value:"share",children:"Shares"})]})]})]})]}),re.jsx(o,{children:re.jsx("div",{className:"rounded-md border",children:re.jsxs(ne,{children:[re.jsx(ie,{children:re.jsxs(ae,{children:[re.jsx(oe,{children:"Date & Time"}),re.jsx(oe,{children:"Property"}),re.jsx(oe,{children:"Viewer"}),re.jsx(oe,{children:"Contact Info"}),re.jsx(oe,{children:"Interactions"})]})}),re.jsx(se,{children:0===T.length?re.jsx(ae,{children:re.jsx(ce,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No views found for this period"})}):T.map((e,t)=>re.jsxs(ae,{children:[re.jsx(ce,{className:"whitespace-nowrap",children:re.jsxs("div",{className:"flex flex-col",children:[re.jsx("span",{className:"font-medium",children:ye(new Date(e.viewedAt),"MMM dd, yyyy")}),re.jsx("span",{className:"text-xs text-muted-foreground",children:ye(new Date(e.viewedAt),"hh:mm a")})]})}),re.jsx(ce,{children:re.jsxs("div",{className:"flex flex-col max-w-[200px]",children:[re.jsx("span",{className:"font-medium truncate",title:e.property?.title,children:e.property?.title||"Unknown Property"}),re.jsx("span",{className:"text-xs text-muted-foreground truncate",children:e.property?.location||"No location"})]})}),re.jsx(ce,{children:e.viewer&&(e.viewer.firstName||e.viewer.email)?re.jsxs("div",{className:"flex items-center gap-2",children:[re.jsxs("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xs",children:[e.viewer.firstName?.[0]||"?",e.viewer.lastName?.[0]||""]}),re.jsxs("div",{className:"flex flex-col",children:[re.jsxs("span",{className:"font-medium text-sm",children:[e.viewer.firstName||""," ",e.viewer.lastName||""]}),re.jsx("span",{className:"text-xs text-green-600",children:"Registered"})]})]}):re.jsxs("div",{className:"flex items-center gap-2",children:[re.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:re.jsx(pe,{className:"h-4 w-4"})}),re.jsxs("div",{className:"flex flex-col",children:[re.jsx("span",{className:"font-medium text-sm text-muted-foreground",children:"Guest User"}),re.jsx("span",{className:"text-xs text-muted-foreground",children:"Unregistered"})]})]})}),re.jsx(ce,{children:e.viewer&&(e.viewer.email||e.viewer.phone)?re.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[e.viewer.email&&re.jsxs("div",{className:"flex items-center gap-1.5",children:[re.jsx(v,{className:"h-3 w-3 text-muted-foreground"}),re.jsx("span",{className:"truncate max-w-[150px]",title:e.viewer.email,children:e.viewer.email})]}),e.viewer.phone&&re.jsxs("div",{className:"flex items-center gap-1.5",children:[re.jsx(x,{className:"h-3 w-3 text-muted-foreground"}),re.jsx("span",{children:e.viewer.phone})]})]}):re.jsx("span",{className:"text-xs text-muted-foreground italic",children:"N/A"})}),re.jsx(ce,{children:re.jsxs("div",{className:"flex gap-2",children:[e.interactions?.clickedPhone&&re.jsx(g,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",title:"Called Owner",children:re.jsx(x,{className:"h-3 w-3"})}),e.interactions?.clickedMessage&&re.jsx(g,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",title:"Sent Message",children:re.jsx(fe,{className:"h-3 w-3"})}),e.interactions?.sharedProperty&&re.jsx(g,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",title:"Shared Property",children:re.jsx(me,{className:"h-3 w-3"})}),e.interactions?.clickedInterest&&re.jsx(g,{variant:"outline",className:"bg-pink-50 text-pink-700 border-pink-200",title:"Interested",children:re.jsx(he,{className:"h-3 w-3"})}),!e.interactions?.clickedPhone&&!e.interactions?.clickedMessage&&!e.interactions?.sharedProperty&&!e.interactions?.clickedInterest&&re.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})]})})]},t))})]})})})]})]})};export{ve as C,wt as D,xe as M,jt as P,bt as a};
