import{j as e}from"./ui-DOY6021Z.js";import{g as _,d as O,r as c,L as U}from"./router-2SVJvIbS.js";import{A as H,u as R,ao as G,t as p,av as f,f as i,a as o,e as d,h as Q,at as $,aw as E,B as g,ai as W,b as m,c as x,am as J,an as K,al as X,x as Y,$ as Z,y as ee,E as se}from"./index-DJqidggL.js";import{S as te}from"./separator-b0f6TR0i.js";import{g as re,a as ae}from"./propertyUtils-DZZpAHgC.js";import{vendorService as ie}from"./vendorService-BtSoYHTS.js";import{E as le}from"./EnterprisePropertyContactDialog-Do6eXw9y.js";import{A}from"./arrow-left-DvjMreL9.js";import{S as N}from"./share-2-PbD8ElFt.js";import{E as ne}from"./external-link-CHwbrIHq.js";import"./vendor-Dazix4UH.js";import"./dialog-DsaUnv7s.js";import"./dollar-sign-BoYqDhPx.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=H("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),ve=()=>{const{id:n}=_(),l=O(),{isAuthenticated:h}=R(),[t,F]=c.useState(null),[T,v]=c.useState(!0),[u,I]=c.useState(0),[D,w]=c.useState(!1),[B,b]=c.useState(!1),[q,k]=c.useState(!1),C=c.useCallback(async()=>{if(n)try{v(!0);const s=await G.getProperty(n);if(s.success){if(F(s.data.property),s.data.property.vendor?._id||s.data.property.owner?._id)try{k(!0);const r=s.data.property.vendor?._id||s.data.property.owner?._id,a=await ie.isVendorEnterpriseProperty(r);b(a)}catch(r){console.error("Failed to check enterprise status:",r),b(!1)}finally{k(!1)}}else p({title:"Error",description:"Property not found",variant:"destructive"}),l("/")}catch(s){console.error("Error loading property:",s),p({title:"Error",description:"Failed to load property details",variant:"destructive"}),l("/")}finally{v(!1)}},[n,l]);c.useEffect(()=>{C()},[C]);const S=s=>{p({title:"Login Required",description:`Please login to ${s}`,variant:"default"}),l("/login",{state:{from:`/property/${n}`}})},j=async()=>{if(navigator.share&&t)try{await navigator.share({title:t.title,text:`Check out this property: ${t.title}`,url:window.location.href})}catch{navigator.clipboard.writeText(window.location.href),p({title:"Link copied",description:"Property link has been copied to clipboard"})}else navigator.clipboard.writeText(window.location.href),p({title:"Link copied",description:"Property link has been copied to clipboard"})},M=(s,r)=>r==="rent"?`₹${s.toLocaleString("en-IN")}/month`:r==="lease"?`₹${s.toLocaleString("en-IN")}/year`:s>=1e7?`₹${(s/1e7).toFixed(1)} Cr`:s>=1e5?`₹${(s/1e5).toFixed(1)} Lac`:`₹${s.toLocaleString("en-IN")}`,L=s=>{if(!s)return"N/A";if(typeof s=="object"){if(s.builtUp)return`${s.builtUp} ${s.unit||"sq ft"}`;if(s.plot)return`${s.plot} ${s.unit||"sq ft"}`;if(s.carpet)return`${s.carpet} ${s.unit||"sq ft"}`}return typeof s=="number"?`${s} sq ft`:"N/A"},P=s=>{const r=s.area;let a=0;return typeof r=="object"&&r!==null?a=r.builtUp||r.carpet||r.plot||0:typeof r=="number"&&(a=r),a===0?0:Math.round(s.price/a)},z=s=>{const r=s.address;if(typeof r=="string")return r;const a=[];return r.street&&a.push(r.street),r.locationName&&a.push(r.locationName),r.city&&a.push(r.city),r.state&&a.push(r.state),r.pincode&&a.push(r.pincode),a.join(", ")},V=s=>{switch(s.toLowerCase()){case"available":return"bg-green-600";case"sold":return"bg-red-600";case"rented":return"bg-blue-600";case"pending":return"bg-yellow-600";default:return"bg-gray-600"}};return T?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading property details..."})]})}):t?e.jsxs("div",{className:"min-h-screen bg-background pt-20 pb-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[!h&&e.jsx(o,{className:"border-primary bg-primary/5",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Login to unlock all features"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save favorites, send messages, and access more property details"})]})]}),e.jsx(i,{onClick:()=>l("/login",{state:{from:`/property/${n}`}}),children:"Login"})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>l("/"),children:e.jsx(A,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:t.title}),e.jsxs("div",{className:"flex items-center text-muted-foreground mt-1",children:[e.jsx(Q,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:z(t)})]})]})]}),e.jsx("div",{className:"flex gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsxs(i,{variant:"outline",onClick:()=>l(`/customer/property/${n}`),children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Save to Favorites"]}),e.jsxs(i,{variant:"outline",onClick:j,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Share"]}),e.jsxs(i,{onClick:()=>l(`/customer/property/${n}`),children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Compare"]})]}):e.jsxs(i,{variant:"outline",onClick:j,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Share"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:`${V(t.status)} text-white`,children:t.status}),t.featured&&e.jsxs(g,{variant:"secondary",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Featured"]}),t.verified&&e.jsx(g,{className:"bg-green-600 text-white",children:"Verified"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-primary",children:M(t.price,t.listingType)}),P(t)>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["₹",P(t),"/sq ft"]})]})]}),t.images&&t.images.length>0&&e.jsx(o,{children:e.jsxs(d,{className:"p-0",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-lg overflow-hidden",children:e.jsx("img",{src:typeof t.images[u]=="string"?t.images[u]:t.images[u].url,alt:t.title,className:"w-full h-full object-cover",onError:s=>{s.currentTarget.src="/placeholder-property.jpg"}})}),t.images.length>1&&e.jsx("div",{className:"flex gap-2 p-4 overflow-x-auto",children:t.images.map((s,r)=>e.jsx("button",{onClick:()=>I(r),className:`flex-shrink-0 w-20 h-16 rounded-lg overflow-hidden border-2 ${r===u?"border-primary":"border-transparent"}`,children:e.jsx("img",{src:typeof s=="string"?s:s.url,alt:`Property image ${r+1}`,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="/placeholder-property.jpg"}})},r))})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(f,{className:"w-5 h-5 mr-2"}),"Property Overview"]})}),e.jsxs(d,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.bedrooms&&t.bedrooms>0&&e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(J,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:t.bedrooms}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bedrooms"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(K,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:t.bathrooms||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bathrooms"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(X,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:L(t.area).split(" ")[0]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sq Ft"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(f,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold capitalize",children:t.type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"})]})]}),t.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t.description})]})]})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(x,{children:"Property Details"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Property Type:"}),e.jsx("span",{className:"font-medium capitalize",children:t.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listing Type:"}),e.jsx("span",{className:"font-medium capitalize",children:t.listingType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bedrooms:"}),e.jsx("span",{className:"font-medium",children:t.bedrooms||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bathrooms:"}),e.jsx("span",{className:"font-medium",children:t.bathrooms||0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Area:"}),e.jsx("span",{className:"font-medium",children:L(t.area)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"font-medium capitalize",children:t.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listed On:"}),e.jsx("span",{className:"font-medium",children:new Date(t.createdAt).toLocaleDateString()})]})]})]})})]}),t.amenities&&t.amenities.length>0&&e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(x,{children:"Amenities"})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.amenities.map((s,r)=>e.jsxs("div",{className:"flex items-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:s})]},r))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),"Contact Information"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:re(t.owner)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ae(t)})]}),e.jsx(te,{}),e.jsx("div",{className:"space-y-3",children:h?e.jsx(e.Fragment,{children:e.jsxs(i,{className:"w-full",onClick:()=>l(`/customer/property/${n}`),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"View Full Details"]})}):e.jsxs(e.Fragment,{children:[e.jsxs(i,{className:"w-full",onClick:()=>S("contact the owner"),children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Login to Contact"]}),!q&&B&&e.jsxs(i,{className:"w-full bg-green-600 hover:bg-green-700 text-white",onClick:()=>w(!0),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"WhatsApp Contact"]})]})})]})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center",children:[e.jsx(se,{className:"w-5 h-5 mr-2"}),"Property Stats"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Views"}),e.jsx("span",{className:"font-semibold",children:t.views||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Listed"}),e.jsxs("span",{className:"font-semibold",children:[Math.floor((Date.now()-new Date(t.createdAt).getTime())/(1e3*60*60*24))," days ago"]})]})]})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(x,{children:"Quick Actions"})}),e.jsxs(d,{className:"space-y-3",children:[t.virtualTour&&e.jsxs(i,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open(t.virtualTour,"_blank"),children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Virtual Tour"]}),h?e.jsxs(e.Fragment,{children:[e.jsxs(i,{variant:"outline",className:"w-full justify-start",onClick:()=>l(`/customer/property/${n}`),children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Add to Favorites"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start",onClick:()=>l(`/customer/property/${n}`),children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Compare Property"]})]}):e.jsxs(i,{variant:"outline",className:"w-full justify-start",onClick:()=>S("save to favorites"),children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Login for More Actions"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start",onClick:j,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Share Property"]})]})]})]})]})]}),e.jsx(le,{open:D,onOpenChange:w,property:t})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Property Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The property you're looking for doesn't exist."}),e.jsx(U,{to:"/",children:e.jsxs(i,{children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})})};export{ve as default};
