import{j as e}from"./ui-BNZSgpjP.js";import{r as s}from"./router-D8v2YSKU.js";import{bE as a,bF as i,G as l,f as t,al as c,af as n,ag as r,ah as d,bA as o,Y as h,a9 as x,ai as m,a as j,b as u,c as p,B as v,e as g,bG as y,d as f,L as N,ac as b,I as w,ao as S,bH as C,bI as k,J as A,p as O,k as I,ad as U,a4 as F,a5 as D,a6 as B,a7 as P,a8 as z,T as E,j as V,ae as H,q as L,r as K,s as M,v as R,w as _}from"./index-XQ_rcKIR.js";import"./vendor-BxThA0WO.js";const T=[{value:"Plus",label:"Plus",icon:x},{value:"Calculator",label:"Calculator",icon:C},{value:"List",label:"List",icon:k},{value:"Settings",label:"Settings",icon:h},{value:"Home",label:"Home",icon:A},{value:"Building",label:"Building",icon:O},{value:"MapPin",label:"Map Pin",icon:I}],q=[{value:"post-property",label:"Post Property"},{value:"property-valuation",label:"Property Valuation"},{value:"quick-listing",label:"Quick Listing"},{value:"manage-properties",label:"Manage Properties"},{value:"contact",label:"Contact Page"}],G=()=>{const[C,k]=s.useState("slides"),[A,O]=s.useState(!0),[I,G]=s.useState(!1),[W,$]=s.useState([]),[J,Q]=s.useState(null),[Y,X]=s.useState(!1),[Z,ee]=s.useState(null),[se,ae]=s.useState([]),[ie,le]=s.useState(null),[te,ce]=s.useState(!1),ne=s.useCallback(async()=>{O(!0);try{const[e,s,i]=await Promise.all([a.getSlides(!0),a.getSettings(),a.getSellingOptions(!0)]);$(e),ee(s),ae(i)}catch(e){i.error("Failed to load hero content")}finally{O(!1)}},[]);s.useEffect(()=>{ne()},[ne]);return A?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(l,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Hero Section Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage the hero section content displayed on the homepage"})]}),e.jsxs(t,{variant:"outline",onClick:ne,children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),e.jsxs(n,{value:C,onValueChange:k,children:[e.jsxs(r,{className:"grid w-full grid-cols-3",children:[e.jsxs(d,{value:"slides",className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"}),"Slides"]}),e.jsxs(d,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"Settings"]}),e.jsxs(d,{value:"selling",className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-4 h-4"}),"Selling Options"]})]}),e.jsxs(m,{value:"slides",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Hero Slides"}),e.jsxs(t,{variant:"destructive",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to reset all slides to defaults?"))try{await a.resetSlides(),i.success("Slides reset to defaults"),ne()}catch(e){i.error("Failed to reset slides")}},children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"Reset to Defaults"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:W.map(s=>e.jsxs(j,{className:s.isActive?"":"opacity-60",children:[e.jsx(u,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(p,{className:"text-lg capitalize flex items-center gap-2",children:[s.tabKey,!s.isActive&&e.jsx(v,{variant:"secondary",children:"Inactive"})]}),e.jsx(t,{size:"sm",onClick:()=>{Q(s),X(!0)},children:"Edit"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"aspect-video relative rounded-lg overflow-hidden mb-3 bg-muted",children:[s.imageUrl&&e.jsx("img",{src:s.imageUrl.startsWith("http")||s.imageUrl.startsWith("/")?s.imageUrl:`/src/assets/${s.imageUrl.split("/").pop()}`,alt:s.tabKey,className:"w-full h-full object-cover",onError:e=>{const s=e.target;s.src.includes("hero-property.jpg")||(s.src="/src/assets/hero-property.jpg")}}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 flex flex-col justify-center items-center text-white p-4",children:[s.badge?.isVisible&&e.jsxs("span",{className:"bg-primary/20 text-primary-foreground px-3 py-1 rounded-full text-xs mb-2",children:[e.jsx(y,{className:"inline w-3 h-3 mr-1"}),s.badge.text]}),e.jsx("h3",{className:"text-lg font-bold text-center",children:s.title}),e.jsx("p",{className:"text-sm text-center mt-1 line-clamp-2",children:s.description})]})]})})]},s._id))})]}),e.jsx(m,{value:"settings",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(u,{children:[e.jsx(p,{children:"Hero Section Settings"}),e.jsx(f,{children:"Configure the behavior and visibility of hero section elements"})]}),e.jsx(g,{className:"space-y-6",children:Z&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base",children:"Auto Slide"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically switch between tabs"})]}),e.jsx(b,{checked:Z.autoSlide,onCheckedChange:e=>ee({...Z,autoSlide:e})})]}),Z.autoSlide&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Auto Slide Interval (ms)"}),e.jsx(w,{type:"number",min:1e3,max:3e4,step:500,value:Z.autoSlideInterval,onChange:e=>ee({...Z,autoSlideInterval:parseInt(e.target.value)||5e3})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base",children:"Show Search Box"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display the property search box"})]}),e.jsx(b,{checked:Z.showSearchBox,onCheckedChange:e=>ee({...Z,showSearchBox:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base",children:"Show Sell Dropdown"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display the sell dropdown menu"})]}),e.jsx(b,{checked:Z.showSellDropdown,onCheckedChange:e=>ee({...Z,showSellDropdown:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base",children:"Show Filters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display the filter button in search"})]}),e.jsx(b,{checked:Z.showFilters,onCheckedChange:e=>ee({...Z,showFilters:e})})]}),e.jsxs(t,{onClick:async()=>{if(Z){G(!0);try{await a.updateSettings({autoSlide:Z.autoSlide,autoSlideInterval:Z.autoSlideInterval,showSearchBox:Z.showSearchBox,showSellDropdown:Z.showSellDropdown,showFilters:Z.showFilters}),i.success("Settings saved successfully")}catch(e){i.error("Failed to save settings")}finally{G(!1)}}},disabled:I,children:[I?e.jsx(l,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(S,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]})})]})}),e.jsxs(m,{value:"selling",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Selling Options"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>{le({_id:"",optionId:`option-${Date.now()}`,label:"New Option",description:"Description",icon:"Plus",action:"post-property",isActive:!0,displayOrder:se.length,createdAt:"",updatedAt:""}),ce(!0)},children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Add Option"]}),e.jsxs(t,{variant:"destructive",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to reset all selling options to defaults?"))try{await a.resetSellingOptions(),i.success("Selling options reset to defaults"),ne()}catch(e){i.error("Failed to reset options")}},children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]}),e.jsx("div",{className:"grid gap-4",children:se.map(s=>{const l=T.find(e=>e.value===s.icon)?.icon||x;return e.jsx(j,{className:s.isActive?"":"opacity-60",children:e.jsxs(g,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(l,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.label,!s.isActive&&e.jsx(v,{variant:"secondary",children:"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>{le(s),ce(!0)},children:"Edit"}),e.jsx(t,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this option?"))try{await a.deleteSellingOption(e),i.success("Option deleted successfully"),ne()}catch(s){i.error("Failed to delete option")}})(s.optionId),children:e.jsx(U,{className:"w-4 h-4"})})]})]})},s._id)})})]})]}),e.jsx(F,{open:Y,onOpenChange:X,children:e.jsxs(D,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(B,{children:[e.jsxs(P,{children:["Edit Slide - ",J?.tabKey]}),e.jsx(z,{children:"Update the content for this hero slide"})]}),J&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Title"}),e.jsx(w,{value:J.title,onChange:e=>Q({...J,title:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Description"}),e.jsx(E,{value:J.description,onChange:e=>Q({...J,description:e.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:J.imageUrl,onChange:e=>Q({...J,imageUrl:e.target.value}),placeholder:"/assets/Buy.jpg or upload"}),e.jsxs(N,{className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-center px-4 py-2 border rounded-md hover:bg-muted",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Upload"]}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async e=>{const s=e.target.files?.[0];if(s)try{const e=await a.uploadSlideImage(s);J&&Q({...J,imageUrl:e.imageUrl}),i.success("Image uploaded successfully")}catch(l){i.error("Failed to upload image")}}})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Badge Text"}),e.jsx(w,{value:J.badge?.text||"",onChange:e=>Q({...J,badge:{...J.badge,text:e.target.value}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"Show Badge"}),e.jsx(b,{checked:J.badge?.isVisible??!0,onCheckedChange:e=>Q({...J,badge:{...J.badge,isVisible:e}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"Active"}),e.jsx(b,{checked:J.isActive,onCheckedChange:e=>Q({...J,isActive:e})})]})]}),e.jsxs(H,{children:[e.jsx(t,{variant:"outline",onClick:()=>X(!1),children:"Cancel"}),e.jsxs(t,{onClick:async()=>{if(J){G(!0);try{await a.createOrUpdateSlide({tabKey:J.tabKey,title:J.title,description:J.description,imageUrl:J.imageUrl,badge:J.badge,isActive:J.isActive,displayOrder:J.displayOrder}),i.success("Slide saved successfully"),X(!1),ne()}catch(e){i.error("Failed to save slide")}finally{G(!1)}}},disabled:I,children:[I?e.jsx(l,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(S,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})}),e.jsx(F,{open:te,onOpenChange:ce,children:e.jsxs(D,{children:[e.jsx(B,{children:e.jsxs(P,{children:[ie?._id?"Edit":"Add"," Selling Option"]})}),ie&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Label"}),e.jsx(w,{value:ie.label,onChange:e=>le({...ie,label:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Description"}),e.jsx(E,{value:ie.description,onChange:e=>le({...ie,description:e.target.value}),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Icon"}),e.jsxs(L,{value:ie.icon,onValueChange:e=>le({...ie,icon:e}),children:[e.jsx(K,{children:e.jsx(M,{})}),e.jsx(R,{children:T.map(s=>{const a=s.icon;return e.jsx(_,{value:s.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4"}),s.label]})},s.value)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Action"}),e.jsxs(L,{value:ie.action,onValueChange:e=>le({...ie,action:e}),children:[e.jsx(K,{children:e.jsx(M,{})}),e.jsx(R,{children:q.map(s=>e.jsx(_,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"Active"}),e.jsx(b,{checked:ie.isActive,onCheckedChange:e=>le({...ie,isActive:e})})]})]}),e.jsxs(H,{children:[e.jsx(t,{variant:"outline",onClick:()=>ce(!1),children:"Cancel"}),e.jsxs(t,{onClick:async()=>{if(ie){G(!0);try{await a.createOrUpdateSellingOption({optionId:ie.optionId,label:ie.label,description:ie.description,icon:ie.icon,action:ie.action,isActive:ie.isActive,displayOrder:ie.displayOrder}),i.success("Option saved successfully"),ce(!1),ne()}catch(e){i.error("Failed to save option")}finally{G(!1)}}},disabled:I,children:[I?e.jsx(l,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(S,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})})]})};export{G as default};
