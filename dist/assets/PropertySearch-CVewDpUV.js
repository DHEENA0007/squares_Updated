import{b as e,j as s,c as a,a as t,e as r,P as n,u as l,J as i,$ as o}from"./ui-CEFKCYQo.js";import{r as d,d as c,h as m}from"./router-Bi51YGN-.js";import{aB as u,az as x,g as h,a1 as f,ay as p,a as v,e as j,Q as b,I as g,S as y,r as N,s as w,v as S,w as P,f as C,G as k,J as F,V as A,B as D,h as E,aw as R,ax as _}from"./index-DbnZmv1f.js";import{C as M}from"./checkbox-Fk6UouX4.js";import{f as T}from"./favoriteService-CLvFwkUp.js";import{P as V}from"./propertyTypeConfig-CSXDrhzH.js";import{S as $}from"./square-DhktNVKs.js";import"./vendor-eVk5PToZ.js";var K=["PageUp","PageDown"],B=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},L="Slider",[z,H,U]=t(L),[O]=a(L,[U]),[Y,q]=O(L),G=d.forwardRef((a,t)=>{const{name:n,min:l=0,max:i=100,step:o=1,orientation:c="horizontal",disabled:m=!1,minStepsBetweenThumbs:x=0,defaultValue:h=[l],value:f,onValueChange:p=()=>{},onValueCommit:v=()=>{},inverted:j=!1,form:b,...g}=a,y=d.useRef(new Set),N=d.useRef(0),w="horizontal"===c?W:Q,[S=[],P]=e({prop:f,defaultProp:h,onChange:e=>{const s=[...y.current];s[N.current]?.focus(),p(e)}}),C=d.useRef(S);function k(e,s,{commit:a}={commit:!1}){const t=function(e){return(String(e).split(".")[1]||"").length}(o),r=function(e,s){const a=Math.pow(10,s);return Math.round(e*a)/a}(Math.round((e-l)/o)*o+l,t),n=u(r,[l,i]);P((e=[])=>{const t=function(e=[],s,a){const t=[...e];return t[a]=s,t.sort((e,s)=>e-s)}(e,n,s);if(function(e,s){if(s>0){const a=function(e){return e.slice(0,-1).map((s,a)=>e[a+1]-s)}(e);return Math.min(...a)>=s}return!0}(t,x*o)){N.current=t.indexOf(n);const s=String(t)!==String(e);return s&&a&&v(t),s?t:e}return e})}return s.jsx(Y,{scope:a.__scopeSlider,name:n,disabled:m,min:l,max:i,valueIndexToChangeRef:N,thumbs:y.current,values:S,orientation:c,form:b,children:s.jsx(z.Provider,{scope:a.__scopeSlider,children:s.jsx(z.Slot,{scope:a.__scopeSlider,children:s.jsx(w,{"aria-disabled":m,"data-disabled":m?"":void 0,...g,ref:t,onPointerDown:r(g.onPointerDown,()=>{m||(C.current=S)}),min:l,max:i,inverted:j,onSlideStart:m?void 0:function(e){const s=function(e,s){if(1===e.length)return 0;const a=e.map(e=>Math.abs(e-s)),t=Math.min(...a);return a.indexOf(t)}(S,e);k(e,s)},onSlideMove:m?void 0:function(e){k(e,N.current)},onSlideEnd:m?void 0:function(){const e=C.current[N.current];S[N.current]!==e&&v(S)},onHomeKeyDown:()=>!m&&k(l,0,{commit:!0}),onEndKeyDown:()=>!m&&k(i,S.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:s})=>{if(!m){const a=K.includes(e.key)||e.shiftKey&&B.includes(e.key)?10:1,t=N.current;k(S[t]+o*a*s,t,{commit:!0})}}})})})})});G.displayName=L;var[X,J]=O(L,{startEdge:"left",endEdge:"right",size:"width",direction:1}),W=d.forwardRef((e,a)=>{const{min:t,max:r,dir:n,inverted:o,onSlideStart:c,onSlideMove:m,onSlideEnd:u,onStepKeyDown:x,...h}=e,[f,p]=d.useState(null),v=l(a,e=>p(e)),j=d.useRef(void 0),b=i(n),g="ltr"===b,y=g&&!o||!g&&o;function N(e){const s=j.current||f.getBoundingClientRect(),a=de([0,s.width],y?[t,r]:[r,t]);return j.current=s,a(e-s.left)}return s.jsx(X,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:s.jsx(Z,{dir:b,"data-orientation":"horizontal",...h,ref:v,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const s=N(e.clientX);c?.(s)},onSlideMove:e=>{const s=N(e.clientX);m?.(s)},onSlideEnd:()=>{j.current=void 0,u?.()},onStepKeyDown:e=>{const s=I[y?"from-left":"from-right"].includes(e.key);x?.({event:e,direction:s?-1:1})}})})}),Q=d.forwardRef((e,a)=>{const{min:t,max:r,inverted:n,onSlideStart:i,onSlideMove:o,onSlideEnd:c,onStepKeyDown:m,...u}=e,x=d.useRef(null),h=l(a,x),f=d.useRef(void 0),p=!n;function v(e){const s=f.current||x.current.getBoundingClientRect(),a=de([0,s.height],p?[r,t]:[t,r]);return f.current=s,a(e-s.top)}return s.jsx(X,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:s.jsx(Z,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const s=v(e.clientY);i?.(s)},onSlideMove:e=>{const s=v(e.clientY);o?.(s)},onSlideEnd:()=>{f.current=void 0,c?.()},onStepKeyDown:e=>{const s=I[p?"from-bottom":"from-top"].includes(e.key);m?.({event:e,direction:s?-1:1})}})})}),Z=d.forwardRef((e,a)=>{const{__scopeSlider:t,onSlideStart:l,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:d,onEndKeyDown:c,onStepKeyDown:m,...u}=e,x=q(L,t);return s.jsx(n.span,{...u,ref:a,onKeyDown:r(e.onKeyDown,e=>{"Home"===e.key?(d(e),e.preventDefault()):"End"===e.key?(c(e),e.preventDefault()):K.concat(B).includes(e.key)&&(m(e),e.preventDefault())}),onPointerDown:r(e.onPointerDown,e=>{const s=e.target;s.setPointerCapture(e.pointerId),e.preventDefault(),x.thumbs.has(s)?s.focus():l(e)}),onPointerMove:r(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:r(e.onPointerUp,e=>{const s=e.target;s.hasPointerCapture(e.pointerId)&&(s.releasePointerCapture(e.pointerId),o(e))})})}),ee="SliderTrack",se=d.forwardRef((e,a)=>{const{__scopeSlider:t,...r}=e,l=q(ee,t);return s.jsx(n.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...r,ref:a})});se.displayName=ee;var ae="SliderRange",te=d.forwardRef((e,a)=>{const{__scopeSlider:t,...r}=e,i=q(ae,t),o=J(ae,t),c=d.useRef(null),m=l(a,c),u=i.values.length,x=i.values.map(e=>oe(e,i.min,i.max)),h=u>1?Math.min(...x):0,f=100-Math.max(...x);return s.jsx(n.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:m,style:{...e.style,[o.startEdge]:h+"%",[o.endEdge]:f+"%"}})});te.displayName=ae;var re="SliderThumb",ne=d.forwardRef((e,a)=>{const t=H(e.__scopeSlider),[r,n]=d.useState(null),i=l(a,e=>n(e)),o=d.useMemo(()=>r?t().findIndex(e=>e.ref.current===r):-1,[t,r]);return s.jsx(le,{...e,ref:i,index:o})}),le=d.forwardRef((e,a)=>{const{__scopeSlider:t,index:i,name:c,...m}=e,u=q(re,t),x=J(re,t),[h,f]=d.useState(null),p=l(a,e=>f(e)),v=!h||(u.form||!!h.closest("form")),j=o(h),b=u.values[i],g=void 0===b?0:oe(b,u.min,u.max),y=function(e,s){return s>2?`Value ${e+1} of ${s}`:2===s?["Minimum","Maximum"][e]:void 0}(i,u.values.length),N=j?.[x.size],w=N?function(e,s,a){const t=e/2,r=de([0,50],[0,t]);return(t-r(s)*a)*a}(N,g,x.direction):0;return d.useEffect(()=>{if(h)return u.thumbs.add(h),()=>{u.thumbs.delete(h)}},[h,u.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[x.startEdge]:`calc(${g}% + ${w}px)`},children:[s.jsx(z.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(n.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":u.min,"aria-valuenow":b,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...m,ref:p,style:void 0===b?{display:"none"}:e.style,onFocus:r(e.onFocus,()=>{u.valueIndexToChangeRef.current=i})})}),v&&s.jsx(ie,{name:c??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:b},i)]})});ne.displayName=re;var ie=d.forwardRef(({__scopeSlider:e,value:a,...t},r)=>{const i=d.useRef(null),o=l(i,r),c=x(a);return d.useEffect(()=>{const e=i.current;if(!e)return;const s=window.HTMLInputElement.prototype,t=Object.getOwnPropertyDescriptor(s,"value").set;if(c!==a&&t){const s=new Event("input",{bubbles:!0});t.call(e,a),e.dispatchEvent(s)}},[c,a]),s.jsx(n.input,{style:{display:"none"},...t,ref:o,defaultValue:a})});function oe(e,s,a){return u(100/(a-s)*(e-s),[0,100])}function de(e,s){return a=>{if(e[0]===e[1]||s[0]===s[1])return s[0];const t=(s[1]-s[0])/(e[1]-e[0]);return s[0]+t*(a-e[0])}}ie.displayName="RadioBubbleInput";var ce=G,me=se,ue=te,xe=ne;const he=d.forwardRef(({className:e,...a},t)=>s.jsxs(ce,{ref:t,className:h("relative flex w-full touch-none select-none items-center",e),...a,children:[s.jsx(me,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(ue,{className:"absolute h-full bg-primary"})}),s.jsx(xe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));he.displayName=ce.displayName;const fe=()=>{const e=c(),{toast:a}=f(),[t]=m(),[r,n]=d.useState([]),[l,i]=d.useState(!0),[o,u]=d.useState(""),[x,h]=d.useState("all"),[K,B]=d.useState("all"),[I,L]=d.useState("any"),[z,H]=d.useState("any"),[U,O]=d.useState("any"),[Y,q]=d.useState([0,2e7]),[G,X]=d.useState([0,1e4]),[J,W]=d.useState([]),[Q,Z]=d.useState(""),[ee,se]=d.useState(""),[ae,te]=d.useState("any"),[re,ne]=d.useState("any"),[le,ie]=d.useState("any"),[oe,de]=d.useState("any"),[ce,me]=d.useState(1),[ue,xe]=d.useState(1),[fe,pe]=d.useState(new Set),ve=d.useMemo(()=>V.find(e=>e.type===K),[K]),je=d.useMemo(()=>ve?.amenitiesFilter?ve.amenitiesFilter:["Swimming Pool","Gym/Fitness Center","Parking","Security","Garden/Park","Playground","Clubhouse","Power Backup","Elevator","WiFi","CCTV Surveillance","Water Supply","Fire Safety"],[ve]);d.useEffect(()=>{const e=t.get("q"),s=t.get("listingType"),a=t.get("propertyType");e&&u(e),s&&"all"!==s&&h(s),a&&"all"!==a&&B(a),me(1)},[t]),d.useEffect(()=>{be()},[o,x,K,I,z,U,Y,G,J,Q,ae,re,le,oe,ce]);const be=async()=>{i(!0);try{const e={page:ce,limit:12};o.trim()&&(e.search=o),"all"!==x&&(e.listingType=x),"all"!==K&&(e.propertyType=K),"any"!==I&&(e.bedrooms=I),"any"!==z&&(e.bathrooms=z),"any"!==U&&(e.furnishing=U),Q&&(e.floor=Q),ee&&(e.totalFloors=ee),"any"!==ae&&(e.ageOfProperty=ae),"any"!==re&&(e.facing=re),"any"!==le&&(e.parkingSpaces=le),"any"!==oe&&(e.cornerPlot=oe),Y[0]>0&&(e.minPrice=Y[0]),Y[1]<2e7&&(e.maxPrice=Y[1]),G[0]>0&&(e.minArea=G[0]),G[1]<1e4&&(e.maxArea=G[1]),J.length>0&&(e.amenities=J);const s=await p.getProperties(e);s.success&&(n(s.data.properties),xe(s.data.pagination.totalPages))}catch(e){a({title:"Error",description:"Failed to load properties",variant:"destructive"})}finally{i(!1)}};d.useEffect(()=>{ge()},[]);const ge=async()=>{try{const e=await T.getFavorites();if(e.success){const s=new Set(e.data.favorites.map(e=>e.property?._id).filter(Boolean));pe(s)}}catch(e){}},ye=()=>{u(""),h("all"),B("all"),L("any"),H("any"),O("any"),q([0,2e7]),X([0,1e4]),W([]),Z(""),se(""),te("any"),ne("any"),ie("any"),de("any"),me(1)},Ne=e=>e>=1e7?`₹${(e/1e7).toFixed(2)} Cr`:e>=1e5?`₹${(e/1e5).toFixed(2)} L`:`₹${e.toLocaleString()}`;return s.jsxs("div",{className:"min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 border-b",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Search Properties"}),s.jsx("p",{className:"text-muted-foreground",children:"Find your dream property from our verified listings"})]})}),s.jsx("div",{className:"container mx-auto px-4 py-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsx("aside",{className:"lg:w-80 flex-shrink-0",children:s.jsx(v,{className:"sticky top-20 max-h-[calc(100vh-6rem)] overflow-y-auto",children:s.jsxs(j,{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filters"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(b,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(g,{placeholder:"Location, property name...",value:o,onChange:e=>u(e.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Listing Type"}),s.jsxs(y,{value:x,onValueChange:h,children:[s.jsx(N,{children:s.jsx(w,{placeholder:"Type"})}),s.jsxs(S,{children:[s.jsx(P,{value:"all",children:"All Types"}),s.jsx(P,{value:"sale",children:"For Sale"}),s.jsx(P,{value:"rent",children:"For Rent"}),s.jsx(P,{value:"lease",children:"For Lease"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Property Type"}),s.jsxs(y,{value:K,onValueChange:e=>{B(e),L("any"),H("any"),O("any"),Z(""),se(""),te("any"),ne("any"),ie("any"),de("any"),W([])},children:[s.jsx(N,{children:s.jsx(w,{placeholder:"Property"})}),s.jsxs(S,{children:[s.jsx(P,{value:"all",children:"All Properties"}),[{value:"apartment",label:"Apartment"},{value:"villa",label:"Villa"},{value:"house",label:"House"},{value:"commercial",label:"Commercial"},{value:"plot",label:"Plot"},{value:"land",label:"Land"},{value:"office",label:"Office Space"},{value:"pg",label:"PG (Paying Guest)"}].map(e=>s.jsx(P,{value:e.value,children:e.label},e.value))]})]})]}),ve&&s.jsxs(s.Fragment,{children:[ve.fieldConfigurations.bedrooms&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Bedrooms"}),s.jsxs(y,{value:I,onValueChange:L,children:[s.jsx(N,{children:s.jsx(w,{placeholder:"BHK"})}),s.jsxs(S,{children:[s.jsx(P,{value:"any",children:"Any BHK"}),ve.fieldConfigurations.bedrooms.options.map(e=>s.jsx(P,{value:e.value,children:e.label},e.value))]})]})]}),ve.fieldConfigurations.bathrooms&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Bathrooms"}),s.jsxs(y,{value:z,onValueChange:H,children:[s.jsx(N,{children:s.jsx(w,{placeholder:"Bathrooms"})}),s.jsxs(S,{children:[s.jsx(P,{value:"any",children:"Any"}),ve.fieldConfigurations.bathrooms.options.map(e=>s.jsx(P,{value:e.value,children:e.label},e.value))]})]})]}),ve.fieldConfigurations.furnishing&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Furnishing"}),s.jsxs(y,{value:U,onValueChange:O,children:[s.jsx(N,{children:s.jsx(w,{placeholder:"Furnishing"})}),s.jsxs(S,{children:[s.jsx(P,{value:"any",children:"Any"}),ve.fieldConfigurations.furnishing.options.map(e=>s.jsx(P,{value:e.value,children:e.label},e.value))]})]})]}),ve.fieldConfigurations.specialFields&&s.jsx(s.Fragment,{children:Object.entries(ve.fieldConfigurations.specialFields).map(([e,a])=>{if("input"===a.type||"number"===a.type){let t="",r=e=>{};switch(e){case"floor":t=Q,r=Z;break;case"totalFloors":t=ee,r=se}return s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:a.label}),s.jsx(g,{type:"number"===a.type?"number":"text",placeholder:a.placeholder||a.label,value:t,onChange:e=>r(e.target.value)})]},e)}if("select"===a.type&&a.options){let t="any",r=e=>{};switch(e){case"facing":t=re,r=ne;break;case"cornerPlot":t=oe,r=de;break;case"parkingSpaces":t=le,r=ie}return s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:a.label}),s.jsxs(y,{value:t,onValueChange:r,children:[s.jsx(N,{children:s.jsx(w,{placeholder:a.label})}),s.jsxs(S,{children:[s.jsx(P,{value:"any",children:"Any"}),a.options.map(e=>s.jsx(P,{value:e.value,children:e.label},e.value))]})]})]},e)}return null})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Price Range"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(he,{value:Y,onValueChange:q,min:0,max:2e7,step:1e5,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-muted-foreground text-xs",children:"Min Price"}),s.jsx("span",{className:"font-semibold text-primary",children:Ne(Y[0])})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-muted-foreground text-xs",children:"Max Price"}),s.jsx("span",{className:"font-semibold text-primary",children:Ne(Y[1])})]})]})]})]}),ve&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["land"===ve.category?"Plot Area":"Built-up Area"," (sq ft)"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(he,{value:G,onValueChange:X,min:0,max:1e4,step:100,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-muted-foreground text-xs",children:"Min"}),s.jsxs("span",{className:"font-semibold text-primary",children:[G[0]," sqft"]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-muted-foreground text-xs",children:"Max"}),s.jsxs("span",{className:"font-semibold text-primary",children:[G[1]," sqft"]})]})]})]})]}),ve&&"land"!==ve.category&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Age of Property"}),s.jsxs(y,{value:ae,onValueChange:te,children:[s.jsx(N,{children:s.jsx(w,{placeholder:"Property Age"})}),s.jsxs(S,{children:[s.jsx(P,{value:"any",children:"Any"}),s.jsx(P,{value:"0-1",children:"Under Construction"}),s.jsx(P,{value:"1-3",children:"1-3 Years"}),s.jsx(P,{value:"3-5",children:"3-5 Years"}),s.jsx(P,{value:"5-10",children:"5-10 Years"}),s.jsx(P,{value:"10+",children:"10+ Years"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Amenities"}),s.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 border rounded-md p-3",children:je.map(e=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(M,{id:e,checked:J.includes(e),onCheckedChange:s=>{W(s?[...J,e]:J.filter(s=>s!==e))}}),s.jsx("label",{htmlFor:e,className:"text-sm font-normal cursor-pointer leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e})]},e))}),J.length>0&&s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[J.length," selected"]})]}),s.jsx(C,{variant:"outline",onClick:ye,className:"w-full",children:"Reset Filters"})]})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l?"Loading...":`${r.length} properties found`})]}),l?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):0===r.length?s.jsx(v,{children:s.jsxs(j,{className:"p-12 text-center",children:[s.jsx(F,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No properties found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your filters or search criteria"}),s.jsx(C,{onClick:ye,children:"Clear Filters"})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(t=>s.jsxs(v,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",children:[s.jsxs("div",{className:"relative h-48 bg-muted",onClick:()=>e(`/property/${t._id}`),children:[t.images&&t.images.length>0?s.jsx("img",{src:"string"==typeof t.images[0]?t.images[0]:t.images[0]?.url,alt:t.title,className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder-property.jpg"}}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(F,{className:"h-12 w-12 text-muted-foreground"})}),s.jsx(C,{size:"icon",variant:"secondary",className:"absolute top-2 right-2",onClick:e=>{e.stopPropagation(),(async e=>{try{fe.has(e)?(await T.removeFromFavorites(e),pe(s=>{const a=new Set(s);return a.delete(e),a}),a({title:"Removed from favorites",description:"Property removed from your favorites"})):(await T.addToFavorites(e),pe(s=>new Set(s).add(e)),a({title:"Added to favorites",description:"Property added to your favorites"}))}catch(s){a({title:"Error",description:"Failed to update favorite",variant:"destructive"})}})(t._id)},children:s.jsx(A,{className:"h-4 w-4 "+(fe.has(t._id)?"fill-red-500 text-red-500":"")})}),s.jsx(D,{className:"absolute top-2 left-2 capitalize",children:t.listingType})]}),s.jsxs(j,{className:"p-4",onClick:()=>e(`/customer/property/${t._id}`),children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:t.title}),s.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[s.jsx(E,{className:"h-3 w-3 mr-1"}),s.jsx("span",{className:"line-clamp-1",children:t.address.district?`${t.address.city}, ${t.address.district}, ${t.address.state}`:`${t.address.city}, ${t.address.state}`})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:Ne(t.price)}),"rent"===t.listingType&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"/month"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[t.bedrooms>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(R,{className:"h-4 w-4"}),s.jsx("span",{children:t.bedrooms})]}),t.bathrooms>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(_,{className:"h-4 w-4"}),s.jsx("span",{children:t.bathrooms})]}),t.area?.builtUp&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($,{className:"h-4 w-4"}),s.jsxs("span",{children:[t.area.builtUp," sqft"]})]})]}),s.jsx("div",{className:"mt-3 pt-3 border-t",children:s.jsx(D,{variant:"outline",className:"capitalize",children:t.type})})]})]},t._id))}),ue>1&&s.jsxs("div",{className:"flex justify-center gap-2 mt-8",children:[s.jsx(C,{variant:"outline",disabled:1===ce,onClick:()=>me(e=>e-1),children:"Previous"}),s.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:ue},(e,s)=>s+1).map(e=>s.jsx(C,{variant:ce===e?"default":"outline",onClick:()=>me(e),className:"w-10",children:e},e))}),s.jsx(C,{variant:"outline",disabled:ce===ue,onClick:()=>me(e=>e+1),children:"Next"})]})]})]})]})})]})};export{fe as default};
