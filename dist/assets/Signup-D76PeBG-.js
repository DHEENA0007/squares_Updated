import{j as e}from"./ui-CEt46o3G.js";import{r as t,d as Ae}from"./router-2SVJvIbS.js";import{c as Be,g as ee,N as We,I as G,a as Y,F as Le,t as R,d as He}from"./index-CiYV0Sy0.js";import{L}from"./label-BV_cIshD.js";import"./vendor-Dazix4UH.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=Be("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var $e=Object.defineProperty,qe=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,be=(n,a,l)=>a in n?$e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[a]=l,ze=(n,a)=>{for(var l in a||(a={}))we.call(a,l)&&be(n,l,a[l]);if(te)for(var l of te(a))je.call(a,l)&&be(n,l,a[l]);return n},Ve=(n,a)=>qe(n,Ge(a)),Ue=(n,a)=>{var l={};for(var c in n)we.call(n,c)&&a.indexOf(c)<0&&(l[c]=n[c]);if(n!=null&&te)for(var c of te(n))a.indexOf(c)<0&&je.call(n,c)&&(l[c]=n[c]);return l};function Qe(n){let a=setTimeout(n,0),l=setTimeout(n,10),c=setTimeout(n,50);return[a,l,c]}function Ze(n){let a=t.useRef();return t.useEffect(()=>{a.current=n}),a.current}var Je=18,ye=40,Ke=`${ye}px`,Xe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Ye({containerRef:n,inputRef:a,pushPasswordManagerStrategy:l,isFocused:c}){let[x,d]=t.useState(!1),[P,s]=t.useState(!1),[g,M]=t.useState(!1),D=t.useMemo(()=>l==="none"?!1:(l==="increase-width"||l==="experimental-no-flickering")&&x&&P,[x,P,l]),T=t.useCallback(()=>{let i=n.current,j=a.current;if(!i||!j||g||l==="none")return;let y=i,E=y.getBoundingClientRect().left+y.offsetWidth,_=y.getBoundingClientRect().top+y.offsetHeight/2,p=E-Je,z=_;document.querySelectorAll(Xe).length===0&&document.elementFromPoint(p,z)===i||(d(!0),M(!0))},[n,a,g,l]);return t.useEffect(()=>{let i=n.current;if(!i||l==="none")return;function j(){let E=window.innerWidth-i.getBoundingClientRect().right;s(E>=ye)}j();let y=setInterval(j,1e3);return()=>{clearInterval(y)}},[n,l]),t.useEffect(()=>{let i=c||document.activeElement===a.current;if(l==="none"||!i)return;let j=setTimeout(T,0),y=setTimeout(T,2e3),E=setTimeout(T,5e3),_=setTimeout(()=>{M(!0)},6e3);return()=>{clearTimeout(j),clearTimeout(y),clearTimeout(E),clearTimeout(_)}},[a,c,l,T]),{hasPWMBadge:x,willPushPWMBadge:D,PWM_BADGE_SPACE_WIDTH:Ke}}var Ne=t.createContext({}),Pe=t.forwardRef((n,a)=>{var l=n,{value:c,onChange:x,maxLength:d,textAlign:P="left",pattern:s,placeholder:g,inputMode:M="numeric",onComplete:D,pushPasswordManagerStrategy:T="increase-width",pasteTransformer:i,containerClassName:j,noScriptCSSFallback:y=et,render:E,children:_}=l,p=Ue(l,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),z,oe,ie,ce,ue;let[Ce,Te]=t.useState(typeof p.defaultValue=="string"?p.defaultValue:""),m=c??Ce,F=Ze(m),V=t.useCallback(r=>{x?.(r),Te(r)},[x]),S=t.useMemo(()=>s?typeof s=="string"?new RegExp(s):s:null,[s]),f=t.useRef(null),re=t.useRef(null),ne=t.useRef({value:m,onChange:V,isIOS:typeof window<"u"&&((oe=(z=window?.CSS)==null?void 0:z.supports)==null?void 0:oe.call(z,"-webkit-touch-callout","none"))}),K=t.useRef({prev:[(ie=f.current)==null?void 0:ie.selectionStart,(ce=f.current)==null?void 0:ce.selectionEnd,(ue=f.current)==null?void 0:ue.selectionDirection]});t.useImperativeHandle(a,()=>f.current,[]),t.useEffect(()=>{let r=f.current,o=re.current;if(!r||!o)return;ne.current.value!==r.value&&ne.current.onChange(r.value),K.current.prev=[r.selectionStart,r.selectionEnd,r.selectionDirection];function h(){if(document.activeElement!==r){Q(null),Z(null);return}let u=r.selectionStart,v=r.selectionEnd,X=r.selectionDirection,N=r.maxLength,A=r.value,C=K.current.prev,k=-1,O=-1,B;if(A.length!==0&&u!==null&&v!==null){let De=u===v,Fe=u===A.length&&A.length<N;if(De&&!Fe){let W=u;if(W===0)k=0,O=1,B="forward";else if(W===N)k=W-1,O=W,B="backward";else if(N>1&&A.length>1){let se=0;if(C[0]!==null&&C[1]!==null){B=W<C[1]?"backward":"forward";let Ie=C[0]===C[1]&&C[0]<N;B==="backward"&&!Ie&&(se=-1)}k=se+W,O=se+W+1}}k!==-1&&O!==-1&&k!==O&&f.current.setSelectionRange(k,O,B)}let ve=k!==-1?k:u,xe=O!==-1?O:v,Me=B??X;Q(ve),Z(xe),K.current.prev=[ve,xe,Me]}if(document.addEventListener("selectionchange",h,{capture:!0}),h(),document.activeElement===r&&ae(!0),!document.getElementById("input-otp-style")){let u=document.createElement("style");if(u.id="input-otp-style",document.head.appendChild(u),u.sheet){let v="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";J(u.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),J(u.sheet,`[data-input-otp]:autofill { ${v} }`),J(u.sheet,`[data-input-otp]:-webkit-autofill { ${v} }`),J(u.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),J(u.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let b=()=>{o&&o.style.setProperty("--root-height",`${r.clientHeight}px`)};b();let w=new ResizeObserver(b);return w.observe(r),()=>{document.removeEventListener("selectionchange",h,{capture:!0}),w.disconnect()}},[]);let[de,pe]=t.useState(!1),[U,ae]=t.useState(!1),[I,Q]=t.useState(null),[$,Z]=t.useState(null);t.useEffect(()=>{Qe(()=>{var r,o,h,b;(r=f.current)==null||r.dispatchEvent(new Event("input"));let w=(o=f.current)==null?void 0:o.selectionStart,u=(h=f.current)==null?void 0:h.selectionEnd,v=(b=f.current)==null?void 0:b.selectionDirection;w!==null&&u!==null&&(Q(w),Z(u),K.current.prev=[w,u,v])})},[m,U]),t.useEffect(()=>{F!==void 0&&m!==F&&F.length<d&&m.length===d&&D?.(m)},[d,D,F,m]);let q=Ye({containerRef:re,inputRef:f,pushPasswordManagerStrategy:T,isFocused:U}),me=t.useCallback(r=>{let o=r.currentTarget.value.slice(0,d);if(o.length>0&&S&&!S.test(o)){r.preventDefault();return}typeof F=="string"&&o.length<F.length&&document.dispatchEvent(new Event("selectionchange")),V(o)},[d,V,F,S]),fe=t.useCallback(()=>{var r;if(f.current){let o=Math.min(f.current.value.length,d-1),h=f.current.value.length;(r=f.current)==null||r.setSelectionRange(o,h),Q(o),Z(h)}ae(!0)},[d]),he=t.useCallback(r=>{var o,h;let b=f.current;if(!i&&(!ne.current.isIOS||!r.clipboardData||!b))return;let w=r.clipboardData.getData("text/plain"),u=i?i(w):w;r.preventDefault();let v=(o=f.current)==null?void 0:o.selectionStart,X=(h=f.current)==null?void 0:h.selectionEnd,N=(v!==X?m.slice(0,v)+u+m.slice(X):m.slice(0,v)+u+m.slice(v)).slice(0,d);if(N.length>0&&S&&!S.test(N))return;b.value=N,V(N);let A=Math.min(N.length,d-1),C=N.length;b.setSelectionRange(A,C),Q(A),Z(C)},[d,V,S,m]),ke=t.useMemo(()=>({position:"relative",cursor:p.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[p.disabled]),ge=t.useMemo(()=>({position:"absolute",inset:0,width:q.willPushPWMBadge?`calc(100% + ${q.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:q.willPushPWMBadge?`inset(0 ${q.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:P,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[q.PWM_BADGE_SPACE_WIDTH,q.willPushPWMBadge,P]),Oe=t.useMemo(()=>t.createElement("input",Ve(ze({autoComplete:p.autoComplete||"one-time-code"},p),{"data-input-otp":!0,"data-input-otp-placeholder-shown":m.length===0||void 0,"data-input-otp-mss":I,"data-input-otp-mse":$,inputMode:M,pattern:S?.source,"aria-placeholder":g,style:ge,maxLength:d,value:m,ref:f,onPaste:r=>{var o;he(r),(o=p.onPaste)==null||o.call(p,r)},onChange:me,onMouseOver:r=>{var o;pe(!0),(o=p.onMouseOver)==null||o.call(p,r)},onMouseLeave:r=>{var o;pe(!1),(o=p.onMouseLeave)==null||o.call(p,r)},onFocus:r=>{var o;fe(),(o=p.onFocus)==null||o.call(p,r)},onBlur:r=>{var o;ae(!1),(o=p.onBlur)==null||o.call(p,r)}})),[me,fe,he,M,ge,d,$,I,p,S?.source,m]),le=t.useMemo(()=>({slots:Array.from({length:d}).map((r,o)=>{var h;let b=U&&I!==null&&$!==null&&(I===$&&o===I||o>=I&&o<$),w=m[o]!==void 0?m[o]:null,u=m[0]!==void 0?null:(h=g?.[o])!=null?h:null;return{char:w,placeholderChar:u,isActive:b,hasFakeCaret:b&&w===null}}),isFocused:U,isHovering:!p.disabled&&de}),[U,de,d,$,I,p.disabled,m]),Re=t.useMemo(()=>E?E(le):t.createElement(Ne.Provider,{value:le},_),[_,le,E]);return t.createElement(t.Fragment,null,y!==null&&t.createElement("noscript",null,t.createElement("style",null,y)),t.createElement("div",{ref:re,"data-input-otp-container":!0,style:ke,className:j},Re,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Oe)))});Pe.displayName="Input";function J(n,a){try{n.insertRule(a)}catch{console.error("input-otp could not insert CSS rule:",a)}}var et=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Se=t.forwardRef(({className:n,containerClassName:a,...l},c)=>e.jsx(Pe,{ref:c,containerClassName:ee("flex items-center gap-2 has-[:disabled]:opacity-50",a),className:ee("disabled:cursor-not-allowed",n),...l}));Se.displayName="InputOTP";const Ee=t.forwardRef(({className:n,...a},l)=>e.jsx("div",{ref:l,className:ee("flex items-center",n),...a}));Ee.displayName="InputOTPGroup";const H=t.forwardRef(({index:n,className:a,...l},c)=>{const x=t.useContext(Ne),{char:d,hasFakeCaret:P,isActive:s}=x.slots[n];return e.jsxs("div",{ref:c,className:ee("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",s&&"z-10 ring-2 ring-ring ring-offset-background",a),...l,children:[d,P&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"animate-caret-blink h-4 w-px bg-foreground duration-1000"})})]})});H.displayName="InputOTPSlot";const tt=t.forwardRef(({...n},a)=>e.jsx("div",{ref:a,role:"separator",...n,children:e.jsx(_e,{})}));tt.displayName="InputOTPSeparator";const rt="/assets/signup-hero-DHU87cIQ.jpg",it=()=>{const n=Ae(),[a,l]=t.useState("form"),[c,x]=t.useState(""),[d,P]=t.useState(!1),[s,g]=t.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),M=async i=>{if(i.preventDefault(),!s.firstName||!s.lastName||!s.email||!s.phone||!s.password||!s.confirmPassword){R({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}if(s.password!==s.confirmPassword){R({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(s.password.length<6){R({title:"Error",description:"Password must be at least 6 characters",variant:"destructive"});return}if(!/^\d{10}$/.test(s.phone)){R({title:"Error",description:"Please enter a valid 10-digit phone number",variant:"destructive"});return}P(!0);try{(await He.register({email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName,phone:s.phone,role:"customer",agreeToTerms:!0})).success&&(R({title:"Success",description:"Registration successful! Please verify your email."}),l("otp"))}catch(j){console.error("Registration error:",j)}finally{P(!1)}},D=i=>{if(i.preventDefault(),c.length!==6){R({title:"Error",description:"Please enter the 6-digit OTP",variant:"destructive"});return}R({title:"Success",description:"Email verified successfully! Please login."}),n("/login")},T=()=>{R({title:"OTP Resent",description:`New verification code sent to ${s.phone}`}),x("")};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(We,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-12 bg-gradient-to-br from-background to-accent/10",children:e.jsxs("div",{className:"w-full max-w-6xl grid lg:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("img",{src:rt,alt:"Signup illustration",className:"w-full h-auto rounded-2xl shadow-2xl"})}),e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-card rounded-2xl shadow-xl p-8 border",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Account"}),e.jsx("p",{className:"text-muted-foreground",children:a==="form"?"Sign up to get started with BuildHomeMart":"Enter the OTP sent to your phone"})]}),a==="form"?e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"firstName",children:"First Name *"}),e.jsx(G,{id:"firstName",type:"text",placeholder:"First name",value:s.firstName,onChange:i=>g({...s,firstName:i.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(G,{id:"lastName",type:"text",placeholder:"Last name",value:s.lastName,onChange:i=>g({...s,lastName:i.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"email",children:"Email *"}),e.jsx(G,{id:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:i=>g({...s,email:i.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(G,{id:"phone",type:"tel",placeholder:"10-digit phone number",value:s.phone,onChange:i=>g({...s,phone:i.target.value.replace(/\D/g,"").slice(0,10)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"password",children:"Password *"}),e.jsx(G,{id:"password",type:"password",placeholder:"Create a password",value:s.password,onChange:i=>g({...s,password:i.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsx(G,{id:"confirmPassword",type:"password",placeholder:"Re-enter your password",value:s.confirmPassword,onChange:i=>g({...s,confirmPassword:i.target.value}),required:!0})]}),e.jsx(Y,{type:"submit",className:"w-full",size:"lg",disabled:d,children:d?"Creating Account...":"Create Account"}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-primary font-medium hover:underline",children:"Sign in"})]})]}):e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(L,{className:"text-center block",children:"Enter 6-Digit OTP"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Se,{maxLength:6,value:c,onChange:i=>x(i),children:e.jsxs(Ee,{children:[e.jsx(H,{index:0}),e.jsx(H,{index:1}),e.jsx(H,{index:2}),e.jsx(H,{index:3}),e.jsx(H,{index:4}),e.jsx(H,{index:5})]})})}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["OTP sent to ",s.phone]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Y,{type:"submit",className:"w-full",size:"lg",children:"Register"}),e.jsx(Y,{type:"button",variant:"outline",className:"w-full",onClick:T,children:"Resend OTP"}),e.jsx(Y,{type:"button",variant:"ghost",className:"w-full",onClick:()=>l("form"),children:"Back to Form"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["For demo: Use OTP ",e.jsx("span",{className:"font-mono font-semibold",children:"123456"})]})]})]})})]})}),e.jsx(Le,{})]})};export{it as default};
