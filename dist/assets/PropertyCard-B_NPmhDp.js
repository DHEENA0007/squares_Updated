import{j as e}from"./ui-DOY6021Z.js";import{r as N,d as C}from"./router-2SVJvIbS.js";import{ar as y,q as h,r as u,s as j,v as g,w as a,f as d,u as S,ao as b,a as F,as as T,B as n,at as B,e as L,h as k,am as A,an as V,au as D,$ as H,y as M}from"./index-SPvHGBGF.js";import{a as K}from"./propertyUtils-B_5yebUt.js";import{P as E,a as R}from"./PropertyContactDialog-CgvFO4qd.js";import{S as I}from"./square-DDgF5uDs.js";const U=({onFilterChange:s})=>{const[l,c]=N.useState({propertyType:void 0,bedrooms:void 0,minPrice:void 0,maxPrice:void 0,listingType:void 0}),o=(t,i)=>{const r={...l,[t]:i==="all"||i==="any"||i==="any-budget"?void 0:i};c(r),s(r)},x=t=>{let i,r;switch(t){case"20-40":i=2e6,r=4e6;break;case"40-60":i=4e6,r=6e6;break;case"60-80":i=6e6,r=8e6;break;case"80-1cr":i=8e6,r=1e7;break;case"1cr+":i=1e7,r=void 0;break;default:i=void 0,r=void 0}const m={...l,minPrice:i,maxPrice:r};c(m),s(m)},v=()=>{const t={propertyType:void 0,bedrooms:void 0,minPrice:void 0,maxPrice:void 0,listingType:void 0};c(t),s(t)};return e.jsx("div",{className:"bg-card border border-border rounded-xl p-4 shadow-[var(--shadow-soft)]",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:"Filters:"})]}),e.jsxs(h,{value:l.listingType||"all",onValueChange:t=>o("listingType",t),children:[e.jsx(u,{className:"w-[150px]",children:e.jsx(j,{placeholder:"Listing Type"})}),e.jsxs(g,{children:[e.jsx(a,{value:"all",children:"All Types"}),e.jsx(a,{value:"sale",children:"For Sale"}),e.jsx(a,{value:"rent",children:"For Rent"}),e.jsx(a,{value:"lease",children:"For Lease"})]})]}),e.jsxs(h,{value:l.propertyType||"all",onValueChange:t=>o("propertyType",t),children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Property Type"})}),e.jsxs(g,{children:[e.jsx(a,{value:"all",children:"All Properties"}),e.jsx(a,{value:"apartment",children:"Apartment"}),e.jsx(a,{value:"villa",children:"Villa"}),e.jsx(a,{value:"house",children:"House"}),e.jsx(a,{value:"plot",children:"Plot"}),e.jsx(a,{value:"land",children:"Land"}),e.jsx(a,{value:"commercial",children:"Commercial"}),e.jsx(a,{value:"office",children:"Office"}),e.jsx(a,{value:"pg",children:"PG (Paying Guest)"})]})]}),e.jsxs(h,{value:l.bedrooms?.toString()||"any",onValueChange:t=>{const i=t==="any"?void 0:parseInt(t);o("bedrooms",i&&!isNaN(i)?i:void 0)},children:[e.jsx(u,{className:"w-[150px]",children:e.jsx(j,{placeholder:"BHK"})}),e.jsxs(g,{children:[e.jsx(a,{value:"any",children:"Any BHK"}),e.jsx(a,{value:"1",children:"1 BHK"}),e.jsx(a,{value:"2",children:"2 BHK"}),e.jsx(a,{value:"3",children:"3 BHK"}),e.jsx(a,{value:"4",children:"4+ BHK"})]})]}),e.jsxs(h,{value:l.minPrice===2e6&&l.maxPrice===4e6?"20-40":l.minPrice===4e6&&l.maxPrice===6e6?"40-60":l.minPrice===6e6&&l.maxPrice===8e6?"60-80":l.minPrice===8e6&&l.maxPrice===1e7?"80-1cr":l.minPrice===1e7&&!l.maxPrice?"1cr+":"any-budget",onValueChange:x,children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Budget"})}),e.jsxs(g,{children:[e.jsx(a,{value:"any-budget",children:"Any Budget"}),e.jsx(a,{value:"20-40",children:"₹20L - ₹40L"}),e.jsx(a,{value:"40-60",children:"₹40L - ₹60L"}),e.jsx(a,{value:"60-80",children:"₹60L - ₹80L"}),e.jsx(a,{value:"80-1cr",children:"₹80L - ₹1Cr"}),e.jsx(a,{value:"1cr+",children:"₹1Cr+"})]})]}),e.jsx(d,{variant:"secondary",className:"ml-auto",onClick:v,children:"Reset Filters"})]})})},Y=({property:s})=>{const l=C(),{isAuthenticated:c}=S(),[o,x]=N.useState(!1),[v,t]=N.useState(!1),i=b.getPrimaryImage(s),r=b.formatPrice(s.price,s.listingType),m=b.formatArea(s.area),p=`${s.address.city}, ${s.address.state}`,w=()=>{l(c?`/customer/property/${s._id}`:"/login")};return e.jsxs(F,{className:"group overflow-hidden hover:shadow-[var(--shadow-large)] transition-all duration-300",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:i,alt:s.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:f=>{f.target.src=T}}),s.featured&&e.jsx(n,{className:"absolute top-3 left-3 bg-accent text-accent-foreground",children:"Featured"}),s.verified&&e.jsx(n,{className:"absolute top-3 left-3 mt-8 bg-green-500 text-white",children:"Verified"}),e.jsx(n,{className:`absolute top-3 right-12 ${s.status==="available"?"bg-green-500":s.status==="sold"?"bg-red-500":s.status==="rented"?"bg-blue-500":"bg-yellow-500"} text-white`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx(d,{size:"icon",variant:"ghost",className:"absolute top-3 right-3 bg-background/80 backdrop-blur hover:bg-background",children:e.jsx(B,{className:"h-5 w-5"})})]}),e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:s.title}),e.jsx(n,{variant:"secondary",children:s.listingType==="sale"?"For Sale":s.listingType==="rent"?"For Rent":"For Lease"})]}),e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm line-clamp-1",children:p})]}),e.jsx("div",{className:"text-xs text-muted-foreground mb-3 capitalize",children:s.type?s.type.replace("_"," "):"property"}),e.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:K(s)}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[s.bedrooms>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.bedrooms," BHK"]})]}),s.bathrooms>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.bathrooms," Bath"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:m})]})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:r}),s.amenities.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[s.amenities.slice(0,3).map((f,P)=>e.jsx(n,{variant:"outline",className:"text-xs",children:f},P)),s.amenities.length>3&&e.jsxs(n,{variant:"outline",className:"text-xs",children:["+",s.amenities.length-3," more"]})]})]}),e.jsxs(D,{className:"p-4 pt-0 flex gap-2",children:[e.jsxs(d,{variant:"outline",className:"flex-1",onClick:()=>x(!0),children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Message"]}),e.jsxs(d,{variant:"outline",className:"flex-1",onClick:()=>t(!0),children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Contact"]}),e.jsx(d,{className:"flex-1",onClick:w,children:"View Details"})]}),e.jsx(E,{open:o,onOpenChange:x,property:s,onMessageSent:()=>{console.log("Message sent for property:",s._id)}}),e.jsx(R,{open:v,onOpenChange:t,property:s})]})};export{U as P,Y as a};
