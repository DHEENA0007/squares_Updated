import{j as e}from"./ui-DOY6021Z.js";import{r as c,d as D}from"./router-2SVJvIbS.js";import{ar as V,q as j,r as v,s as f,v as b,w as a,f as d,u as _,ao as w,a as M,as as H,B as o,at as I,e as K,h as R,am as O,an as $,au as q,$ as S,y as G}from"./index-DJqidggL.js";import{a as z}from"./propertyUtils-DZZpAHgC.js";import{P as U,a as W}from"./PropertyContactDialog-CkRl6Ywt.js";import{E as Y}from"./EnterprisePropertyContactDialog-Do6eXw9y.js";import{vendorService as J}from"./vendorService-BtSoYHTS.js";import{S as Q}from"./square-C50VkgzQ.js";const re=({onFilterChange:s})=>{const[t,h]=c.useState({propertyType:void 0,bedrooms:void 0,minPrice:void 0,maxPrice:void 0,listingType:void 0}),m=(i,l)=>{const r={...t,[i]:l==="all"||l==="any"||l==="any-budget"?void 0:l};h(r),s(r)},u=i=>{let l,r;switch(i){case"20-40":l=2e6,r=4e6;break;case"40-60":l=4e6,r=6e6;break;case"60-80":l=6e6,r=8e6;break;case"80-1cr":l=8e6,r=1e7;break;case"1cr+":l=1e7,r=void 0;break;default:l=void 0,r=void 0}const n={...t,minPrice:l,maxPrice:r};h(n),s(n)},p=()=>{const i={propertyType:void 0,bedrooms:void 0,minPrice:void 0,maxPrice:void 0,listingType:void 0};h(i),s(i)};return e.jsx("div",{className:"bg-card border border-border rounded-xl p-4 shadow-[var(--shadow-soft)]",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx("span",{children:"Filters:"})]}),e.jsxs(j,{value:t.listingType||"all",onValueChange:i=>m("listingType",i),children:[e.jsx(v,{className:"w-[150px]",children:e.jsx(f,{placeholder:"Listing Type"})}),e.jsxs(b,{children:[e.jsx(a,{value:"all",children:"All Types"}),e.jsx(a,{value:"sale",children:"For Sale"}),e.jsx(a,{value:"rent",children:"For Rent"}),e.jsx(a,{value:"lease",children:"For Lease"})]})]}),e.jsxs(j,{value:t.propertyType||"all",onValueChange:i=>m("propertyType",i),children:[e.jsx(v,{className:"w-[180px]",children:e.jsx(f,{placeholder:"Property Type"})}),e.jsxs(b,{children:[e.jsx(a,{value:"all",children:"All Properties"}),e.jsx(a,{value:"apartment",children:"Apartment"}),e.jsx(a,{value:"villa",children:"Villa"}),e.jsx(a,{value:"house",children:"House"}),e.jsx(a,{value:"plot",children:"Plot"}),e.jsx(a,{value:"land",children:"Land"}),e.jsx(a,{value:"commercial",children:"Commercial"}),e.jsx(a,{value:"office",children:"Office"}),e.jsx(a,{value:"pg",children:"PG (Paying Guest)"})]})]}),e.jsxs(j,{value:t.bedrooms?.toString()||"any",onValueChange:i=>{const l=i==="any"?void 0:parseInt(i);m("bedrooms",l&&!isNaN(l)?l:void 0)},children:[e.jsx(v,{className:"w-[150px]",children:e.jsx(f,{placeholder:"BHK"})}),e.jsxs(b,{children:[e.jsx(a,{value:"any",children:"Any BHK"}),e.jsx(a,{value:"1",children:"1 BHK"}),e.jsx(a,{value:"2",children:"2 BHK"}),e.jsx(a,{value:"3",children:"3 BHK"}),e.jsx(a,{value:"4",children:"4+ BHK"})]})]}),e.jsxs(j,{value:t.minPrice===2e6&&t.maxPrice===4e6?"20-40":t.minPrice===4e6&&t.maxPrice===6e6?"40-60":t.minPrice===6e6&&t.maxPrice===8e6?"60-80":t.minPrice===8e6&&t.maxPrice===1e7?"80-1cr":t.minPrice===1e7&&!t.maxPrice?"1cr+":"any-budget",onValueChange:u,children:[e.jsx(v,{className:"w-[180px]",children:e.jsx(f,{placeholder:"Budget"})}),e.jsxs(b,{children:[e.jsx(a,{value:"any-budget",children:"Any Budget"}),e.jsx(a,{value:"20-40",children:"₹20L - ₹40L"}),e.jsx(a,{value:"40-60",children:"₹40L - ₹60L"}),e.jsx(a,{value:"60-80",children:"₹60L - ₹80L"}),e.jsx(a,{value:"80-1cr",children:"₹80L - ₹1Cr"}),e.jsx(a,{value:"1cr+",children:"₹1Cr+"})]})]}),e.jsx(d,{variant:"secondary",className:"ml-auto",onClick:p,children:"Reset Filters"})]})})},ne=({property:s})=>{const t=D(),{isAuthenticated:h}=_(),[m,u]=c.useState(!1),[p,i]=c.useState(!1),[l,r]=c.useState(!1),[n,P]=c.useState(!1),[C,N]=c.useState(!0),k=w.getPrimaryImage(s),y=w.formatPrice(s.price,s.listingType),E=w.formatArea(s.area),F=`${s.address.city}, ${s.address.state}`;c.useEffect(()=>{(async()=>{if(s.vendor?._id||s.owner?._id)try{N(!0);const x=s.vendor?._id||s.owner?._id,A=await J.isVendorEnterpriseProperty(x);P(A)}catch(x){console.error("Failed to check enterprise status:",x),P(!1)}finally{N(!1)}else N(!1)})()},[s.vendor?._id,s.owner?._id]);const T=()=>{t(`/property/${s._id}`)},B=()=>{n?r(!0):u(!0)},L=()=>{n?r(!0):i(!0)};return e.jsxs(M,{className:"group overflow-hidden hover:shadow-[var(--shadow-large)] transition-all duration-300",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:k,alt:s.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:g=>{g.target.src=H}}),s.featured&&e.jsx(o,{className:"absolute top-3 left-3 bg-accent text-accent-foreground",children:"Featured"}),s.verified&&e.jsx(o,{className:"absolute top-3 left-3 mt-8 bg-green-500 text-white",children:"Verified"}),e.jsx(o,{className:`absolute top-3 right-12 ${s.status==="available"?"bg-green-500":s.status==="sold"?"bg-red-500":s.status==="rented"?"bg-blue-500":"bg-yellow-500"} text-white`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx(d,{size:"icon",variant:"ghost",className:"absolute top-3 right-3 bg-background/80 backdrop-blur hover:bg-background",children:e.jsx(I,{className:"h-5 w-5"})})]}),e.jsxs(K,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:s.title}),e.jsx(o,{variant:"secondary",children:s.listingType==="sale"?"For Sale":s.listingType==="rent"?"For Rent":"For Lease"})]}),e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm line-clamp-1",children:F})]}),e.jsx("div",{className:"text-xs text-muted-foreground mb-3 capitalize",children:s.type?s.type.replace("_"," "):"property"}),e.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:z(s)}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[s.bedrooms>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.bedrooms," BHK"]})]}),s.bathrooms>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.bathrooms," Bath"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:E})]})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:y}),s.amenities.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[s.amenities.slice(0,3).map((g,x)=>e.jsx(o,{variant:"outline",className:"text-xs",children:g},x)),s.amenities.length>3&&e.jsxs(o,{variant:"outline",className:"text-xs",children:["+",s.amenities.length-3," more"]})]})]}),e.jsxs(q,{className:"p-4 pt-0 flex gap-2",children:[!C&&!n&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"outline",className:"flex-1",onClick:B,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Message"]}),e.jsxs(d,{variant:"outline",className:"flex-1",onClick:L,children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Contact"]})]}),!C&&n&&e.jsxs(d,{variant:"outline",className:"flex-1 bg-green-50 hover:bg-green-100 text-green-700 border-green-200",onClick:()=>r(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"WhatsApp Contact"]}),e.jsx(d,{className:"flex-1",onClick:T,children:"View Details"})]}),e.jsx(U,{open:m,onOpenChange:u,property:s,onMessageSent:()=>{console.log("Message sent for property:",s._id)}}),e.jsx(W,{open:p,onOpenChange:i,property:s}),e.jsx(Y,{open:l,onOpenChange:r,property:s})]})};export{re as P,ne as a};
