import{j as e}from"./ui-DHQhougw.js";import{d as s,r as t}from"./router-Bi51YGN-.js";import{y as a,t as r,f as i,A as l,a as n,b as d,c as o,e as c,J as x}from"./index-CV77Hym3.js";import{D as m}from"./download-LkklH1Ul.js";import"./vendor-eVk5PToZ.js";const h=()=>{const h=s(),[p,j]=t.useState([]),[g,u]=t.useState(!0),[f,v]=t.useState({totalFavorites:0,totalProperties:0,engagementRate:0,avgFavoritesPerProperty:0});t.useEffect(()=>{N()},[]);const N=async()=>{try{const e=a.getToken(),s=await fetch("https://api.buildhomemartsquares.com/api/favorites/all",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to fetch favorites data");const t=await s.json();if(t.success&&t.data){const{properties:e,totalFavorites:s,totalProperties:a}=t.data;j(e);const r=e.length,i=r>0?s/r*100:0;v({totalFavorites:s,totalProperties:r,engagementRate:Math.round(10*i)/10,avgFavoritesPerProperty:r>0?Math.round(s/r*10)/10:0})}}catch(e){r({title:"Error",description:"Failed to load engagement data",variant:"destructive"})}finally{u(!1)}};return g?e.jsx("div",{className:"flex justify-center items-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(i,{variant:"ghost",onClick:()=>h("/admin/dashboard"),children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Engagement Details"}),e.jsx("p",{className:"text-muted-foreground",children:"Property engagement metrics and favorite statistics"})]}),e.jsxs(i,{variant:"outline",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Export Report"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(n,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Total Properties"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.totalProperties})})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Total Favorites"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-pink-600",children:f.totalFavorites})})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Engagement Rate"})}),e.jsx(c,{children:e.jsxs("div",{className:"text-2xl font-bold text-emerald-600",children:[f.engagementRate,"%"]})})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Avg. Favorites/Property"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.avgFavoritesPerProperty})})]})]}),e.jsxs(n,{children:[e.jsx(d,{children:e.jsx(o,{children:"Properties by Engagement"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:0===p.length?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No properties found"}):p.slice(0,50).map((s,t)=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold "+(0===t?"bg-yellow-100 text-yellow-700":1===t?"bg-gray-100 text-gray-700":2===t?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:t+1})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.address.locality,", ",s.address.city]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx("p",{className:"text-sm font-medium",children:s.propertyType}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.listingType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-pink-600 fill-pink-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-600",children:s.favoriteCount}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"favorites"})]})]})]})},s._id))})})]})]})};export{h as default};
