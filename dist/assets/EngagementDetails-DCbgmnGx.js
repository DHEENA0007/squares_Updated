import{j as e}from"./ui-s1SEoZIF.js";import{d as t,r as s}from"./router-D8v2YSKU.js";import{v as a,t as r,f as i,A as l,a as n,b as d,c as o,e as c,Z as x}from"./index-YrVmIx3a.js";import{D as m}from"./download-CcUNkb54.js";import"./vendor-BxThA0WO.js";const h=()=>{const h=t(),[p,j]=s.useState([]),[g,u]=s.useState(!0),[f,v]=s.useState({totalFavorites:0,totalProperties:0,engagementRate:0,avgFavoritesPerProperty:0});s.useEffect(()=>{N()},[]);const N=async()=>{try{const e=a.getToken(),t=await fetch("https://app.buildhomemartsquares.com/api/favorites/all",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch favorites data");const s=await t.json();if(s.success&&s.data){const{properties:e,totalFavorites:t,totalProperties:a}=s.data;j(e);const r=e.length,i=r>0?t/r*100:0;v({totalFavorites:t,totalProperties:r,engagementRate:Math.round(10*i)/10,avgFavoritesPerProperty:r>0?Math.round(t/r*10)/10:0})}}catch(e){r({title:"Error",description:"Failed to load engagement data",variant:"destructive"})}finally{u(!1)}};return g?e.jsx("div",{className:"flex justify-center items-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(i,{variant:"ghost",onClick:()=>h("/admin/dashboard"),children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Engagement Details"}),e.jsx("p",{className:"text-muted-foreground",children:"Property engagement metrics and favorite statistics"})]}),e.jsxs(i,{variant:"outline",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Export Report"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(n,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Total Properties"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.totalProperties})})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Total Favorites"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-pink-600",children:f.totalFavorites})})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Engagement Rate"})}),e.jsx(c,{children:e.jsxs("div",{className:"text-2xl font-bold text-emerald-600",children:[f.engagementRate,"%"]})})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Avg. Favorites/Property"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.avgFavoritesPerProperty})})]})]}),e.jsxs(n,{children:[e.jsx(d,{children:e.jsx(o,{children:"Properties by Engagement"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:0===p.length?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No properties found"}):p.slice(0,50).map((t,s)=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold "+(0===s?"bg-yellow-100 text-yellow-700":1===s?"bg-gray-100 text-gray-700":2===s?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:s+1})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.address.locality,", ",t.address.city]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx("p",{className:"text-sm font-medium",children:t.propertyType}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.listingType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-pink-600 fill-pink-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-600",children:t.favoriteCount}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"favorites"})]})]})]})},t._id))})})]})]})};export{h as default};
