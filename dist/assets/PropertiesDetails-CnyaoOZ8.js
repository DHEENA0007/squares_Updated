import{j as e}from"./ui-DHQhougw.js";import{d as s,r as t}from"./router-Bi51YGN-.js";import{y as r,t as a,f as l,A as i,a as d,b as n,c,e as o,G as x,I as m,D as h,C as p,m as u}from"./index-CV77Hym3.js";import{D as j}from"./download-LkklH1Ul.js";import"./vendor-eVk5PToZ.js";const f=()=>{const f=s(),[g,N]=t.useState([]),[v,y]=t.useState([]),[w,b]=t.useState(!0),[P,C]=t.useState(""),[L,D]=t.useState({totalProperties:0,thisMonthProperties:0,activeProperties:0,pendingProperties:0,soldProperties:0});t.useEffect(()=>{S()},[]),t.useEffect(()=>{if(P){const e=g.filter(e=>e.title.toLowerCase().includes(P.toLowerCase())||e.propertyType.toLowerCase().includes(P.toLowerCase())||e.address.city?.toLowerCase().includes(P.toLowerCase())||e.status.toLowerCase().includes(P.toLowerCase()));y(e)}else y(g)},[P,g]);const S=async()=>{try{const e=r.getToken(),s=await fetch("https://api.buildhomemartsquares.com/api/properties?limit=1000",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to fetch properties data");const t=await s.json();if(t.success){const e=t.data.properties;N(e),y(e);const s=new Date,r=new Date(s.getFullYear(),s.getMonth(),1),a=e.filter(e=>new Date(e.createdAt)>=r).length;D({totalProperties:e.length,thisMonthProperties:a,activeProperties:e.filter(e=>"available"===e.status).length,pendingProperties:e.filter(e=>"pending"===e.status).length,soldProperties:e.filter(e=>["sold","rented","leased"].includes(e.status)).length})}}catch(e){a({title:"Error",description:"Failed to load properties data",variant:"destructive"})}finally{b(!1)}},T=s=>{switch(s){case"available":case"active":return e.jsx(p,{className:"w-4 h-4 text-green-600"});case"pending":return e.jsx(u,{className:"w-4 h-4 text-yellow-600"});case"sold":case"rented":case"leased":return e.jsx(p,{className:"w-4 h-4 text-blue-600"});default:return e.jsx(h,{className:"w-4 h-4 text-red-600"})}};return w?e.jsx("div",{className:"flex justify-center items-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(l,{variant:"ghost",onClick:()=>f("/admin/dashboard"),children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Properties Details"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete property listings and statistics"})]}),e.jsxs(l,{variant:"outline",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Export Properties"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsxs(d,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Total Properties"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:L.totalProperties})})]}),e.jsxs(d,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"This Month"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:L.thisMonthProperties})})]}),e.jsxs(d,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Available"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:L.activeProperties})})]}),e.jsxs(d,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Pending"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:L.pendingProperties})})]}),e.jsxs(d,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Sold/Rented"})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:L.soldProperties})})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(m,{placeholder:"Search properties by title, type, city, or status...",value:P,onChange:e=>C(e.target.value),className:"pl-10"})]})}),e.jsxs(d,{children:[e.jsx(n,{children:e.jsxs(c,{children:["All Properties (",v.length,")"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:0===v.length?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No properties found"}):v.map(s=>{return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.address.locality,", ",s.address.city]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx("p",{className:"text-sm font-medium",children:s.propertyType}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.listingType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("p",{className:"font-bold text-emerald-600",children:(r=s.price,s.currency,`â‚¹${r.toLocaleString("en-IN")}`)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Listed"}),e.jsx("p",{className:"text-sm",children:(t=s.createdAt,new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[T(s.status),e.jsx("span",{className:"text-sm capitalize",children:s.status})]})]})},s._id);var t,r})})})]})]})};export{f as default};
