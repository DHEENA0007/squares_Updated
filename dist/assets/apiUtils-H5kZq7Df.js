const t="https://api.buildhomemartsquares.com/api";async function e(t){const e=t.headers.get("content-type");if(!t.ok){if(e&&e.includes("application/json")){const e=await t.json().catch(()=>({message:`HTTP ${t.status}: ${t.statusText}`}));throw new Error(e.message||`HTTP ${t.status}: ${t.statusText}`)}throw await t.text().catch(()=>""),new Error(`Invalid response format: Expected JSON but got ${e||"unknown"}`)}if(!e||!e.includes("application/json"))throw new Error(`Invalid response format: Expected JSON but got ${e||"unknown"}`);return t.json()}async function s(e,s={}){const a=localStorage.getItem("token");let n;if(e.startsWith("http"))n=e;else if(e.startsWith("/api")){n=`${t.replace("/api","")}${e}`}else n=`${t}${e}`;const o={"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...s.headers};return fetch(n,{...s,headers:o})}export{s as f,e as h};
