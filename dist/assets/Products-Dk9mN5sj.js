import{j as e}from"./ui-DHQhougw.js";import{h as s,r as t}from"./router-Bi51YGN-.js";import{P as r,a}from"./PropertyCard-DZYY_9_2.js";import{H as i,I as l,O as o,f as n,ax as c,t as p}from"./index-D7KzNfIb.js";import{P as d,a as m,b as x,c as j,d as h,f as g,e as u}from"./pagination-CgrKFRZ6.js";import"./vendor-eVk5PToZ.js";import"./propertyUtils-41DuwCMc.js";import"./PropertyContactDialog-CSYlJ6wO.js";import"./messageService-ep_MLnIS.js";import"./send-BNANvshm.js";import"./EnterprisePropertyContactDialog-BdfkeD60.js";import"./dollar-sign-DGVqv-Gg.js";import"./vendorService-DQhsavna.js";import"./reviewsService-9cO6P0ol.js";import"./square-CR2wOjyr.js";import"./ellipsis-BjXLGPaY.js";const f=()=>{const[f]=s(),[v,y]=t.useState(1),[N,S]=t.useState(""),[b,C]=t.useState([]),[P,w]=t.useState(!0),[k,D]=t.useState(0),[E,F]=t.useState(0),[T,A]=t.useState({});t.useEffect(()=>{const e=f.get("listingType"),s=f.get("propertyType"),t=f.get("search"),r={};e&&"all"!==e&&(r.listingType=e),s&&"all"!==s&&(r.propertyType=s),t&&S(t),A(r),y(1)},[f]),t.useEffect(()=>{(async()=>{w(!0);try{const e={page:v,limit:12,search:N||void 0,...T},s=await c.getProperties(e);s.success&&(C(s.data.properties),D(s.data.pagination.totalPages),F(s.data.pagination.totalProperties))}catch(e){p({title:"Error",description:"Failed to load properties. Please try again.",variant:"destructive"})}finally{w(!1)}})()},[v,N,T]);const I=12*(v-1),L=Math.min(I+12,E);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(l,{type:"text",placeholder:"Search properties by location, type...",className:"pl-10 h-12",value:N,onChange:e=>{return s=e.target.value,S(s),void y(1);var s}})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:e.jsx(r,{onFilterChange:e=>{A(e),y(1)}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),e.jsx("p",{className:"text-muted-foreground",children:P?"Loading properties...":e.jsxs(e.Fragment,{children:["Showing ",I+1,"-",L," of ",E," properties"]})})]}),P?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(o,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):0===b.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No properties found matching your criteria."}),e.jsx(n,{onClick:()=>{A({}),S(""),y(1)},variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6 mb-8",children:b.map(s=>e.jsx(a,{property:s},s._id))}),!P&&b.length>0&&k>1&&e.jsx(d,{children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(j,{href:"#",onClick:e=>{e.preventDefault(),v>1&&y(v-1)},className:1===v?"pointer-events-none opacity-50":""})}),[...Array(k)].map((s,t)=>{const r=t+1;return 1===r||r===k||r>=v-1&&r<=v+1?e.jsx(x,{children:e.jsx(h,{href:"#",onClick:e=>{e.preventDefault(),y(r)},isActive:v===r,children:r})},r):r===v-2||r===v+2?e.jsx(x,{children:e.jsx(g,{})},r):null}),e.jsx(x,{children:e.jsx(u,{href:"#",onClick:e=>{e.preventDefault(),v<k&&y(v+1)},className:v===k?"pointer-events-none opacity-50":""})})]})})]})]})]})};export{f as default};
