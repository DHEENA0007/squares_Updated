import{H as z,P as D,U as Ae,V as $e,W as Me,X as De,Y as G,j as v}from"./ui-DOY6021Z.js";import{r as l}from"./router-2SVJvIbS.js";import{A as Pe,g as A,H as Le,P as Fe,i as Ve,f as Ke,k as qe,l as ze,m as te}from"./index-SPvHGBGF.js";import"./dialog-LNpiSwLW.js";import{L as Oe}from"./loader-circle-B83afoI3.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=Pe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var pe=1,Be=.9,Ge=.8,He=.17,re=.1,ne=.999,Te=.9999,We=.99,Qe=/[\\\/_+.#"@\[\(\{&]/,Xe=/[\\\/_+.#"@\[\(\{&]/g,Ye=/[\s-]/,ge=/[\s-]/g;function ae(e,n,t,d,a,s,m){if(s===n.length)return a===e.length?pe:We;var p=`${a},${s}`;if(m[p]!==void 0)return m[p];for(var b=d.charAt(s),i=t.indexOf(b,a),h=0,x,S,k,j;i>=0;)x=ae(e,n,t,d,i+1,s+1,m),x>h&&(i===a?x*=pe:Qe.test(e.charAt(i-1))?(x*=Ge,k=e.slice(a,i-1).match(Xe),k&&a>0&&(x*=Math.pow(ne,k.length))):Ye.test(e.charAt(i-1))?(x*=Be,j=e.slice(a,i-1).match(ge),j&&a>0&&(x*=Math.pow(ne,j.length))):(x*=He,a>0&&(x*=Math.pow(ne,i-a))),e.charAt(i)!==n.charAt(s)&&(x*=Te)),(x<re&&t.charAt(i-1)===d.charAt(s+1)||d.charAt(s+1)===d.charAt(s)&&t.charAt(i-1)!==d.charAt(s))&&(S=ae(e,n,t,d,i+1,s+2,m),S*re>x&&(x=S*re)),x>h&&(h=x),i=t.indexOf(b,i+1);return m[p]=h,h}function ve(e){return e.toLowerCase().replace(ge," ")}function Je(e,n,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,ae(e,n,ve(e),ve(n),0,0,{})}var B='[cmdk-group=""]',le='[cmdk-group-items=""]',Ze='[cmdk-group-heading=""]',xe='[cmdk-item=""]',he=`${xe}:not([aria-disabled="true"])`,oe="cmdk-item-select",K="data-value",_e=(e,n,t)=>Je(e,n,t),be=l.createContext(void 0),H=()=>l.useContext(be),ye=l.createContext(void 0),ie=()=>l.useContext(ye),we=l.createContext(void 0),ke=l.forwardRef((e,n)=>{let t=q(()=>{var r,u;return{search:"",value:(u=(r=e.value)!=null?r:e.defaultValue)!=null?u:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),d=q(()=>new Set),a=q(()=>new Map),s=q(()=>new Map),m=q(()=>new Set),p=Se(e),{label:b,children:i,value:h,onValueChange:x,filter:S,shouldFilter:k,loop:j,disablePointerSelection:P=!1,vimBindings:I=!0,...$}=e,F=z(),T=z(),O=z(),R=l.useRef(null),c=ct();L(()=>{if(h!==void 0){let r=h.trim();t.current.value=r,w.emit()}},[h]),L(()=>{c(6,ue)},[]);let w=l.useMemo(()=>({subscribe:r=>(m.current.add(r),()=>m.current.delete(r)),snapshot:()=>t.current,setState:(r,u,f)=>{var o,g,y,N;if(!Object.is(t.current[r],u)){if(t.current[r]=u,r==="search")Z(),Y(),c(1,J);else if(r==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let E=document.getElementById(O);E?E.focus():(o=document.getElementById(F))==null||o.focus()}if(c(7,()=>{var E;t.current.selectedItemId=(E=V())==null?void 0:E.id,w.emit()}),f||c(5,ue),((g=p.current)==null?void 0:g.value)!==void 0){let E=u??"";(N=(y=p.current).onValueChange)==null||N.call(y,E);return}}w.emit()}},emit:()=>{m.current.forEach(r=>r())}}),[]),X=l.useMemo(()=>({value:(r,u,f)=>{var o;u!==((o=s.current.get(r))==null?void 0:o.value)&&(s.current.set(r,{value:u,keywords:f}),t.current.filtered.items.set(r,se(u,f)),c(2,()=>{Y(),w.emit()}))},item:(r,u)=>(d.current.add(r),u&&(a.current.has(u)?a.current.get(u).add(r):a.current.set(u,new Set([r]))),c(3,()=>{Z(),Y(),t.current.value||J(),w.emit()}),()=>{s.current.delete(r),d.current.delete(r),t.current.filtered.items.delete(r);let f=V();c(4,()=>{Z(),f?.getAttribute("id")===r&&J(),w.emit()})}),group:r=>(a.current.has(r)||a.current.set(r,new Set),()=>{s.current.delete(r),a.current.delete(r)}),filter:()=>p.current.shouldFilter,label:b||e["aria-label"],getDisablePointerSelection:()=>p.current.disablePointerSelection,listId:F,inputId:O,labelId:T,listInnerRef:R}),[]);function se(r,u){var f,o;let g=(o=(f=p.current)==null?void 0:f.filter)!=null?o:_e;return r?g(r,t.current.search,u):0}function Y(){if(!t.current.search||p.current.shouldFilter===!1)return;let r=t.current.filtered.items,u=[];t.current.filtered.groups.forEach(o=>{let g=a.current.get(o),y=0;g.forEach(N=>{let E=r.get(N);y=Math.max(E,y)}),u.push([o,y])});let f=R.current;U().sort((o,g)=>{var y,N;let E=o.getAttribute("id"),W=g.getAttribute("id");return((y=r.get(W))!=null?y:0)-((N=r.get(E))!=null?N:0)}).forEach(o=>{let g=o.closest(le);g?g.appendChild(o.parentElement===g?o:o.closest(`${le} > *`)):f.appendChild(o.parentElement===f?o:o.closest(`${le} > *`))}),u.sort((o,g)=>g[1]-o[1]).forEach(o=>{var g;let y=(g=R.current)==null?void 0:g.querySelector(`${B}[${K}="${encodeURIComponent(o[0])}"]`);y?.parentElement.appendChild(y)})}function J(){let r=U().find(f=>f.getAttribute("aria-disabled")!=="true"),u=r?.getAttribute(K);w.setState("value",u||void 0)}function Z(){var r,u,f,o;if(!t.current.search||p.current.shouldFilter===!1){t.current.filtered.count=d.current.size;return}t.current.filtered.groups=new Set;let g=0;for(let y of d.current){let N=(u=(r=s.current.get(y))==null?void 0:r.value)!=null?u:"",E=(o=(f=s.current.get(y))==null?void 0:f.keywords)!=null?o:[],W=se(N,E);t.current.filtered.items.set(y,W),W>0&&g++}for(let[y,N]of a.current)for(let E of N)if(t.current.filtered.items.get(E)>0){t.current.filtered.groups.add(y);break}t.current.filtered.count=g}function ue(){var r,u,f;let o=V();o&&(((r=o.parentElement)==null?void 0:r.firstChild)===o&&((f=(u=o.closest(B))==null?void 0:u.querySelector(Ze))==null||f.scrollIntoView({block:"nearest"})),o.scrollIntoView({block:"nearest"}))}function V(){var r;return(r=R.current)==null?void 0:r.querySelector(`${xe}[aria-selected="true"]`)}function U(){var r;return Array.from(((r=R.current)==null?void 0:r.querySelectorAll(he))||[])}function _(r){let u=U()[r];u&&w.setState("value",u.getAttribute(K))}function ee(r){var u;let f=V(),o=U(),g=o.findIndex(N=>N===f),y=o[g+r];(u=p.current)!=null&&u.loop&&(y=g+r<0?o[o.length-1]:g+r===o.length?o[0]:o[g+r]),y&&w.setState("value",y.getAttribute(K))}function ce(r){let u=V(),f=u?.closest(B),o;for(;f&&!o;)f=r>0?st(f,B):ut(f,B),o=f?.querySelector(he);o?w.setState("value",o.getAttribute(K)):ee(r)}let de=()=>_(U().length-1),me=r=>{r.preventDefault(),r.metaKey?de():r.altKey?ce(1):ee(1)},fe=r=>{r.preventDefault(),r.metaKey?_(0):r.altKey?ce(-1):ee(-1)};return l.createElement(D.div,{ref:n,tabIndex:-1,...$,"cmdk-root":"",onKeyDown:r=>{var u;(u=$.onKeyDown)==null||u.call($,r);let f=r.nativeEvent.isComposing||r.keyCode===229;if(!(r.defaultPrevented||f))switch(r.key){case"n":case"j":{I&&r.ctrlKey&&me(r);break}case"ArrowDown":{me(r);break}case"p":case"k":{I&&r.ctrlKey&&fe(r);break}case"ArrowUp":{fe(r);break}case"Home":{r.preventDefault(),_(0);break}case"End":{r.preventDefault(),de();break}case"Enter":{r.preventDefault();let o=V();if(o){let g=new Event(oe);o.dispatchEvent(g)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:X.inputId,id:X.labelId,style:mt},b),Q(e,r=>l.createElement(ye.Provider,{value:w},l.createElement(be.Provider,{value:X},r))))}),et=l.forwardRef((e,n)=>{var t,d;let a=z(),s=l.useRef(null),m=l.useContext(we),p=H(),b=Se(e),i=(d=(t=b.current)==null?void 0:t.forceMount)!=null?d:m?.forceMount;L(()=>{if(!i)return p.item(a,m?.id)},[i]);let h=Ee(a,s,[e.value,e.children,s],e.keywords),x=ie(),S=M(c=>c.value&&c.value===h.current),k=M(c=>i||p.filter()===!1?!0:c.search?c.filtered.items.get(a)>0:!0);l.useEffect(()=>{let c=s.current;if(!(!c||e.disabled))return c.addEventListener(oe,j),()=>c.removeEventListener(oe,j)},[k,e.onSelect,e.disabled]);function j(){var c,w;P(),(w=(c=b.current).onSelect)==null||w.call(c,h.current)}function P(){x.setState("value",h.current,!0)}if(!k)return null;let{disabled:I,value:$,onSelect:F,forceMount:T,keywords:O,...R}=e;return l.createElement(D.div,{ref:G(s,n),...R,id:a,"cmdk-item":"",role:"option","aria-disabled":!!I,"aria-selected":!!S,"data-disabled":!!I,"data-selected":!!S,onPointerMove:I||p.getDisablePointerSelection()?void 0:P,onClick:I?void 0:j},e.children)}),tt=l.forwardRef((e,n)=>{let{heading:t,children:d,forceMount:a,...s}=e,m=z(),p=l.useRef(null),b=l.useRef(null),i=z(),h=H(),x=M(k=>a||h.filter()===!1?!0:k.search?k.filtered.groups.has(m):!0);L(()=>h.group(m),[]),Ee(m,p,[e.value,e.heading,b]);let S=l.useMemo(()=>({id:m,forceMount:a}),[a]);return l.createElement(D.div,{ref:G(p,n),...s,"cmdk-group":"",role:"presentation",hidden:x?void 0:!0},t&&l.createElement("div",{ref:b,"cmdk-group-heading":"","aria-hidden":!0,id:i},t),Q(e,k=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?i:void 0},l.createElement(we.Provider,{value:S},k))))}),rt=l.forwardRef((e,n)=>{let{alwaysRender:t,...d}=e,a=l.useRef(null),s=M(m=>!m.search);return!t&&!s?null:l.createElement(D.div,{ref:G(a,n),...d,"cmdk-separator":"",role:"separator"})}),nt=l.forwardRef((e,n)=>{let{onValueChange:t,...d}=e,a=e.value!=null,s=ie(),m=M(i=>i.search),p=M(i=>i.selectedItemId),b=H();return l.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),l.createElement(D.input,{ref:n,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":b.listId,"aria-labelledby":b.labelId,"aria-activedescendant":p,id:b.inputId,type:"text",value:a?e.value:m,onChange:i=>{a||s.setState("search",i.target.value),t?.(i.target.value)}})}),lt=l.forwardRef((e,n)=>{let{children:t,label:d="Suggestions",...a}=e,s=l.useRef(null),m=l.useRef(null),p=M(i=>i.selectedItemId),b=H();return l.useEffect(()=>{if(m.current&&s.current){let i=m.current,h=s.current,x,S=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let k=i.offsetHeight;h.style.setProperty("--cmdk-list-height",k.toFixed(1)+"px")})});return S.observe(i),()=>{cancelAnimationFrame(x),S.unobserve(i)}}},[]),l.createElement(D.div,{ref:G(s,n),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":p,"aria-label":d,id:b.listId},Q(e,i=>l.createElement("div",{ref:G(m,b.listInnerRef),"cmdk-list-sizer":""},i)))}),at=l.forwardRef((e,n)=>{let{open:t,onOpenChange:d,overlayClassName:a,contentClassName:s,container:m,...p}=e;return l.createElement(Ae,{open:t,onOpenChange:d},l.createElement($e,{container:m},l.createElement(Me,{"cmdk-overlay":"",className:a}),l.createElement(De,{"aria-label":e.label,"cmdk-dialog":"",className:s},l.createElement(ke,{ref:n,...p}))))}),ot=l.forwardRef((e,n)=>M(t=>t.filtered.count===0)?l.createElement(D.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),it=l.forwardRef((e,n)=>{let{progress:t,children:d,label:a="Loading...",...s}=e;return l.createElement(D.div,{ref:n,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Q(e,m=>l.createElement("div",{"aria-hidden":!0},m)))}),C=Object.assign(ke,{List:lt,Item:et,Input:nt,Group:tt,Separator:rt,Dialog:at,Empty:ot,Loading:it});function st(e,n){let t=e.nextElementSibling;for(;t;){if(t.matches(n))return t;t=t.nextElementSibling}}function ut(e,n){let t=e.previousElementSibling;for(;t;){if(t.matches(n))return t;t=t.previousElementSibling}}function Se(e){let n=l.useRef(e);return L(()=>{n.current=e}),n}var L=typeof window>"u"?l.useEffect:l.useLayoutEffect;function q(e){let n=l.useRef();return n.current===void 0&&(n.current=e()),n}function M(e){let n=ie(),t=()=>e(n.snapshot());return l.useSyncExternalStore(n.subscribe,t,t)}function Ee(e,n,t,d=[]){let a=l.useRef(),s=H();return L(()=>{var m;let p=(()=>{var i;for(let h of t){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(i=h.current.textContent)==null?void 0:i.trim():a.current}})(),b=d.map(i=>i.trim());s.value(e,p,b),(m=n.current)==null||m.setAttribute(K,p),a.current=p}),a}var ct=()=>{let[e,n]=l.useState(),t=q(()=>new Map);return L(()=>{t.current.forEach(d=>d()),t.current=new Map},[e]),(d,a)=>{t.current.set(d,a),n({})}};function dt(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function Q({asChild:e,children:n},t){return e&&l.isValidElement(n)?l.cloneElement(dt(n),{ref:n.ref},t(n.props.children)):t(n)}var mt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ce=l.forwardRef(({className:e,...n},t)=>v.jsx(C,{ref:t,className:A("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));Ce.displayName=C.displayName;const Ne=l.forwardRef(({className:e,...n},t)=>v.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[v.jsx(Le,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),v.jsx(C.Input,{ref:t,className:A("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...n})]}));Ne.displayName=C.Input.displayName;const ft=l.forwardRef(({className:e,...n},t)=>v.jsx(C.List,{ref:t,className:A("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n}));ft.displayName=C.List.displayName;const je=l.forwardRef((e,n)=>v.jsx(C.Empty,{ref:n,className:"py-6 text-center text-sm",...e}));je.displayName=C.Empty.displayName;const Ie=l.forwardRef(({className:e,...n},t)=>v.jsx(C.Group,{ref:t,className:A("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));Ie.displayName=C.Group.displayName;const pt=l.forwardRef(({className:e,...n},t)=>v.jsx(C.Separator,{ref:t,className:A("-mx-1 h-px bg-border",e),...n}));pt.displayName=C.Separator.displayName;const Re=l.forwardRef(({className:e,...n},t)=>v.jsx(C.Item,{ref:t,className:A("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...n}));Re.displayName=C.Item.displayName;function yt({value:e,onChange:n,state:t,district:d,city:a,placeholder:s="Select pincode...",disabled:m=!1,className:p,error:b}){const[i,h]=l.useState(!1),[x,S]=l.useState([]),[k,j]=l.useState(!1),[P,I]=l.useState(""),[$,F]=l.useState(!1);l.useEffect(()=>{(async()=>{if(te.isReady())F(!0);else{j(!0);try{await te.initialize(),F(!0)}catch(w){console.error("Failed to initialize loca service:",w)}finally{j(!1)}}})()},[]),l.useEffect(()=>{if(!$)return;(()=>{try{const w=te.getPincodeSuggestions(t,d,a,P);S(w)}catch(w){console.error("Error loading pincode suggestions:",w),S([])}})()},[t,d,a,P,$]);const T=c=>{n(c.pincode,c),h(!1),I("")},O=()=>{if(!e)return s;const c=x.find(w=>w.pincode===e);return c?`${c.pincode} - ${c.city}`:e},R=m||!$||!t&&!d&&!a;return v.jsxs("div",{className:A("relative",p),children:[v.jsxs(Fe,{open:i,onOpenChange:h,children:[v.jsx(Ve,{asChild:!0,children:v.jsxs(Ke,{variant:"outline",role:"combobox","aria-expanded":i,className:A("w-full justify-between",!e&&"text-muted-foreground",b&&"border-red-500"),disabled:R,children:[v.jsx("span",{className:"truncate",children:k?v.jsxs("span",{className:"flex items-center",children:[v.jsx(Oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):O()}),v.jsx(Ue,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),v.jsx(qe,{className:"w-full p-0",align:"start",children:v.jsxs(Ce,{children:[v.jsx(Ne,{placeholder:"Search pincode...",value:P,onValueChange:I}),v.jsx(je,{children:!t&&!d&&!a?v.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"Please select state, district, or city first"}):v.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"No pincodes found"})}),v.jsx(Ie,{className:"max-h-64 overflow-auto",children:x.map(c=>v.jsxs(Re,{value:c.pincode,onSelect:()=>T(c),children:[v.jsx(ze,{className:A("mr-2 h-4 w-4",e===c.pincode?"opacity-100":"opacity-0")}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"font-medium",children:c.pincode}),v.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.city,", ",c.district,", ",c.state]})]})]},`${c.pincode}-${c.city}`))})]})})]}),b&&v.jsx("p",{className:"mt-1 text-sm text-red-500",children:b}),!t&&!d&&!a&&!b&&v.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Select state, district, or city to see available pincodes"})]})}export{Ce as C,yt as P,Ne as a,ft as b,je as c,Ie as d,Re as e};
