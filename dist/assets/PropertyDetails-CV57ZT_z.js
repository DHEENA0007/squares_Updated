import{j as e}from"./ui-s1SEoZIF.js";import{e as s,d as a,r as t,L as r}from"./router-D8v2YSKU.js";import{a2 as i,aO as l,bE as d,f as c,A as n,k as m,ad as o,B as x,Q as h,a as j,e as p,b as u,c as f,aM as N,aN as g,aL as y,E as v,U as b,a1 as w,y as P,g as T}from"./index-xsqbJ4m0.js";import{P as k}from"./pen-line-BB8b5nxt.js";import{T as S}from"./trending-up-pGp2EKGV.js";import{E as A}from"./external-link-BAap8F3q.js";import{S as F}from"./share-2-DkprTokB.js";import"./vendor-BxThA0WO.js";const E=()=>{const{id:E}=s(),C=a(),{toast:L}=i(),[B,D]=t.useState(null),[U,z]=t.useState(!0),[V,$]=t.useState(!1);t.useEffect(()=>{E&&_(E)},[E]);const _=async e=>{try{z(!0);const s=await l.getProperty(e);D(s.data.property)}catch(s){L({title:"Error",description:"Failed to load property details",variant:"destructive"}),C("/vendor/properties")}finally{z(!1)}},O=async()=>{if(B&&window.confirm("Are you sure you want to delete this property? This action cannot be undone."))try{$(!0),await l.deleteProperty(B._id),L({title:"Success",description:"Property deleted successfully"}),C("/vendor/properties")}catch(e){L({title:"Error",description:"Failed to delete property",variant:"destructive"})}finally{$(!1)}},Q=async()=>{if(B)try{await l.togglePropertyFeatured(B._id,!B.featured),D(e=>e?{...e,featured:!e.featured}:e),L({title:"Success",description:`Property ${B.featured?"unfeatured":"promoted"} successfully`})}catch(e){L({title:"Error",description:"Failed to update property status",variant:"destructive"})}},q=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return U?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading property details..."})]})}):B?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>C("/vendor/properties"),children:e.jsx(n,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:B.title}),e.jsxs("p",{className:"text-muted-foreground flex items-center mt-1",children:[e.jsx(m,{className:"w-4 h-4 mr-1"}),(e=>{const s=[];return e.address.locationName&&s.push(e.address.locationName),e.address.city&&s.push(e.address.city),e.address.district&&s.push(e.address.district),e.address.state&&s.push(e.address.state),e.address.pincode&&s.push(e.address.pincode),s.join(", ")})(B)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{to:`/vendor/properties/edit/${B._id}`,children:e.jsxs(c,{variant:"outline",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Edit"]})}),e.jsxs(c,{variant:"outline",onClick:Q,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),B.featured?"Unfeature":"Promote"]}),e.jsx(c,{variant:"destructive",onClick:O,disabled:V,children:V?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:`${l.getStatusColor(B.status)} text-white`,children:l.getStatusText(B.status)}),B.featured&&e.jsxs(x,{variant:"secondary",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),"Featured"]}),B.verified&&e.jsx(x,{className:"bg-green-600 text-white",children:"Verified"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-3xl font-bold text-primary",children:l.formatPrice(B.price,B.listingType)})})]}),B.images&&B.images.length>0&&e.jsx(j,{children:e.jsx(p,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.images.map((s,a)=>e.jsxs("div",{className:"relative aspect-video bg-muted rounded-lg overflow-hidden",children:[e.jsx("img",{src:s.url,alt:s.caption||`Property image ${a+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200"}),s.isPrimary&&e.jsx(x,{className:"absolute top-3 left-3 bg-primary text-white",children:"Primary Photo"}),s.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white p-2",children:e.jsx("p",{className:"text-sm",children:s.caption})})]},a))})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(j,{children:[e.jsx(u,{children:e.jsxs(f,{className:"flex items-center",children:[e.jsx(d,{className:"w-5 h-5 mr-2"}),"Property Overview"]})}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[B.bedrooms>0&&e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(N,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:B.bedrooms}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bedrooms"})]}),B.bathrooms>0&&e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(g,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:B.bathrooms}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bathrooms"})]}),l.hasValidArea(B.area)&&e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(y,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:l.formatArea(B.area).split(" ")[0]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sq Ft"})]}),B.type&&e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(d,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold capitalize",children:B.type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"})]})]}),B.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:B.description})]})]})]}),e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(f,{children:"Property Details"})}),e.jsx(p,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[B.type&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Property Type:"}),e.jsx("span",{className:"font-medium capitalize",children:B.type})]}),B.listingType&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listing Type:"}),e.jsx("span",{className:"font-medium capitalize",children:B.listingType})]}),B.bedrooms>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bedrooms:"}),e.jsx("span",{className:"font-medium",children:B.bedrooms})]}),B.bathrooms>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bathrooms:"}),e.jsx("span",{className:"font-medium",children:B.bathrooms})]})]}),e.jsxs("div",{className:"space-y-3",children:[l.hasValidArea(B.area)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Area:"}),e.jsx("span",{className:"font-medium",children:l.formatArea(B.area)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"font-medium capitalize",children:B.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listed On:"}),e.jsx("span",{className:"font-medium",children:q(B.createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"}),e.jsx("span",{className:"font-medium",children:q(B.updatedAt)})]})]})]})})]}),B.amenities&&B.amenities.length>0&&e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(f,{children:"Amenities"})}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:B.amenities.map((s,a)=>e.jsxs("div",{className:"flex items-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:s})]},a))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(u,{children:e.jsxs(f,{className:"flex items-center",children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"Performance"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"w-4 h-4 mr-2 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Views"})]}),e.jsx("span",{className:"font-semibold",children:B.views})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"w-4 h-4 mr-2 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Leads"})]}),e.jsx("span",{className:"font-semibold",children:"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"w-4 h-4 mr-2 text-red-600"}),e.jsx("span",{className:"text-sm",children:"Favorites"})]}),e.jsx("span",{className:"font-semibold",children:"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"w-4 h-4 mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Phone Calls"})]}),e.jsx("span",{className:"font-semibold",children:"0"})]})]})]}),e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(f,{children:"Quick Actions"})}),e.jsxs(p,{className:"space-y-3",children:[B.virtualTour&&e.jsxs(c,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open(B.virtualTour,"_blank"),children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Virtual Tour"]}),e.jsx(r,{to:`/vendor/properties/edit/${B._id}`,children:e.jsxs(c,{variant:"outline",className:"w-full justify-start",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Edit Property"]})}),e.jsxs(c,{variant:"outline",className:"w-full justify-start",onClick:Q,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),B.featured?"Unfeature Property":"Promote Property"]}),e.jsxs(c,{variant:"outline",className:"w-full justify-start",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Share Property"]}),e.jsx(T,{}),e.jsxs(c,{variant:"destructive",className:"w-full justify-start",onClick:O,disabled:V,children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Delete Property"]})]})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Property Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The property you're looking for doesn't exist."}),e.jsx(r,{to:"/vendor/properties",children:e.jsxs(c,{children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Back to Properties"]})})]})};export{E as default};
