import{z as t,t as e}from"./index-Ds-LUfCl.js";const r=new class{baseUrl="http://localhost:3001/api";async makeRequest(e,r={}){const a=`${this.baseUrl}${e}`,s={headers:{"Content-Type":"application/json",...r.headers},...r},o=t.getToken();o&&(s.headers={...s.headers,Authorization:`Bearer ${o}`});try{const t=await fetch(a,s);if(!t.ok){const e=await t.json().catch(()=>({success:!1,message:`HTTP ${t.status}: ${t.statusText}`}));throw new Error(e.message||"An error occurred")}return await t.json()}catch(i){throw i}}async getFavorites(t={}){try{const e=new URLSearchParams;Object.entries(t).forEach(([t,r])=>{null!=r&&""!==r&&e.append(t,String(r))});const r="/favorites"+(e.toString()?`?${e.toString()}`:"");return await this.makeRequest(r)}catch(r){const t=r instanceof Error?r.message:"Failed to fetch favorites";throw e({title:"Error",description:t,variant:"destructive"}),r}}async addToFavorites(t){try{const r=await this.makeRequest(`/favorites/${t}`,{method:"POST"});return e({title:"Success",description:"Property added to favorites!"}),r}catch(r){const t=r instanceof Error?r.message:"Failed to add to favorites";throw e({title:"Error",description:t,variant:"destructive"}),r}}async removeFromFavorites(t){try{await this.makeRequest(`/favorites/${t}`,{method:"DELETE"}),e({title:"Success",description:"Property removed from favorites!"})}catch(r){const t=r instanceof Error?r.message:"Failed to remove from favorites";throw e({title:"Error",description:t,variant:"destructive"}),r}}async isFavorite(t){try{return(await this.makeRequest(`/favorites/check/${t}`)).data.isFavorite}catch(e){return!1}}async getFavoriteStats(){try{return await this.makeRequest("/favorites/stats")}catch(t){const r=t instanceof Error?t.message:"Failed to fetch favorite statistics";throw e({title:"Error",description:r,variant:"destructive"}),t}}formatPrice(t){return t>=1e7?`₹${(t/1e7).toFixed(1)} Cr`:t>=1e5?`₹${(t/1e5).toFixed(0)} Lac`:`₹${t.toLocaleString()}`}formatPricePerSqFt(t,e){const r=Math.round(t/e);return this.formatPrice(r)}formatDate(t){return new Date(t).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}getPropertyStatusBadge(t){const e=t?.status||"available";switch(e.toLowerCase()){case"sold":return{variant:"destructive",label:"Sold"};case"rented":return{variant:"secondary",label:"Rented"};case"pending":return{variant:"outline",label:"Under Review"};case"rejected":return{variant:"destructive",label:"Rejected"};case"active":case"available":return{variant:"default",label:"Available"};default:return{variant:"outline",label:e.charAt(0).toUpperCase()+e.slice(1)}}}getTimeAgo(t){const e=new Date(t),r=(new Date).getTime()-e.getTime(),a=Math.floor(r/864e5);return 0===a?"Today":1===a?"Yesterday":a<7?`${a} days ago`:a<30?`${Math.floor(a/7)} weeks ago`:`${Math.floor(a/30)} months ago`}};export{r as f};
