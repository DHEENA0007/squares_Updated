import{j as e}from"./ui-s1SEoZIF.js";import{r as o}from"./router-D8v2YSKU.js";import{f as r}from"./index-l5vY_naC.js";import{E as s}from"./external-link-BgSknvTE.js";const t=({url:t,className:l="",title:i="Virtual Tour"})=>{const[a,m]=o.useState(!1);if(!t)return null;const c=(e=>{if(!e)return"";if(e.includes("youtube.com/watch?v=")){const o=e.split("v=")[1]?.split("&")[0];return`https://www.youtube.com/embed/${o}`}if(e.includes("youtu.be/")){const o=e.split("youtu.be/")[1]?.split("?")[0];return`https://www.youtube.com/embed/${o}`}if(e.includes("vimeo.com/")){const o=e.split("vimeo.com/")[1]?.split("?")[0];return`https://player.vimeo.com/video/${o}`}return e.includes("google.com/maps")?e.replace("/maps/","/maps/embed/"):(e.includes("matterport.com"),e)})(t),n=(e=>!!e&&["youtube.com","youtu.be","vimeo.com","matterport.com","google.com/maps","kuula.co","roundme.com","momento360.com"].some(o=>e.includes(o)))(t);return(e=>{e&&(e.includes("youtube.com")||e.includes("youtu.be")||(e.includes("vimeo.com")||(e.includes("matterport.com")||e.includes("google.com/maps"))))})(t),a||!n?e.jsxs("div",{className:`flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg bg-muted/50 ${l}`,children:[e.jsx(s,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Virtual Tour Available"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 text-center",children:"This virtual tour needs to be opened in a new window for security reasons."}),e.jsx(r,{asChild:!0,children:e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(s,{className:"w-4 h-4 mr-2"}),"Open Virtual Tour"]})})]}):e.jsxs("div",{className:`relative ${l}`,children:[e.jsx("iframe",{src:c,className:"w-full h-full min-h-[400px]",allowFullScreen:!0,loading:"lazy",title:i,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onError:()=>m(!0),sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(r,{size:"sm",variant:"secondary",asChild:!0,className:"bg-white/90 hover:bg-white",children:e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(s,{className:"w-3 h-3 mr-1"}),"Open"]})})})]})};export{t as V};
