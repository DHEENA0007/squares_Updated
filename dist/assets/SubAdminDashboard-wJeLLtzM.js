import{j as e}from"./ui-BNZSgpjP.js";import{r as s,L as t}from"./router-D8v2YSKU.js";import{D as r,a2 as a,aO as l,a as i,b as d,c,p as n,e as o,h as x,U as m,V as p,d as h,R as j,i as u,C as N,B as g}from"./index-C1UN0dDZ.js";import{s as v}from"./subAdminService-C5E1bAnb.js";import{T as f}from"./trending-up-DfJHcky0.js";import{T as y}from"./trending-down-BpC_SH85.js";import"./vendor-BxThA0WO.js";const b=r("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),w=(e,s)=>{const t=(e=>e?new Date(e):new Date)(e),r={year:"numeric",month:"short",day:"numeric",...s};return t.toLocaleDateString(void 0,r)},k=()=>{const[r,k]=s.useState(null),[A,T]=s.useState(!0),{toast:S}=a();s.useEffect(()=>{P()},[]);const P=async()=>{try{const e=await v.getDashboardStats();k(e)}catch(e){S({title:"Error",description:e.message||"Failed to fetch dashboard stats",variant:"destructive"})}finally{T(!1)}};return l("property_created",()=>{P()}),l("property_approved",()=>{P()}),l("property_rejected",()=>{P()}),l("support_ticket_created",()=>{P()}),l("support_ticket_updated",()=>{P()}),A?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Sub Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Content moderation and support management overview"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(s=>e.jsx(i,{children:e.jsxs(d,{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})},s))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Your content moderation performance and activity overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(t,{to:"/subadmin/property-reviews",className:"block",children:e.jsxs(i,{className:"cursor-pointer hover:shadow-lg hover:border-primary/50 transition-all duration-200",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"My Property Approvals"}),e.jsx(n,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r?.totalPropertiesApproved||0}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsxs("p",{className:"text-xs text-green-600",children:[r?.availablePropertiesApproved||0," Available"]}),e.jsxs("p",{className:"text-xs text-red-600",children:[r?.rejectedPropertiesApproved||0," Rejected"]})]}),r?.analytics&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[r.analytics.propertiesApprovedLast7Days," in last 7 days"]})]})]})}),e.jsx(t,{to:"/subadmin/property-reviews",className:"block",children:e.jsxs(i,{className:"cursor-pointer hover:shadow-lg hover:border-primary/50 transition-all duration-200",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Pending Reviews"}),e.jsx(x,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r?.pendingProperties||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Properties awaiting review"})]})]})}),e.jsx(t,{to:"/subadmin/support-tickets",className:"block",children:e.jsxs(i,{className:"cursor-pointer hover:shadow-lg hover:border-primary/50 transition-all duration-200",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"My Support Tickets"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r?.totalSupport||0}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("p",{className:"text-xs text-orange-600",children:[r?.openSupport||0," Open"]}),e.jsxs("p",{className:"text-xs text-green-600",children:[r?.closedSupport||0," Closed"]})]})]})]})}),e.jsx(t,{to:"/subadmin/reports",className:"block",children:e.jsxs(i,{className:"cursor-pointer hover:shadow-lg hover:border-primary/50 transition-all duration-200",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Avg Response Time"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[r?.analytics?.avgResponseTimeHours||0,"h"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Average ticket resolution time"})]})]})})]}),r?.analytics&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(d,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Property Approval Analytics"]}),e.jsx(h,{children:"Your property review performance metrics"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold",children:r.analytics.propertiesApprovedThisMonth})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 "+(r.analytics.propertyApprovalTrend>=0?"text-green-600":"text-red-600"),children:[r.analytics.propertyApprovalTrend>=0?e.jsx(f,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(r.analytics.propertyApprovalTrend),"%"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"vs last month"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 7 Days"}),e.jsx("p",{className:"text-xl font-bold",children:r.analytics.propertiesApprovedLast7Days})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-purple-50 dark:bg-purple-950",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 Days"}),e.jsx("p",{className:"text-xl font-bold",children:r.analytics.propertiesApprovedLast30Days})]})]})]})]}),e.jsxs(i,{children:[e.jsxs(d,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"Support Ticket Analytics"]}),e.jsx(h,{children:"Your customer support performance"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold",children:r.analytics.supportTicketsThisMonth})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 "+(r.analytics.supportTicketTrend>=0?"text-green-600":"text-red-600"),children:[r.analytics.supportTicketTrend>=0?e.jsx(f,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(r.analytics.supportTicketTrend),"%"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"vs last month"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-950",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Closed (7d)"}),e.jsx("p",{className:"text-xl font-bold",children:r.analytics.supportTicketsResolvedLast7Days})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-orange-50 dark:bg-orange-950",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Closed (30d)"}),e.jsx("p",{className:"text-xl font-bold",children:r.analytics.supportTicketsResolvedLast30Days})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Quick Actions"}),e.jsx(h,{children:"Common tasks for content moderation"})]}),e.jsxs(o,{className:"space-y-2",children:[e.jsxs(t,{to:"/subadmin/property-reviews",className:"block p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Review Properties"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r?.pendingProperties," properties awaiting approval"]})]}),e.jsxs(t,{to:"/subadmin/support-tickets",className:"block p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Handle Support"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r?.openSupport," open tickets"]})]}),e.jsxs(t,{to:"/subadmin/reports",className:"block p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"View Reports"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Generate detailed analytics reports"})]})]})]}),e.jsxs(i,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Recent Activity"}),e.jsx(h,{children:"Your latest moderation activities"})]}),e.jsx(o,{children:r?.recentActivity?.approvals&&r.recentActivity.approvals.length>0?e.jsxs("div",{className:"space-y-3",children:[r.recentActivity.approvals.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg bg-green-50 dark:bg-green-950",children:[e.jsx(N,{className:"h-4 w-4 text-green-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Approved â€¢ ",w(s.approvedAt)]})]}),e.jsx(g,{variant:"outline",className:"text-xs",children:s.type})]},s._id)),r.recentActivity.tickets&&r.recentActivity.tickets.slice(0,2).map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg bg-blue-50 dark:bg-blue-950",children:[e.jsx(m,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.subject}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.user?.profile?.firstName," ",s.user?.profile?.lastName]})]}),e.jsx(g,{variant:"outline",className:"text-xs",children:s.status})]},s._id))]}):e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(x,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No recent activity to display"})]})})]})]}),r?.analytics&&e.jsxs(i,{children:[e.jsxs(d,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Performance Summary"]}),e.jsx(h,{children:"Overview of your work as a content moderator"})]}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Properties Reviewed"}),e.jsx(n,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-2xl font-bold",children:r.totalPropertiesApproved}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(r.availablePropertiesApproved/r.totalPropertiesApproved*100).toFixed(1),"% approval rate"]})]}),e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Support Tickets Handled"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-2xl font-bold",children:r.totalSupport}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(r.closedSupport/r.totalSupport*100||0).toFixed(1),"% closed"]})]}),e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Monthly Activity"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-2xl font-bold",children:r.analytics.propertiesApprovedThisMonth+r.analytics.supportTicketsThisMonth}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total actions this month"})]})]})})]})]})};export{k as default};
