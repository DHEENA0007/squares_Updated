import{j as e}from"./ui-BNZSgpjP.js";import{r as s}from"./router-D8v2YSKU.js";import{V as a}from"./ViewPropertyDialog-BJuwpF4a.js";import{u as t,a2 as r,aP as i,aQ as l,aO as n,a as c,b as d,c as o,J as m,e as x,C as p,_ as h,$ as u,I as j,f,aj as g,B as v,L as N,q as y,r as w,s as b,v as C,w as k,aM as S,bN as A,bO as P,bP as R,bQ as F,bu as T,E as $,a4 as _,a5 as V,a6 as E,a7 as L,a8 as O,T as z,ae as D,a3 as q}from"./index-CbYcfsaZ.js";import{C as I}from"./checkbox-CKO3DUj9.js";import{T as Q,a as M,b as U,c as B,d as W,e as J}from"./table-CdQnE9y8.js";import{C as G}from"./calendar-BrHa3Er4.js";import"./vendor-BxThA0WO.js";import"./propertyUtils-41DuwCMc.js";import"./external-link-C6xi7UgY.js";import"./indian-rupee-B1YtLUaj.js";const H=e=>{if(!e)return A;const s="object"==typeof e?e.url:e;if(!s||"string"!=typeof s)return A;if(s.startsWith("http://")||s.startsWith("https://"))return s;const a=s.startsWith("/api")?s.substring(4):s;return`${"https://app.buildhomemartsquares.com/api".replace("/api","")}${a}`},K=()=>{const{user:K}=t(),[X,Y]=s.useState([]),[Z,ee]=s.useState(!0),[se,ae]=s.useState(""),[te,re]=s.useState(1),[ie,le]=s.useState(1),[ne,ce]=s.useState(null),[de,oe]=s.useState(!1),[me,xe]=s.useState(!1),[pe,he]=s.useState(!1),[ue,je]=s.useState(""),[fe,ge]=s.useState({}),{toast:ve}=r(),[Ne,ye]=s.useState({total:0,pending:0,approved:0,rejected:0}),[we,be]=s.useState("all"),[Ce,ke]=s.useState("all"),[Se,Ae]=s.useState("pending"),[Pe,Re]=s.useState(!1),[Fe,Te]=s.useState(""),[$e,_e]=s.useState(""),[Ve,Ee]=s.useState(!1),[Le,Oe]=s.useState([]),[ze,De]=s.useState([]),[qe,Ie]=s.useState([]);s.useEffect(()=>{(async()=>{try{const[e,s,a]=await Promise.all([q.getAllPropertyTypes(),q.getFilterConfigurationsByType("listing_type"),q.getFilterConfigurationsByType("property_status")]);Oe(e),De(s),Ie(a)}catch(e){}})()},[]);const Qe=()=>K?.profile?.firstName&&K?.profile?.lastName?`${K.profile.firstName} ${K.profile.lastName}`:K?.profile?.firstName?K.profile.firstName:K?.email?K.email:"",[Me,Ue]=s.useState(Qe()),[Be,We]=s.useState({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),[Je,Ge]=s.useState("");s.useEffect(()=>{const e=Qe();e&&Ue(e)},[K]),s.useEffect(()=>{He()},[te,se,we,Ce,Se,Pe,Fe,$e]);const He=async()=>{try{ee(!0);const e=new URLSearchParams;e.append("page",te.toString()),se&&e.append("search",se),we&&"all"!==we&&e.append("type",we),Ce&&"all"!==Ce&&e.append("listingType",Ce),Se&&"all"!==Se&&e.append("status",Se),Pe&&e.append("myReviews","true"),Fe&&e.append("startDate",Fe),$e&&e.append("endDate",$e);const s=await i(`/subadmin/properties/pending?${e.toString()}`),a=await l(s);Y(a.data.properties||[]),le(a.data.totalPages||1)}catch(e){ve({title:"Error",description:e.message||"Error fetching properties",variant:"destructive"}),Y([])}finally{ee(!1)}},Ke=async()=>{try{const e=await i("/subadmin/dashboard"),s=await l(e);ye({total:(s.data.availablePropertiesApproved||0)+(s.data.rejectedPropertiesApproved||0),pending:s.data.pendingProperties||0,approved:s.data.availablePropertiesApproved||0,rejected:s.data.rejectedPropertiesApproved||0})}catch(e){}};n("property_created",e=>{ve({title:"New Property",description:"A new property has been submitted for review"}),He()}),n("property_updated",e=>{He(),Ke()}),s.useEffect(()=>{Ke()},[]);const Xe=()=>{We({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),Ge(""),Ue(Qe()),je("")};if(Z&&0===X.length)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Reviews"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Review and approve property listings"})]}),e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"},s))})]});const Ye=ne?{...ne,type:ne.type,listingType:ne.listingType,status:ne.status,images:ne.images.map(e=>({url:H(e),isPrimary:!!("object"==typeof e&&e.isPrimary),caption:"object"==typeof e?e.caption:void 0})),owner:{...ne.owner,role:"customer",profile:ne.owner.profile||{firstName:ne.owner.name,lastName:"",phone:""}}}:null;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Reviews"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Review and approve property listings"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(c,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-primary/50 "+(Pe&&"all"===Se?"border-primary ring-2 ring-primary/20":""),onClick:()=>{Ae("all"),Re(!0)},children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"My Reviews"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ne.total}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total reviewed by me"})]})]}),e.jsxs(c,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-yellow-500/50 "+(Pe||"pending"!==Se?"":"border-yellow-500 ring-2 ring-yellow-500/20"),onClick:()=>{Ae("pending"),Re(!1)},children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Pending Review"}),e.jsx(G,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Ne.pending}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting action"})]})]}),e.jsxs(c,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-green-500/50 "+(Pe&&"available"===Se?"border-green-500 ring-2 ring-green-500/20":""),onClick:()=>{Ae("available"),Re(!0)},children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"My Approved"}),e.jsx(p,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ne.approved}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Approved by me"})]})]}),e.jsxs(c,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-red-500/50 "+(Pe&&"rejected"===Se?"border-red-500 ring-2 ring-red-500/20":""),onClick:()=>{Ae("rejected"),Re(!0)},children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"My Rejected"}),e.jsx(h,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:Ne.rejected}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Rejected by me"})]})]})]}),e.jsx(c,{children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(j,{placeholder:"Search properties by title or city...",value:se,onChange:e=>ae(e.target.value),className:"pl-10"})]}),e.jsxs(f,{variant:"outline",onClick:()=>Ee(!Ve),className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),"Filters",("all"!==we||"all"!==Ce||"all"!==Se||Fe||$e)&&e.jsx(v,{variant:"secondary",className:"ml-1",children:["all"!==we,"all"!==Ce,"all"!==Se,Fe,$e].filter(Boolean).length})]})]}),Ve&&e.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 pt-3 border-t",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(N,{className:"text-xs text-muted-foreground",children:"Property Type"}),e.jsxs(y,{value:we,onValueChange:be,children:[e.jsx(w,{className:"w-full sm:w-[150px]",children:e.jsx(b,{placeholder:"All Types"})}),e.jsxs(C,{children:[e.jsx(k,{value:"all",children:"All Types"}),Le.map(s=>e.jsx(k,{value:s.value,children:s.name},s._id))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(N,{className:"text-xs text-muted-foreground",children:"Listing Type"}),e.jsxs(y,{value:Ce,onValueChange:ke,children:[e.jsx(w,{className:"w-full sm:w-[130px]",children:e.jsx(b,{placeholder:"All"})}),e.jsxs(C,{children:[e.jsx(k,{value:"all",children:"All"}),ze.length>0?ze.map(s=>e.jsx(k,{value:s.value,children:s.displayLabel||s.name},s._id)):e.jsxs(e.Fragment,{children:[e.jsx(k,{value:"sale",children:"Sale"}),e.jsx(k,{value:"rent",children:"Rent"}),e.jsx(k,{value:"lease",children:"Lease"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(N,{className:"text-xs text-muted-foreground",children:"Status"}),e.jsxs(y,{value:Se,onValueChange:Ae,children:[e.jsx(w,{className:"w-full sm:w-[150px]",children:e.jsx(b,{placeholder:"All Statuses"})}),e.jsxs(C,{children:[e.jsx(k,{value:"all",children:"All Statuses"}),e.jsx(k,{value:"pending",children:"Pending"}),e.jsx(k,{value:"available",children:"Approved"}),e.jsx(k,{value:"rejected",children:"Rejected"}),e.jsx(k,{value:"sold",children:"Sold"}),e.jsx(k,{value:"rented",children:"Rented"}),e.jsx(k,{value:"leased",children:"Leased"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(N,{className:"text-xs text-muted-foreground",children:"From"}),e.jsx(j,{type:"date",value:Fe,onChange:e=>Te(e.target.value),className:"w-full sm:w-[150px]"})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(N,{className:"text-xs text-muted-foreground",children:"To"}),e.jsx(j,{type:"date",value:$e,onChange:e=>_e(e.target.value),className:"w-full sm:w-[150px]"})]}),("all"!==we||"all"!==Ce||"all"!==Se||Fe||$e)&&e.jsx("div",{className:"flex items-end",children:e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>{be("all"),ke("all"),Ae("pending"),Te(""),_e("")},className:"text-muted-foreground hover:text-foreground",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})})]})]})})}),e.jsx(c,{children:e.jsx(x,{className:"p-0",children:0===X.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(p,{className:"h-12 w-12 text-green-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No Pending Properties"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"All properties have been reviewed. Great job!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Q,{children:[e.jsx(M,{children:e.jsxs(U,{className:"bg-muted/50",children:[e.jsx(B,{className:"w-[60px] text-center",children:"S.No."}),e.jsx(B,{className:"w-[80px]",children:"Image"}),e.jsx(B,{children:"Property"}),e.jsx(B,{children:"Location"}),e.jsx(B,{className:"text-center",children:"Type"}),e.jsx(B,{className:"text-right",children:"Price"}),e.jsx(B,{children:"Owner"}),e.jsx(B,{className:"text-center",children:"Date"}),e.jsx(B,{className:"text-center w-[200px]",children:"Actions"})]})}),e.jsx(W,{children:X.map((s,a)=>{return e.jsxs(U,{className:"hover:bg-muted/30",children:[e.jsx(J,{className:"text-center font-medium",children:10*(te-1)+a+1}),e.jsx(J,{className:"p-2",children:e.jsx("div",{className:"w-16 h-16 rounded-md overflow-hidden bg-muted flex-shrink-0",children:s.images&&s.images.length>0?e.jsx("img",{src:H(s.images[0]),alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.target.src=A}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(P,{className:"h-6 w-6 text-muted-foreground"})})})}),e.jsx(J,{children:e.jsxs("div",{className:"max-w-[200px]",children:[e.jsx("p",{className:"font-medium text-sm truncate",title:s.title,children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.bedrooms>0&&e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-0.5",children:[e.jsx(R,{className:"h-3 w-3"})," ",s.bedrooms]}),s.bathrooms>0&&e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-0.5 ml-2",children:[e.jsx(F,{className:"h-3 w-3"})," ",s.bathrooms]}),(s.area.builtUp||s.area.plot||s.area.carpet)&&e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-0.5 ml-2",children:[e.jsx(T,{className:"h-3 w-3"})," ",(r=s.area,r.builtUp?`${r.builtUp} ${r.unit}`:r.plot?`${r.plot} ${r.unit}`:r.carpet?`${r.carpet} ${r.unit}`:"N/A")]})]})]})}),e.jsx(J,{children:e.jsxs("div",{className:"max-w-[150px]",children:[e.jsx("p",{className:"text-sm truncate",title:`${s.address.city}, ${s.address.state}`,children:s.address.city}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[s.address.district?`${s.address.district}, `:"",s.address.state]})]})}),e.jsx(J,{className:"text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(v,{variant:"outline",className:"text-xs capitalize",children:s.type}),e.jsx(v,{variant:"sale"===s.listingType?"default":"secondary",className:"text-xs",children:"sale"===s.listingType?"Sale":"rent"===s.listingType?"Rent":"Lease"})]})}),e.jsx(J,{className:"text-right",children:e.jsx("p",{className:"font-bold text-primary text-sm",children:(t=s.price,`â‚¹${t.toLocaleString("en-IN")}`)})}),e.jsx(J,{children:e.jsxs("div",{className:"max-w-[150px]",children:[e.jsx("p",{className:"text-sm font-medium truncate",title:s.owner?.profile?.firstName?`${s.owner.profile.firstName} ${s.owner.profile.lastName||""}`:s.owner.name,children:s.owner?.profile?.firstName?`${s.owner.profile.firstName} ${s.owner.profile.lastName||""}`:s.owner.name||"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",title:s.owner.email,children:s.owner.email})]})}),e.jsx(J,{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})})}),e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{ce(s),he(!0)},className:"h-8 px-2",title:"View Details",children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(f,{size:"sm",onClick:()=>(e=>{ce(e),Xe(),oe(!0)})(s),disabled:fe[s._id],className:"h-8 px-2 bg-green-600 hover:bg-green-700",title:"Approve",children:e.jsx(p,{className:"h-4 w-4"})}),e.jsx(f,{variant:"destructive",size:"sm",onClick:()=>(e=>{ce(e),Xe(),xe(!0)})(s),disabled:fe[s._id],className:"h-8 px-2",title:"Reject",children:e.jsx(h,{className:"h-4 w-4"})})]})})]},s._id);var t,r})})]})})})}),X.length>0&&e.jsx(c,{children:e.jsx(x,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",10*(te-1)+1," to ",Math.min(10*te,10*(te-1)+X.length)," of ",10*ie," properties"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{variant:"outline",size:"sm",disabled:1===te,onClick:()=>re(1),children:"First"}),e.jsx(f,{variant:"outline",size:"sm",disabled:1===te,onClick:()=>re(te-1),children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ie)},(s,a)=>{let t;return t=ie<=5||te<=3?a+1:te>=ie-2?ie-4+a:te-2+a,e.jsx(f,{variant:te===t?"default":"outline",size:"sm",onClick:()=>re(t),className:"w-8 h-8 p-0",children:t},t)})}),e.jsx(f,{variant:"outline",size:"sm",disabled:te===ie,onClick:()=>re(te+1),children:"Next"}),e.jsx(f,{variant:"outline",size:"sm",disabled:te===ie,onClick:()=>re(ie),children:"Last"})]})]})})}),e.jsx(_,{open:de,onOpenChange:oe,children:e.jsxs(V,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(L,{children:"Approve Property"}),e.jsxs(O,{children:['Complete the verification checklist and provide your approval for "',ne?.title,'".']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Approver Name"}),e.jsx("div",{className:"p-3 rounded-md bg-muted border border-border mt-1",children:e.jsx("p",{className:"font-medium text-sm",children:Me||"Loading..."})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically set from your logged-in account"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{className:"text-base font-semibold",children:"Verification Checklist"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"documents-approve",checked:Be.documentsVerified,onCheckedChange:e=>We({...Be,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents-approve",className:"text-sm font-medium cursor-pointer",children:"All required documents are verified"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"location-approve",checked:Be.locationVerified,onCheckedChange:e=>We({...Be,locationVerified:e})}),e.jsx("label",{htmlFor:"location-approve",className:"text-sm font-medium cursor-pointer",children:"Property location is verified and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"price-approve",checked:Be.priceReasonable,onCheckedChange:e=>We({...Be,priceReasonable:e})}),e.jsx("label",{htmlFor:"price-approve",className:"text-sm font-medium cursor-pointer",children:"Price is reasonable and competitive"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"images-approve",checked:Be.imagesQuality,onCheckedChange:e=>We({...Be,imagesQuality:e})}),e.jsx("label",{htmlFor:"images-approve",className:"text-sm font-medium cursor-pointer",children:"Images are of good quality and relevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"description-approve",checked:Be.descriptionComplete,onCheckedChange:e=>We({...Be,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description-approve",className:"text-sm font-medium cursor-pointer",children:"Description is complete and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"ownership-approve",checked:Be.ownershipConfirmed,onCheckedChange:e=>We({...Be,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership-approve",className:"text-sm font-medium cursor-pointer",children:"Ownership is confirmed and legitimate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"handwritten-comments-approve",children:"Approval Notes & Comments"}),e.jsx(z,{id:"handwritten-comments-approve",placeholder:"Type your handwritten comments or notes here...",value:Je,onChange:e=>Ge(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional observations, recommendations, or special notes"})]})]}),e.jsxs(D,{children:[e.jsx(f,{variant:"outline",onClick:()=>oe(!1),children:"Cancel"}),e.jsx(f,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{if(ne&&Me.trim())try{ge({...fe,[ne._id]:!0});const e=await i(`/subadmin/properties/${ne._id}/approve`,{method:"POST",body:JSON.stringify({approver:Me,notes:Je})});await l(e),ve({title:"Success",description:"Property approved successfully"}),oe(!1),Xe(),ce(null),He()}catch(e){ve({title:"Error",description:e.message||"Failed to approve property",variant:"destructive"})}finally{ge({...fe,[ne._id]:!1})}else ve({title:"Error",description:"Approver name is required",variant:"destructive"})},disabled:!Me.trim()||fe[ne?._id||""],children:fe[ne?._id||""]?"Approving...":"Approve Property"})]})]})}),e.jsx(_,{open:me,onOpenChange:xe,children:e.jsxs(V,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(L,{children:"Reject Property"}),e.jsxs(O,{children:['Complete the form and provide a reason for rejecting "',ne?.title,'". The vendor will be notified.']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Approver Name"}),e.jsx("div",{className:"p-3 rounded-md bg-muted border border-border mt-1",children:e.jsx("p",{className:"font-medium text-sm",children:Me||"Loading..."})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically set from your logged-in account"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{className:"text-base font-semibold",children:"Issues Found (Check applicable items)"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"documents-reject",checked:Be.documentsVerified,onCheckedChange:e=>We({...Be,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents-reject",className:"text-sm font-medium cursor-pointer",children:"Documents are incomplete or invalid"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"location-reject",checked:Be.locationVerified,onCheckedChange:e=>We({...Be,locationVerified:e})}),e.jsx("label",{htmlFor:"location-reject",className:"text-sm font-medium cursor-pointer",children:"Property location is incorrect or unclear"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"price-reject",checked:Be.priceReasonable,onCheckedChange:e=>We({...Be,priceReasonable:e})}),e.jsx("label",{htmlFor:"price-reject",className:"text-sm font-medium cursor-pointer",children:"Price is unreasonable or suspicious"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"images-reject",checked:Be.imagesQuality,onCheckedChange:e=>We({...Be,imagesQuality:e})}),e.jsx("label",{htmlFor:"images-reject",className:"text-sm font-medium cursor-pointer",children:"Images are poor quality or irrelevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"description-reject",checked:Be.descriptionComplete,onCheckedChange:e=>We({...Be,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description-reject",className:"text-sm font-medium cursor-pointer",children:"Description is incomplete or misleading"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{id:"ownership-reject",checked:Be.ownershipConfirmed,onCheckedChange:e=>We({...Be,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership-reject",className:"text-sm font-medium cursor-pointer",children:"Ownership cannot be confirmed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"rejection-reason",children:"Rejection Reason *"}),e.jsx(z,{id:"rejection-reason",placeholder:"Enter the detailed reason for rejection...",value:ue,onChange:e=>je(e.target.value),className:"mt-1",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"handwritten-comments-reject",children:"Additional Comments"}),e.jsx(z,{id:"handwritten-comments-reject",placeholder:"Type your handwritten comments or notes here...",value:Je,onChange:e=>Ge(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional feedback or suggestions for the vendor"})]})]}),e.jsxs(D,{children:[e.jsx(f,{variant:"outline",onClick:()=>xe(!1),children:"Cancel"}),e.jsx(f,{variant:"destructive",onClick:async()=>{if(ne&&ue.trim()&&Me.trim())try{ge({...fe,[ne._id]:!0});const e=await i(`/subadmin/properties/${ne._id}/reject`,{method:"POST",body:JSON.stringify({reason:ue,approver:Me,notes:Je})});await l(e),ve({title:"Success",description:"Property rejected successfully"}),xe(!1),Xe(),ce(null),He()}catch(e){ve({title:"Error",description:"Failed to reject property",variant:"destructive"})}finally{ge({...fe,[ne._id]:!1})}else ve({title:"Error",description:"Approver name and rejection reason are required",variant:"destructive"})},disabled:!ue.trim()||!Me.trim()||fe[ne?._id||""],children:fe[ne?._id||""]?"Rejecting...":"Reject Property"})]})]})}),e.jsx(a,{property:Ye,open:pe,onOpenChange:he})]})};export{K as default};
