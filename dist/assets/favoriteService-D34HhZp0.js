import{z as c,t as n}from"./index-SPvHGBGF.js";class d{baseUrl="https://squares-v2.onrender.com/api";async makeRequest(t,e={}){const a=`${this.baseUrl}${t}`,o={headers:{"Content-Type":"application/json",...e.headers},...e},s=c.getToken();s&&(o.headers={...o.headers,Authorization:`Bearer ${s}`});try{const r=await fetch(a,o);if(!r.ok){const i=await r.json().catch(()=>({success:!1,message:`HTTP ${r.status}: ${r.statusText}`}));throw new Error(i.message||"An error occurred")}return await r.json()}catch(r){throw console.error("API request failed:",r),r}}async getFavorites(t={}){try{const e=new URLSearchParams;Object.entries(t).forEach(([s,r])=>{r!=null&&r!==""&&e.append(s,String(r))});const a=`/favorites${e.toString()?`?${e.toString()}`:""}`;return await this.makeRequest(a)}catch(e){const a=e instanceof Error?e.message:"Failed to fetch favorites";throw n({title:"Error",description:a,variant:"destructive"}),e}}async addToFavorites(t){try{const e=await this.makeRequest(`/favorites/${t}`,{method:"POST"});return n({title:"Success",description:"Property added to favorites!"}),e}catch(e){const a=e instanceof Error?e.message:"Failed to add to favorites";throw n({title:"Error",description:a,variant:"destructive"}),e}}async removeFromFavorites(t){try{await this.makeRequest(`/favorites/${t}`,{method:"DELETE"}),n({title:"Success",description:"Property removed from favorites!"})}catch(e){const a=e instanceof Error?e.message:"Failed to remove from favorites";throw n({title:"Error",description:a,variant:"destructive"}),e}}async isFavorite(t){try{return(await this.makeRequest(`/favorites/check/${t}`)).data.isFavorite}catch(e){return console.error("Failed to check favorite status:",e),!1}}async getFavoriteStats(){try{return await this.makeRequest("/favorites/stats")}catch(t){const e=t instanceof Error?t.message:"Failed to fetch favorite statistics";throw n({title:"Error",description:e,variant:"destructive"}),t}}formatPrice(t){return t>=1e7?`₹${(t/1e7).toFixed(1)} Cr`:t>=1e5?`₹${(t/1e5).toFixed(0)} Lac`:`₹${t.toLocaleString()}`}formatPricePerSqFt(t,e){const a=Math.round(t/e);return this.formatPrice(a)}formatDate(t){return new Date(t).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}getPropertyStatusBadge(t){const e=t?.status||"available";switch(e.toLowerCase()){case"sold":return{variant:"destructive",label:"Sold"};case"rented":return{variant:"secondary",label:"Rented"};case"pending":return{variant:"outline",label:"Under Review"};case"rejected":return{variant:"destructive",label:"Rejected"};case"active":case"available":return{variant:"default",label:"Available"};default:return{variant:"outline",label:e.charAt(0).toUpperCase()+e.slice(1)}}}getTimeAgo(t){const e=new Date(t),o=new Date().getTime()-e.getTime(),s=Math.floor(o/(1e3*60*60*24));return s===0?"Today":s===1?"Yesterday":s<7?`${s} days ago`:s<30?`${Math.floor(s/7)} weeks ago`:`${Math.floor(s/30)} months ago`}}const l=new d;export{l as f};
