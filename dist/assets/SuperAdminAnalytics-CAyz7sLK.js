import{j as e}from"./ui-BNZSgpjP.js";import{d as s,r as t}from"./router-D8v2YSKU.js";import{u as a,a2 as r,a as i,b as l,e as n,q as c,r as o,s as d,v as m,w as x,P as u,m as h,f as p,n as j,al as v,aj as w,c as g,d as f,U as y,E as N,af as b,ag as C,ah as k,ai as V,x as R,R as D,V as S,h as T,k as A,y as M,am as U,Z as B}from"./index-DNDw84E8.js";import{s as _,C as P}from"./calendar-Bn23-qJ7.js";import{a as I,L}from"./Line-BCledNk6.js";import{E as $}from"./exportUtils-CAO0PGIH.js";import{C as E,P as F,a as G,M as q,D as K}from"./DetailedPropertyReport-C_EVBElx.js";import{C as O}from"./calendar-BJgtaTr6.js";import{D as W}from"./download-DrqOdduy.js";import{D as H}from"./dollar-sign-D6ZezNMv.js";import{T as z}from"./trending-up-DytUkH_w.js";import{A as Y}from"./arrow-right-D2VJ2GOL.js";import{R as X,C as Q,X as Z,Y as J,T as ee,a as se,L as te,B as ae}from"./generateCategoricalChart-DyFON4dR.js";import{A as re,a as ie}from"./AreaChart-COIEriVw.js";import{M as le,C as ne,L as ce}from"./LineChart-BSFhn-hg.js";import{G as oe}from"./globe-DmGxelY3.js";import{B as de}from"./BarChart-C508M3_-.js";import{T as me}from"./thumbs-up-B_BfUToG.js";import{f as xe}from"./format-PKFvaTlX.js";import"./vendor-BxThA0WO.js";import"./reviewsService-BfDTZXRs.js";import"./xlsx-BjkOj9O8.js";import"./table-q1e0B5A_.js";import"./user-x-LIMLVpDG.js";import"./message-circle-CeJ5Ly2Y.js";import"./share-2-CDPYmSOv.js";const ue=["#4285F4","#34A853","#FBBC05","#EA4335","#8884d8","#82ca9d"],he=()=>{const{user:he}=a(),{toast:pe}=r(),je=s(),[ve,we]=t.useState("30"),[ge,fe]=t.useState(!0),[ye,Ne]=t.useState(null),[be,Ce]=t.useState(null),[ke,Ve]=t.useState(null),[Re,De]=t.useState(null),[Se,Te]=t.useState(null),[Ae,Me]=t.useState(""),[Ue,Be]=t.useState(_(new Date,30)),[_e,Pe]=t.useState(new Date),[Ie,Le]=t.useState(!1),[$e,Ee]=t.useState(!1),Fe=e=>"superadmin"===he?.role||(he?.rolePermissions?.includes(e)||!1),Ge=Fe(B.SUPERADMIN_ANALYTICS_EXPORT)||Fe(B.ANALYTICS_VIEW)||"superadmin"===he?.role;t.useEffect(()=>{if(!(Fe(B.SUPERADMIN_ANALYTICS_VIEW)||Fe(B.ANALYTICS_VIEW)))return pe({title:"Access Denied",description:"You don't have permission to view analytics.",variant:"destructive"}),void je("/rolebased");qe()},[ve]);const qe=async()=>{fe(!0);try{const e=await I.getConsolidatedAdminAnalytics(ve);e.success&&e.data&&(Ne({overview:e.data.overview,usersByRole:e.data.overview.usersByRole}),Ce(e.data.propertyViews),Ve(e.data.conversion),De(e.data.traffic),Te(e.data.engagement))}catch(e){pe({title:"Error",description:"Failed to fetch analytics data",variant:"destructive"})}finally{fe(!1)}};if(!(Fe(B.SUPERADMIN_ANALYTICS_VIEW)||Fe(B.ANALYTICS_VIEW)))return null;if(ge)return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsxs(i,{className:"animate-pulse",children:[e.jsx(l,{className:"pb-2",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})}),e.jsx(n,{children:e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"})})]},s))})]});const Ke=({title:s,value:t,icon:a,change:r,color:c,subtext:o})=>e.jsxs(i,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(l,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:s}),e.jsx(a,{className:`h-4 w-4 ${c}`})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t}),o&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o}),r&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{className:r>=0?"text-green-600":"text-red-600",children:[r>=0?"+":"",r,"%"]})," from previous period"]})]})]});return e.jsxs("div",{className:"p-6 space-y-6 bg-background min-h-screen",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Reports snapshot and detailed insights"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(c,{value:ve,onValueChange:e=>{we(e),Le("custom"===e)},children:[e.jsxs(o,{className:"w-[160px]",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),e.jsx(d,{placeholder:"Select range"})]}),e.jsxs(m,{children:[e.jsx(x,{value:"1",children:"Today"}),e.jsx(x,{value:"7",children:"Last 7 days"}),e.jsx(x,{value:"30",children:"Last 30 days"}),e.jsx(x,{value:"90",children:"Last 90 days"}),e.jsx(x,{value:"180",children:"Last 6 months"}),e.jsx(x,{value:"365",children:"Last year"}),e.jsx(x,{value:"custom",children:"Custom Range"})]})]}),Ie&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{children:[e.jsx(h,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"w-[130px] text-left",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),Ue?xe(Ue,"MMM dd"):"Start"]})}),e.jsx(j,{className:"w-auto p-0",align:"start",children:e.jsx(P,{mode:"single",selected:Ue,onSelect:Be,initialFocus:!0})})]}),e.jsx("span",{className:"text-muted-foreground",children:"to"}),e.jsxs(u,{children:[e.jsx(h,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"w-[130px] text-left",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),_e?xe(_e,"MMM dd"):"End"]})}),e.jsx(j,{className:"w-auto p-0",align:"start",children:e.jsx(P,{mode:"single",selected:_e,onSelect:Pe,initialFocus:!0})})]}),e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>qe(),children:"Apply"})]}),e.jsx(p,{variant:"outline",size:"icon",onClick:()=>qe(),disabled:ge,children:e.jsx(v,{className:"h-4 w-4 "+(ge?"animate-spin":"")})}),Ge&&e.jsxs(p,{onClick:()=>{Ee(!0);try{const e=xe(new Date,"MMMM dd, yyyy"),s="custom"===ve?Math.ceil((_e.getTime()-Ue.getTime())/864e5):parseInt(ve),t=e=>`₹${(e||0).toLocaleString("en-IN")}`,a=[{Metric:"Report Period",Value:`Last ${s} days`,Details:`Generated on ${e}`},{Metric:"Total Users",Value:ye?.overview?.totalUsers||0,Details:"All registered users"},{Metric:"Total Customers",Value:ye?.overview?.totalCustomers||0,Details:"Customer role users"},{Metric:"New Registrations",Value:ye?.overview?.newRegistrations||0,Details:"Users registered in this period"},{Metric:"Total Properties",Value:ye?.overview?.totalProperties||0,Details:"All listed properties"},{Metric:"Total Views",Value:ye?.overview?.totalViews||0,Details:"Property page views"},{Metric:"Unique Viewers",Value:ye?.overview?.uniqueViewers||0,Details:"Distinct visitors"},{Metric:"Avg. View Duration",Value:`${ye?.overview?.avgViewDuration||0}s`,Details:"Average time on property pages"},{Metric:"Total Revenue",Value:t(ye?.overview?.totalRevenue||0),Details:"Revenue in this period"},{Metric:"Guest Views",Value:ye?.overview?.guestViews||0,Details:"Views from unregistered users"},{Metric:"Registered Views",Value:ye?.overview?.registeredViews||0,Details:"Views from registered users"},{Metric:"Total Interactions",Value:ye?.overview?.totalInteractions||0,Details:"Phone + Message clicks"}],r=(ye?.usersByRole||[]).map(e=>({Role:e._id||"Unknown",Count:e.count||0,Percentage:`${ye?.overview?.totalUsers>0?(e.count/ye.overview.totalUsers*100).toFixed(1):0}%`})),i=[{Metric:"Total Views",Value:ke?.totalViews||0},{Metric:"Guest Views",Value:ke?.guestViews||0},{Metric:"Registered Views",Value:ke?.registeredViews||0},{Metric:"New Registrations",Value:ke?.newRegistrations||0},{Metric:"Conversion Rate",Value:`${ke?.conversionRate||0}%`}],l=(ke?.registrationsByDate||[]).map(e=>({Date:e._id,"New Registrations":e.count})),n=(be?.viewsByDate||[]).map(e=>({Date:e._id,Views:e.count})),c=(be?.viewsByProperty||[]).slice(0,30).map((e,s)=>({"#":s+1,"Property Title":e.title||"Unknown","Total Views":e.views||0,"Views in Period":e.periodViews||e.views||0})),o=(be?.viewerTypes||[]).map(e=>({"Viewer Type":e.name||e._id||"Unknown",Count:e.value||e.count||0})),d=[{"Interaction Type":"Phone Clicks",Count:be?.interactions?.phoneClicks||0},{"Interaction Type":"Message Clicks",Count:be?.interactions?.messageClicks||0},{"Interaction Type":"Interest Clicks",Count:be?.interactions?.interestClicks||0},{"Interaction Type":"Total",Count:(be?.interactions?.phoneClicks||0)+(be?.interactions?.messageClicks||0)+(be?.interactions?.interestClicks||0)}],m=(Re?.trafficBySource||[]).map((e,s)=>({"#":s+1,Source:e.source||"Unknown",Visits:e.count||0,Percentage:Re?.trafficBySource?.length>0?`${(e.count/Re.trafficBySource.reduce((e,s)=>e+s.count,0)*100).toFixed(1)}%`:"0%"})),x=(Re?.trafficByDevice||[]).map(e=>({Device:e.name||e._id||"Unknown",Count:e.value||e.count||0})),u=(Re?.trafficByBrowser||[]).map(e=>({Browser:e._id||"Unknown",Count:e.count||0})),h=(Re?.trafficByCountry||[]).map(e=>({Country:e._id||"Unknown",Visits:e.count||0})),p=(Re?.peakHours||[]).map(e=>({Hour:`${e._id||0}:00`,Visits:e.count||0})),j=(Se?.activeUsers||[]).map(e=>({Date:e._id,"Total Active":e.count||0,Customers:e.customers||0,"Vendors/Agents":e.vendors||0})),v=[{Role:"Customers",Count:Se?.activeUsersSummary?.customers?.count||0},{Role:"Vendors/Agents",Count:Se?.activeUsersSummary?.vendors?.count||0},{Role:"Total Active",Count:(Se?.activeUsersSummary?.customers?.count||0)+(Se?.activeUsersSummary?.vendors?.count||0)}],w=(Se?.messageActivity||[]).map(e=>({Date:e._id,"Messages Sent":e.count||0})),g=(Se?.reviewActivity||[]).map(e=>({Date:e._id,Reviews:e.count||0,"Avg. Rating":(e.avgRating||0).toFixed(1)})),f=(ye?.overview?.recentActivity||[]).map(e=>({Type:e.type||"Unknown",Count:e.count||0})),y={filename:`analytics_comprehensive_report_${xe(new Date,"yyyy-MM-dd")}`,title:"Comprehensive Analytics Report",metadata:{"Generated on":e,"Report Period":`Last ${s} days`,"Total Users":(ye?.overview?.totalUsers||0).toString(),"Total Properties":(ye?.overview?.totalProperties||0).toString(),"Total Views":(ye?.overview?.totalViews||0).toString(),"Total Revenue":t(ye?.overview?.totalRevenue||0),"Generated By":he?.email||"Admin"}},N=[{name:"Executive Summary",data:a,columns:[{wch:25},{wch:20},{wch:40}]},{name:"Users by Role",data:r,columns:[{wch:15},{wch:12},{wch:12}]},{name:"Conversion Metrics",data:i,columns:[{wch:20},{wch:15}]},{name:"Daily Registrations",data:l,columns:[{wch:15},{wch:15}]},{name:"Daily Views",data:n,columns:[{wch:15},{wch:12}]},{name:"Top Properties",data:c,columns:[{wch:5},{wch:40},{wch:12},{wch:15}]},{name:"Viewer Types",data:o,columns:[{wch:15},{wch:12}]},{name:"Interactions",data:d,columns:[{wch:18},{wch:12}]},{name:"Traffic Sources",data:m,columns:[{wch:5},{wch:30},{wch:12},{wch:12}]},{name:"Devices",data:x,columns:[{wch:15},{wch:12}]},{name:"Browsers",data:u,columns:[{wch:20},{wch:12}]},{name:"Countries",data:h,columns:[{wch:20},{wch:12}]},{name:"Peak Hours",data:p,columns:[{wch:10},{wch:12}]},{name:"Daily Active Users",data:j,columns:[{wch:15},{wch:12},{wch:12},{wch:15}]},{name:"Active Users Summary",data:v,columns:[{wch:15},{wch:12}]},{name:"Message Activity",data:w,columns:[{wch:15},{wch:15}]},{name:"Review Activity",data:g,columns:[{wch:15},{wch:10},{wch:12}]},{name:"Recent Activity",data:f,columns:[{wch:15},{wch:12}]}];$.generateExcelReport(y,N),pe({title:"Report Generated",description:`Comprehensive analytics report with ${N.length} sheets has been downloaded`})}catch(e){pe({title:"Export Failed",description:"Failed to generate analytics report. Please try again.",variant:"destructive"})}finally{Ee(!1)}},disabled:$e||ge,className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),$e?"Generating...":"Export Report"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Quick Filters:"})]}),["1","7","30","90"].map(s=>e.jsx(p,{variant:ve===s?"default":"outline",size:"sm",onClick:()=>{we(s),Le(!1)},className:"h-7 text-xs",children:"1"===s?"Today":`${s}D`},s))]})]}),e.jsxs(i,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-950/30 dark:to-teal-950/30 border-emerald-200 dark:border-emerald-800",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs("div",{children:[e.jsxs(g,{className:"flex items-center gap-2 text-emerald-700 dark:text-emerald-300",children:[e.jsx(H,{className:"h-5 w-5"}),"Revenue Summary"]}),e.jsx(f,{children:"Complete financial overview for the selected period"})]}),Ge&&e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=xe(new Date,"yyyy-MM-dd"),s=e=>`₹${(e||0).toLocaleString("en-IN")}`,t=[{Metric:"Total Revenue",Value:s(ye?.overview?.totalRevenue||0)},{Metric:"Subscription Revenue",Value:s(ye?.overview?.subscriptionRevenue||0)},{Metric:"Addon Revenue",Value:s(ye?.overview?.addonRevenue||0)},{Metric:"Active Subscriptions",Value:ye?.overview?.activeSubscriptions||0},{Metric:"Revenue Period",Value:`Last ${ve} days`}];$.generateExcelReport({filename:`revenue_report_${e}`,title:"Revenue Report",metadata:{Generated:e}},[{name:"Revenue Summary",data:t,columns:[{wch:25},{wch:20}]}]),pe({title:"Revenue Report Downloaded"})},className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Export Revenue"]})]}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-4 border shadow-sm",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:["₹",(ye?.overview?.totalRevenue||0).toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last ",ve," days"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-4 border shadow-sm",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Subscriptions"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["₹",(ye?.overview?.subscriptionRevenue||0).toLocaleString("en-IN")]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ye?.overview?.activeSubscriptions||0," active"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-4 border shadow-sm",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Addons"}),e.jsxs("p",{className:"text-xl font-bold text-purple-600",children:["₹",(ye?.overview?.addonRevenue||0).toLocaleString("en-IN")]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Addon services"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ke,{title:"Total Users",value:ye?.overview?.totalUsers||0,icon:y,color:"text-blue-500",subtext:"Active accounts"}),e.jsx(Ke,{title:"Total Views",value:ye?.overview?.totalViews||0,icon:N,color:"text-green-500",subtext:`${ye?.overview?.uniqueViewers||0} unique viewers`}),e.jsx(Ke,{title:"Conversions",value:ye?.overview?.totalRegistrations||0,icon:z,color:"text-orange-500",subtext:"New registrations"}),e.jsx(Ke,{title:"Revenue",value:`₹${(ye?.overview?.totalRevenue||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:H,color:"text-emerald-500",subtext:"Total earnings"})]}),e.jsxs(b,{defaultValue:"snapshot",className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:e.jsxs(C,{className:"grid w-full grid-cols-2 md:grid-cols-5 lg:w-auto",children:[e.jsx(k,{value:"snapshot",children:"Snapshot"}),e.jsx(k,{value:"acquisition",children:"Acquisition"}),e.jsx(k,{value:"engagement",children:"Engagement"}),e.jsx(k,{value:"retention",children:"Retention"}),e.jsx(k,{value:"detailed",children:"Detailed Reports"})]})}),e.jsxs(V,{value:"snapshot",className:"space-y-4",children:[Ge&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=xe(new Date,"yyyy-MM-dd"),s=[{Metric:"Total Users",Value:ye?.overview?.totalUsers||0},{Metric:"Total Customers",Value:ye?.overview?.totalCustomers||0},{Metric:"New Registrations",Value:ye?.overview?.newRegistrations||0},{Metric:"Total Properties",Value:ye?.overview?.totalProperties||0},{Metric:"Total Views",Value:ye?.overview?.totalViews||0},{Metric:"Unique Viewers",Value:ye?.overview?.uniqueViewers||0},{Metric:"Avg. View Duration",Value:`${ye?.overview?.avgViewDuration||0}s`},{Metric:"Total Revenue",Value:(t=ye?.overview?.totalRevenue||0,`₹${(t||0).toLocaleString("en-IN")}`)},{Metric:"Total Interactions",Value:ye?.overview?.totalInteractions||0}];var t;const a=(ye?.usersByRole||[]).map(e=>({Role:e._id,Count:e.count}));$.generateExcelReport({filename:`overview_report_${e}`,title:"Overview Report",metadata:{Generated:e}},[{name:"Overview",data:s,columns:[{wch:25},{wch:20}]},{name:"Users by Role",data:a,columns:[{wch:15},{wch:12}]}]),pe({title:"Overview Report Downloaded"})},className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Export Snapshot"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(i,{className:"lg:col-span-2",children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-primary"}),"User Acquisition Funnel"]}),e.jsx(f,{children:"Guest visits turning into registrations"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"relative pt-4 pb-8",children:e.jsxs("div",{className:"flex items-center justify-between text-center relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Guest Visits"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600 my-2",children:ke?.guestViews||0}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("div",{className:"flex-1 h-1 bg-muted mx-2 relative",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-background px-2 text-xs text-muted-foreground",children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Registrations"}),e.jsx("span",{className:"text-2xl font-bold text-green-600 my-2",children:ke?.newRegistrations||0}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("div",{className:"flex-1 h-1 bg-muted mx-2 relative",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-background px-2 text-xs text-muted-foreground",children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Conversion Rate"}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600 my-2",children:[ke?.conversionRate||0,"%"]}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]})]})}),e.jsx("div",{className:"h-[250px] w-full mt-4",children:e.jsx(X,{width:"100%",height:"100%",children:e.jsxs(re,{data:ke?.registrationsByDate||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#34A853",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#34A853",stopOpacity:0})]})}),e.jsx(Q,{strokeDasharray:"3 3",vertical:!1}),e.jsx(Z,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(J,{axisLine:!1,tickLine:!1}),e.jsx(ee,{}),e.jsx(ie,{type:"monotone",dataKey:"count",stroke:"#34A853",fillOpacity:1,fill:"url(#colorCount)"})]})})})]})]}),e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-primary"}),"User Distribution"]})}),e.jsx(n,{children:e.jsx(X,{width:"100%",height:300,children:e.jsxs(F,{children:[e.jsx(G,{data:ye?.usersByRole||[],dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,children:(ye?.usersByRole||[]).map((s,t)=>e.jsx(se,{fill:ue[t%ue.length]},`cell-${t}`))}),e.jsx(ee,{}),e.jsx(te,{verticalAlign:"bottom",height:36})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mt-4",children:[e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(n,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"h-6 w-6 mx-auto text-blue-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Views"}),e.jsx("p",{className:"text-xl font-bold",children:ye?.overview?.totalViews||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ye?.overview?.uniqueViewers||0," unique viewers"]})]})})}),e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(n,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:"h-6 w-6 mx-auto text-green-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered vs Guest"}),e.jsxs("p",{className:"text-xl font-bold",children:[ye?.overview?.registeredViews||0," / ",ye?.overview?.guestViews||0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered / Guest"})]})})}),e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(n,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{className:"h-6 w-6 mx-auto text-purple-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Interactions"}),e.jsx("p",{className:"text-xl font-bold",children:ye?.overview?.totalInteractions||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Clicks & Shares"})]})})}),e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(n,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"h-6 w-6 mx-auto text-indigo-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Properties"}),e.jsx("p",{className:"text-xl font-bold",children:ye?.overview?.totalProperties||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total listings"})]})})}),e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(n,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(z,{className:"h-6 w-6 mx-auto text-emerald-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Conversion Rate"}),e.jsxs("p",{className:"text-xl font-bold",children:[ke?.conversionRate||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest to user"})]})})})]})]}),e.jsxs(V,{value:"acquisition",className:"space-y-4",children:[Ge&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=xe(new Date,"yyyy-MM-dd"),s=(Re?.trafficBySource||[]).map((e,s)=>({"#":s+1,Source:e.source,Visits:e.count})),t=(Re?.trafficByDevice||[]).map(e=>({Device:e.name||e._id,Count:e.value||e.count})),a=(Re?.trafficByBrowser||[]).map(e=>({Browser:e._id,Count:e.count})),r=(Re?.trafficByCountry||[]).map(e=>({Country:e._id,Visits:e.count})),i=(Re?.peakHours||[]).map(e=>({Hour:`${e._id}:00`,Visits:e.count}));$.generateExcelReport({filename:`traffic_report_${e}`,title:"Traffic Report",metadata:{Generated:e}},[{name:"Traffic Sources",data:s,columns:[{wch:5},{wch:35},{wch:12}]},{name:"Devices",data:t,columns:[{wch:15},{wch:12}]},{name:"Browsers",data:a,columns:[{wch:20},{wch:12}]},{name:"Countries",data:r,columns:[{wch:20},{wch:12}]},{name:"Peak Hours",data:i,columns:[{wch:10},{wch:12}]}]),pe({title:"Traffic Report Downloaded"})},className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Export Acquisition"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),"Traffic Sources"]}),e.jsx(f,{children:"Where your users are coming from"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:0===(Re?.trafficBySource||[]).length?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(oe,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No traffic data yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Traffic will be tracked as users visit pages"})]}):(Re?.trafficBySource||[]).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:ue[t%ue.length]}}),e.jsx("span",{className:"text-sm font-medium truncate",children:s._id||"Direct"})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:s.count/(Re?.trafficBySource[0]?.count||1)*100+"%",backgroundColor:ue[t%ue.length]}})}),e.jsxs("div",{className:"text-right min-w-[60px]",children:[e.jsx("span",{className:"text-sm font-bold",children:s.count}),s.uniqueVisitors&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",s.uniqueVisitors," unique)"]})]})]})]},t))})})]}),e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-primary"}),"Device Breakdown"]})}),e.jsx(n,{children:e.jsx(X,{width:"100%",height:300,children:e.jsxs(F,{children:[e.jsx(G,{data:Re?.trafficByDevice||[],dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",outerRadius:100,label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,children:(Re?.trafficByDevice||[]).map((s,t)=>e.jsx(se,{fill:ue[t%ue.length]},`cell-${t}`))}),e.jsx(ee,{})]})})})]}),e.jsxs(i,{className:"md:col-span-2",children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),"Peak Hours"]}),e.jsx(f,{children:"When users are most active (24h format)"})]}),e.jsx(n,{children:e.jsx(X,{width:"100%",height:250,children:e.jsxs(de,{data:Re?.peakHours||[],children:[e.jsx(Q,{strokeDasharray:"3 3",vertical:!1}),e.jsx(Z,{dataKey:"_id",label:{value:"Hour of Day",position:"insideBottom",offset:-5},tickFormatter:e=>`${e}:00`}),e.jsx(J,{axisLine:!1,tickLine:!1}),e.jsx(ee,{labelFormatter:e=>`${e}:00 - ${e+1}:00`}),e.jsx(ae,{dataKey:"count",fill:"#82ca9d",radius:[4,4,0,0]})]})})})]}),Re?.trafficByCountry&&Re.trafficByCountry.length>0&&e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),"Traffic by Country"]}),e.jsx(f,{children:"Geographic distribution of visitors"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:Re.trafficByCountry.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ue[t%ue.length]}}),e.jsx("span",{className:"text-sm font-medium",children:s._id||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full",style:{width:s.count/(Re.trafficByCountry[0]?.count||1)*100+"%",backgroundColor:ue[t%ue.length]}})}),e.jsx("span",{className:"text-sm font-bold w-8 text-right",children:s.count})]})]},t))})})]}),Re?.trafficByBrowser&&Re.trafficByBrowser.length>0&&e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-primary"}),"Traffic by Browser"]}),e.jsx(f,{children:"Which browsers your visitors use"})]}),e.jsx(n,{children:e.jsx(X,{width:"100%",height:200,children:e.jsxs(F,{children:[e.jsx(G,{data:Re.trafficByBrowser,dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",outerRadius:70,label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,children:Re.trafficByBrowser.map((s,t)=>e.jsx(se,{fill:ue[t%ue.length]},`cell-${t}`))}),e.jsx(ee,{})]})})})]})]})]}),e.jsxs(V,{value:"engagement",className:"space-y-4",children:[Ge&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=xe(new Date,"yyyy-MM-dd"),s=(be?.viewsByDate||[]).map(e=>({Date:e._id,Views:e.count})),t=(be?.viewsByProperty||[]).map((e,s)=>({"#":s+1,Title:e.title,Views:e.views})),a=(be?.viewerTypes||[]).map(e=>({Type:e.name||e._id,Count:e.value||e.count})),r=[{Type:"Phone Clicks",Count:be?.interactions?.phoneClicks||0},{Type:"Message Clicks",Count:be?.interactions?.messageClicks||0},{Type:"Interest Clicks",Count:be?.interactions?.interestClicks||0}];$.generateExcelReport({filename:`property_views_report_${e}`,title:"Property Views Report",metadata:{Generated:e}},[{name:"Daily Views",data:s,columns:[{wch:15},{wch:12}]},{name:"Top Properties",data:t,columns:[{wch:5},{wch:40},{wch:12}]},{name:"Viewer Types",data:a,columns:[{wch:15},{wch:12}]},{name:"Interactions",data:r,columns:[{wch:18},{wch:12}]}]),pe({title:"Property Views Report Downloaded"})},className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Export Engagement"]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-primary"}),"Property Views Over Time"]})}),e.jsx(n,{children:e.jsx(X,{width:"100%",height:350,children:e.jsxs(re,{data:be?.viewsByDate||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#4285F4",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#4285F4",stopOpacity:0})]})}),e.jsx(Q,{strokeDasharray:"3 3",vertical:!1}),e.jsx(Z,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(J,{axisLine:!1,tickLine:!1}),e.jsx(ee,{}),e.jsx(te,{}),e.jsx(ie,{type:"monotone",dataKey:"views",stroke:"#4285F4",fillOpacity:1,fill:"url(#colorViews)"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-primary"}),"Top Viewed Properties"]}),e.jsx(f,{children:"Most popular listings"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:(be?.viewsByProperty||[]).slice(0,5).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors border",onClick:()=>Me(s.propertyId),children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-8 h-8 rounded bg-primary/10 text-primary font-bold text-sm",children:t+1}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:s.propertyTitle}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.uniqueViewers," unique viewers"]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("p",{className:"text-lg font-bold",children:s.totalViews}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"views"})]})]},s.propertyId))})})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-primary"}),"Interaction Types"]}),e.jsx(f,{children:"How users engage with properties"})]}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded text-blue-600 dark:text-blue-300",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx("span",{children:"Phone Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:be?.interactions?.phoneClicks||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded text-green-600 dark:text-green-300",children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("span",{children:"Message Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:be?.interactions?.messageClicks||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded text-purple-600 dark:text-purple-300",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx("span",{children:"Interest Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:be?.interactions?.interestClicks||0})]})]})})]})]})]})]}),e.jsxs(V,{value:"retention",className:"space-y-4",children:[Ge&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=xe(new Date,"yyyy-MM-dd"),s=(Se?.activeUsers||[]).map(e=>({Date:e._id,Total:e.count,Customers:e.customers||0,Agents:e.vendors||0})),t=(Se?.messageActivity||[]).map(e=>({Date:e._id,Messages:e.count})),a=(Se?.reviewActivity||[]).map(e=>({Date:e._id,Reviews:e.count,"Avg Rating":(e.avgRating||0).toFixed(1)}));$.generateExcelReport({filename:`engagement_report_${e}`,title:"Engagement Report",metadata:{Generated:e}},[{name:"Daily Active Users",data:s,columns:[{wch:15},{wch:10},{wch:12},{wch:10}]},{name:"Message Activity",data:t,columns:[{wch:15},{wch:12}]},{name:"Review Activity",data:a,columns:[{wch:15},{wch:10},{wch:12}]}]),pe({title:"Engagement Report Downloaded"})},className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Export Retention"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(i,{className:"lg:col-span-2",children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-primary"}),"Daily Active Users"]}),e.jsx(f,{children:"Users who logged in by role (customers vs agents/vendors)"})]}),e.jsx(n,{children:e.jsx(X,{width:"100%",height:350,children:e.jsxs(ce,{data:Se?.activeUsers||[],children:[e.jsx(Q,{strokeDasharray:"3 3",vertical:!1}),e.jsx(Z,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(J,{axisLine:!1,tickLine:!1}),e.jsx(ee,{content:({active:s,payload:t,label:a})=>{if(s&&t&&t.length){const s=t[0]?.payload;return e.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3",children:[e.jsx("p",{className:"font-bold text-sm mb-2",children:a}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-blue-600",children:["Customers: ",s?.customers||0]}),e.jsxs("p",{className:"text-green-600",children:["Agents/Vendors: ",s?.vendors||0]}),e.jsxs("p",{className:"font-semibold",children:["Total: ",s?.count||0]})]}),s?.topUsers&&s.topUsers.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Active users:"}),e.jsx("ul",{className:"text-xs space-y-0.5",children:s.topUsers.map((s,t)=>e.jsx("li",{children:s},t))})]})]})}return null}}),e.jsx(te,{}),e.jsx(L,{type:"monotone",dataKey:"customers",name:"Customers",stroke:"#4285F4",strokeWidth:2,dot:{r:4,fill:"#4285F4"},activeDot:{r:6,fill:"#4285F4"}}),e.jsx(L,{type:"monotone",dataKey:"vendors",name:"Agents/Vendors",stroke:"#34A853",strokeWidth:2,dot:{r:4,fill:"#34A853"},activeDot:{r:6,fill:"#34A853"}})]})})})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),"Active Users Summary"]}),e.jsx(f,{children:"Breakdown by role"})]}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Customers"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:Se?.activeUsersSummary?.customers?.count||0})]}),e.jsxs("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[(Se?.activeUsersSummary?.customers?.users||[]).slice(0,5).map((s,t)=>e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),s.name||s.email]},t)),(Se?.activeUsersSummary?.customers?.users?.length||0)>5&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(Se?.activeUsersSummary?.customers?.users?.length||0)-5," more"]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Agents/Vendors"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:Se?.activeUsersSummary?.vendors?.count||0})]}),e.jsxs("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[(Se?.activeUsersSummary?.vendors?.users||[]).slice(0,5).map((s,t)=>e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),s.name||s.email]},t)),(Se?.activeUsersSummary?.vendors?.users?.length||0)>5&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(Se?.activeUsersSummary?.vendors?.users?.length||0)-5," more"]})]})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Active Users"}),e.jsx("span",{className:"text-xl font-bold text-primary",children:(Se?.activeUsersSummary?.customers?.count||0)+(Se?.activeUsersSummary?.vendors?.count||0)})]})})]})]})]})]}),e.jsx(V,{value:"detailed",className:"space-y-4",children:e.jsx(K,{dateRange:ve,propertyId:Ae,customStartDate:Ue,customEndDate:_e})})]})]})};export{he as default};
