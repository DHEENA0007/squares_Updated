import{j as e}from"./ui-DYmpZ3pJ.js";import{u as k,t as D,o as L,e as v,s as i,d as f}from"./types-Cl7zAayM.js";import{D as R,I as d,P as y,i as w,f as h,g,k as N,E as b,p as C,q as S,r as F,s as P,v as x}from"./index-BbgqWuYN.js";import{F as B,a,b as t,c as n,d as l,e as o}from"./form-C95Wfgvj.js";import{f as E,C as _}from"./calendar-By3b376p.js";import{d as $,r as M}from"./router-2SVJvIbS.js";import{u as q}from"./userService-BmC1RzMq.js";import{C as T}from"./calendar-BL1izdXI.js";import{E as I}from"./eye-off-B4x_R5-l.js";import"./vendor-Dazix4UH.js";import"./label-DRahLfWI.js";const O=L({first_name:i().min(2,"First name must be at least 2 characters"),last_name:i().min(2,"Last name must be at least 2 characters"),email:i().email("Invalid email address"),phone:i().regex(/^[0-9]{10}$/,"Must be 10 digits"),birthday:f().optional(),anniversary:f().optional(),password:i().min(8,"Password must be at least 8 characters"),confirm_password:i(),role:v(["admin","moderator","user"]),status:v(["active","inactive"])}).refine(m=>m.password===m.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}),se=()=>{const{toast:m}=R(),p=$(),[u,U]=M.useState(!1),[j,V]=M.useState(!1),r=k({resolver:D(O),defaultValues:{first_name:"",last_name:"",email:"",phone:"",role:"user",status:"active",password:"",confirm_password:""}}),A=async s=>{try{const c={email:s.email,password:s.password,profile:{firstName:s.first_name,lastName:s.last_name,phone:s.phone,birthday:s.birthday,anniversary:s.anniversary},role:s.role,status:s.status};await q.createUser(c),m({title:"Success",description:"User created successfully."}),p("/admin/users")}catch(c){console.error("Failed to create user:",c),m({title:"Error",description:"Failed to create user. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New User"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new user account"})]}),e.jsx("div",{className:"bg-card rounded-lg border p-6 md:p-8",children:e.jsx(B,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(A),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a,{control:r.control,name:"first_name",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"First Name *"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Enter first name",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"last_name",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Last Name *"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Enter last name",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"email",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Email *"}),e.jsx(l,{children:e.jsx(d,{type:"email",placeholder:"Enter email",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Phone Number *"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Enter phone number",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"birthday",render:({field:s})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(n,{children:"Birthday"}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(l,{children:e.jsxs(h,{variant:"outline",className:g("w-full justify-start text-left font-normal",!s.value&&"text-muted-foreground"),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),s.value?E(s.value,"dd/MM/yyyy"):e.jsx("span",{children:"dd/mm/yyyy"})]})})}),e.jsx(N,{className:"w-auto p-0",align:"start",children:e.jsx(_,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:c=>c>new Date,initialFocus:!0,className:"pointer-events-auto"})})]}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"anniversary",render:({field:s})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(n,{children:"Anniversary"}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(l,{children:e.jsxs(h,{variant:"outline",className:g("w-full justify-start text-left font-normal",!s.value&&"text-muted-foreground"),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),s.value?E(s.value,"dd/MM/yyyy"):e.jsx("span",{children:"dd/mm/yyyy"})]})})}),e.jsx(N,{className:"w-auto p-0",align:"start",children:e.jsx(_,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:c=>c>new Date,initialFocus:!0,className:"pointer-events-auto"})})]}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"password",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Password *"}),e.jsx(l,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:u?"text":"password",placeholder:"Enter password",...s}),e.jsx("button",{type:"button",onClick:()=>U(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:u?e.jsx(I,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"confirm_password",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Confirm Password *"}),e.jsx(l,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:j?"text":"password",placeholder:"Re-enter password",...s}),e.jsx("button",{type:"button",onClick:()=>V(!j),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:j?e.jsx(I,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"role",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Role *"}),e.jsxs(C,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(l,{children:e.jsx(S,{children:e.jsx(F,{placeholder:"Select role"})})}),e.jsxs(P,{children:[e.jsx(x,{value:"admin",children:"Admin"}),e.jsx(x,{value:"moderator",children:"Moderator"}),e.jsx(x,{value:"user",children:"User"})]})]}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"status",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Status *"}),e.jsxs(C,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(l,{children:e.jsx(S,{children:e.jsx(F,{placeholder:"Select status"})})}),e.jsxs(P,{children:[e.jsx(x,{value:"active",children:"Active"}),e.jsx(x,{value:"inactive",children:"Inactive"})]})]}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>p("/admin/users"),children:"Cancel"}),e.jsx(h,{type:"submit",children:"Create User"})]})]})})})]})};export{se as default};
