import{y as i}from"./index-BbgqWuYN.js";class c{baseUrl="https://squares-v2.onrender.com/api";async makeRequest(e,t={}){const r=`${this.baseUrl}${e}`,n={headers:{"Content-Type":"application/json",...t.headers},...t},o=i.getToken();o&&(n.headers={...n.headers,Authorization:`Bearer ${o}`});try{const s=await fetch(r,n);if(!s.ok){const a=await s.json().catch(()=>({success:!1,message:`HTTP ${s.status}: ${s.statusText}`}));throw new Error(a.message||"An error occurred")}return await s.json()}catch(s){throw console.error("API request failed:",s),s}}async getCustomerProperties(e={}){try{const t=new URLSearchParams;Object.entries(e).forEach(([o,s])=>{s!=null&&s!==""&&t.append(o,s.toString())});const r=`/customer/properties${t.toString()?`?${t.toString()}`:""}`;return await this.makeRequest(r)}catch(t){return console.error("Failed to fetch customer properties:",t),{success:!0,data:{properties:[],pagination:{currentPage:1,totalPages:0,totalProperties:0,hasNextPage:!1,hasPrevPage:!1},stats:{totalProperties:0,activeProperties:0,rentedProperties:0,soldProperties:0,draftProperties:0,pendingProperties:0,totalViews:0,totalInquiries:0,totalFavorites:0,totalRevenue:0,monthlyRevenue:0,averageViews:0,averageInquiries:0,conversionRate:0}}}}}async getCustomerPropertyStats(){try{return await this.makeRequest("/customer/properties/stats")}catch(e){return console.error("Failed to fetch customer property stats:",e),{success:!0,data:{totalProperties:0,activeProperties:0,rentedProperties:0,soldProperties:0,draftProperties:0,pendingProperties:0,totalViews:0,totalInquiries:0,totalFavorites:0,totalRevenue:0,monthlyRevenue:0,averageViews:0,averageInquiries:0,conversionRate:0}}}}async getProperty(e){try{return await this.makeRequest(`/customer/properties/${e}`)}catch(t){throw console.error("Failed to fetch property:",t),t}}async createProperty(e){try{return await this.makeRequest("/customer/properties",{method:"POST",body:JSON.stringify(e)})}catch(t){throw console.error("Failed to create property:",t),t}}async updateProperty(e,t){try{return await this.makeRequest(`/customer/properties/${e}`,{method:"PUT",body:JSON.stringify(t)})}catch(r){throw console.error("Failed to update property:",r),r}}async deleteProperty(e){try{await this.makeRequest(`/customer/properties/${e}`,{method:"DELETE"})}catch(t){throw console.error("Failed to delete property:",t),t}}async togglePropertyStatus(e,t){try{return await this.makeRequest(`/customer/properties/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})})}catch(r){throw console.error("Failed to toggle property status:",r),r}}async togglePropertyFeatured(e,t){try{return await this.makeRequest(`/customer/properties/${e}/featured`,{method:"PATCH",body:JSON.stringify({featured:t})})}catch(r){throw console.error("Failed to toggle property featured status:",r),r}}async getPropertyAnalytics(e,t="month"){try{return await this.makeRequest(`/customer/properties/${e}/analytics?period=${t}`)}catch(r){return console.error("Failed to fetch property analytics:",r),{success:!0,data:{views:[],inquiries:[],favorites:[],conversionRate:0,avgResponseTime:"N/A",topReferrers:[],engagement:{totalClicks:0,phoneClicks:0,emailClicks:0,messageClicks:0}}}}}formatPrice(e,t){return t==="rent"?`₹${e.toLocaleString("en-IN")}/month`:t==="lease"?`₹${e.toLocaleString("en-IN")}/year`:e>=1e7?`₹${(e/1e7).toFixed(1)} Cr`:e>=1e5?`₹${(e/1e5).toFixed(1)} Lac`:`₹${e.toLocaleString("en-IN")}`}formatArea(e){return e.builtUp?`${e.builtUp} ${e.unit}`:e.plot?`${e.plot} ${e.unit}`:e.carpet?`${e.carpet} ${e.unit}`:"Area not specified"}getStatusColor(e){switch(e){case"active":return"bg-green-500";case"rented":return"bg-blue-500";case"sold":return"bg-purple-500";case"pending":return"bg-yellow-500";case"draft":return"bg-gray-500";case"inactive":return"bg-red-500";default:return"bg-gray-500"}}getStatusText(e){switch(e){case"active":return"Active";case"rented":return"Rented";case"sold":return"Sold";case"pending":return"Under Review";case"draft":return"Draft";case"inactive":return"Inactive";default:return e}}formatTimeAgo(e){const t=new Date(e),n=new Date().getTime()-t.getTime(),o=Math.floor(n/(1e3*60)),s=Math.floor(o/60),a=Math.floor(s/24);return o<1?"Just now":o<60?`${o} min ago`:s<24?`${s} hour${s>1?"s":""} ago`:a<7?`${a} day${a>1?"s":""} ago`:t.toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}getPrimaryImage(e){return e.images.find(r=>r.isPrimary)?.url||e.images[0]?.url||"/placeholder-property.jpg"}getDaysOnMarket(e){const t=new Date(e),n=new Date().getTime()-t.getTime();return Math.floor(n/(1e3*60*60*24))}calculateMonthlyRevenue(e){return e.filter(t=>t.status==="rented"&&t.listingType==="rent").reduce((t,r)=>t+r.price,0)}calculateTotalRevenue(e){const t=e.filter(s=>s.status==="sold");e.filter(s=>s.status==="rented");const r=t.reduce((s,a)=>s+a.price,0),o=this.calculateMonthlyRevenue(e)*12;return r+o}}const p=new c;export{p as c};
