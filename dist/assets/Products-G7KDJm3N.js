import{j as e}from"./ui-BHyUY8Z8.js";import{r as a}from"./router-2SVJvIbS.js";import{P as F,a as E}from"./PropertyCard-DgWWRKMY.js";import{Y as w,I as k,H as I,f as L,az as A,t as _}from"./index-Bd1eLXM_.js";import{P as D,a as T,b as l,c as M,d as Q,f as R,e as z}from"./pagination-Rt-SIkt9.js";import"./vendor-Dazix4UH.js";import"./propertyUtils-DZZpAHgC.js";import"./PropertyContactDialog-32m44eBz.js";import"./messageService-CBhFp6R7.js";import"./send-DXGW9Fle.js";import"./EnterprisePropertyContactDialog-B44d9wXm.js";import"./dollar-sign-Ce6I0kKs.js";import"./vendorService-D-gy-uZj.js";import"./square-CHtLIP04.js";import"./ellipsis-CXpaKV_5.js";const m=12,te=()=>{const[s,i]=a.useState(1),[c,x]=a.useState(""),[p,P]=a.useState([]),[d,h]=a.useState(!0),[o,v]=a.useState(0),[g,N]=a.useState(0),[u,f]=a.useState({});a.useEffect(()=>{(async()=>{h(!0);try{const n={page:s,limit:m,search:c||void 0,...u},t=await A.getProperties(n);t.success&&(P(t.data.properties),v(t.data.pagination.totalPages),N(t.data.pagination.totalProperties))}catch(n){console.error("Failed to fetch properties:",n),_({title:"Error",description:"Failed to load properties. Please try again.",variant:"destructive"})}finally{h(!1)}})()},[s,c,u]);const y=r=>{x(r),i(1)},S=r=>{f(r),i(1)},j=(s-1)*m,C=Math.min(j+m,g);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(k,{type:"text",placeholder:"Search properties by location, type...",className:"pl-10 h-12",value:c,onChange:r=>y(r.target.value)})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:e.jsx(F,{onFilterChange:S})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),e.jsx("p",{className:"text-muted-foreground",children:d?"Loading properties...":e.jsxs(e.Fragment,{children:["Showing ",j+1,"-",C," of ",g," properties"]})})]}),d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(I,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No properties found matching your criteria."}),e.jsx(L,{onClick:()=>{f({}),x(""),i(1)},variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6 mb-8",children:p.map(r=>e.jsx(E,{property:r},r._id))}),!d&&p.length>0&&o>1&&e.jsx(D,{children:e.jsxs(T,{children:[e.jsx(l,{children:e.jsx(M,{href:"#",onClick:r=>{r.preventDefault(),s>1&&i(s-1)},className:s===1?"pointer-events-none opacity-50":""})}),[...Array(o)].map((r,n)=>{const t=n+1;return t===1||t===o||t>=s-1&&t<=s+1?e.jsx(l,{children:e.jsx(Q,{href:"#",onClick:b=>{b.preventDefault(),i(t)},isActive:s===t,children:t})},t):t===s-2||t===s+2?e.jsx(l,{children:e.jsx(R,{})},t):null}),e.jsx(l,{children:e.jsx(z,{href:"#",onClick:r=>{r.preventDefault(),s<o&&i(s+1)},className:s===o?"pointer-events-none opacity-50":""})})]})})]})]})]})};export{te as default};
