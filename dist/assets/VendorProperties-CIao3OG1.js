import{j as e}from"./ui-BNZSgpjP.js";import{r as s,R as a,h as t,L as r}from"./router-D8v2YSKU.js";import{a2 as l,a4 as d,a5 as i,a6 as n,a7 as o,a8 as c,B as m,L as x,C as u,f as h,_ as p,$ as g,I as j,T as b,ae as f,K as v,a3 as N,aL as w,a9 as y,a as k,e as C,bO as S,E as P,Q as T,q as A,r as L,aj as R,s as $,v as _,w as F,aD as V,aE as U,aF as E,aI as q,U as z,ad as O,k as M,t as D}from"./index-CNlJR0_e.js";import{A as B,a as Y}from"./alert-CBeoSSiV.js";import{C as I}from"./circle-alert-DHGZCoBp.js";import{C as G}from"./camera-BW76F83c.js";import{E as K}from"./ellipsis-vertical-BNYVnkLk.js";import{P as W}from"./pen-line-DM0aMaTW.js";import{T as H}from"./trending-up-DFG-fKUU.js";import{C as J}from"./calendar-CrPbwTJs.js";import"./vendor-BxThA0WO.js";const Q=({property:t,open:r,onOpenChange:N,onUpdateStatus:w})=>{const{toast:y}=l(),[k,C]=s.useState(""),[S,P]=s.useState(""),[T,A]=s.useState(!1),[L,R]=s.useState(""),[$,_]=s.useState([]),[F,V]=s.useState(!1),[U,E]=s.useState(""),q="available"===t?.status,z=t?.status&&["rented","leased"].includes(t.status),O=(()=>{if(!t)return null;const e=t.listingType||"sale",s=t.status;return"rented"===s&&"rent"===e||"leased"===s&&"lease"===e?{value:"available",label:"Mark as Available",color:"bg-green-500",isRevert:!0,requiresCustomer:!1}:"sale"===e?{value:"sold",label:"Mark as Sold",color:"bg-blue-500",isRevert:!1,requiresCustomer:!0}:"rent"===e?{value:"rented",label:"Mark as Rented",color:"bg-purple-500",isRevert:!1,requiresCustomer:!0}:"lease"===e?{value:"leased",label:"Mark as Leased",color:"bg-indigo-500",isRevert:!1,requiresCustomer:!0}:{value:"sold",label:"Mark as Sold/Unavailable",color:"bg-gray-600",isRevert:!1,requiresCustomer:!1}})(),M=$.filter(e=>{const s=U.toLowerCase(),a=`${e.profile?.firstName||""} ${e.profile?.lastName||""}`.toLowerCase(),t=e.email?.toLowerCase()||"";return a.includes(s)||t.includes(s)});a.useEffect(()=>{t&&r&&(C(""),P(""),R(""),E(""))},[t,r]);const D=e=>{switch(e){case"active":return"bg-green-500";case"pending":return"bg-yellow-500";case"sold":return"bg-blue-500";case"rented":return"bg-purple-500";case"leased":return"bg-indigo-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}},G=e=>{switch(e){case"active":return"Active";case"pending":return"Pending Approval";case"sold":return"Sold";case"rented":return"Rented";case"leased":return"Leased";case"rejected":return"Rejected";default:return e.charAt(0).toUpperCase()+e.slice(1)}};return e.jsx(d,{open:r,onOpenChange:N,children:e.jsxs(i,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(n,{children:[e.jsx(o,{children:"Update Property Status"}),e.jsx(c,{children:t?.title}),t?.listingType&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Listing Type: ",e.jsx(m,{variant:"outline",className:"ml-1",children:t.listingType})]})]}),"        ",e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Current Status"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(m,{className:`${D(t?.status||"")} text-white`,children:G(t?.status||"")})})]}),!q&&!z&&e.jsxs(B,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsxs(Y,{children:["This property is not yet approved by admin. You can only update the status to ",O?.label.toLowerCase()," after admin approval."]})]}),"sold"===t?.status?e.jsxs(B,{children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx(Y,{children:"This property has been sold and cannot be made available again."})]}):"rented"!==t?.status&&"leased"!==t?.status||z?""===k?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Action"}),e.jsx(h,{onClick:()=>{O&&(C(O.value),O.isRevert||(async()=>{try{V(!0);const e=await v.getUsers({role:"customer",limit:100,status:"active"});e.success&&e.data?.users?_(e.data.users):y({title:"Warning",description:"Failed to load customers properly.",variant:"default"})}catch(e){y({title:"Error",description:"Failed to load customers.",variant:"destructive"})}finally{V(!1)}})())},disabled:!q&&!z||!O,className:`w-full ${O?.color||"bg-primary"} hover:opacity-90 text-white`,size:"lg",children:O?.label||"Update Status"}),!q&&!z&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Button will be enabled once admin approves your property"}),O?.isRevert&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["This will make the property available for ",t?.listingType," again"]})]})}):e.jsxs(e.Fragment,{children:[!O?.isRevert&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(x,{children:["Assign To Customer",O?.requiresCustomer&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),L?e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-primary/5 border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:$.find(e=>e._id===L)?.profile?.firstName?.[0]||"C"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:[$.find(e=>e._id===L)?.profile?.firstName," ",$.find(e=>e._id===L)?.profile?.lastName]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:$.find(e=>e._id===L)?.email})]})]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>R(""),className:"h-8 w-8 p-0",children:e.jsx(p,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(j,{placeholder:"Search customer by name or email...",value:U,onChange:e=>E(e.target.value),className:"pl-10"})]}),U.length>0&&(F?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-2",children:"Loading customers..."}):e.jsx("div",{className:"border rounded-md max-h-[200px] overflow-y-auto bg-popover shadow-sm mt-1",children:0===M.length?e.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"No customers found"}):e.jsx("div",{className:"divide-y",children:M.map(s=>e.jsxs("div",{className:"p-3 hover:bg-muted cursor-pointer transition-colors flex items-center justify-between group",onClick:()=>R(s._id),children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-medium text-sm",children:[s.profile?.firstName," ",s.profile?.lastName]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.email})]}),e.jsx(h,{size:"sm",variant:"ghost",className:"opacity-0 group-hover:opacity-100 h-7 text-xs",children:"Select"})]},s._id))})}))]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This property will be added to the selected customer's portfolio"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"reason",children:"Additional Notes (Optional)"}),e.jsx(b,{id:"reason",placeholder:"Add any notes about this transaction...",value:S,onChange:e=>P(e.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Status Change Preview"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:`${D(t?.status||"")} text-white`,children:G(t?.status||"")}),e.jsx("span",{className:"text-muted-foreground",children:"â†’"}),e.jsx(m,{className:`${O?.color||"bg-gray-500"} text-white`,children:G(k)})]})]})]}):e.jsxs(B,{children:[e.jsx(u,{className:"h-4 w-4"}),e.jsxs(Y,{children:["This property has already been marked as ",G(t.status).toLowerCase(),"."]})]})]}),e.jsxs(f,{children:[e.jsx(h,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),k&&e.jsx(h,{onClick:async()=>{if(t&&k)if(!O?.requiresCustomer||L){A(!0);try{await w(t._id,k,O?.isRevert?void 0:L,S.trim()||void 0),N(!1)}catch(e){}finally{A(!1)}}else y({title:"Customer Required",description:`Please select a customer to assign this ${k} property to.`,variant:"destructive"})},disabled:T||O?.requiresCustomer&&!L,className:`${O?.color||"bg-primary"} hover:opacity-90 text-white`,children:T?"Updating...":`Confirm ${O?.label}`})]})]})})},X=()=>{const[a]=t(),[l,d]=s.useState(a.get("search")||""),[i,n]=s.useState("all"),[o,c]=s.useState("all"),[x,u]=s.useState(!0),[p,b]=s.useState([]),[f,v]=s.useState(!1),[B,Y]=s.useState(null),[I,X]=s.useState([]),[Z,ee]=s.useState(!0),[se,ae]=s.useState({totalProperties:0,totalViews:0,totalFavorites:0,averageRating:0}),[,te]=s.useState({currentPage:1,totalPages:1,totalProperties:0,hasNextPage:!1,hasPrevPage:!1});s.useEffect(()=>{le(),de(),re()},[]);const re=async()=>{try{ee(!0);const e=(await N.getAllPropertyTypes(!1)).sort((e,s)=>(e.displayOrder||0)-(s.displayOrder||0)).map(e=>({value:e.value,label:e.name}));X(e)}catch(e){X([{value:"apartment",label:"Apartment"},{value:"house",label:"House"},{value:"villa",label:"Villa"},{value:"plot",label:"Plot"},{value:"land",label:"Land"},{value:"commercial",label:"Commercial"},{value:"office",label:"Office"},{value:"pg",label:"PG (Paying Guest)"}])}finally{ee(!1)}};s.useEffect(()=>{const e=a.get("search");e&&d(e)},[a]),s.useEffect(()=>{le()},[l,i,o]);const le=async()=>{try{u(!0);const e={page:1,limit:10,...l&&{search:l},..."all"!==i&&{status:i},..."all"!==o&&{propertyType:o}},s=await w.getVendorProperties(e);b(s.data.properties),te(s.data.pagination)}catch(e){}finally{u(!1)}},de=async()=>{try{const e=await w.getVendorPropertyStats();ae(e)}catch(e){}},ie=e=>{Y(e),v(!0)},ne=e=>{const s=[];return e.address.locationName&&s.push(e.address.locationName),e.address.city&&s.push(e.address.city),e.address.state&&s.push(e.address.state),s.join(", ")||"Location not specified"},oe=s=>{const a=[{label:"Beds",value:s.bedrooms,show:s.bedrooms>0},{label:"Baths",value:s.bathrooms,show:s.bathrooms>0},{label:"Area",value:w.hasValidArea(s.area)?w.formatArea(s.area).split(" ")[0]:null,show:w.hasValidArea(s.area)},{label:"Type",value:s.type,show:!!s.type}].filter(e=>e.show);return 0===a.length?null:e.jsx("div",{className:"flex py-3 border-t border-border mb-4 bg-muted/50 rounded-lg px-2",children:a.map((s,a)=>e.jsxs("div",{className:"flex-1 text-center "+(a>0?"border-l border-border":""),children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider mb-0.5",children:s.label}),e.jsx("p",{className:"font-semibold text-sm text-foreground truncate px-1 capitalize",children:s.value})]},s.label))})};return x?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading properties..."})]})}):e.jsxs("div",{className:"space-y-4 md:space-y-6 mt-6 px-4 md:px-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"My Properties"}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Manage and track your property listings"})]}),e.jsx(r,{to:"/vendor/properties/add",className:"w-full sm:w-auto",children:e.jsxs(h,{className:"w-full",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Add Property"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsx(k,{className:"bg-gradient-to-br from-blue-50 to-white border-blue-100 dark:from-blue-950/40 dark:to-background dark:border-blue-900/50",children:e.jsx(C,{className:"p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-blue-600/80 dark:text-blue-400/80",children:"Total Properties"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-blue-700 dark:text-blue-400",children:se.totalProperties})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(S,{className:"h-5 w-5 md:h-6 md:w-6 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(k,{className:"bg-gradient-to-br from-green-50 to-white border-green-100 dark:from-green-950/40 dark:to-background dark:border-green-900/50",children:e.jsx(C,{className:"p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-green-600/80 dark:text-green-400/80",children:"Total Views"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-green-700 dark:text-green-400",children:se.totalViews.toLocaleString()})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(P,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600 dark:text-green-400"})})]})})}),e.jsx(k,{className:"bg-gradient-to-br from-orange-50 to-white border-orange-100 dark:from-orange-950/40 dark:to-background dark:border-orange-900/50",children:e.jsx(C,{className:"p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-orange-600/80 dark:text-orange-400/80",children:"Avg. Rating"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-orange-700 dark:text-orange-400",children:se.averageRating.toFixed(1)})]}),e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(T,{className:"h-5 w-5 md:h-6 md:w-6 text-orange-600 dark:text-orange-400"})})]})})}),e.jsx(k,{className:"bg-gradient-to-br from-purple-50 to-white border-purple-100 dark:from-purple-950/40 dark:to-background dark:border-purple-900/50",children:e.jsx(C,{className:"p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-purple-600/80 dark:text-purple-400/80",children:"Favorites"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-purple-700 dark:text-purple-400",children:se.totalFavorites})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(T,{className:"h-5 w-5 md:h-6 md:w-6 text-purple-600 dark:text-purple-400"})})]})})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-card p-4 rounded-xl border shadow-sm dark:border-border",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(j,{placeholder:"Search properties by name, location...",value:l,onChange:e=>d(e.target.value),className:"pl-10 bg-background border-input focus:bg-background transition-colors"})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsxs(A,{value:i,onValueChange:n,children:[e.jsx(L,{className:"w-full md:w-[180px] bg-background border-input",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-muted-foreground"}),e.jsx($,{placeholder:"Status"})]})}),e.jsxs(_,{children:[e.jsx(F,{value:"all",children:"All Status"}),e.jsx(F,{value:"available",children:"Available"}),e.jsx(F,{value:"pending",children:"Pending"}),e.jsx(F,{value:"sold",children:"Sold"}),e.jsx(F,{value:"rented",children:"Rented"}),e.jsx(F,{value:"leased",children:"Leased"})]})]}),e.jsxs(A,{value:o,onValueChange:c,disabled:Z,children:[e.jsx(L,{className:"w-full md:w-[180px] bg-background border-input",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-muted-foreground"}),e.jsx($,{placeholder:Z?"Loading...":"Type"})]})}),e.jsxs(_,{children:[e.jsx(F,{value:"all",children:"All Types"}),I.map(s=>e.jsx(F,{value:s.value,children:s.label},s.value))]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(s=>e.jsxs(k,{className:"group overflow-hidden hover:shadow-lg transition-all duration-300 border-border flex flex-col h-full dark:bg-card",children:[e.jsxs("div",{className:"relative h-48 bg-muted overflow-hidden",children:[s.images&&s.images.length>0?e.jsx("img",{src:w.getPrimaryImage(s),alt:s.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-muted to-muted/80 flex items-center justify-center",children:e.jsx(G,{className:"w-12 h-12 text-muted-foreground/50"})}),s.images&&s.images.length>0&&e.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/60 backdrop-blur-sm text-white px-2 py-1 rounded-md text-xs font-medium flex items-center gap-1.5",children:[e.jsx(G,{className:"w-3 h-3"}),s.images.length]})]}),e.jsxs(C,{className:"p-5 flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx(m,{className:`${w.getStatusColor(s.status)} text-white border-0 shadow-sm`,children:w.getStatusText(s.status)}),e.jsxs(m,{variant:"secondary",className:"bg-blue-50 text-blue-700 border-blue-100 shadow-sm dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800",children:["For ",s.listingType.charAt(0).toUpperCase()+s.listingType.slice(1)]}),s.featured&&e.jsxs(m,{className:"bg-amber-100 text-amber-700 border-amber-200 shadow-sm dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800",children:[e.jsx(T,{className:"w-3 h-3 mr-1 fill-current"}),"Featured"]}),s.verified&&e.jsx(m,{className:"bg-emerald-100 text-emerald-700 border-emerald-200 shadow-sm dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800",children:"Verified"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground line-clamp-1 hover:text-primary transition-colors cursor-pointer",onClick:()=>window.location.href=`/vendor/properties/details/${s._id}`,children:s.title}),e.jsxs(V,{children:[e.jsx(U,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8 -mr-2 -mt-1 text-muted-foreground hover:text-foreground",children:e.jsx(K,{className:"w-4 h-4"})})}),e.jsxs(E,{align:"end",children:[e.jsx(q,{asChild:!0,children:e.jsxs(r,{to:`/vendor/properties/details/${s._id}`,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"View Details"]})}),e.jsx(q,{asChild:!0,children:e.jsxs(r,{to:`/vendor/properties/edit/${s._id}`,children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Edit Property"]})}),e.jsxs(q,{onClick:()=>(async(e,s)=>{try{await w.togglePropertyFeatured(e,!s),le(),de()}catch(a){}})(s._id,s.featured),children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),s.featured?"Unfeature":"Promote"]}),("available"===s.status||"rented"===s.status||"leased"===s.status)&&e.jsxs(q,{onClick:()=>ie(s),children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Update Status"]}),e.jsxs(q,{className:"text-red-600 focus:text-red-600 focus:bg-red-50",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this property?"))try{await w.deleteProperty(e),le(),de()}catch(s){}})(s._id),children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),e.jsxs("p",{className:"text-muted-foreground flex items-center text-sm mb-3",children:[e.jsx(M,{className:"w-3.5 h-3.5 mr-1.5 flex-shrink-0 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:ne(s)})]}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:w.formatPrice(s.price,s.listingType)})]}),oe(s),e.jsxs("div",{className:"mt-auto space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center",title:"Views",children:[e.jsx(P,{className:"w-3.5 h-3.5 mr-1"}),s.views]}),e.jsxs("span",{className:"flex items-center",title:"Favorites",children:[e.jsx(T,{className:"w-3.5 h-3.5 mr-1"}),s.favorites||0]})]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(J,{className:"w-3.5 h-3.5 mr-1"}),new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(r,{to:`/vendor/properties/edit/${s._id}`,children:e.jsxs(h,{size:"sm",variant:"outline",className:"w-full h-9",children:[e.jsx(W,{className:"w-3.5 h-3.5 mr-2"}),"Edit"]})}),e.jsx(r,{to:`/vendor/properties/details/${s._id}`,children:e.jsx(h,{size:"sm",className:"w-full h-9",children:"View"})})]}),e.jsxs(h,{size:"sm",variant:"secondary",className:"w-full h-9",onClick:()=>ie(s),children:[e.jsx(z,{className:"w-3.5 h-3.5 mr-2"}),"Update Status"]})]})]})]})]},s._id))}),0===p.length&&!x&&e.jsx(k,{children:e.jsxs(C,{className:"p-8 md:p-12 text-center",children:[e.jsx(S,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No properties found"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm md:text-base",children:l||"all"!==i||"all"!==o?"No properties match your search criteria":"You haven't added any properties yet"}),e.jsx(r,{to:"/vendor/properties/add",className:"w-full sm:w-auto",children:e.jsxs(h,{className:"w-full sm:w-auto",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Add Your First Property"]})})]})}),e.jsx(Q,{property:B,open:f,onOpenChange:v,onUpdateStatus:async(e,s,a,t)=>{try{b(a=>a.map(a=>a._id===e?{...a,status:s}:a)),!a||"sold"!==s&&"rented"!==s&&"leased"!==s?(await w.togglePropertyStatus(e,s),D({title:"Success",description:`Property status updated to ${s}!`})):(await w.assignPropertyToCustomer(e,a,s,t),D({title:"Success",description:`Property ${s} and assigned to customer successfully!`})),de()}catch(r){le(),D({title:"Error",description:"Failed to update property status",variant:"destructive"})}}})]})};export{X as default};
