import{j as e}from"./ui-BHyUY8Z8.js";import{R as Z,r as c}from"./router-2SVJvIbS.js";import{G as he,a as h,b as v,c as j,an as O,e as g,M as K,a9 as ge,T as X,B as k,U as te,f as I,m as w,t as m,H as ce,z as Te,X as Ve,a2 as ze,a3 as De,a4 as Be,L as p,I as y,A as qe,at as $e,$ as Oe,a0 as _e,a1 as _,am as G,q as de,s as H,v as J,w as W,x as Y,y as x,C as pe,r as Ge,aB as He,h as Je,S as We}from"./index-Bd1eLXM_.js";import{S as ae}from"./switch-DhuCaVX7.js";import{vendorService as L}from"./vendorService-D-gy-uZj.js";import{m as me}from"./messageService-CBhFp6R7.js";import{P as Ye}from"./PincodeAutocomplete-CdYR6LsD.js";import{P as Ke}from"./PasswordChangeDialog-CnQFXIsN.js";import{S as fe}from"./separator-Cj430jYO.js";import{G as Xe}from"./globe-B0mMjxcg.js";import{C as ue}from"./circle-alert--1esrBFY.js";import{u as ie}from"./uploadService-WVAjc4qR.js";import{S as Ze}from"./save-VRl1U5Be.js";import{S as Qe}from"./square-pen-B2xeg6m_.js";import{C as es}from"./camera-B-Udk_6_.js";import{C as ss}from"./calendar-5Rt0tQ5m.js";import{K as is}from"./key-B3atZykj.js";import"./vendor-Dazix4UH.js";import"./alert-DQvV8n_v.js";import"./userService-CKE-Zb2D.js";import"./triangle-alert-msJWYMkH.js";import"./eye-off-pZLnB8vP.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=he("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=he("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),as=({preferences:d,businessPreferences:E,onChange:U,onBusinessChange:z,onTestPushNotification:S,onTestEmail:b,showTestButtons:N=!1,supportEmail:D="support@buildhomemartsquares.com"})=>{const i=[{key:"email",icon:K,color:"text-blue-500",title:"Email Notifications",description:"Receive updates and alerts via email",isCore:!0},{key:"push",icon:O,color:"text-purple-500",title:"Push Notifications",description:"Browser notifications for instant updates",isCore:!0},{key:"newMessages",icon:ge,color:"text-indigo-500",title:"New Message Alerts",description:"Get notified when you receive new messages from customers",requiresEmail:!0},{key:"newsUpdates",icon:Xe,color:"text-teal-500",title:"News & Updates",description:"Real estate market news and platform updates",requiresEmail:!0},{key:"marketing",icon:X,color:"text-green-500",title:"Marketing Communications",description:"Platform announcements and promotional content",requiresEmail:!0}],C=[{key:"emailNotifications",icon:K,color:"text-blue-600",title:"Business Email Notifications",description:"General business communications and updates",isCore:!0},{key:"smsNotifications",icon:ts,color:"text-green-600",title:"SMS Notifications",description:"Urgent alerts and time-sensitive notifications via SMS",isCore:!0},{key:"leadAlerts",icon:te,color:"text-orange-600",title:"Lead Alerts",description:"Instant notifications when you receive new property inquiries",requiresBusiness:!0},{key:"weeklyReports",icon:X,color:"text-purple-600",title:"Weekly Reports",description:"Weekly performance reports and analytics",requiresBusiness:!0},{key:"marketingEmails",icon:X,color:"text-pink-600",title:"Marketing Emails",description:"Business growth tips and marketing opportunities",requiresBusiness:!0}],T=l=>l.requiresEmail&&!d.email,V=l=>l.requiresBusiness&&!E.emailNotifications;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"General Notification Preferences"]})}),e.jsx(g,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:i.map((l,R)=>e.jsxs(Z.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.icon,{className:`w-5 h-5 ${l.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:l.title}),l.isCore&&e.jsx(k,{variant:"outline",className:"text-xs",children:"Core"}),T(l)&&e.jsx(k,{variant:"secondary",className:"text-xs",children:"Requires Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),T(l)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ue,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable email notifications first"})]})]})]}),e.jsx(ae,{checked:d[l.key],onCheckedChange:P=>U(l.key,P),disabled:T(l)})]}),R<i.length-1&&e.jsx(fe,{})]},l.key))})})]}),e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Business Notification Preferences"]})}),e.jsx(g,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:C.map((l,R)=>e.jsxs(Z.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.icon,{className:`w-5 h-5 ${l.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:l.title}),l.isCore&&e.jsx(k,{variant:"outline",className:"text-xs",children:"Core"}),V(l)&&e.jsx(k,{variant:"secondary",className:"text-xs",children:"Requires Business Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),V(l)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ue,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable business email notifications first"})]})]})]}),e.jsx(ae,{checked:E[l.key],onCheckedChange:P=>z(l.key,P),disabled:V(l)})]}),R<C.length-1&&e.jsx(fe,{})]},l.key))})})]}),N&&e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Test Notifications"]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex gap-2",children:[S&&e.jsxs(I,{variant:"outline",size:"sm",onClick:S,disabled:!d.push,children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Test Push Notification"]}),b&&e.jsxs(I,{variant:"outline",size:"sm",onClick:b,disabled:!d.email,children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Test Email"]})]})})]})]})},Es=()=>{const[d,E]=c.useState(!1),[U,z]=c.useState(!0),[S,b]=c.useState(!1),[N,D]=c.useState(null),[i,C]=c.useState(null),[T,V]=c.useState("profile"),[l,R]=c.useState(null),[P,re]=c.useState(!1),B=Z.useRef(null),[ne,ve]=c.useState([]),[je,Q]=c.useState([]),[Ne,ee]=c.useState([]),[A,M]=c.useState({states:!1,districts:!1,cities:!1,pincode:!1}),[rs,q]=c.useState({country:"India",state:"",district:"",city:""}),[a,se]=c.useState({notifications:{email:!0,push:!0,newMessages:!0,newsUpdates:!0,marketing:!1},business:{emailNotifications:!0,smsNotifications:!1,leadAlerts:!0,marketingEmails:!1,weeklyReports:!0,autoResponseEnabled:!1,autoResponseMessage:"Thank you for your interest! I'll get back to you soon."}}),[ye,oe]=c.useState(!1),$=c.useCallback(async(s,t,r)=>{se(o=>({...o,[s]:{...o[s],[t]:r}}));try{await Ce(s,t,r)}catch(o){console.error("Failed to sync setting:",o)}},[N]);c.useEffect(()=>{le(),be(),Re()},[]),c.useEffect(()=>{(async()=>{M(t=>({...t,states:!0}));try{await w.initialize();const t=w.getStates();ve(t),console.log(`Loaded ${t.length} states from loca.json`)}catch(t){console.error("Error initializing loca service:",t),m({title:"Error",description:"Failed to load location data. Please refresh the page.",variant:"destructive"})}finally{M(t=>({...t,states:!1}))}})()},[]),c.useEffect(()=>{if(!i?.profile?.address?.state){Q([]);return}M(s=>({...s,districts:!0}));try{const s=w.getDistricts(i.profile.address.state);if(Q(s),console.log(`Loaded ${s.length} districts for ${i.profile.address.state}`),i.profile.address.district){const t=i.profile.address.district;s.some(o=>o.toLowerCase()===t.toLowerCase()||o===t)?console.log(`District "${t}" found in list, keeping...`):(console.log(`District "${t}" not found in list, clearing...`),n("profile.address.district",""),n("profile.address.city",""))}}catch(s){console.error("Error loading districts:",s),m({title:"Error",description:"Failed to load districts. Please try again.",variant:"destructive"})}finally{M(s=>({...s,districts:!1}))}},[i?.profile?.address?.state]),c.useEffect(()=>{if(!i?.profile?.address?.state||!i?.profile?.address?.district){ee([]);return}M(s=>({...s,cities:!0}));try{const s=w.getCities(i.profile.address.state,i.profile.address.district);ee(s),console.log(`Loaded ${s.length} cities for ${i.profile.address.district}`),i.profile.address.city&&!s.includes(i.profile.address.city)&&n("profile.address.city",""),q(t=>({...t,city:""}))}catch(s){console.error("Error loading cities:",s),m({title:"Error",description:"Failed to load cities. Please try again.",variant:"destructive"})}finally{M(s=>({...s,cities:!1}))}},[i?.profile?.address?.state,i?.profile?.address?.district]),c.useEffect(()=>{i?.profile?.address?.state&&q(s=>({...s,state:i.profile.address.state}))},[i?.profile?.address?.state]),c.useEffect(()=>{i?.profile?.address?.district&&q(s=>({...s,district:i.profile.address.district}))},[i?.profile?.address?.district]),c.useEffect(()=>{i?.profile?.address?.city&&q(s=>({...s,city:i.profile.address.city}))},[i?.profile?.address?.city]),c.useEffect(()=>{if(!U){const s=setTimeout(()=>{we()},1500);return()=>clearTimeout(s)}},[a,U]);const le=async()=>{try{z(!0);const s=await L.getVendorProfile(),t={...s,profile:{...s.profile,preferences:{language:s.profile.preferences?.language||"en",currency:s.profile.preferences?.currency||"INR",notifications:{email:s.profile.preferences?.notifications?.email??!0,push:s.profile.preferences?.notifications?.push??!0,newMessages:s.profile.preferences?.notifications?.newMessages??!0,newsUpdates:s.profile.preferences?.notifications?.newsUpdates??!0,marketing:s.profile.preferences?.notifications?.marketing??!0},privacy:{showEmail:s.profile.preferences?.privacy?.showEmail??!1,showPhone:s.profile.preferences?.privacy?.showPhone??!1,allowMessages:s.profile.preferences?.privacy?.allowMessages??!0}}}};console.log("Loaded vendor profile:",t),console.log("Profile address:",t.profile?.address),D(t),C(t),localStorage.setItem("user",JSON.stringify(t))}catch(s){console.error("Failed to load vendor profile:",s),m({title:"Error",description:"Failed to load vendor profile. Please try again.",variant:"destructive"})}finally{z(!1)}},be=async()=>{try{const s=localStorage.getItem("vendorSettings");if(s){const t=JSON.parse(s);se(r=>({...r,...t}))}try{const t=await L.getVendorProfile();if(t&&t.profile.vendorInfo?.vendorPreferences){const r=t.profile.vendorInfo.vendorPreferences,o={notifications:{email:t.profile?.preferences?.notifications?.email||a.notifications.email,push:t.profile?.preferences?.notifications?.push||a.notifications.push,newMessages:t.profile?.preferences?.notifications?.newMessages||a.notifications.newMessages,newsUpdates:t.profile?.preferences?.notifications?.newsUpdates||a.notifications.newsUpdates,marketing:t.profile?.preferences?.notifications?.marketing||a.notifications.marketing},business:{emailNotifications:r.emailNotifications||a.business.emailNotifications,smsNotifications:r.smsNotifications||a.business.smsNotifications,leadAlerts:r.leadAlerts||a.business.leadAlerts,marketingEmails:r.marketingEmails||a.business.marketingEmails,weeklyReports:r.weeklyReports||a.business.weeklyReports,autoResponseEnabled:r.autoResponseEnabled||a.business.autoResponseEnabled,autoResponseMessage:r.autoResponseMessage||a.business.autoResponseMessage}};se(o),localStorage.setItem("vendorSettings",JSON.stringify(o))}}catch{console.log("Using local settings - API unavailable")}}catch(s){console.error("Settings load failed:",s),m({title:"Settings Loaded",description:"Using saved settings.",variant:"default"})}},we=async()=>{try{b(!0);const s=Se(a);s.isValid||m({title:"Validation Warning",description:s.message,variant:"default"});try{const t={profile:{preferences:{notifications:{email:a.notifications.email,push:a.notifications.push,newMessages:a.notifications.newMessages,newsUpdates:a.notifications.newsUpdates,marketing:a.notifications.marketing}},vendorInfo:{vendorPreferences:{emailNotifications:a.business.emailNotifications,smsNotifications:a.business.smsNotifications,leadAlerts:a.business.leadAlerts,marketingEmails:a.business.marketingEmails,weeklyReports:a.business.weeklyReports,autoResponseEnabled:a.business.autoResponseEnabled,autoResponseMessage:a.business.autoResponseMessage}}}};await L.updateVendorProfile(t),localStorage.setItem("vendorSettings",JSON.stringify(a)),R(new Date().toISOString()),m({title:"Settings Saved",description:"Your preferences have been updated"})}catch(t){console.error("Failed to save settings:",t),localStorage.setItem("vendorSettings",JSON.stringify(a)),m({title:"Settings Saved",description:"Your preferences have been saved",variant:"default"})}}catch(s){console.error("Settings save failed:",s),m({title:"Save Failed",description:s.message||"Unable to save vendor settings.",variant:"destructive"})}finally{b(!1)}},Se=s=>s.business.emailNotifications&&!s.business.leadAlerts&&!s.notifications.newMessages?{isValid:!1,message:"Business email enabled but no notification types selected. Consider enabling lead alerts or new message notifications."}:s.business.autoResponseEnabled&&!s.business.autoResponseMessage.trim()?{isValid:!1,message:"Auto-response enabled but no message set. Please provide a response message."}:{isValid:!0,message:""},Ce=async(s,t,r)=>{try{b(!0),await L.updateVendorPreferences(`${s}.${t}`,r);const o=t.replace(/([A-Z])/g," $1").toLowerCase(),f=typeof r=="boolean"?r?"enabled":"disabled":"updated";R(new Date().toISOString()),t==="autoResponseEnabled"&&r===!0&&await Ie(),m({title:"Setting Updated",description:`${o} ${f}`})}catch(o){console.error("Save failed:",o),m({title:"Setting Saved",description:"Your preference has been saved",variant:"default"})}finally{b(!1)}},Ie=async()=>{try{const s=a.business.autoResponseMessage;if(!s.trim()){m({title:"Auto-Response Setup",description:"Please set an auto-response message below",variant:"default"});return}console.log("Auto-response integration activated:",{message:s,timestamp:new Date().toISOString(),vendorId:N?.id}),m({title:"Auto-Response Active",description:"Auto-responses will be sent to new inquiries"})}catch(s){console.error("Auto-response integration test failed:",s)}},ke=async(s,t)=>{try{if(!a.business.autoResponseEnabled||!a.business.autoResponseMessage.trim())return;const r=await me.sendAutoResponse(s,t,a.business.autoResponseMessage);r&&console.log("Auto-response sent:",{messageId:r._id,conversationId:s,recipientId:t,timestamp:new Date().toISOString()})}catch(r){console.error("Failed to send auto-response:",r)}},Ee=async s=>{try{(s.type==="inquiry"||s.type==="lead"||s.type==="property_inquiry")&&(me.isAutoResponse(s)||await ke(s.conversationId,s.sender._id))}catch(t){console.error("Failed to handle incoming message for auto-response:",t)}};Z.useEffect(()=>(a.business.autoResponseEnabled?window.vendorAutoResponseHandler=Ee:delete window.vendorAutoResponseHandler,()=>{delete window.vendorAutoResponseHandler}),[a.business.autoResponseEnabled,a.business.autoResponseMessage]);const Re=async()=>{try{w.isReady()||await w.initialize()}catch(s){console.error("Failed to initialize location service:",s)}},Pe=()=>{const s=i?.profile?.address;return s&&s.zipCode&&s.state&&s.district&&s.city&&!w.getLocationByPincode(s.zipCode).some(o=>o.state.toUpperCase()===s.state?.toUpperCase()&&o.district.toUpperCase()===s.district?.toUpperCase()&&o.city.toUpperCase()===s.city?.toUpperCase())?(console.warn("Location mismatch detected between pincode and selected location"),!1):!0},Ae=async()=>{if(i){Pe()||m({title:"Location Validation",description:"Please verify that your PIN code matches the selected location",variant:"default"});try{b(!0);const s={profile:{firstName:i.profile.firstName,lastName:i.profile.lastName,phone:i.profile.phone,bio:i.profile.bio,preferences:{language:i.profile.preferences?.language||"en",currency:i.profile.preferences?.currency||"INR",notifications:{email:i.profile.preferences?.notifications?.email??!0,push:i.profile.preferences?.notifications?.push??!0,newMessages:i.profile.preferences?.notifications?.newMessages??!0,newsUpdates:i.profile.preferences?.notifications?.newsUpdates??!0,marketing:i.profile.preferences?.notifications?.marketing??!0},privacy:{showEmail:i.profile.preferences?.privacy?.showEmail??!1,showPhone:i.profile.preferences?.privacy?.showPhone??!1,allowMessages:i.profile.preferences?.privacy?.allowMessages??!0}},address:{...i.profile.address,street:i.profile.address?.street||"",state:i.profile.address?.state||"",district:i.profile.address?.district||"",city:i.profile.address?.city||"",zipCode:i.profile.address?.zipCode||"",country:i.profile.address?.country||"India"},vendorInfo:i.profile.vendorInfo}};console.log("Saving vendor profile with address:",s.profile.address);const t=await L.updateVendorProfile(s);console.log("Received updated profile:",t),console.log("Updated profile address:",t.profile?.address),D(t),C(t),E(!1),m({title:"Success",description:"Profile updated successfully!"})}catch(s){console.error("Failed to update profile:",s)}finally{b(!1)}}},Me=()=>{C(N),E(!1)},Fe=async s=>{const t=s.target.files?.[0];if(!t)return;const r=ie.validateImageFile(t);if(!r.valid){m({title:"Invalid File",description:r.error,variant:"destructive"});return}try{re(!0);const o=await ie.compressImage(t),f=await ie.uploadAvatar(o);n("profile.avatar",f);const u={profile:{...i?.profile,avatar:f}},F=await L.updateVendorProfile(u);D(F),C(F),m({title:"Success",description:"Profile picture updated successfully!"})}catch(o){console.error("Avatar upload error:",o),m({title:"Upload Failed",description:"Failed to upload profile picture. Please try again.",variant:"destructive"})}finally{re(!1),B.current&&(B.current.value="")}},n=(s,t)=>{if(!i)return;const r=s.split("."),o={...i};let f=o;for(let u=0;u<r.length-1;u++)f[r[u]]||(f[r[u]]={}),f=f[r[u]];f[r[r.length-1]]=t,console.log(`Updated ${s} to:`,t),console.log("Full address after update:",o.profile?.address),C(o)};if(U)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading vendor profile..."})]})});if(!N||!i)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:"Failed to load vendor profile"}),e.jsx(I,{onClick:le,children:"Retry"})]})});`${i.profile.firstName}${i.profile.lastName}`;const Le=i.profile.vendorInfo?.memberSince?new Date(i.profile.vendorInfo.memberSince).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Unknown";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Te,{className:"w-8 h-8 text-primary"}),"My Profile"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile information and preferences."})]}),e.jsx("div",{className:"flex gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsxs(I,{variant:"outline",onClick:Me,disabled:S,children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(I,{onClick:Ae,disabled:S,children:[S?e.jsx(ce,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Save Profile"]})]}):e.jsxs(I,{onClick:()=>E(!0),children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),e.jsx(h,{children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(ze,{className:"h-24 w-24",children:[e.jsx(De,{src:i.profile.avatar||""}),e.jsxs(Be,{className:"text-lg",children:[i.profile.firstName.charAt(0),i.profile.lastName.charAt(0)]})]}),e.jsx("input",{ref:B,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:Fe,className:"hidden"}),e.jsx(I,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0",onClick:()=>B.current?.click(),disabled:P,children:P?e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx(es,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"firstName",children:"First Name"}),d?e.jsx(y,{id:"firstName",value:i.profile.firstName,onChange:s=>n("profile.firstName",s.target.value)}):e.jsx("p",{className:"text-lg font-semibold",children:i.profile.firstName})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"lastName",children:"Last Name"}),d?e.jsx(y,{id:"lastName",value:i.profile.lastName,onChange:s=>n("profile.lastName",s.target.value)}):e.jsx("p",{className:"text-lg font-semibold",children:i.profile.lastName})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),i.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"w-4 h-4 mr-1"}),d?e.jsx(y,{value:i.profile.phone,onChange:s=>n("profile.phone",s.target.value),className:"h-6 text-sm w-32"}):i.profile.phone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ss,{className:"w-4 h-4 mr-1"}),"Member since ",Le]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($e,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"font-medium",children:(i.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",i.profile.vendorInfo?.rating?.count||0," reviews)"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm",children:[i.profile.vendorInfo?.responseTime||"Not calculated"," avg response"]})})]})]})]})})}),e.jsxs(Oe,{value:T,onValueChange:V,className:"space-y-6",children:[e.jsxs(_e,{className:"grid w-full grid-cols-4",children:[e.jsx(_,{value:"profile",children:"Personal Info"}),e.jsx(_,{value:"company",children:"Company Details"}),e.jsx(_,{value:"specializations",children:"Specializations"}),e.jsx(_,{value:"notifications",children:"Settings"})]}),e.jsx(G,{value:"profile",className:"space-y-6",children:e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(te,{className:"w-5 h-5 mr-2"}),"Personal Information"]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"bio",children:"Bio"}),d?e.jsx(de,{id:"bio",value:i.profile.bio||"",onChange:s=>n("profile.bio",s.target.value),placeholder:"Tell us about yourself and your experience...",rows:4}):e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i.profile.bio||"No bio provided"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"street",children:"Street Address"}),d?e.jsx(y,{id:"street",value:i.profile.address?.street||"",onChange:s=>n("profile.address.street",s.target.value),placeholder:"Enter street address..."}):e.jsx("p",{className:"text-sm",children:i.profile.address?.street||"Not provided"})]}),d?e.jsxs("div",{children:[e.jsx(p,{className:"text-sm font-medium",children:"Location Details"}),e.jsxs("div",{className:"mt-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"state",children:"State"}),e.jsxs(H,{value:i.profile.address?.state||"",onValueChange:s=>{n("profile.address.state",s),n("profile.address.district",""),n("profile.address.city",""),n("profile.address.zipCode","")},disabled:A.states,children:[e.jsx(J,{children:e.jsx(W,{placeholder:A.states?"Loading states...":"Select state"})}),e.jsx(Y,{children:ne.map(s=>e.jsx(x,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"district",children:"District"}),e.jsxs(H,{value:i.profile.address?.district||"",onValueChange:s=>{n("profile.address.district",s),n("profile.address.city",""),n("profile.address.zipCode","")},disabled:!i.profile.address?.state||A.districts,children:[e.jsx(J,{children:e.jsx(W,{placeholder:i.profile.address?.state?A.districts?"Loading districts...":"Select district":"Select state first"})}),e.jsx(Y,{children:je.map(s=>e.jsx(x,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"city",children:"City"}),e.jsxs(H,{value:i.profile.address?.city||"",onValueChange:s=>{n("profile.address.city",s),n("profile.address.zipCode","")},disabled:!i.profile.address?.district||A.cities,children:[e.jsx(J,{children:e.jsx(W,{placeholder:i.profile.address?.district?A.cities?"Loading cities...":"Select city":"Select district first"})}),e.jsx(Y,{children:Ne.map(s=>e.jsx(x,{value:s,children:s},s))})]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{children:"State"}),e.jsx("p",{className:"text-sm",children:i.profile.address?.state||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"District"}),e.jsx("p",{className:"text-sm",children:i.profile.address?.district||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"City"}),e.jsx("p",{className:"text-sm",children:i.profile.address?.city||"Not provided"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"zipCode",children:"PIN Code"}),d?e.jsx(Ye,{value:i.profile.address?.zipCode||"",onChange:(s,t)=>{if(n("profile.address.zipCode",s),t&&(console.log("Auto-filling location from pincode:",t),t.state)){const r=t.state.toUpperCase();ne.includes(r)&&(n("profile.address.state",r),n("profile.address.stateCode",r),setTimeout(()=>{const o=w.getDistricts(r);if(Q(o),t.district){const f=o.find(u=>u.toUpperCase()===t.district.toUpperCase());f&&(n("profile.address.district",f),n("profile.address.districtCode",f),setTimeout(()=>{const u=w.getCities(r,f);if(ee(u),t.city){const F=u.find(Ue=>Ue.toUpperCase()===t.city.toUpperCase());F&&(n("profile.address.city",F),n("profile.address.cityCode",F))}},100))}},100))}},state:i.profile.address?.state,district:i.profile.address?.district,city:i.profile.address?.city,placeholder:i.profile.address?.city?`Enter PIN code for ${i.profile.address.city}...`:"Enter PIN code to auto-fill location...",className:"w-full"}):e.jsx("p",{className:"text-sm",children:i.profile.address?.zipCode||"Not provided"}),d&&e.jsxs("div",{className:"space-y-1 mt-1",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"ðŸ’¡ Select your location first or enter PIN code to auto-fill location details"}),i.profile.address?.zipCode&&i.profile.address?.city&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),"Location validated with PIN code"]})]})]})]})]})]})}),e.jsx(G,{value:"company",className:"space-y-6",children:e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Company Information"]})}),e.jsx(g,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"companyName",children:"Company Name"}),d?e.jsx(y,{id:"companyName",value:i.profile.vendorInfo?.companyName||"",onChange:s=>n("profile.vendorInfo.companyName",s.target.value)}):e.jsx("p",{className:"text-sm",children:i.profile.vendorInfo?.companyName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"businessType",children:"Business Type"}),d?e.jsxs(H,{value:i.profile.vendorInfo?.businessType||"",onValueChange:s=>n("profile.vendorInfo.businessType",s),children:[e.jsx(J,{children:e.jsx(W,{placeholder:"Select business type"})}),e.jsxs(Y,{children:[e.jsx(x,{value:"real_estate_agent",children:"Real Estate Agent"}),e.jsx(x,{value:"property_developer",children:"Property Developer"}),e.jsx(x,{value:"construction_company",children:"Construction Company"}),e.jsx(x,{value:"interior_designer",children:"Interior Designer"}),e.jsx(x,{value:"legal_services",children:"Legal Services"}),e.jsx(x,{value:"home_loan_provider",children:"Home Loan Provider"}),e.jsx(x,{value:"packers_movers",children:"Packers & Movers"}),e.jsx(x,{value:"property_management",children:"Property Management"}),e.jsx(x,{value:"other",children:"Other"})]})]}):e.jsx("p",{className:"text-sm",children:i.profile.vendorInfo?.businessType?i.profile.vendorInfo.businessType.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"experience",children:"Experience (Years)"}),d?e.jsx(y,{id:"experience",type:"number",value:i.profile.vendorInfo?.experience||0,onChange:s=>n("profile.vendorInfo.experience",parseInt(s.target.value)||0)}):e.jsxs("p",{className:"text-sm",children:[i.profile.vendorInfo?.experience||0," years"]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"website",children:"Website"}),d?e.jsx(y,{id:"website",value:i.profile.vendorInfo?.website||"",onChange:s=>n("profile.vendorInfo.website",s.target.value)}):e.jsx("p",{className:"text-sm",children:i.profile.vendorInfo?.website||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"licenseNumber",children:"License Number"}),d?e.jsx(y,{id:"licenseNumber",value:i.profile.vendorInfo?.licenseNumber||"",onChange:s=>n("profile.vendorInfo.licenseNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:i.profile.vendorInfo?.licenseNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"gstNumber",children:"GST Number"}),d?e.jsx(y,{id:"gstNumber",value:i.profile.vendorInfo?.gstNumber||"",onChange:s=>n("profile.vendorInfo.gstNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:i.profile.vendorInfo?.gstNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"panNumber",children:"PAN Number"}),d?e.jsx(y,{id:"panNumber",value:i.profile.vendorInfo?.panNumber||"",onChange:s=>n("profile.vendorInfo.panNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:i.profile.vendorInfo?.panNumber||"Not provided"})]})]})})]})}),e.jsxs(G,{value:"specializations",className:"space-y-6",children:[e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(He,{className:"w-5 h-5 mr-2"}),"Specializations"]})}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(i.profile.vendorInfo?.specializations||[]).length>0?i.profile.vendorInfo.specializations.map((s,t)=>e.jsx(k,{variant:"secondary",className:"flex items-center",children:s},t)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No specializations added yet"})})})})]}),e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(Je,{className:"w-5 h-5 mr-2"}),"Service Areas"]})}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(i.profile.vendorInfo?.serviceAreas||[]).length>0?i.profile.vendorInfo.serviceAreas.map((s,t)=>e.jsx(k,{variant:"outline",className:"flex items-center",children:s},t)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No service areas added yet"})})})})]}),e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(xe,{className:"w-5 h-5 mr-2"}),"Certifications"]})}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:(i.profile.vendorInfo?.certifications||[]).length>0?i.profile.vendorInfo.certifications.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(xe,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Issued by ",s.issuedBy," â€¢ ",s.date]})]})]}),s.verified&&e.jsxs(k,{className:"bg-green-100 text-green-800",children:[e.jsx(pe,{className:"w-3 h-3 mr-1"}),"Verified"]})]},t)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No certifications added yet"})})})]})]}),e.jsxs(G,{value:"notifications",className:"space-y-6",children:[e.jsx(as,{preferences:a.notifications,businessPreferences:{emailNotifications:a.business.emailNotifications,smsNotifications:a.business.smsNotifications,leadAlerts:a.business.leadAlerts,marketingEmails:a.business.marketingEmails,weeklyReports:a.business.weeklyReports},onChange:(s,t)=>$("notifications",s,t),onBusinessChange:(s,t)=>$("business",s,t),showTestButtons:!0,onTestPushNotification:()=>{m({title:"Test Push Notification",description:"Push notification test sent successfully!"})},onTestEmail:()=>{m({title:"Test Email",description:"Test email sent successfully!"})}}),e.jsxs(h,{children:[e.jsxs(v,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),"Auto-Response Settings"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure automatic replies to new customer inquiries."})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"autoResponse",children:"Enable Auto-Response"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic replies to new inquiries"})]}),e.jsx(ae,{id:"autoResponse",checked:a.business.autoResponseEnabled,onCheckedChange:async s=>{await $("business","autoResponseEnabled",s)},disabled:S})]}),a.business.autoResponseEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"autoResponseMessage",children:"Auto-Response Message"}),e.jsx(de,{id:"autoResponseMessage",value:a.business.autoResponseMessage,onChange:async s=>{const t=s.target.value;await $("business","autoResponseMessage",t)},placeholder:"Enter your automatic response message...",rows:3,disabled:S}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This message will be automatically sent to new inquiries"})]})]})]}),e.jsxs(h,{className:"mb-6",children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"Security Settings"]})}),e.jsx(g,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Change Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your account password with secure OTP verification"})]}),e.jsxs(I,{variant:"outline",onClick:()=>oe(!0),className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4"}),"Change Password"]})]})})]}),e.jsx(Ke,{open:ye,onOpenChange:oe})]})]}),N.statistics&&e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2"}),"Performance Statistics"]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.statistics.totalProperties}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Listed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.statistics.totalValue||"???0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(i.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:N.statistics.totalMessages}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Messages"})]})]})})]})]})};export{Es as default};
