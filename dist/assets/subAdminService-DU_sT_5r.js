const t=new class{async makeRequest(t,e={}){const a=`http://localhost:3001/api${t}`,r={headers:{"Content-Type":"application/json",...e.headers},...e},s=localStorage.getItem("token");s&&(r.headers={...r.headers,Authorization:`Bearer ${s}`});try{const t=await fetch(a,r);if(!t.ok){const e=t.headers.get("content-type");let a;throw a=e&&e.includes("application/json")?await t.json().catch(()=>({success:!1,message:`HTTP ${t.status}: ${t.statusText}`})):{success:!1,message:`HTTP ${t.status}: ${t.statusText}`},new Error(a.message||"An error occurred")}const e=t.headers.get("content-type");if(!e||!e.includes("application/json"))throw new Error("Invalid response format: Expected JSON");return await t.json()}catch(o){throw o}}async getDashboardStats(){try{return(await this.makeRequest("/subadmin/dashboard")).data}catch(t){throw new Error(t.message||"Failed to fetch dashboard stats")}}async getPendingProperties(t=1,e=10,a=""){try{return(await this.makeRequest(`/subadmin/properties/pending?page=${t}&limit=${e}&search=${a}`)).data}catch(r){throw new Error(r.message||"Failed to fetch pending properties")}}async approveProperty(t){try{return(await this.makeRequest(`/subadmin/properties/${t}/approve`,{method:"POST"})).data}catch(e){throw new Error(e.message||"Failed to approve property")}}async rejectProperty(t,e){try{return(await this.makeRequest(`/subadmin/properties/${t}/reject`,{method:"POST",body:JSON.stringify({reason:e})})).data}catch(a){throw new Error(a.message||"Failed to reject property")}}async getSupportTickets(t=1,e=10,a="open"){try{return(await this.makeRequest(`/subadmin/support/tickets?page=${t}&limit=${e}&status=${a}`)).data}catch(r){throw new Error(r.message||"Failed to fetch support tickets")}}async updateSupportTicket(t,e,a){try{return(await this.makeRequest(`/subadmin/support/tickets/${t}`,{method:"PATCH",body:JSON.stringify({status:e,response:a})})).data}catch(r){throw new Error(r.message||"Failed to update support ticket")}}async getVendorPerformance(){try{return(await this.makeRequest("/subadmin/vendors/performance")).data}catch(t){throw new Error(t.message||"Failed to fetch vendor performance")}}async sendNotification(t){try{await this.makeRequest("/subadmin/notifications/send",{method:"POST",body:JSON.stringify(t)})}catch(e){throw new Error(e.message||"Failed to send notification")}}async getCityReport(t,e,a){try{const r=new URLSearchParams;e&&r.append("startDate",e),a&&r.append("endDate",a);return(await this.makeRequest(`/subadmin/reports/city/${t}?${r}`)).data}catch(r){throw new Error(r.message||"Failed to fetch city report")}}async getContentReports(){try{return(await this.makeRequest("/subadmin/content/reports")).data}catch(t){throw new Error(t.message||"Failed to fetch content reports")}}async getPendingPromotions(){try{return(await this.makeRequest("/subadmin/promotions/pending")).data}catch(t){throw new Error(t.message||"Failed to fetch pending promotions")}}};export{t as s};
