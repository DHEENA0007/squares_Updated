import{j as e}from"./ui-CEt46o3G.js";import{r as a}from"./router-2SVJvIbS.js";import{P as F,a as E}from"./PropertyCard-CewblMpb.js";import{S as w,I as k,a as I,t as L}from"./index-CiYV0Sy0.js";import{P as A,a as _,b as l,c as D,d as T,f as M,e as Q}from"./pagination-o12Qjq_y.js";import{p as R}from"./propertyService-vaYzuoi1.js";import{L as B}from"./loader-circle-Cj-dvH02.js";import"./vendor-Dazix4UH.js";import"./select-BHWxeluH.js";import"./index-BdQq_4o_.js";import"./index-DHzxUTm5.js";import"./chevron-down-DeDu0PPf.js";import"./filter-pPW3lLKU.js";import"./card-YvDMUmzt.js";import"./propertyUtils-B_5yebUt.js";import"./PropertyContactDialog-CJxUFPij.js";import"./dialog-B2oiH0OC.js";import"./label-BV_cIshD.js";import"./textarea-BbecYreM.js";import"./messageService-DZmz6NiN.js";import"./send-DboPqPcs.js";import"./phone-BlyPoB6i.js";import"./mail-hCxVaHOS.js";import"./bed-uPel24Y9.js";import"./square-DioGN4r8.js";import"./ellipsis-9xIsGA7b.js";const d=12,de=()=>{const[r,i]=a.useState(1),[c,x]=a.useState(""),[p,P]=a.useState([]),[m,h]=a.useState(!0),[o,v]=a.useState(0),[g,N]=a.useState(0),[u,f]=a.useState({});a.useEffect(()=>{(async()=>{h(!0);try{const n={page:r,limit:d,search:c||void 0,...u},t=await R.getProperties(n);t.success&&(P(t.data.properties),v(t.data.pagination.totalPages),N(t.data.pagination.totalProperties))}catch(n){console.error("Failed to fetch properties:",n),L({title:"Error",description:"Failed to load properties. Please try again.",variant:"destructive"})}finally{h(!1)}})()},[r,c,u]);const y=s=>{x(s),i(1)},S=s=>{f(s),i(1)},j=(r-1)*d,C=Math.min(j+d,g);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(k,{type:"text",placeholder:"Search properties by location, type...",className:"pl-10 h-12",value:c,onChange:s=>y(s.target.value)})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:e.jsx(F,{onFilterChange:S})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),e.jsx("p",{className:"text-muted-foreground",children:m?"Loading properties...":e.jsxs(e.Fragment,{children:["Showing ",j+1,"-",C," of ",g," properties"]})})]}),m?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(B,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No properties found matching your criteria."}),e.jsx(I,{onClick:()=>{f({}),x(""),i(1)},variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8",children:p.map(s=>e.jsx(E,{property:s},s._id))}),!m&&p.length>0&&o>1&&e.jsx(A,{children:e.jsxs(_,{children:[e.jsx(l,{children:e.jsx(D,{href:"#",onClick:s=>{s.preventDefault(),r>1&&i(r-1)},className:r===1?"pointer-events-none opacity-50":""})}),[...Array(o)].map((s,n)=>{const t=n+1;return t===1||t===o||t>=r-1&&t<=r+1?e.jsx(l,{children:e.jsx(T,{href:"#",onClick:b=>{b.preventDefault(),i(t)},isActive:r===t,children:t})},t):t===r-2||t===r+2?e.jsx(l,{children:e.jsx(M,{})},t):null}),e.jsx(l,{children:e.jsx(Q,{href:"#",onClick:s=>{s.preventDefault(),r<o&&i(r+1)},className:r===o?"pointer-events-none opacity-50":""})})]})})]})]})]})};export{de as default};
