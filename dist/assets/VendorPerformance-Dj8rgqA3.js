import{j as e,$ as S,a0 as A}from"./ui-BHyUY8Z8.js";import{r}from"./router-2SVJvIbS.js";import{g as V,W as $,a as n,b as d,c as o,r as p,e as c,T as y,at as g,Y as B,I as k,B as w,d as M,a9 as F,f as I,E as L,J as O,K as z,O as J,Q as H,R as q}from"./index-Bd1eLXM_.js";import{T as G}from"./trending-down-eQbUB_Gl.js";import"./vendor-Dazix4UH.js";const R=r.forwardRef(({className:a,value:x,...m},i)=>e.jsx(S,{ref:i,className:V("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...m,children:e.jsx(A,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(x||0)}%)`}})}));R.displayName=S.displayName;const Y=()=>{const[a,x]=r.useState([]),[m,i]=r.useState(!0),[h,P]=r.useState(""),[t,T]=r.useState(null),[D,u]=r.useState(!1),[j,C]=r.useState("performanceScore"),{toast:N}=$();r.useEffect(()=>{E()},[h,j]);const E=async()=>{try{i(!0);const s=await fetch(`/api/subadmin/vendors/performance?search=${h}&sortBy=${j}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(s.ok){const l=await s.json();x(l.data.vendors)}else N({title:"Error",description:"Failed to fetch vendor metrics",variant:"destructive"})}catch{N({title:"Error",description:"Error fetching vendor metrics",variant:"destructive"})}finally{i(!1)}},v=s=>s>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600",f=s=>s>=80?{label:"Excellent",variant:"default",class:"bg-green-600"}:s>=60?{label:"Good",variant:"secondary",class:"bg-yellow-600"}:{label:"Needs Improvement",variant:"destructive",class:"bg-red-600"},b=s=>s<60?`${Math.round(s)} mins`:s<1440?`${Math.round(s/60)} hrs`:`${Math.round(s/1440)} days`;return m&&a.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Vendor Performance"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track and analyze vendor performance metrics"})]}),e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"},s))})]}):e.jsxs("div",{className:"p-6 space-y-6 mt-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Vendor Performance"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track and analyze vendor performance metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Vendors"}),e.jsx(p,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active property vendors"})]})]}),e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Top Performers"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.filter(s=>s.performanceScore>=80).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Excellent performance (80%+)"})]})]}),e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Average Rating"}),e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length>0?(a.reduce((s,l)=>s+l.averageRating,0)/a.length).toFixed(1):"0.0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overall vendor ratings"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(k,{placeholder:"Search vendors by name or email...",value:h,onChange:s=>P(s.target.value),className:"pl-10"})]}),e.jsxs("select",{value:j,onChange:s=>C(s.target.value),className:"px-4 py-2 border rounded-md bg-background",children:[e.jsx("option",{value:"performanceScore",children:"Sort by Performance"}),e.jsx("option",{value:"totalProperties",children:"Sort by Properties"}),e.jsx("option",{value:"averageRating",children:"Sort by Rating"})]})]}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsx(n,{children:e.jsxs(c,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(p,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No Vendors Found"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"No vendor data available at the moment"})]})}):a.map(s=>{const l=f(s.performanceScore);return e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"text-xl",children:s.name}),e.jsx(w,{className:l.class,children:l.label})]}),e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{children:s.email}),s.phone&&e.jsxs("span",{children:["• ",s.phone]}),e.jsxs("span",{children:["• Joined ",new Date(s.joinedDate).toLocaleDateString()]})]})})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:`text-3xl font-bold ${v(s.performanceScore)}`,children:[s.performanceScore,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Performance Score"})]})]})}),e.jsxs(c,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:s.totalProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Properties"})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:s.averageRating.toFixed(1)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.totalReviews," Reviews"]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[s.responseRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response Rate"})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.performanceScore>=80?e.jsx(y,{className:"h-4 w-4 text-green-600"}):e.jsx(G,{className:"h-4 w-4 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:b(s.averageResponseTime)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"})]})]})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Active Properties"}),e.jsxs("span",{children:[s.activeProperties," / ",s.totalProperties]})]}),e.jsx(R,{value:s.activeProperties/s.totalProperties*100,className:"h-2"})]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{T(s),u(!0)},children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"View Full Details"]})]})]},s._id)})}),e.jsx(O,{open:D,onOpenChange:u,children:e.jsxs(z,{className:"max-w-3xl",children:[e.jsxs(J,{children:[e.jsxs(H,{children:[t?.name," - Performance Details"]}),e.jsx(q,{children:"Comprehensive performance metrics and statistics"})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Contact Information"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),t.phone&&e.jsxs("li",{children:[e.jsx("strong",{children:"Phone:"})," ",t.phone]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Joined:"})," ",new Date(t.joinedDate).toLocaleDateString()]}),t.lastActive&&e.jsxs("li",{children:[e.jsx("strong",{children:"Last Active:"})," ",new Date(t.lastActive).toLocaleDateString()]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Performance Score"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-5xl font-bold ${v(t.performanceScore)}`,children:[t.performanceScore,"%"]}),e.jsx(w,{className:`mt-2 ${f(t.performanceScore).class}`,children:f(t.performanceScore).label})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Property Statistics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-muted p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:t.totalProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-950 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.activeProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-950 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.rejectedProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rejected"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Customer Engagement"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 fill-yellow-500 text-yellow-500"}),e.jsxs("span",{className:"font-semibold",children:[t.averageRating.toFixed(1)," / 5.0"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Reviews"}),e.jsx("span",{className:"font-semibold",children:t.totalReviews})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Messages"}),e.jsx("span",{className:"font-semibold",children:t.totalMessages})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Response Rate"}),e.jsxs("span",{className:"font-semibold",children:[t.responseRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Response Time"}),e.jsx("span",{className:"font-semibold",children:b(t.averageResponseTime)})]})]})]})]})]})})]})};export{Y as default};
