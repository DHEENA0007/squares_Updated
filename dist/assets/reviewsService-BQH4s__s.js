import{t as e}from"./index-CV77Hym3.js";const t=new class{async makeRequest(e,t={}){const r=`https://api.buildhomemartsquares.com/api${e}`,s={headers:{"Content-Type":"application/json",...t.headers},...t},a=localStorage.getItem("token");a&&(s.headers={...s.headers,Authorization:`Bearer ${a}`});try{const e=await fetch(r,s);if(!e.ok){const t=await e.json().catch(()=>({success:!1,message:`HTTP ${e.status}: ${e.statusText}`}));throw new Error(t.message||"An error occurred")}return await e.json()}catch(i){throw i}}async getReviews(e={}){try{const t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&""!==r&&t.append(e,r.toString())});const r="/vendors/reviews"+(t.toString()?`?${t.toString()}`:""),s=await this.makeRequest(r);return s.success&&s.data?s.data:{reviews:[],totalCount:0,totalPages:0,currentPage:1}}catch(t){return{reviews:[],totalCount:0,totalPages:0,currentPage:1}}}async getReviewStats(){try{const e=await this.makeRequest("/vendors/reviews/stats");return e.success&&e.data?e.data:{totalReviews:0,averageRating:0,ratingDistribution:{5:0,4:0,3:0,2:0,1:0},recentReviews:0,responseRate:0,averageResponseTime:0,verifiedReviews:0,publicReviews:0,helpfulVotes:0,pendingReplies:0,commonKeywords:[]}}catch(e){return{totalReviews:0,averageRating:0,ratingDistribution:{5:0,4:0,3:0,2:0,1:0},recentReviews:0,responseRate:0,averageResponseTime:0,verifiedReviews:0,publicReviews:0,helpfulVotes:0,pendingReplies:0,commonKeywords:[]}}}async getReviewAnalytics(){try{const e=await this.makeRequest("/vendors/reviews/analytics");return e.success&&e.data?e.data:{monthlyReviews:[],topKeywords:[],competitorComparison:{vendorRating:0,industryAverage:0,competitorRatings:[]},improvementAreas:[]}}catch(e){return{monthlyReviews:[],topKeywords:[],competitorComparison:{vendorRating:0,industryAverage:0,competitorRatings:[]},improvementAreas:[]}}}async respondToReview(t){try{const r=await this.makeRequest(`/vendors/reviews/${t.reviewId}/respond`,{method:"POST",body:JSON.stringify({message:t.message})});if(r.success)return e({title:"Success",description:r.message||"Response posted successfully!"}),r.data;throw new Error(r.message||"Failed to post response")}catch(r){const t=r instanceof Error?r.message:"Failed to post response";return e({title:"Error",description:t,variant:"destructive"}),null}}async updateReviewVisibility(t,r){try{const s=await this.makeRequest(`/vendors/reviews/${t}/visibility`,{method:"PATCH",body:JSON.stringify({isPublic:r})});if(s.success)return e({title:"Success",description:s.message||"Review visibility updated!"}),s.data;throw new Error(s.message||"Failed to update review visibility")}catch(s){const t=s instanceof Error?s.message:"Failed to update review visibility";return e({title:"Error",description:t,variant:"destructive"}),null}}async reportReview(t,r){try{const s=await this.makeRequest(`/vendors/reviews/${t}/report`,{method:"POST",body:JSON.stringify({reason:r})});if(s.success)return e({title:"Success",description:s.message||"Review reported successfully!"}),!0;throw new Error(s.message||"Failed to report review")}catch(s){const t=s instanceof Error?s.message:"Failed to report review";return e({title:"Error",description:t,variant:"destructive"}),!1}}async markReviewHelpful(e,t){try{const r=await this.makeRequest(`/vendors/reviews/${e}/helpful`,{method:"POST",body:JSON.stringify({isHelpful:t})});if(r.success)return!0;throw new Error(r.message||"Failed to mark review as helpful")}catch(r){return!1}}formatRating(e){return e.toFixed(1)}formatDate(e){return new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}getRelativeTime(e){const t=new Date(e),r=new Date,s=Math.floor((r.getTime()-t.getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)} minutes ago`:s<86400?`${Math.floor(s/3600)} hours ago`:s<2592e3?`${Math.floor(s/86400)} days ago`:s<31536e3?`${Math.floor(s/2592e3)} months ago`:`${Math.floor(s/31536e3)} years ago`}getRatingColor(e){return e>=4.5?"text-green-600":e>=3.5?"text-yellow-600":e>=2.5?"text-orange-600":"text-red-600"}getRatingStars(e){return"★".repeat(Math.floor(e))+"☆".repeat(5-Math.floor(e))}getReviewTypeLabel(e){return{property:"Property Review",service:"Service Review",general:"General Review"}[e]||e}getReviewTypeColor(e){return{property:"bg-blue-100 text-blue-800",service:"bg-green-100 text-green-800",general:"bg-purple-100 text-purple-800"}[e]||"bg-gray-100 text-gray-800"}getSentimentColor(e){return{positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"}[e]||"text-gray-600"}getImpactColor(e){return{high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"}[e]||"bg-gray-100 text-gray-800"}calculateResponseRate(e,t){return 0===e?0:Math.round(t/e*100)}getRatingPercentage(e,t){return 0===t?0:Math.round(e/t*100)}};export{t as r};
