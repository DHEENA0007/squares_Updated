import{j as e}from"./ui-s1SEoZIF.js";import{R as s,u as i,r as a}from"./router-D8v2YSKU.js";import{w as t,a as r,b as n,c as l,aN as o,e as c,M as d,aB as p,B as m,a8 as f,g as x,U as u,l as h,t as j,x as g,f as v,s as N,ay as y,aj as b,ak as w,al as C,am as k,L as P,I as S,P as I,G as E,C as R,ab as M,ac as F,ad as U,ae as T,T as A,m as B,n as V,o as L,p as q,q as z,r as _,S as D}from"./index-YrVmIx3a.js";import{vendorService as $}from"./vendorService-DCrWkx_G.js";import{m as G}from"./messageService-Su2xQswC.js";import{P as O}from"./PincodeAutocomplete-CX-7rD-g.js";import{P as H}from"./PasswordChangeDialog-DnMb4VTK.js";import{G as W}from"./globe-ctMXn_m2.js";import{T as Y}from"./trending-up-DbwyOQAf.js";import{C as J}from"./circle-alert-uA9gvtJK.js";import{u as K}from"./uploadService-C_cH8Ofp.js";import{u as Q}from"./use-mobile-C5fBmhy-.js";import{S as X}from"./square-pen-PCmihWrK.js";import{C as Z}from"./camera-BGEwbgLA.js";import{C as ee}from"./calendar-BA5iLWFv.js";import{K as se}from"./key-DNLKWt7l.js";import"./vendor-BxThA0WO.js";import"./reviewsService-E1EyDdEs.js";import"./alert-DvMw1BgD.js";import"./input-otp-DCg2__gX.js";import"./eye-off-B-EbfY5m.js";const ie=t("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),ae=({preferences:i,businessPreferences:a,onChange:t,onBusinessChange:h,onTestPushNotification:j,onTestEmail:g,showTestButtons:v=!1,supportEmail:N="support@buildhomemartsquares.com"})=>{const y=[{key:"email",icon:d,color:"text-blue-500",title:"Email Notifications",description:"Receive updates and alerts via email",isCore:!0},{key:"push",icon:o,color:"text-purple-500",title:"Push Notifications",description:"Browser notifications for instant updates",isCore:!0},{key:"newMessages",icon:p,color:"text-indigo-500",title:"New Message Alerts",description:"Get notified when you receive new messages from customers",requiresEmail:!0},{key:"newsUpdates",icon:W,color:"text-teal-500",title:"News & Updates",description:"Real estate market news and platform updates",requiresEmail:!0},{key:"marketing",icon:Y,color:"text-green-500",title:"Marketing Communications",description:"Platform announcements and promotional content",requiresEmail:!0}],b=[{key:"emailNotifications",icon:d,color:"text-blue-600",title:"Business Email Notifications",description:"General business communications and updates",isCore:!0},{key:"weeklyReports",icon:Y,color:"text-purple-600",title:"Weekly Reports",description:"Weekly performance reports and analytics",requiresBusiness:!0},{key:"marketingEmails",icon:Y,color:"text-pink-600",title:"Marketing Emails",description:"Business growth tips and marketing opportunities",requiresBusiness:!0}],w=e=>e.requiresEmail&&!i.email,C=e=>e.requiresBusiness&&!a.emailNotifications;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5"}),"General Notification Preferences"]})}),e.jsx(c,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:y.map((a,r)=>e.jsxs(s.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{className:`w-5 h-5 ${a.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:a.title}),a.isCore&&e.jsx(m,{variant:"outline",className:"text-xs",children:"Core"}),w(a)&&e.jsx(m,{variant:"secondary",className:"text-xs",children:"Requires Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),w(a)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(J,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable email notifications first"})]})]})]}),e.jsx(f,{checked:i[a.key],onCheckedChange:e=>t(a.key,e),disabled:w(a)})]}),r<y.length-1&&e.jsx(x,{})]},a.key))})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"Business Notification Preferences"]})}),e.jsx(c,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:b.map((i,t)=>e.jsxs(s.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i.icon,{className:`w-5 h-5 ${i.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:i.title}),i.isCore&&e.jsx(m,{variant:"outline",className:"text-xs",children:"Core"}),C(i)&&e.jsx(m,{variant:"secondary",className:"text-xs",children:"Requires Business Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.description}),C(i)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(J,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable business email notifications first"})]})]})]}),e.jsx(f,{checked:a[i.key],onCheckedChange:e=>h(i.key,e),disabled:C(i)})]}),t<b.length-1&&e.jsx(x,{})]},i.key))})})]})]})},te=()=>{const t=Q(),o=i(),[p,f]=a.useState(!1),[x,W]=a.useState(!0),[J,te]=a.useState(!1),[re,ne]=a.useState(null),[le,oe]=a.useState(null),[ce,de]=a.useState(()=>o.pathname.includes("/settings")?"settings":"profile"),[pe,me]=a.useState(null),[fe,xe]=a.useState(!1),ue=s.useRef(null),[he,je]=a.useState(null),[ge,ve]=a.useState(!0),[Ne,ye]=a.useState([]),[be,we]=a.useState([]),[Ce,ke]=a.useState([]),[Pe,Se]=a.useState({states:!1,districts:!1,cities:!1}),[Ie,Ee]=a.useState({notifications:{email:!0,push:!0,newMessages:!0,newsUpdates:!0,marketing:!1},business:{emailNotifications:!0,smsNotifications:!1,leadAlerts:!0,marketingEmails:!1,weeklyReports:!0,autoResponseEnabled:!1,autoResponseMessage:"Thank you for your interest! I'll get back to you soon."}}),[Re,Me]=a.useState(!1),Fe=a.useCallback(async(e,s,i)=>{Ee(a=>({...a,[e]:{...a[e],[s]:i}}))},[]);a.useEffect(()=>{(async()=>{try{Se(e=>({...e,states:!0})),await h.initialize();const e=h.getStates();ye(e),await Promise.all([Ue(),Ae(),Te()])}catch(e){}finally{Se(e=>({...e,states:!1}))}})()},[]),a.useEffect(()=>{o.pathname.includes("/settings")?de("settings"):o.pathname.includes("/profile")&&de("profile")},[o.pathname]),a.useEffect(()=>{if(!le?.profile?.address?.state)return void we([]);const e=h.getDistricts(le.profile.address.state);we(e)},[le?.profile?.address?.state]),a.useEffect(()=>{if(!le?.profile?.address?.state||!le?.profile?.address?.district)return void ke([]);const e=h.getCities(le.profile.address.state,le.profile.address.district);ke(e)},[le?.profile?.address?.state,le?.profile?.address?.district]),a.useEffect(()=>{if(x)return;const e=setTimeout(()=>{Be()},1500);return()=>clearTimeout(e)},[Ie,x]);const Ue=async()=>{try{W(!0);const e=await $.getVendorProfile(),s={...e,profile:{...e.profile,preferences:{language:e.profile.preferences?.language||"en",notifications:{email:e.profile.preferences?.notifications?.email??!0,push:e.profile.preferences?.notifications?.push??!0,newMessages:e.profile.preferences?.notifications?.newMessages??!0,newsUpdates:e.profile.preferences?.notifications?.newsUpdates??!0,marketing:e.profile.preferences?.notifications?.marketing??!0},privacy:{showEmail:e.profile.preferences?.privacy?.showEmail??!1,showPhone:e.profile.preferences?.privacy?.showPhone??!1,allowMessages:e.profile.preferences?.privacy?.allowMessages??!0}}}};ne(s),oe(s),localStorage.setItem("user",JSON.stringify(s))}catch(e){j({title:"Error",description:"Failed to load vendor profile. Please try again.",variant:"destructive"})}finally{W(!1)}},Te=async()=>{try{ve(!0);const e=await fetch("https://app.buildhomemartsquares.com/api/vendors/subscription/current",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();s.success&&s.data&&je(s.data)}}catch(e){}finally{ve(!1)}},Ae=async()=>{try{const e=await $.getVendorProfile();if(e&&e.profile.vendorInfo?.vendorPreferences){const s=e.profile.vendorInfo.vendorPreferences,i={notifications:{email:e.profile?.preferences?.notifications?.email??!0,push:e.profile?.preferences?.notifications?.push??!0,newMessages:e.profile?.preferences?.notifications?.newMessages??!0,newsUpdates:e.profile?.preferences?.notifications?.newsUpdates??!0,marketing:e.profile?.preferences?.notifications?.marketing??!0},business:{emailNotifications:s.emailNotifications??!0,smsNotifications:s.smsNotifications??!0,leadAlerts:s.leadAlerts??!0,marketingEmails:s.marketingEmails??!1,weeklyReports:s.weeklyReports??!0,autoResponseEnabled:s.autoResponseEnabled??!1,autoResponseMessage:s.autoResponseMessage||"Thank you for your interest! I will get back to you soon."}};Ee(i)}}catch(e){j({title:"Settings Load Failed",description:"Using default settings. Changes will be saved to server.",variant:"default"})}},Be=async()=>{try{te(!0);const s=Ve(Ie);s.isValid||j({title:"Validation Warning",description:s.message,variant:"default"});try{const e={profile:{preferences:{notifications:{email:Ie.notifications.email,push:Ie.notifications.push,newMessages:Ie.notifications.newMessages,newsUpdates:Ie.notifications.newsUpdates,marketing:Ie.notifications.marketing}},vendorInfo:{vendorPreferences:{emailNotifications:Ie.business.emailNotifications,smsNotifications:Ie.business.smsNotifications,leadAlerts:Ie.business.leadAlerts,marketingEmails:Ie.business.marketingEmails,weeklyReports:Ie.business.weeklyReports,autoResponseEnabled:Ie.business.autoResponseEnabled,autoResponseMessage:Ie.business.autoResponseMessage}}}};await $.updateVendorProfile(e),me((new Date).toISOString()),j({title:"Settings Saved",description:"Your preferences have been updated on the server"})}catch(e){j({title:"Save Failed",description:"Unable to save settings to server. Please try again.",variant:"destructive"})}}catch(s){j({title:"Save Failed",description:s.message||"Unable to save vendor settings.",variant:"destructive"})}finally{te(!1)}},Ve=e=>!e.business.emailNotifications||e.business.leadAlerts||e.notifications.newMessages?e.business.autoResponseEnabled&&!e.business.autoResponseMessage.trim()?{isValid:!1,message:"Auto-response enabled but no message set. Please provide a response message."}:{isValid:!0,message:""}:{isValid:!1,message:"Business email enabled but no notification types selected. Consider enabling lead alerts or new message notifications."},Le=async e=>{try{"inquiry"!==e.type&&"lead"!==e.type&&"property_inquiry"!==e.type||G.isAutoResponse(e)||await(async(e,s)=>{try{if(!Ie.business.autoResponseEnabled||!Ie.business.autoResponseMessage.trim())return;await G.sendAutoResponse(e,s,Ie.business.autoResponseMessage)}catch(i){}})(e.conversationId,e.sender._id)}catch(s){}};s.useEffect(()=>(Ie.business.autoResponseEnabled?window.vendorAutoResponseHandler=Le:delete window.vendorAutoResponseHandler,()=>{delete window.vendorAutoResponseHandler}),[Ie.business.autoResponseEnabled,Ie.business.autoResponseMessage]);const qe=a.useCallback((e,s)=>{oe(i=>{if(!i)return i;const a=e.split("."),t={...i};let r=t;for(let e=0;e<a.length-1;e++)r[a[e]]||(r[a[e]]={}),r[a[e]]={...r[a[e]]},r=r[a[e]];return r[a[a.length-1]]=s,t})},[]);if(x)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading vendor profile..."})]})});if(!re||!le)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:"Failed to load vendor profile"}),e.jsx(v,{onClick:Ue,children:"Retry"})]})});le.profile.firstName,le.profile.lastName;const ze=le.profile.vendorInfo?.memberSince?new Date(le.profile.vendorInfo.memberSince).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Unknown";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex "+(t?"flex-col space-y-4":"justify-between items-center"),children:[e.jsxs("div",{children:[e.jsxs("h1",{className:(t?"text-2xl":"text-3xl")+" font-bold tracking-tight flex items-center gap-2",children:[e.jsx(N,{className:"w-8 h-8 text-primary"}),"My Profile"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile information and preferences."})]}),e.jsx("div",{className:"flex gap-2 "+(t?"w-full":""),children:p?e.jsxs(e.Fragment,{children:[e.jsxs(v,{variant:"outline",onClick:()=>{oe(re),f(!1)},disabled:J,className:t?"flex-1":"",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(v,{onClick:async()=>{if(le){(()=>{const e=le?.profile?.address;if(!e)return!0;if(e.zipCode&&e.state&&e.district&&e.city&&!h.getLocationByPincode(e.zipCode).some(s=>s.state.toUpperCase()===e.state?.toUpperCase()&&s.district.toUpperCase()===e.district?.toUpperCase()&&s.city.toUpperCase()===e.city?.toUpperCase()))return!1;return!0})()||j({title:"Location Validation",description:"Please verify that your PIN code matches the selected location",variant:"default"});try{te(!0);const e={profile:{firstName:le.profile.firstName,lastName:le.profile.lastName,phone:le.profile.phone,bio:le.profile.bio,preferences:{language:le.profile.preferences?.language||"en",notifications:{email:le.profile.preferences?.notifications?.email??!0,push:le.profile.preferences?.notifications?.push??!0,newMessages:le.profile.preferences?.notifications?.newMessages??!0,newsUpdates:le.profile.preferences?.notifications?.newsUpdates??!0,marketing:le.profile.preferences?.notifications?.marketing??!0},privacy:{showEmail:le.profile.preferences?.privacy?.showEmail??!1,showPhone:le.profile.preferences?.privacy?.showPhone??!1,allowMessages:le.profile.preferences?.privacy?.allowMessages??!0}},address:{...le.profile.address,street:le.profile.address?.street||"",state:le.profile.address?.state||"",district:le.profile.address?.district||"",city:le.profile.address?.city||"",zipCode:le.profile.address?.zipCode||"",country:le.profile.address?.country||"India"},vendorInfo:le.profile.vendorInfo}},s=await $.updateVendorProfile(e);ne(s),oe(s),f(!1),j({title:"Success",description:"Profile updated successfully!"})}catch(e){}finally{te(!1)}}},disabled:J,className:t?"flex-1":"",children:[J?e.jsx(g,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(b,{className:"w-4 h-4 mr-2"}),"Save Profile"]})]}):e.jsxs(v,{onClick:()=>f(!0),className:t?"w-full":"",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),e.jsx(r,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-start "+(t?"flex-col space-y-4":"space-x-6"),children:[e.jsxs("div",{className:"relative",children:[e.jsxs(w,{className:`${t?"h-20 w-20":"h-24 w-24"} ${t?"mx-auto":""}`,children:[e.jsx(C,{src:le.profile.avatar||void 0}),e.jsxs(k,{className:""+(t?"text-base":"text-lg"),children:[le.profile.firstName.charAt(0),le.profile.lastName.charAt(0)]})]}),e.jsx("input",{ref:ue,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async e=>{const s=e.target.files?.[0];if(!s)return;const i=K.validateImageFile(s);if(i.valid)try{xe(!0);const e=await K.compressImage(s),i=await K.uploadAvatar(e);if(le){const e=await $.updateVendorProfile({profile:{avatar:i}});ne(e),oe(e),j({title:"Success",description:"Profile picture updated successfully!"})}}catch(a){j({title:"Upload Failed",description:"Failed to upload profile picture. Please try again.",variant:"destructive"})}finally{xe(!1),ue.current&&(ue.current.value="")}else j({title:"Invalid File",description:i.error,variant:"destructive"})},className:"hidden"}),e.jsx(v,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0 "+(t?"right-1/2 translate-x-1/2":""),onClick:()=>ue.current?.click(),disabled:fe,children:fe?e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx(Z,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:`grid grid-cols-1 ${t?"":"md:grid-cols-2"} gap-4`,children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"firstName",children:"First Name"}),p?e.jsx(S,{id:"firstName",value:le.profile.firstName,onChange:e=>qe("profile.firstName",e.target.value)}):e.jsx("p",{className:(t?"text-base":"text-lg")+" font-semibold",children:le.profile.firstName})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"lastName",children:"Last Name"}),p?e.jsx(S,{id:"lastName",value:le.profile.lastName,onChange:e=>qe("profile.lastName",e.target.value)}):e.jsx("p",{className:(t?"text-base":"text-lg")+" font-semibold",children:le.profile.lastName})]})]}),e.jsxs("div",{className:`flex items-center ${t?"flex-col space-y-2":"space-x-4"} text-sm text-muted-foreground`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"w-4 h-4 mr-1"}),le.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),p?e.jsx(S,{value:le.profile.phone,onChange:e=>qe("profile.phone",e.target.value),className:"h-6 text-sm w-32"}):le.profile.phone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Member since ",ze]})]}),e.jsxs("div",{className:"flex items-center "+(t?"flex-col space-y-2":"space-x-4"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"font-medium",children:(le.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",le.profile.vendorInfo?.rating?.count||0," reviews)"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm",children:[le.profile.vendorInfo?.responseTime||"Not calculated"," avg response"]})})]}),!ge&&he?.plan?.benefits&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[he.plan.benefits.topRated&&e.jsxs(m,{className:"bg-yellow-500 hover:bg-yellow-600",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Top Rated"]}),he.plan.benefits.verifiedBadge&&e.jsxs(m,{className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Verified Owner"]}),he.plan.benefits.marketingManager&&e.jsxs(m,{className:"bg-purple-500 hover:bg-purple-600",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Marketing Manager"]}),he.plan.benefits.commissionBased&&e.jsxs(m,{className:"bg-green-500 hover:bg-green-600",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Commission Based"]})]})]})]})})}),e.jsxs(M,{value:ce,onValueChange:de,className:"space-y-6",children:[e.jsxs(F,{className:""+(t?"flex flex-col h-auto gap-2":"grid w-full grid-cols-3"),children:[e.jsx(U,{value:"profile",className:t?"w-full justify-start":"",children:"Personal Info"}),e.jsx(U,{value:"company",className:t?"w-full justify-start":"",children:"Company Details"}),e.jsx(U,{value:"notifications",className:t?"w-full justify-start":"",children:"Settings"})]}),e.jsx(T,{value:"profile",className:"space-y-6",children:e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center",children:[e.jsx(u,{className:"w-5 h-5 mr-2"}),"Personal Information"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"bio",children:"Bio"}),p?e.jsx(A,{id:"bio",value:le.profile.bio||"",onChange:e=>qe("profile.bio",e.target.value),placeholder:"Tell us about yourself and your experience...",rows:4}):e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:le.profile.bio||"No bio provided"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"street",children:"Street Address"}),p?e.jsx(S,{id:"street",value:le.profile.address?.street||"",onChange:e=>qe("profile.address.street",e.target.value),placeholder:"Enter street address..."}):e.jsx("p",{className:"text-sm",children:le.profile.address?.street||"Not provided"})]}),p?e.jsxs("div",{children:[e.jsx(P,{className:"text-sm font-medium",children:"Location Details"}),e.jsxs("div",{className:"mt-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"state",children:"State"}),e.jsxs(B,{value:le.profile.address?.state||"",onValueChange:e=>{qe("profile.address.state",e),qe("profile.address.district",""),qe("profile.address.city",""),qe("profile.address.zipCode","")},disabled:Pe.states,children:[e.jsx(V,{children:e.jsx(L,{placeholder:Pe.states?"Loading states...":"Select state"})}),e.jsx(q,{children:Ne.map(s=>e.jsx(z,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"district",children:"District"}),e.jsxs(B,{value:le.profile.address?.district||"",onValueChange:e=>{qe("profile.address.district",e),qe("profile.address.city",""),qe("profile.address.zipCode","")},disabled:!le.profile.address?.state||Pe.districts,children:[e.jsx(V,{children:e.jsx(L,{placeholder:le.profile.address?.state?Pe.districts?"Loading districts...":"Select district":"Select state first"})}),e.jsx(q,{children:be.map(s=>e.jsx(z,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"city",children:"City"}),e.jsxs(B,{value:le.profile.address?.city||"",onValueChange:e=>{qe("profile.address.city",e),qe("profile.address.zipCode","")},disabled:!le.profile.address?.district||Pe.cities,children:[e.jsx(V,{children:e.jsx(L,{placeholder:le.profile.address?.district?Pe.cities?"Loading cities...":"Select city":"Select district first"})}),e.jsx(q,{children:Ce.map(s=>e.jsx(z,{value:s,children:s},s))})]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(P,{children:"State"}),e.jsx("p",{className:"text-sm",children:le.profile.address?.state||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(P,{children:"District"}),e.jsx("p",{className:"text-sm",children:le.profile.address?.district||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(P,{children:"City"}),e.jsx("p",{className:"text-sm",children:le.profile.address?.city||"Not provided"})]})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"zipCode",children:"PIN Code"}),p?e.jsx(O,{value:le.profile.address?.zipCode||"",onChange:(e,s)=>{if(qe("profile.address.zipCode",e),s&&s.state){const e=s.state.toUpperCase();Ne.includes(e)&&(qe("profile.address.state",e),qe("profile.address.stateCode",e),setTimeout(()=>{const i=h.getDistricts(e);if(we(i),s.district){const a=i.find(e=>e.toUpperCase()===s.district.toUpperCase());a&&(qe("profile.address.district",a),qe("profile.address.districtCode",a),setTimeout(()=>{const i=h.getCities(e,a);if(ke(i),s.city){const e=i.find(e=>e.toUpperCase()===s.city.toUpperCase());e&&(qe("profile.address.city",e),qe("profile.address.cityCode",e))}},100))}},100))}},state:le.profile.address?.state,district:le.profile.address?.district,city:le.profile.address?.city,placeholder:le.profile.address?.city?`Enter PIN code for ${le.profile.address.city}...`:"Enter PIN code to auto-fill location...",className:"w-full"}):e.jsx("p",{className:"text-sm",children:le.profile.address?.zipCode||"Not provided"}),p&&e.jsxs("div",{className:"space-y-1 mt-1",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"ðŸ’¡ Select your location first or enter PIN code to auto-fill location details"}),le.profile.address?.zipCode&&le.profile.address?.city&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),"Location validated with PIN code"]})]})]})]})]})]})}),e.jsx(T,{value:"company",className:"space-y-6",children:e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center",children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),"Company Information"]})}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"companyName",children:"Company Name"}),p?e.jsx(S,{id:"companyName",value:le.profile.vendorInfo?.companyName||"",onChange:e=>qe("profile.vendorInfo.companyName",e.target.value)}):e.jsx("p",{className:"text-sm",children:le.profile.vendorInfo?.companyName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"businessType",children:"Business Type"}),p?e.jsxs(B,{value:le.profile.vendorInfo?.businessType||"",onValueChange:e=>qe("profile.vendorInfo.businessType",e),children:[e.jsx(V,{children:e.jsx(L,{placeholder:"Select business type"})}),e.jsxs(q,{children:[e.jsx(z,{value:"real_estate_agent",children:"Real Estate Agent"}),e.jsx(z,{value:"property_developer",children:"Property Developer"}),e.jsx(z,{value:"construction_company",children:"Construction Company"}),e.jsx(z,{value:"interior_designer",children:"Interior Designer"}),e.jsx(z,{value:"legal_services",children:"Legal Services"}),e.jsx(z,{value:"home_loan_provider",children:"Home Loan Provider"}),e.jsx(z,{value:"packers_movers",children:"Packers & Movers"}),e.jsx(z,{value:"property_management",children:"Property Management"}),e.jsx(z,{value:"other",children:"Other"})]})]}):e.jsx("p",{className:"text-sm",children:le.profile.vendorInfo?.businessType?le.profile.vendorInfo.businessType.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"Not provided"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"experience",children:"Experience (Years)"}),p?e.jsx(S,{id:"experience",type:"number",value:le.profile.vendorInfo?.experience||0,onChange:e=>qe("profile.vendorInfo.experience",parseInt(e.target.value)||0)}):e.jsxs("p",{className:"text-sm",children:[le.profile.vendorInfo?.experience||0," years"]})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"website",children:"Website"}),p?e.jsx(S,{id:"website",value:le.profile.vendorInfo?.website||"",onChange:e=>qe("profile.vendorInfo.website",e.target.value)}):e.jsx("p",{className:"text-sm",children:le.profile.vendorInfo?.website||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"licenseNumber",children:"License Number"}),p?e.jsx(S,{id:"licenseNumber",value:le.profile.vendorInfo?.licenseNumber||"",onChange:e=>qe("profile.vendorInfo.licenseNumber",e.target.value)}):e.jsx("p",{className:"text-sm",children:le.profile.vendorInfo?.licenseNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"gstNumber",children:"GST Number"}),p?e.jsx(S,{id:"gstNumber",value:le.profile.vendorInfo?.gstNumber||"",onChange:e=>qe("profile.vendorInfo.gstNumber",e.target.value)}):e.jsx("p",{className:"text-sm",children:le.profile.vendorInfo?.gstNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"panNumber",children:"PAN Number"}),p?e.jsx(S,{id:"panNumber",value:le.profile.vendorInfo?.panNumber||"",onChange:e=>qe("profile.vendorInfo.panNumber",e.target.value)}):e.jsx("p",{className:"text-sm",children:le.profile.vendorInfo?.panNumber||"Not provided"})]})]})})]})}),e.jsxs(T,{value:"notifications",className:"space-y-6",children:[e.jsx(ae,{preferences:Ie.notifications,businessPreferences:{emailNotifications:Ie.business.emailNotifications,smsNotifications:Ie.business.smsNotifications,leadAlerts:Ie.business.leadAlerts,marketingEmails:Ie.business.marketingEmails,weeklyReports:Ie.business.weeklyReports},onChange:(e,s)=>Fe("notifications",e,s),onBusinessChange:(e,s)=>Fe("business",e,s),showTestButtons:!0,onTestPushNotification:()=>{j({title:"Test Push Notification",description:"Push notification test sent successfully!"})},onTestEmail:()=>{j({title:"Test Email",description:"Test email sent successfully!"})}}),e.jsxs(r,{className:"mb-6",children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Security Settings"]})}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Change Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your account password with secure OTP verification"})]}),e.jsxs(v,{variant:"outline",onClick:()=>Me(!0),className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Change Password"]})]})})]}),e.jsx(H,{open:Re,onOpenChange:Me})]})]}),re.statistics&&e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),"Performance Statistics"]})}),e.jsx(c,{children:e.jsxs("div",{className:`grid ${t?"grid-cols-2":"grid-cols-2 md:grid-cols-4"} gap-4`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:(t?"text-xl":"text-2xl")+" font-bold text-blue-600",children:re.statistics.totalProperties}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Listed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:(t?"text-xl":"text-2xl")+" font-bold text-green-600",children:re.statistics.totalValue||"???0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:(t?"text-xl":"text-2xl")+" font-bold text-purple-600",children:(le.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:(t?"text-xl":"text-2xl")+" font-bold text-orange-600",children:re.statistics.totalMessages}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Messages"})]})]})})]})]})};export{te as default};
