import{j as e}from"./ui-s1SEoZIF.js";import{r as s}from"./router-D8v2YSKU.js";import{D as t,t as a,bw as r,u as n,bx as i,B as o,q as l,r as d,s as c,v as m,w as u,$ as x,I as h,aC as g,G as p,an as f,aq as v,ar as j,as as b,k as y,f as N,A as w,P as C,m as k,y as S,n as A,aE as M,aF as T,aG as _,aJ as R,ad as U,aP as z,T as I,by as D}from"./index-xsqbJ4m0.js";import{m as E}from"./messageService-CtyXeXdV.js";import{u as P}from"./use-mobile-C5fBmhy-.js";import{A as F,C as O}from"./check-check-C-Egyc2P.js";import{E as $}from"./ellipsis-vertical-CzebuAxp.js";import{P as q}from"./paperclip-BEarble9.js";import{S as Y}from"./send-BajDPXlc.js";const B=t("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const L=new class{config=null;initialize(e){this.config=e}async getConversations(e={}){if(!this.config)throw new Error("UnifiedMessageService not initialized");const s=this.getRoleSpecificFilters(e);return await E.getConversations(s)}async getConversationMessages(e,s=1,t=50,a=!0){const r=await E.getConversationMessages(e,s,t,a);return r.messages=r.messages.map(e=>E.normalizeMessage(e)),r}async sendMessage(e,s,t,a){const r=await E.sendMessage(e,s,t,a);return E.normalizeMessage(r)}async uploadAttachment(e){return await E.uploadAttachment(e)}async markMessageAsRead(e){await E.markMessageAsRead(e)}async markConversationAsRead(e){await E.markConversationAsRead(e)}async deleteMessage(e){if(!this.canDeleteMessages())throw a({title:"Permission Denied",description:"You do not have permission to delete messages",variant:"destructive"}),new Error("Permission denied");await E.deleteMessage(e)}async deleteConversation(e){if(!this.canDeleteConversations())throw a({title:"Permission Denied",description:"You do not have permission to delete conversations",variant:"destructive"}),new Error("Permission denied");await E.deleteConversation(e)}async updateConversationStatus(e,s){await E.updateConversationStatus(e,s)}async getUserStatus(e){return await E.getUserStatus(e)}async getUnreadCount(){return await E.getUnreadCount()}joinConversation(e){r.joinConversation(e)}leaveConversation(e){r.leaveConversation(e)}startTyping(e){r.startTyping(e)}stopTyping(e){r.stopTyping(e)}markMessageAsReadSocket(e,s){r.markMessageAsRead(e,s)}markConversationAsReadSocket(e){r.markConversationAsRead(e)}updateOnlineStatus(e){r.updateOnlineStatus(e)}formatTime(e){return E.formatTime(e)}getMessageContent(e){return E.getMessageContent(e)}isAutoResponse(e){return E.isAutoResponse(e)}formatPrice(e,s){return E.formatPrice(e,s)}getPriorityColor(e){return E.getPriorityColor(e)}getStatusColor(e){return E.getStatusColor(e)}canDeleteMessages(){return!!this.config&&["admin","subadmin","customer","vendor"].includes(this.config.role)}canDeleteConversations(){return!!this.config&&["admin","subadmin","customer","vendor"].includes(this.config.role)}canAccessAdminFeatures(){return!!this.config&&["admin","subadmin"].includes(this.config.role)}getRoleSpecificFilters(e){if(!this.config)return e;const s={...e};return this.config.role,s}getConversationListTitle(){if(!this.config)return"Conversations";switch(this.config.role){case"admin":case"subadmin":return"All Conversations";case"vendor":return"Property Inquiries";case"customer":return"My Messages";default:return"Conversations"}}isSocketConnected(){return r.isConnected()}},G=({role:t,pageTitle:r,pageDescription:E,showPropertyInfo:G=!0,enableDeletion:H=!0})=>{const{user:K}=n(),V=P(),[W,J]=s.useState(null),[Q,X]=s.useState(""),[Z,ee]=s.useState(""),[se,te]=s.useState([]),[ae,re]=s.useState([]),[ne,ie]=s.useState(!0),[oe,le]=s.useState(!1),[de,ce]=s.useState("all"),[me,ue]=s.useState([]),[xe,he]=s.useState(!1),[ge,pe]=s.useState(!1),[fe,ve]=s.useState({}),[je,be]=s.useState(!0),[ye,Ne]=s.useState(0),we=s.useRef(null),Ce=s.useRef(null),ke=s.useRef(null),Se=s.useRef(null);s.useEffect(()=>{K?.id&&L.initialize({role:t,userId:K.id})},[t,K]),i({refreshConversations:()=>{Ae()},onNewMessage:e=>{e.conversationId===W&&Me(W),Ae()},onMessageRead:e=>{e.conversationId===W&&re(s=>s.map(s=>s._id===e.messageId?{...s,read:!0,isRead:!0}:s)),Ae()},onConversationRead:e=>{e.conversationId===W&&re(e=>e.map(e=>({...e,read:!0,isRead:!0}))),Ae()},onTypingIndicator:e=>{e.conversationId===W&&e.userId!==K?.id&&pe(e.isTyping)},onUserStatusChange:e=>{ve(s=>({...s,[e.userId]:{userId:e.userId,isOnline:e.isOnline,lastSeen:e.lastSeen}}))}});const Ae=async()=>{try{ie(!0);const e=await L.getConversations({status:"all"!==de?de:void 0,search:Z.trim()||void 0,limit:50});te(e.conversations);const s=e.conversations.reduce((e,s)=>e+(s.unreadCount||0),0);Ne(s)}catch(e){a({title:"Error",description:"Failed to load conversations. Please try again.",variant:"destructive"})}finally{ie(!1)}},Me=async e=>{try{re([]);const s=await L.getConversationMessages(e,1,50,!0);s&&(re(s.messages),L.markConversationAsReadSocket(e),Ae())}catch(s){}};s.useEffect(()=>{Ae()},[de]),s.useEffect(()=>(W?(Me(W),L.joinConversation(W),V&&be(!1)):re([]),()=>{W&&(L.leaveConversation(W),L.stopTyping(W))}),[W,V]),s.useEffect(()=>{se.length>0&&(async()=>{const e={};for(const t of se)try{const s=await L.getUserStatus(t.otherUser._id);e[t.otherUser._id]=s}catch(s){}ve(e)})()},[se]),s.useEffect(()=>{if(Se.current){const e=Se.current.querySelector("[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}},[ae,ge]);const Te=se.find(e=>(e.id||e._id)===W),_e=async()=>{if((Q.trim()||0!==me.length)&&W&&Te)try{le(!0);const s=[];if(me.length>0){he(!0);for(const t of me)try{const e=await L.uploadAttachment(t);s.push(e)}catch(e){}he(!1)}const t=Q.trim()||(s.length>0?"[Attachment]":""),a=await L.sendMessage(W,t,Te.otherUser._id,s);re(e=>[...e,a]),X(""),ue([]),Ae()}catch(e){}finally{le(!1)}};s.useEffect(()=>{if(W)return Q.trim()?(L.startTyping(W),ke.current&&clearTimeout(ke.current),ke.current=setTimeout(()=>{L.stopTyping(W)},2e3)):L.stopTyping(W),()=>{ke.current&&clearTimeout(ke.current)}},[Q,W]);const Re=(e,s)=>{const t=e.target.files;if(!t)return;const r=Array.from(t),n=[];for(const i of r)if(i.size>10485760)a({title:"File too large",description:`${i.name} exceeds 10MB limit`,variant:"destructive"});else{if("image"===s){if(!i.type.startsWith("image/")){a({title:"Invalid file type",description:`${i.name} is not an image`,variant:"destructive"});continue}}else{if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(i.type)){a({title:"Invalid file type",description:`${i.name} is not a supported document type`,variant:"destructive"});continue}}n.push(i)}ue(e=>[...e,...n]),e.target&&(e.target.value="")},Ue=async(s,t)=>{const r=s.id||s._id||"",n=t?s.unreadCount>0?"unread":"read":"archived";try{await L.updateConversationStatus(r,n),W===r&&(J(null),re([]),V&&be(!0)),te(e=>e.filter(e=>(e.id||e._id)!==r)),a({title:t?"Conversation unarchived":"Conversation archived",description:t?"Moved to main chat list":"Moved to archived chats",action:e.jsx(D,{altText:"Undo",onClick:()=>Ue(s,!t),children:"Undo"})}),setTimeout(()=>Ae(),500)}catch(i){a({title:"Error",description:"Failed to update conversation status",variant:"destructive"}),Ae()}},ze=e=>e.otherUser||{_id:"",name:"Unknown User",email:""};s.useEffect(()=>{const e=setTimeout(()=>{""!==Z&&Ae()},500);return()=>clearTimeout(e)},[Z]);const Ie=se;return e.jsxs("div",{className:"flex h-full pt-0 bg-background overflow-hidden",children:[e.jsxs("div",{className:(V?je?"flex":"hidden":"flex")+" w-full md:w-80 lg:w-96 flex-col border-r bg-muted/10",children:[e.jsxs("div",{className:"p-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:["Messages",ye>0&&e.jsx(o,{className:"bg-primary text-primary-foreground text-xs px-2 py-0.5 rounded-full",children:ye})]}),e.jsxs(l,{value:de,onValueChange:ce,children:[e.jsx(d,{className:"w-[110px] h-8 text-xs bg-background",children:e.jsx(c,{placeholder:"Filter"})}),e.jsxs(m,{children:[e.jsx(u,{value:"all",children:"All"}),e.jsx(u,{value:"unread",children:"Unread"}),e.jsx(u,{value:"read",children:"Read"}),e.jsx(u,{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(h,{placeholder:"Search conversations...",className:"pl-9 bg-muted/50 border-none rounded-full h-9 focus-visible:ring-1 focus-visible:ring-primary/20",value:Z,onChange:e=>ee(e.target.value)})]})]}),e.jsx(g,{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col",children:["archived"!==de&&e.jsxs("div",{className:"flex items-center gap-3 p-4 cursor-pointer hover:bg-muted/50 border-b border-border/40 transition-colors",onClick:()=>ce("archived"),children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-muted/80",children:e.jsx(F,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm",children:"Archived"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"View archived chats"})]})]}),ne?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(p,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):0===Ie.length?e.jsxs("div",{className:"text-center py-12 px-4 text-muted-foreground",children:[e.jsx(f,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{className:"font-medium",children:"No conversations yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Start by sending a message to a property"})]}):Ie.map(s=>{const t=ze(s),a=t.name||"Unknown User",r=s.id||s._id||"",n=W===r;return e.jsxs("div",{className:"group flex items-start gap-3 p-4 cursor-pointer transition-all border-b border-border/40 hover:bg-muted/50 "+(n?"bg-primary/5 border-l-4 border-l-primary":"border-l-4 border-l-transparent"),onClick:()=>J(r),children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(v,{className:"w-12 h-12 border-2 border-background shadow-sm",children:[e.jsx(j,{src:void 0}),e.jsx(b,{className:"bg-primary/10 text-primary font-semibold",children:a.split(" ").map(e=>e[0]).join("").substring(0,2)})]}),fe[t._id]?.isOnline&&e.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-background rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("h3",{className:`text-sm truncate ${s.unreadCount>0?"font-bold text-foreground":"font-semibold text-foreground/90"} ${n?"text-primary":""}`,children:[a,s.unreadCount>0&&e.jsxs("span",{className:"ml-1.5 text-xs text-primary font-bold",children:["(",s.unreadCount,")"]})]}),e.jsx("span",{className:"text-[10px] text-muted-foreground flex-shrink-0",children:L.formatTime(s.lastMessage.createdAt)})]}),G&&s.property&&e.jsxs("div",{className:"flex items-center gap-1 mb-1 text-xs text-muted-foreground/80",children:[e.jsx(y,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:s.property.title})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"text-sm truncate "+(s.unreadCount>0?"font-medium text-foreground":"text-muted-foreground"),children:[s.lastMessage.isFromMe&&e.jsx("span",{className:"mr-1",children:"You:"}),s.lastMessage.message]}),e.jsx("div",{className:"text-[10px] text-muted-foreground/70",children:fe[t._id]?.isOnline?e.jsx("span",{className:"text-green-600 font-medium",children:"Active now"}):fe[t._id]?.lastSeen?e.jsxs("span",{children:["Active ",L.formatTime(fe[t._id].lastSeen)]}):e.jsx("span",{children:"Offline"})})]})]})]},r)})]})})]}),e.jsx("div",{className:(V&&je?"hidden":"flex")+" flex-1 flex-col bg-background relative",children:Te?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-16 border-b flex items-center justify-between px-4 md:px-6 bg-background/95 backdrop-blur z-10 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[V&&e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>be(!0),className:"-ml-2 hover:bg-muted/50 rounded-full",children:e.jsx(w,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs(v,{className:"w-10 h-10 border shadow-sm",children:[e.jsx(j,{src:void 0}),e.jsx(b,{className:"bg-primary/10 text-primary",children:ze(Te).name.split(" ").map(e=>e[0]).join("").substring(0,2)})]}),fe[ze(Te)._id]?.isOnline&&e.jsx("span",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-background rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base leading-none mb-1",children:ze(Te).name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[fe[ze(Te)._id]?.isOnline?e.jsx("span",{className:"text-green-600 font-medium",children:"Active now"}):fe[ze(Te)._id]?.lastSeen?e.jsxs("span",{children:["Last seen ",L.formatTime(fe[ze(Te)._id].lastSeen)]}):e.jsx("span",{children:"Offline"}),G&&Te.property&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1 h-1 bg-muted-foreground/30 rounded-full"}),e.jsx("span",{className:"truncate max-w-[150px]",children:Te.property.title})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[ze(Te).phone&&e.jsxs(C,{children:[e.jsx(k,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"ghost",className:"rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10",children:e.jsx(S,{className:"w-5 h-5"})})}),e.jsx(A,{className:"w-auto p-3",align:"end",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact Number"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-lg font-semibold",children:ze(Te).phone}),e.jsx(N,{size:"sm",variant:"secondary",onClick:()=>{navigator.clipboard.writeText(ze(Te).phone||""),a({title:"Copied!",description:"Phone number copied to clipboard"})},children:"Copy"})]})]})})]}),H&&e.jsxs(M,{children:[e.jsx(T,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"ghost",className:"rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10",children:e.jsx($,{className:"w-5 h-5"})})}),e.jsxs(_,{align:"end",children:[e.jsxs(R,{onClick:()=>Ue(Te,"archived"===Te.status),children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"archived"===Te.status?"Unarchive":"Archive"]}),e.jsxs(R,{className:"text-red-600 focus:text-red-600",onClick:()=>(async e=>{if(H&&window.confirm("Are you sure you want to delete this conversation? This action cannot be undone."))try{await L.deleteConversation(e),te(s=>s.filter(s=>(s.id||s._id)!==e)),W===e&&(J(null),re([])),a({title:"Success",description:"Conversation deleted successfully!"})}catch(s){}})(Te.id||Te._id||""),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Delete Conversation"]})]})]})]})]}),e.jsx(g,{className:"flex-1 bg-muted/5",ref:Se,children:e.jsxs("div",{className:"p-4 space-y-6",children:[ae.map((s,t)=>{const r="string"==typeof s.sender?s.sender:s.sender._id,n=K?.id===r,i=!n&&(0===t||ae[t-1].sender!==s.sender);return e.jsx("div",{className:"flex w-full "+(n?"justify-end":"justify-start"),children:e.jsxs("div",{className:"flex max-w-[80%] md:max-w-[70%] gap-2 "+(n?"flex-row-reverse":"flex-row"),children:[!n&&e.jsx("div",{className:"w-8 flex-shrink-0 flex flex-col justify-end",children:i?e.jsxs(v,{className:"w-8 h-8 border",children:[e.jsx(j,{src:void 0}),e.jsx(b,{className:"text-[10px]",children:ze(Te).name.split(" ").map(e=>e[0]).join("").substring(0,2)})]}):e.jsx("div",{className:"w-8"})}),e.jsxs("div",{className:"group relative px-4 py-3 shadow-sm "+(n?"bg-primary text-primary-foreground rounded-2xl rounded-tr-sm":"bg-card border text-foreground rounded-2xl rounded-tl-sm"),children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:L.getMessageContent(s)}),s.attachments&&s.attachments.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:s.attachments.map((s,t)=>e.jsx("div",{children:"image"===s.type?e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:s.url,alt:s.name,className:"max-w-full rounded-lg border border-border/20 cursor-pointer hover:opacity-95 transition-opacity",style:{maxHeight:"250px"}})}):e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-3 p-3 rounded-lg border ${n?"border-primary-foreground/20 bg-primary-foreground/10 hover:bg-primary-foreground/20":"border-border bg-muted/50 hover:bg-muted"} transition-colors`,children:[e.jsx("div",{className:"bg-background p-2 rounded-md",children:e.jsx(q,{className:"w-4 h-4 "+(n?"text-primary":"text-muted-foreground")})}),e.jsx("span",{className:"text-sm truncate font-medium underline decoration-dotted underline-offset-4",children:s.name})]})},t))}),e.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1 "+(n?"text-primary-foreground/70":"text-muted-foreground"),children:[e.jsx("span",{className:"text-[10px]",children:L.formatTime(s.createdAt||s.timestamp)}),n&&(s.read?e.jsx(O,{className:"w-3 h-3"}):e.jsx(O,{className:"w-3 h-3 opacity-50"}))]}),H&&n&&e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs(M,{children:[e.jsx(T,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-black/10 rounded-full",children:e.jsx($,{className:"w-3 h-3"})})}),e.jsx(_,{align:"end",children:e.jsxs(R,{className:"text-red-600 focus:text-red-600",onClick:()=>(async e=>{if(H&&window.confirm("Are you sure you want to delete this message? This action cannot be undone."))try{await L.deleteMessage(e),re(s=>s.filter(s=>s._id!==e)),a({title:"Success",description:"Message deleted successfully!"})}catch(s){}})(s._id),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})})]})]})},s._id)}),ge&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs(v,{className:"w-8 h-8 border mb-1",children:[e.jsx(j,{src:void 0}),e.jsx(b,{className:"text-[10px]",children:ze(Te).name.split(" ").map(e=>e[0]).join("").substring(0,2)})]}),e.jsx("div",{className:"bg-card border p-3 rounded-2xl rounded-tl-sm shadow-sm",children:e.jsxs("div",{className:"flex gap-1.5 items-center h-4",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})})]})}),e.jsxs("div",{className:"p-4 bg-background border-t",children:[me.length>0&&e.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:me.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 bg-muted px-3 py-2 rounded-lg border animate-in fade-in slide-in-from-bottom-2",children:[e.jsx("div",{className:"p-1.5 bg-background rounded-md border",children:s.type.startsWith("image/")?e.jsx(B,{className:"w-4 h-4 text-blue-500"}):e.jsx(q,{className:"w-4 h-4 text-orange-500"})}),e.jsx("span",{className:"text-sm truncate max-w-[200px] font-medium",children:s.name}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 hover:bg-destructive hover:text-destructive-foreground rounded-full",onClick:()=>(e=>{ue(s=>s.filter((s,t)=>t!==e))})(t),children:e.jsx(z,{className:"w-3 h-3"})})]},t))}),e.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 p-2 rounded-[24px] border focus-within:ring-1 focus-within:ring-primary/20 focus-within:border-primary/20 transition-all shadow-sm",children:[e.jsx("input",{ref:we,type:"file",className:"hidden",accept:".pdf,.doc,.docx",onChange:e=>Re(e,"document"),multiple:!0}),e.jsx("input",{ref:Ce,type:"file",className:"hidden",accept:"image/*",onChange:e=>Re(e,"image"),multiple:!0}),e.jsxs("div",{className:"flex gap-1 mb-1 ml-1",children:[e.jsx(N,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10",onClick:()=>we.current?.click(),disabled:xe||oe,title:"Attach document",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsx(N,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10",onClick:()=>Ce.current?.click(),disabled:xe||oe,title:"Attach image",children:e.jsx(B,{className:"w-5 h-5"})})]}),e.jsx(I,{placeholder:"Type a message...",value:Q,onChange:e=>X(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_e())},className:"flex-1 min-h-[40px] max-h-[120px] py-2.5 px-2 bg-transparent border-none shadow-none resize-none focus-visible:ring-0 text-base",disabled:oe||xe}),e.jsx(N,{onClick:_e,disabled:!Q.trim()&&0===me.length||oe||xe,size:"icon",className:"h-10 w-10 rounded-full shrink-0 mb-0.5",children:oe||xe?e.jsx(p,{className:"w-5 h-5 animate-spin"}):e.jsx(Y,{className:"w-5 h-5 ml-0.5"})})]})]})]}):e.jsxs("div",{className:"flex-1 flex items-center justify-center flex-col text-muted-foreground bg-muted/5",children:[e.jsx("div",{className:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-6",children:e.jsx(f,{className:"w-10 h-10 opacity-20"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:"Your Messages"}),e.jsx("p",{className:"max-w-xs text-center text-sm",children:"Select a conversation from the list to start chatting or send a new message."})]})})]})};export{G as B};
