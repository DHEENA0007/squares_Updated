import{j as e}from"./ui-CEt46o3G.js";import{u as k,F as D,a,b as t,c as n,d as o,e as l,t as L,o as R,f,s as c,g as v}from"./form-kNeghTgi.js";import{f as B,I as d,a as h,g as y}from"./index-CiYV0Sy0.js";import{S as w,a as g,b as N,c as b,d as x}from"./select-BHWxeluH.js";import{f as C,C as S}from"./calendar-8F7d9wsn.js";import{P as F,a as P,b as E}from"./popover-lkJ8tobj.js";import{d as $,r as _}from"./router-2SVJvIbS.js";import{u as O}from"./userService-BPsaMP6Y.js";import{C as M}from"./calendar-DWj9NFdt.js";import{E as T}from"./eye-off-Cr48i-r0.js";import{E as I}from"./eye-CDS1ofgA.js";import"./vendor-Dazix4UH.js";import"./label-BV_cIshD.js";import"./index-BdQq_4o_.js";import"./index-DHzxUTm5.js";import"./chevron-down-DeDu0PPf.js";const q=R({first_name:c().min(2,"First name must be at least 2 characters"),last_name:c().min(2,"Last name must be at least 2 characters"),email:c().email("Invalid email address"),phone:c().regex(/^[0-9]{10}$/,"Must be 10 digits"),birthday:v().optional(),anniversary:v().optional(),password:c().min(8,"Password must be at least 8 characters"),confirm_password:c(),role:f(["admin","moderator","user"]),status:f(["active","inactive"])}).refine(m=>m.password===m.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}),oe=()=>{const{toast:m}=B(),p=$(),[u,U]=_.useState(!1),[j,V]=_.useState(!1),r=k({resolver:L(q),defaultValues:{first_name:"",last_name:"",email:"",phone:"",role:"user",status:"active",password:"",confirm_password:""}}),A=async s=>{try{const i={email:s.email,password:s.password,profile:{firstName:s.first_name,lastName:s.last_name,phone:s.phone,birthday:s.birthday,anniversary:s.anniversary},role:s.role,status:s.status};await O.createUser(i),m({title:"Success",description:"User created successfully."}),p("/admin/users")}catch(i){console.error("Failed to create user:",i),m({title:"Error",description:"Failed to create user. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New User"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new user account"})]}),e.jsx("div",{className:"bg-card rounded-lg border p-6 md:p-8",children:e.jsx(D,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(A),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a,{control:r.control,name:"first_name",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"First Name *"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter first name",...s})}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"last_name",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Last Name *"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter last name",...s})}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"email",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Email *"}),e.jsx(o,{children:e.jsx(d,{type:"email",placeholder:"Enter email",...s})}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Phone Number *"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter phone number",...s})}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"birthday",render:({field:s})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(n,{children:"Birthday"}),e.jsxs(F,{children:[e.jsx(P,{asChild:!0,children:e.jsx(o,{children:e.jsxs(h,{variant:"outline",className:y("w-full justify-start text-left font-normal",!s.value&&"text-muted-foreground"),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),s.value?C(s.value,"dd/MM/yyyy"):e.jsx("span",{children:"dd/mm/yyyy"})]})})}),e.jsx(E,{className:"w-auto p-0",align:"start",children:e.jsx(S,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:i=>i>new Date,initialFocus:!0,className:"pointer-events-auto"})})]}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"anniversary",render:({field:s})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(n,{children:"Anniversary"}),e.jsxs(F,{children:[e.jsx(P,{asChild:!0,children:e.jsx(o,{children:e.jsxs(h,{variant:"outline",className:y("w-full justify-start text-left font-normal",!s.value&&"text-muted-foreground"),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),s.value?C(s.value,"dd/MM/yyyy"):e.jsx("span",{children:"dd/mm/yyyy"})]})})}),e.jsx(E,{className:"w-auto p-0",align:"start",children:e.jsx(S,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:i=>i>new Date,initialFocus:!0,className:"pointer-events-auto"})})]}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"password",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Password *"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:u?"text":"password",placeholder:"Enter password",...s}),e.jsx("button",{type:"button",onClick:()=>U(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:u?e.jsx(T,{className:"h-4 w-4"}):e.jsx(I,{className:"h-4 w-4"})})]})}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"confirm_password",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Confirm Password *"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:j?"text":"password",placeholder:"Re-enter password",...s}),e.jsx("button",{type:"button",onClick:()=>V(!j),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:j?e.jsx(T,{className:"h-4 w-4"}):e.jsx(I,{className:"h-4 w-4"})})]})}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"role",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Role *"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(g,{children:e.jsx(N,{placeholder:"Select role"})})}),e.jsxs(b,{children:[e.jsx(x,{value:"admin",children:"Admin"}),e.jsx(x,{value:"moderator",children:"Moderator"}),e.jsx(x,{value:"user",children:"User"})]})]}),e.jsx(l,{})]})}),e.jsx(a,{control:r.control,name:"status",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Status *"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(g,{children:e.jsx(N,{placeholder:"Select status"})})}),e.jsxs(b,{children:[e.jsx(x,{value:"active",children:"Active"}),e.jsx(x,{value:"inactive",children:"Inactive"})]})]}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>p("/admin/users"),children:"Cancel"}),e.jsx(h,{type:"submit",children:"Create User"})]})]})})})]})};export{oe as default};
