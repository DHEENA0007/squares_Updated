import{j as e}from"./ui-BNZSgpjP.js";import{r as s}from"./router-D8v2YSKU.js";import{D as a,l as t,bL as i,G as n,Y as l,f as c,al as r,af as d,ag as o,ah as m,bA as h,S as x,k as u,ai as j,a as g,b as p,c as y,d as v,e as f,L as N,I as S,ao as b,ac as w,g as C,q as k,r as A,s as F,v as E,w as P,M as D,t as M}from"./index-DNDw84E8.js";import{A as I,a as K}from"./alert-BXa5Nb9E.js";import{C as L}from"./circle-alert-CRPM7l06.js";import{G as R}from"./globe-DmGxelY3.js";import{K as T}from"./key-D_yCLSKM.js";import{R as _}from"./rotate-ccw-jA8LJBjp.js";import"./vendor-BxThA0WO.js";const z=a("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),V=a("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),G=()=>{const[a,G]=s.useState(!0),[W,B]=s.useState({}),[$,q]=s.useState({}),[O,U]=s.useState(!1),[J,Y]=s.useState(null),[H,Q]=s.useState(null),[X,Z]=s.useState({general:!1,notifications:!1,security:!1,payment:!1,system:!1,integrations:!1,location:!1}),[ee,se]=s.useState([]),[ae,te]=s.useState([]),[ie,ne]=s.useState([]),[le,ce]=s.useState(!1),[re,de]=s.useState(""),[oe,me]=s.useState(""),[he,xe]=s.useState(null),[ue,je]=s.useState({siteName:"",siteDescription:"",contactEmail:"",supportEmail:"",maintenanceMode:!1,registrationEnabled:!0,defaultCurrency:"INR",defaultLanguage:"en",timezone:"Asia/Kolkata"}),[ge,pe]=s.useState({emailNotifications:!0,smsNotifications:!0,pushNotifications:!0,adminAlerts:!0,systemAlerts:!0,userActivityAlerts:!1,marketingEmails:!0,weeklyReports:!0}),[ye,ve]=s.useState({sessionTimeout:30,passwordMinLength:8,maxLoginAttempts:5,lockoutDuration:30,requireEmailVerification:!0,requirePhoneVerification:!1,allowPasswordReset:!0,autoLockAccount:!0,ipWhitelisting:!1}),[fe,Ne]=s.useState({currency:"INR",taxRate:18,processingFee:2.5,refundPolicy:"7 days",autoRefund:!1,paymentMethods:["card","upi","netbanking"],minimumAmount:100,maximumAmount:1e6}),[Se,be]=s.useState({backupEnabled:!0,backupFrequency:"daily",backupRetention:30,maintenanceWindow:"02:00-04:00",debugMode:!1,logLevel:"info",performanceMode:"balanced"}),[we,Ce]=s.useState({emailProvider:"smtp",emailApiKey:"",smsProvider:"twilio",smsApiKey:"",paymentGateway:"razorpay",paymentApiKey:"",googleMapsApiKey:"",cloudinaryApiKey:"",firebaseConfig:{apiKey:"",authDomain:"",projectId:""}}),[ke,Ae]=s.useState({defaultCountry:"India",defaultState:"Karnataka",defaultDistrict:"Bangalore",defaultCity:"Bangalore",enableLocationAutodetection:!0,locationDataSource:"loca",radiusUnit:"km",defaultRadius:25});s.useEffect(()=>{Ee(),Fe()},[]);const Fe=async()=>{try{ce(!0),await t.initialize();const e=t.getStates();se(e)}catch(e){}finally{ce(!1)}};s.useEffect(()=>{if(ke.defaultState&&ee.length>0){const e=t.getDistricts(ke.defaultState);te(e)}},[ke.defaultState,ee]),s.useEffect(()=>{if(ke.defaultState&&ke.defaultDistrict&&ae.length>0){const e=t.getCities(ke.defaultState,ke.defaultDistrict);ne(e)}},[ke.defaultState,ke.defaultDistrict,ae]);const Ee=async()=>{try{G(!0);const e=await i.getSettings();e.success&&(Y(e.data.settings),je(e.data.settings.general),pe(e.data.settings.notifications),ve(e.data.settings.security),Ne(e.data.settings.payment),e.data.settings.system&&be(e.data.settings.system),e.data.settings.integrations&&Ce({...we,...e.data.settings.integrations}),e.data.settings.location&&Ae(s=>({...s,...e.data.settings.location})),Z({general:!1,notifications:!1,security:!1,payment:!1,system:!1,integrations:!1,location:!1}))}catch(e){}finally{G(!1)}},Pe=async(e,s,a)=>{try{await i.syncSettingRealtime(e,s,a),Q((new Date).toISOString())}catch(t){}},De=async e=>{const s={general:ue,notifications:ge,security:ye,payment:fe,system:Se,integrations:we,location:ke},a=i.validateSettings(e,s[e]);if(a.isValid)try{B(s=>({...s,[e]:!0}));const a=await i.updateSettings({category:e,settings:s[e]});a.success&&(Y(a.data.settings),Z(s=>({...s,[e]:!1})),M({title:"Success",description:`${e.charAt(0).toUpperCase()+e.slice(1)} settings saved successfully!`}))}catch(t){}finally{B(s=>({...s,[e]:!1}))}else M({title:"Validation Error",description:a.errors.join(", "),variant:"destructive"})},Me=async e=>{try{q(s=>({...s,[`${e}_integration`]:!0})),await i.testIntegration(e)}catch(s){}finally{q(s=>({...s,[`${e}_integration`]:!1}))}},Ie=e=>{Z(s=>({...s,[e]:!0}))};return a?e.jsx("div",{className:"container mx-auto p-6 space-y-6 relative top-[60px]",children:e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(n,{className:"h-8 w-8 animate-spin mr-2"}),e.jsx("span",{className:"text-lg",children:"Loading settings..."})]})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6 relative top-[60px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure system-wide settings and preferences"})]})]}),e.jsxs(c,{variant:"outline",onClick:async()=>{U(!0),await Ee(),U(!1),M({title:"Settings Refreshed",description:"Settings have been refreshed successfully."})},disabled:O,className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4 "+(O?"animate-spin":"")}),"Refresh"]})]}),Object.values(X).some(Boolean)&&e.jsxs(I,{children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx(K,{children:"You have unsaved changes. Don't forget to save your settings before leaving this page."})]}),e.jsxs(d,{defaultValue:"general",className:"space-y-6",children:[e.jsxs(o,{className:"grid w-full grid-cols-4",children:[e.jsxs(m,{value:"general",className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"General"]}),e.jsxs(m,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),"Notifications"]}),e.jsxs(m,{value:"security",className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4"}),"Security"]}),e.jsxs(m,{value:"location",className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"Location"]})]}),e.jsx(j,{value:"general",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"General Settings"]}),e.jsx(v,{children:"Manage your website's basic information and general settings."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"siteName",children:"Site Name"}),e.jsx(S,{id:"siteName",value:ue.siteName,onChange:e=>{je(s=>({...s,siteName:e.target.value})),Ie("general")}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"contactEmail",children:"Contact Email"}),e.jsx(S,{id:"contactEmail",type:"email",value:ue.contactEmail,onChange:e=>{je(s=>({...s,contactEmail:e.target.value})),Ie("general")}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"siteDescription",children:"Site Description"}),e.jsx(S,{id:"siteDescription",value:ue.siteDescription,onChange:e=>{je(s=>({...s,siteDescription:e.target.value})),Ie("general")}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"supportEmail",children:"Support Email"}),e.jsx(S,{id:"supportEmail",type:"email",value:ue.supportEmail,onChange:e=>{je(s=>({...s,supportEmail:e.target.value})),Ie("general")}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"defaultCurrency",children:"Default Currency"}),e.jsx(S,{id:"defaultCurrency",value:"INR (â‚¹)",disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"defaultLanguage",children:"Default Language"}),e.jsx(S,{id:"defaultLanguage",value:"English",disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"timezone",children:"Timezone"}),e.jsx(S,{id:"timezone",value:"India (IST)",disabled:!0})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>De("general"),disabled:a,children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save General Settings"]})})]})]})}),e.jsx(j,{value:"notifications",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Notification Settings"]}),e.jsx(v,{children:"Configure how and when notifications are sent to users and administrators."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"emailNotifications",children:"Email Notifications"}),e.jsx(w,{id:"emailNotifications",checked:ge.emailNotifications,onCheckedChange:e=>{pe(s=>({...s,emailNotifications:e})),Ie("notifications")}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"adminAlerts",children:"Admin Alerts"}),e.jsx(w,{id:"adminAlerts",checked:ge.adminAlerts,onCheckedChange:e=>{pe(s=>({...s,adminAlerts:e})),Ie("notifications")}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"systemAlerts",children:"System Alerts"}),e.jsx(w,{id:"systemAlerts",checked:ge.systemAlerts,onCheckedChange:e=>{pe(s=>({...s,systemAlerts:e})),Ie("notifications")}})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>De("notifications"),disabled:a,children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save Notification Settings"]})})]})]})}),e.jsx(j,{value:"security",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5"}),"Security Settings"]}),e.jsx(v,{children:"Configure security policies and authentication requirements."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),e.jsx(S,{id:"sessionTimeout",type:"number",min:"5",max:"480",value:ye.sessionTimeout,onChange:e=>{ve(s=>({...s,sessionTimeout:parseInt(e.target.value)})),Ie("security")}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JWT token expiration time. Users will be logged out after this duration of inactivity."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),e.jsx(S,{id:"maxLoginAttempts",type:"number",min:"3",max:"20",value:ye.maxLoginAttempts,onChange:e=>{ve(s=>({...s,maxLoginAttempts:parseInt(e.target.value)})),Ie("security"),Pe("security","maxLoginAttempts",parseInt(e.target.value))}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum failed login attempts before account lockout."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"lockoutDuration",children:"Account Lockout Duration (minutes)"}),e.jsx(S,{id:"lockoutDuration",type:"number",min:"5",max:"1440",value:ye.lockoutDuration,onChange:e=>{ve(s=>({...s,lockoutDuration:parseInt(e.target.value)})),Ie("security"),Pe("security","lockoutDuration",parseInt(e.target.value))}}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["After ",ye.maxLoginAttempts," failed login attempts, users will be locked out for ",ye.lockoutDuration," minutes or must reset their password. This setting applies dynamically to all user types."]})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Authentication"}),e.jsx("div",{className:"space-y-4"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>De("security"),disabled:a,children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save Security Settings"]})})]})]})}),e.jsx(j,{value:"payment",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Payment Settings"]}),e.jsx(v,{children:"Configure payment processing and billing settings."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"currency",children:"Default Currency"}),e.jsx(S,{id:"currency",value:fe.currency,onChange:e=>Ne(s=>({...s,currency:e.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(S,{id:"taxRate",type:"number",step:"0.1",value:fe.taxRate,onChange:e=>Ne(s=>({...s,taxRate:parseFloat(e.target.value)}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"processingFee",children:"Processing Fee (%)"}),e.jsx(S,{id:"processingFee",type:"number",step:"0.1",value:fe.processingFee,onChange:e=>Ne(s=>({...s,processingFee:parseFloat(e.target.value)}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"refundPolicy",children:"Refund Policy"}),e.jsx(S,{id:"refundPolicy",value:fe.refundPolicy,onChange:e=>Ne(s=>({...s,refundPolicy:e.target.value}))})]})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Automation"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"autoRefund",children:"Automatic Refunds"}),e.jsx(w,{id:"autoRefund",checked:fe.autoRefund,onCheckedChange:e=>Ne(s=>({...s,autoRefund:e}))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>De("payment"),disabled:W.payment,children:[W.payment?e.jsx(n,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save Payment Settings"]})})]})]})}),e.jsx(j,{value:"system",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-5 w-5"}),"System Settings"]}),e.jsx(v,{children:"Configure system maintenance, backups, and performance settings."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Backup Configuration"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"backupEnabled",children:"Enable Automatic Backups"}),e.jsx(w,{id:"backupEnabled",checked:Se.backupEnabled,onCheckedChange:e=>{be(s=>({...s,backupEnabled:e})),Ie("system"),Pe("system","backupEnabled",e)}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"backupFrequency",children:"Backup Frequency"}),e.jsxs(k,{value:Se.backupFrequency,onValueChange:e=>{be(s=>({...s,backupFrequency:e})),Ie("system"),Pe("system","backupFrequency",e)},children:[e.jsx(A,{children:e.jsx(F,{})}),e.jsxs(E,{children:[e.jsx(P,{value:"daily",children:"Daily"}),e.jsx(P,{value:"weekly",children:"Weekly"}),e.jsx(P,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"backupRetention",children:"Backup Retention (days)"}),e.jsx(S,{id:"backupRetention",type:"number",min:"1",max:"365",value:Se.backupRetention,onChange:e=>{const s=parseInt(e.target.value);be(e=>({...e,backupRetention:s})),Ie("system")}})]})]})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"System Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"performanceMode",children:"Performance Mode"}),e.jsxs(k,{value:Se.performanceMode,onValueChange:e=>{be(s=>({...s,performanceMode:e})),Ie("system"),Pe("system","performanceMode",e)},children:[e.jsx(A,{children:e.jsx(F,{})}),e.jsxs(E,{children:[e.jsx(P,{value:"balanced",children:"Balanced"}),e.jsx(P,{value:"performance",children:"High Performance"}),e.jsx(P,{value:"memory",children:"Memory Optimized"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"logLevel",children:"Log Level"}),e.jsxs(k,{value:Se.logLevel,onValueChange:e=>{be(s=>({...s,logLevel:e})),Ie("system"),Pe("system","logLevel",e)},children:[e.jsx(A,{children:e.jsx(F,{})}),e.jsxs(E,{children:[e.jsx(P,{value:"error",children:"Error Only"}),e.jsx(P,{value:"warn",children:"Warnings"}),e.jsx(P,{value:"info",children:"Information"}),e.jsx(P,{value:"debug",children:"Debug"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"maintenanceWindow",children:"Maintenance Window"}),e.jsx(S,{id:"maintenanceWindow",value:Se.maintenanceWindow,onChange:e=>{be(s=>({...s,maintenanceWindow:e.target.value})),Ie("system")},placeholder:"e.g., 02:00-04:00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"debugMode",children:"Debug Mode"}),e.jsx(w,{id:"debugMode",checked:Se.debugMode,onCheckedChange:e=>{be(s=>({...s,debugMode:e})),Ie("system"),Pe("system","debugMode",e)}})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(c,{variant:"outline",onClick:()=>(async e=>{try{B(s=>({...s,[`${e}_reset`]:!0}));const s=await i.resetSettings(e);if(s.success){switch(Y(s.data.settings),e){case"general":je(s.data.settings.general);break;case"notifications":pe(s.data.settings.notifications);break;case"security":ve(s.data.settings.security);break;case"payment":Ne(s.data.settings.payment);break;case"system":s.data.settings.system&&be(s.data.settings.system);break;case"integrations":s.data.settings.integrations&&Ce({...we,...s.data.settings.integrations});break;case"location":s.data.settings.location&&Ae(s.data.settings.location)}Z(s=>({...s,[e]:!1}))}}catch(s){}finally{B(s=>({...s,[`${e}_reset`]:!1}))}})("system"),disabled:W.system_reset,children:[W.system_reset?e.jsx(n,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(_,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]}),e.jsxs(c,{onClick:()=>De("system"),disabled:W.system,children:[W.system?e.jsx(n,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save System Settings"]})]})]})]})}),e.jsx(j,{value:"integrations",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5"}),"Integration Settings"]}),e.jsx(v,{children:"Configure third-party service integrations and API keys."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Email Service"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"emailProvider",children:"Email Provider"}),e.jsxs(k,{value:we.emailProvider,onValueChange:e=>{Ce(s=>({...s,emailProvider:e})),Ie("integrations")},children:[e.jsx(A,{children:e.jsx(F,{})}),e.jsxs(E,{children:[e.jsx(P,{value:"smtp",children:"SMTP"}),e.jsx(P,{value:"sendgrid",children:"SendGrid"}),e.jsx(P,{value:"aws-ses",children:"AWS SES"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"emailApiKey",children:"Email API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{id:"emailApiKey",type:"password",value:we.emailApiKey,onChange:e=>{Ce(s=>({...s,emailApiKey:e.target.value})),Ie("integrations")},placeholder:"Enter API key..."}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Me("email"),disabled:$.email_integration,children:$.email_integration?e.jsx(n,{className:"h-4 w-4 animate-spin"}):e.jsx(V,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h5",{className:"text-sm font-medium mb-4 text-gray-700",children:"Email Testing & Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"testEmail",children:"Test Email Address"}),e.jsx(S,{id:"testEmail",type:"email",value:re,onChange:e=>de(e.target.value),placeholder:"Enter email to test"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"emailTemplate",children:"Email Template"}),e.jsxs(k,{value:oe,onValueChange:me,children:[e.jsx(A,{children:e.jsx(F,{placeholder:"Select template"})}),e.jsxs(E,{children:[e.jsx(P,{value:"welcome",children:"Welcome Email"}),e.jsx(P,{value:"password-reset",children:"Password Reset"}),e.jsx(P,{value:"vendor-welcome",children:"Vendor Welcome"}),e.jsx(P,{value:"customer-booking-confirmation",children:"Booking Confirmation"}),e.jsx(P,{value:"service-status-update",children:"Service Update"}),e.jsx(P,{value:"weekly-report",children:"Weekly Report"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:async()=>{try{q(e=>({...e,email_connection:!0}));const e=await fetch("/api/admin/email/test-connection",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),s=await e.json();s.success?M({title:"Email Connection Test",description:"Email connection successful!"}):M({title:"Email Connection Failed",description:`Email connection failed: ${s.error}`,variant:"destructive"})}catch(e){M({title:"Connection Test Failed",description:"Failed to test email connection",variant:"destructive"})}finally{q(e=>({...e,email_connection:!1}))}},disabled:$.email_connection,children:$.email_connection?e.jsx(n,{className:"h-4 w-4 animate-spin"}):e.jsx(r,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:async()=>{if(re&&oe)try{q(e=>({...e,send_test_email:!0}));const e=await fetch("/api/admin/email/send-test",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({to:re,templateName:oe})}),s=await e.json();s.success?M({title:"Test Email Sent",description:`Test email sent successfully to ${re}`}):M({title:"Email Send Failed",description:`Failed to send test email: ${s.error}`,variant:"destructive"})}catch(e){M({title:"Email Send Failed",description:"Failed to send test email",variant:"destructive"})}finally{q(e=>({...e,send_test_email:!1}))}else M({title:"Missing Information",description:"Please enter email address and select template",variant:"destructive"})},disabled:$.send_test_email||!re||!oe,children:$.send_test_email?e.jsx(n,{className:"h-4 w-4 animate-spin"}):e.jsx(D,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:async()=>{try{const e=await fetch("/api/admin/email/stats",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),s=await e.json();s.success?(xe(s.stats),M({title:"Email Statistics",description:"Email stats loaded successfully"})):M({title:"Stats Load Failed",description:`Failed to get email stats: ${s.error}`,variant:"destructive"})}catch(e){M({title:"Stats Load Failed",description:"Failed to get email stats",variant:"destructive"})}},children:e.jsx(z,{className:"h-4 w-4"})})]})]})]}),he&&e.jsxs("div",{className:"mt-4 p-3 bg-white rounded-md border",children:[e.jsx("h6",{className:"text-xs font-medium text-gray-600 mb-2",children:"Email Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{children:["Sent: ",e.jsx("strong",{children:he.sent})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsxs("span",{children:["Failed: ",e.jsx("strong",{children:he.failed})]})]})]})]})]})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"SMS Service"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"smsProvider",children:"SMS Provider"}),e.jsxs(k,{value:we.smsProvider,onValueChange:e=>{Ce(s=>({...s,smsProvider:e})),Ie("integrations")},children:[e.jsx(A,{children:e.jsx(F,{})}),e.jsxs(E,{children:[e.jsx(P,{value:"twilio",children:"Twilio"}),e.jsx(P,{value:"aws-sns",children:"AWS SNS"}),e.jsx(P,{value:"firebase",children:"Firebase"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"smsApiKey",children:"SMS API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{id:"smsApiKey",type:"password",value:we.smsApiKey,onChange:e=>{Ce(s=>({...s,smsApiKey:e.target.value})),Ie("integrations")},placeholder:"Enter API key..."}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Me("sms"),disabled:$.sms_integration,children:$.sms_integration?e.jsx(n,{className:"h-4 w-4 animate-spin"}):e.jsx(V,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Payment Gateway"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"paymentGateway",children:"Payment Provider"}),e.jsxs(k,{value:we.paymentGateway,onValueChange:e=>{Ce(s=>({...s,paymentGateway:e})),Ie("integrations")},children:[e.jsx(A,{children:e.jsx(F,{})}),e.jsxs(E,{children:[e.jsx(P,{value:"razorpay",children:"Razorpay"}),e.jsx(P,{value:"stripe",children:"Stripe"}),e.jsx(P,{value:"paypal",children:"PayPal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"paymentApiKey",children:"Payment API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{id:"paymentApiKey",type:"password",value:we.paymentApiKey,onChange:e=>{Ce(s=>({...s,paymentApiKey:e.target.value})),Ie("integrations")},placeholder:"Enter API key..."}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Me("payment"),disabled:$.payment_integration,children:$.payment_integration?e.jsx(n,{className:"h-4 w-4 animate-spin"}):e.jsx(V,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Other Integrations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"googleMapsApiKey",children:"Google Maps API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{id:"googleMapsApiKey",type:"password",value:we.googleMapsApiKey,onChange:e=>{Ce(s=>({...s,googleMapsApiKey:e.target.value})),Ie("integrations")},placeholder:"Enter Google Maps API key..."}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Me("maps"),disabled:$.maps_integration,children:$.maps_integration?e.jsx(n,{className:"h-4 w-4 animate-spin"}):e.jsx(V,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"cloudinaryApiKey",children:"Cloudinary API Key"}),e.jsx(S,{id:"cloudinaryApiKey",type:"password",value:we.cloudinaryApiKey,onChange:e=>{Ce(s=>({...s,cloudinaryApiKey:e.target.value})),Ie("integrations")},placeholder:"Enter Cloudinary API key..."})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>De("integrations"),disabled:W.integrations,children:[W.integrations?e.jsx(n,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save Integration Settings"]})})]})]})}),e.jsx(j,{value:"location",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Location Settings"]}),e.jsx(v,{children:"Configure default location settings and location data sources."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Default Location"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Set default location for the platform using the integrated location service (loca.json)."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"defaultCountry",children:"Default Country"}),e.jsx(S,{id:"defaultCountry",value:"India",disabled:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by loca.json service"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"defaultState",children:"Default State"}),e.jsxs(k,{value:ke.defaultState,onValueChange:e=>{Ae(s=>({...s,defaultState:e,defaultDistrict:"",defaultCity:""})),Ie("location"),Pe("location","defaultState",e)},disabled:le||0===ee.length,children:[e.jsx(A,{children:e.jsx(F,{placeholder:le?"Loading states...":"Select state"})}),e.jsx(E,{children:ee.map(s=>e.jsx(P,{value:s,children:s},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by loca.json service"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"defaultDistrict",children:"Default District"}),e.jsxs(k,{value:ke.defaultDistrict,onValueChange:e=>{Ae(s=>({...s,defaultDistrict:e,defaultCity:""})),Ie("location"),Pe("location","defaultDistrict",e)},disabled:!ke.defaultState||0===ae.length,children:[e.jsx(A,{children:e.jsx(F,{placeholder:ke.defaultState?"Select district":"Select state first"})}),e.jsx(E,{children:ae.map(s=>e.jsx(P,{value:s,children:s},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by loca.json service"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"defaultCity",children:"Default City"}),e.jsxs(k,{value:ke.defaultCity,onValueChange:e=>{Ae(s=>({...s,defaultCity:e})),Ie("location"),Pe("location","defaultCity",e)},disabled:!ke.defaultDistrict||0===ie.length,children:[e.jsx(A,{children:e.jsx(F,{placeholder:ke.defaultDistrict?"Select city":"Select district first"})}),e.jsx(E,{children:ie.map(s=>e.jsx(P,{value:s,children:s},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by loca.json service"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>De("location"),disabled:W.location,children:[W.location?e.jsx(n,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save Location Settings"]})})]})]})})]})]})};export{G as default};
