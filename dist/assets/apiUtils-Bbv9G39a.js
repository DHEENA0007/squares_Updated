const t="https://app.buildhomemartsquares.com/api";async function e(t){const e=t.headers.get("content-type");if(!t.ok){if(e&&e.includes("application/json")){const e=await t.json().catch(()=>({message:`HTTP ${t.status}: ${t.statusText}`}));throw new Error(e.message||`HTTP ${t.status}: ${t.statusText}`)}throw await t.text().catch(()=>""),new Error(`Invalid response format: Expected JSON but got ${e||"unknown"}`)}if(!e||!e.includes("application/json"))throw new Error(`Invalid response format: Expected JSON but got ${e||"unknown"}`);return t.json()}async function n(e,n={}){const s=localStorage.getItem("token");let a;if(e.startsWith("http"))a=e;else if(e.startsWith("/api")){a=`${t.replace("/api","")}${e}`}else a=`${t}${e}`;const o={"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...n.headers};return fetch(a,{...n,headers:o})}export{n as f,e as h};
