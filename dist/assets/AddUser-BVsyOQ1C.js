import{j as e}from"./ui-BNZSgpjP.js";import{u as s,t as r,e as t,s as a,l as n,o as i}from"./types-KiqUWZa9.js";import{a2 as l,l as c,K as o,a as d,b as u,c as m,d as x,e as h,I as p,q as j,r as b,s as g,v as f,w as v,E as N,T as y,C,k as w,f as E}from"./index-DNDw84E8.js";import{F as S,a as A,b as P,c as _,d as I,e as T}from"./form-FC1tOSV4.js";import{d as L,r as B}from"./router-D8v2YSKU.js";import{P as D}from"./PincodeAutocomplete-rbMSt08U.js";import{r as V}from"./roleService-BAO8HMH6.js";import{E as k}from"./eye-off-BnjmtYgy.js";import{C as Z}from"./circle-alert-CRPM7l06.js";import"./vendor-BxThA0WO.js";const U={first_name:a().min(2,"First name must be at least 2 characters"),last_name:a().optional(),email:a().email("Invalid email address"),phone:a().regex(/^[0-9]{10}$/,"Must be exactly 10 digits").min(10,"Must be exactly 10 digits").max(10,"Must be exactly 10 digits"),password:a().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])/,"Password must contain uppercase, lowercase, number, and special character (!@#$%^&*)"),confirm_password:a().min(1,"Please confirm your password"),status:t(["active","inactive"])},$={businessName:a().min(2,"Business name must be at least 2 characters").max(100,"Business name cannot exceed 100 characters"),businessType:a().min(1,"Business type is required for vendors").refine(e=>["real_estate_agent","property_developer","construction_company","interior_designer","legal_services","home_loan_provider","packers_movers","property_management","other"].includes(e),"Invalid business type"),businessDescription:a().min(10,"Business description must be at least 10 characters").max(500,"Business description cannot exceed 500 characters"),experience:a().refine(e=>!e||Number(e)>=0&&Number(e)<=50,"Experience must be between 0 and 50 years"),licenseNumber:a().max(50,"License number cannot exceed 50 characters").optional(),gstNumber:a().optional().refine(e=>!e||""===e||/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(e),"Invalid GST number format (e.g., 22ABCDE1234F1Z5)"),panNumber:a().min(10,"PAN number must be exactly 10 characters").max(10,"PAN number must be exactly 10 characters").refine(e=>/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(e),"Invalid PAN format: 5 letters + 4 digits + 1 letter (e.g., ABCDE1234F)"),website:a().url("Invalid URL format").optional().or(n("")),address:a().min(10,"Address must be at least 10 characters").max(200,"Address cannot exceed 200 characters"),city:a().min(2,"City is required").max(50,"City name cannot exceed 50 characters"),district:a().min(2,"District is required").max(50,"District name cannot exceed 50 characters"),state:a().min(2,"State is required").max(50,"State name cannot exceed 50 characters"),pincode:a().length(6,"Pincode must be exactly 6 digits").regex(/^[0-9]{6}$/,"Pincode must contain only numbers")},q={businessName:a().optional(),businessType:a().optional(),businessDescription:a().optional(),experience:a().optional(),licenseNumber:a().optional(),gstNumber:a().optional(),panNumber:a().optional(),website:a().optional(),address:a().optional(),city:a().optional(),district:a().optional(),state:a().optional(),pincode:a().optional()},F=i($),R=i({role:a().min(1,"Role is required"),...U,...q}).refine(e=>e.password===e.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}).superRefine((e,s)=>{const r=e.role.toLowerCase();if("agent"===r||"vendor"===r){const r=F.safeParse(e);r.success||r.error.issues.forEach(e=>{s.addIssue({...e,path:e.path})})}}),G=()=>{const{toast:t}=l(),a=L(),n=e=>"agent"===e.toLowerCase()||"vendor"===e.toLowerCase(),[i,U]=B.useState(!1),[$,q]=B.useState(!1),[F,G]=B.useState("customer"),[M,z]=B.useState(!1),[H,J]=B.useState(!1),[K,O]=B.useState(!1),[W,Y]=B.useState(null),[Q,X]=B.useState(null),[ee,se]=B.useState(null),[re,te]=B.useState(null),[ae,ne]=B.useState(null),[ie,le]=B.useState(null),[ce,oe]=B.useState(null),[de,ue]=B.useState([]);B.useEffect(()=>{(async()=>{try{const e=await V.getRoles({limit:100,isActive:!0});ue(e.data.roles)}catch(e){}})()},[]);const[me,xe]=B.useState([]),[he,pe]=B.useState([]),[je,be]=B.useState([]),[ge,fe]=B.useState(""),[ve,Ne]=B.useState(""),[ye,Ce]=B.useState(""),[we,Ee]=B.useState(!1),Se=s({resolver:r(R),defaultValues:{first_name:"",last_name:"",email:"",phone:"",role:"customer",status:"active",password:"",confirm_password:"",businessName:"",businessType:"",businessDescription:"",experience:"0",licenseNumber:"",gstNumber:"",panNumber:"",website:"",address:"",city:"",district:"",state:"",pincode:""}});B.useEffect(()=>{(async()=>{try{c.isReady()||await c.initialize();const e=c.getStates();xe(e),Ee(!0)}catch(e){xe([])}})()},[]),B.useEffect(()=>{if(ge&&we){const e=c.getDistricts(ge);pe(e),Ne(""),Ce(""),be([])}else pe([]),Ne(""),be([])},[ge,we]),B.useEffect(()=>{if(ge&&ve&&we){const e=c.getCities(ge,ve);be(e),Ce("")}else be([]),Ce("")},[ge,ve,we]),B.useEffect(()=>{n(F)||(se(null),O(!1),ie&&(clearTimeout(ie),le(null)),ce&&(ce.abort(),oe(null)))},[F,ie,ce]),B.useEffect(()=>()=>{re&&clearTimeout(re),ae&&clearTimeout(ae),ie&&clearTimeout(ie),ce&&ce.abort()},[re,ae,ie,ce]);const Ae=B.useCallback(async e=>{if(ce&&ce.abort(),"agent"!==F)return void se(null);if(!e||e.trim().length<2)return void se(null);const s=new AbortController;oe(s),O(!0);try{const r=await o.checkAvailability({businessName:e.trim()});if(s.signal.aborted)return;se(r.data.businessName?.available??null),r.data.businessName&&!r.data.businessName.available?Se.setError("businessName",{type:"manual",message:r.data.businessName.message}):Se.clearErrors("businessName")}catch(r){if(r instanceof Error&&"AbortError"===r.name)return;se(null)}finally{s.signal.aborted||(O(!1),oe(null))}},[F,Se,ce]),Pe=n(F);return e.jsxs("div",{className:"max-w-5xl mx-auto mt-16",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New User"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new user account"})]}),e.jsx("div",{className:"bg-card rounded-lg border p-6 md:p-8",children:e.jsx(S,{...Se,children:e.jsxs("form",{onSubmit:Se.handleSubmit(async e=>{try{if(M)return void t({title:"Please wait",description:"Email availability check in progress...",variant:"destructive"});if(H)return void t({title:"Please wait",description:"Phone availability check in progress...",variant:"destructive"});if(n(e.role)&&K)return void t({title:"Please wait",description:"Business name availability check in progress...",variant:"destructive"});if(!1===W)return void t({title:"Error",description:"Email is already registered. Please use a different email.",variant:"destructive"});if(!1===Q)return void t({title:"Error",description:"Phone number is already registered. Please use a different number.",variant:"destructive"});if(n(e.role)){if(!1===ee)return void t({title:"Error",description:"Business name is already registered. Please use a different name.",variant:"destructive"});if(null===ee&&e.businessName&&e.businessName.trim().length>=2)return void t({title:"Error",description:"Please wait for business name availability check to complete.",variant:"destructive"})}if(n(e.role)){if(!e.businessName||!e.businessType)return void t({title:"Error",description:"Business name and type are required for vendor accounts.",variant:"destructive"});if(!e.businessDescription||e.businessDescription.length<10)return void t({title:"Error",description:"Business description must be at least 10 characters.",variant:"destructive"});if(!e.panNumber||!/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(e.panNumber))return void t({title:"Error",description:"Valid PAN number is required for vendor accounts.",variant:"destructive"});if(!e.address||e.address.length<10)return void t({title:"Error",description:"Complete address is required for vendor accounts (minimum 10 characters).",variant:"destructive"});if(!e.city||!e.state||!e.pincode)return void t({title:"Error",description:"City, state, and pincode are required for vendor accounts.",variant:"destructive"});if(e.gstNumber&&e.gstNumber.length>0&&!/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(e.gstNumber))return void t({title:"Error",description:"Invalid GST number format.",variant:"destructive"})}const s={email:e.email,password:e.password,profile:{firstName:e.first_name,lastName:e.last_name,phone:e.phone},role:e.role,status:e.status};n(e.role)&&(s.businessInfo={businessName:e.businessName.trim(),businessType:e.businessType,businessDescription:e.businessDescription.trim(),experience:parseInt(e.experience||"0"),address:e.address.trim(),city:e.city,state:e.state,pincode:e.pincode.trim()},e.licenseNumber?.trim()&&(s.businessInfo.licenseNumber=e.licenseNumber.trim()),e.gstNumber?.trim()&&(s.businessInfo.gstNumber=e.gstNumber.trim()),e.panNumber?.trim()&&(s.businessInfo.panNumber=e.panNumber.trim().toUpperCase()),e.website?.trim()&&(s.businessInfo.website=e.website.trim())),n(e.role)&&(s.profile.address={street:e.address,city:e.city,district:e.district,state:e.state,zipCode:e.pincode,country:"India",countryCode:"IN",stateCode:"",districtCode:"",cityCode:""});await o.createUser(s);t({title:"Success",description:`${n(e.role)?"Vendor":"User"} created successfully.${n(e.role)?" Vendor profile has been auto-approved.":""}`}),a("/admin/users")}catch(s){let e="Failed to create user. Please try again.";s.response?.data?.message?e=s.response.data.message:s.message&&(e=s.message),e.includes("Duplicate business name")?e="Business name already exists. Please choose a different name.":e.includes("duplicate key")&&e.includes("email")?e="Email address is already registered.":e.includes("duplicate key")&&e.includes("phone")?e="Phone number is already registered.":e.includes("vendor profile")&&(e=`${e} The user account was not created.`),t({title:"Error",description:e,variant:"destructive"})}}),className:"space-y-6",children:[e.jsxs(d,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Basic Information"}),e.jsx(x,{children:"User account details"})]}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(A,{control:Se.control,name:"first_name",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"First Name *"}),e.jsx(I,{children:e.jsx(p,{placeholder:"Enter first name",...s})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"last_name",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Last Name"}),e.jsx(I,{children:e.jsx(p,{placeholder:"Enter last name",...s})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"email",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Email *"}),e.jsx(I,{children:e.jsxs("div",{className:"relative",children:[e.jsx(p,{type:"email",placeholder:"Enter email",...s,onChange:e=>{s.onChange(e);const r=e.target.value;if(re&&clearTimeout(re),r&&r.includes("@")){const e=setTimeout(()=>{(async e=>{if(e&&e.includes("@")){z(!0);try{const s=await o.checkAvailability({email:e});Y(s.data.email.available),s.data.email.available?Se.clearErrors("email"):Se.setError("email",{type:"manual",message:s.data.email.message})}catch(s){Y(null)}finally{z(!1)}}else Y(null)})(r)},500);te(e)}else Y(null),Se.clearErrors("email")},className:!1===W?"border-red-500":!0===W?"border-green-500":""}),M&&e.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-muted-foreground",children:"Checking..."}),!M&&!0===W&&e.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-green-600",children:"Available ✓"})]})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"phone",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Phone Number *"}),e.jsx(I,{children:e.jsxs("div",{className:"relative",children:[e.jsx(p,{placeholder:"Enter 10-digit phone",...s,maxLength:10,onChange:e=>{s.onChange(e);const r=e.target.value;if(ae&&clearTimeout(ae),r&&10===r.length){const e=setTimeout(()=>{(async e=>{if(e&&10===e.length){J(!0);try{const s=await o.checkAvailability({phone:e});X(s.data.phone.available),s.data.phone.available?Se.clearErrors("phone"):Se.setError("phone",{type:"manual",message:s.data.phone.message})}catch(s){X(null)}finally{J(!1)}}else X(null)})(r)},500);ne(e)}else X(null),Se.clearErrors("phone")},className:!1===Q?"border-red-500":!0===Q?"border-green-500":""}),H&&e.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-muted-foreground",children:"Checking..."}),!H&&!0===Q&&e.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-green-600",children:"Available ✓"})]})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"role",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Role *"}),e.jsxs(j,{onValueChange:e=>{s.onChange(e),G(e)},defaultValue:s.value,children:[e.jsx(I,{children:e.jsx(b,{children:e.jsx(g,{placeholder:"Select role"})})}),e.jsx(f,{children:de.length>0?de.filter(e=>"superadmin"!==e.name.toLowerCase()).map(s=>e.jsx(v,{value:s.name,children:s.name},s._id)):e.jsxs(e.Fragment,{children:[e.jsx(v,{value:"customer",children:"Customer"}),e.jsx(v,{value:"agent",children:"Vendor/Agent"}),e.jsx(v,{value:"subadmin",children:"Sub Admin"})]})})]}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"status",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Status *"}),e.jsxs(j,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(I,{children:e.jsx(b,{children:e.jsx(g,{placeholder:"Select status"})})}),e.jsxs(f,{children:[e.jsx(v,{value:"active",children:"Active"}),e.jsx(v,{value:"inactive",children:"Inactive"})]})]}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"password",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Password *"}),e.jsx(I,{children:e.jsxs("div",{className:"relative",children:[e.jsx(p,{type:i?"text":"password",placeholder:"Enter password",...s}),e.jsx("button",{type:"button",onClick:()=>U(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?e.jsx(k,{className:"h-4 w-4"}):e.jsx(N,{className:"h-4 w-4"})})]})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"confirm_password",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Confirm Password *"}),e.jsx(I,{children:e.jsxs("div",{className:"relative",children:[e.jsx(p,{type:$?"text":"password",placeholder:"Re-enter password",...s}),e.jsx("button",{type:"button",onClick:()=>q(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:$?e.jsx(k,{className:"h-4 w-4"}):e.jsx(N,{className:"h-4 w-4"})})]})}),e.jsx(T,{})]})})]})})]}),Pe&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Business Information"}),e.jsx(x,{children:"Vendor business details"})]}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(A,{control:Se.control,name:"businessName",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Business Name *"}),e.jsx(I,{children:e.jsxs("div",{className:"relative",children:[e.jsx(p,{placeholder:"Enter business name",...s,onChange:e=>{s.onChange(e);const r=e.target.value;if(ie&&clearTimeout(ie),n(F)&&r&&r.trim().length>=2){const e=setTimeout(()=>{Ae(r)},500);le(e)}else se(null),Se.clearErrors("businessName")},className:!1===ee?"border-red-500":!0===ee?"border-green-500":"",maxLength:100}),K&&e.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-muted-foreground",children:"Checking..."}),!K&&!0===ee&&e.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-green-600",children:"Available ✓"})]})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"businessType",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Business Type *"}),e.jsxs(j,{onValueChange:s.onChange,value:s.value,children:[e.jsx(I,{children:e.jsx(b,{children:e.jsx(g,{placeholder:"Select business type"})})}),e.jsxs(f,{children:[e.jsx(v,{value:"real_estate_agent",children:"Real Estate Agent"}),e.jsx(v,{value:"property_developer",children:"Property Developer"}),e.jsx(v,{value:"construction_company",children:"Construction Company"}),e.jsx(v,{value:"interior_designer",children:"Interior Designer"}),e.jsx(v,{value:"legal_services",children:"Legal Services"}),e.jsx(v,{value:"home_loan_provider",children:"Home Loan Provider"}),e.jsx(v,{value:"packers_movers",children:"Packers & Movers"}),e.jsx(v,{value:"property_management",children:"Property Management"}),e.jsx(v,{value:"other",children:"Other"})]})]}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"experience",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Years of Experience"}),e.jsx(I,{children:e.jsx(p,{type:"number",placeholder:"Enter years",...s})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"website",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Website"}),e.jsx(I,{children:e.jsx(p,{placeholder:"https://example.com",...s})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"businessDescription",render:({field:s})=>e.jsxs(P,{className:"md:col-span-2",children:[e.jsx(_,{children:"Business Description *"}),e.jsx(I,{children:e.jsx(y,{placeholder:"Describe the business, services, and expertise (minimum 10 characters)...",rows:4,...s,maxLength:500})}),e.jsx(T,{}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.value?.length||0,"/500 characters (minimum 50)"]})]})})]})})]}),e.jsxs(d,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Legal Information"}),e.jsx(x,{children:"Business registration and license details"})]}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(A,{control:Se.control,name:"panNumber",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"PAN Number *"}),e.jsx(I,{children:e.jsx(p,{placeholder:"ABCDE1234F",...s,onChange:e=>{const r=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");r.length<=10&&s.onChange(r)},maxLength:10})}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"gstNumber",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"GST Number"}),e.jsx(I,{children:e.jsx(p,{placeholder:"22ABCDE1234F1Z5",...s,onChange:e=>{const r=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");r.length<=15&&s.onChange(r)},maxLength:15})}),e.jsx(T,{}),s.value&&s.value.length>0&&s.value.length<15&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"GST number should be 15 characters"})]})}),e.jsx(A,{control:Se.control,name:"licenseNumber",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"License Number"}),e.jsx(I,{children:e.jsx(p,{placeholder:"Enter license number",...s})}),e.jsx(T,{})]})})]})})]}),e.jsxs(d,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Location Information"}),e.jsx(x,{children:"Business address and location"})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(A,{control:Se.control,name:"address",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Street Address *"}),e.jsx(I,{children:e.jsx(y,{placeholder:"Complete business address (building, street, area)",...s,rows:2,maxLength:200})}),e.jsx(T,{}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.value?.length||0,"/200 characters (minimum 10)"]})]})}),e.jsx(A,{control:Se.control,name:"state",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"State *"}),e.jsxs(j,{value:s.value,onValueChange:e=>{s.onChange(e),fe(e),Se.setValue("district",""),Se.setValue("city","")},disabled:!we,children:[e.jsx(I,{children:e.jsx(b,{children:e.jsx(g,{placeholder:we?"Select state":"Loading..."})})}),e.jsx(f,{children:me.map(s=>e.jsx(v,{value:s,children:s},s))})]}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"district",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"District *"}),e.jsxs(j,{value:s.value,onValueChange:e=>{s.onChange(e),Ne(e),Se.setValue("city","")},disabled:!ge||0===he.length,children:[e.jsx(I,{children:e.jsx(b,{children:e.jsx(g,{placeholder:ge?"Select district":"Select state first"})})}),e.jsx(f,{children:he.map(s=>e.jsx(v,{value:s,children:s},s))})]}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"city",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"City *"}),e.jsxs(j,{value:s.value,onValueChange:e=>{s.onChange(e),Ce(e)},disabled:!ve||0===je.length,children:[e.jsx(I,{children:e.jsx(b,{children:e.jsx(g,{placeholder:ve?"Select city":"Select district first"})})}),e.jsx(f,{children:je.map(s=>e.jsx(v,{value:s,children:s},s))})]}),e.jsx(T,{})]})}),e.jsx(A,{control:Se.control,name:"pincode",render:({field:s})=>e.jsxs(P,{children:[e.jsx(_,{children:"Pincode *"}),e.jsx(I,{children:e.jsx(D,{value:s.value,onChange:(e,r)=>{if(s.onChange(e),r){if(r.state&&me.includes(r.state.toUpperCase())){const e=r.state.toUpperCase();fe(e),Se.setValue("state",e),setTimeout(()=>{if(r.district){const s=c.getDistricts(e).find(e=>e.toUpperCase()===r.district.toUpperCase());s&&(Ne(s),Se.setValue("district",s),setTimeout(()=>{if(r.city){const t=c.getCities(e,s).find(e=>e.toUpperCase()===r.city.toUpperCase());t&&(Ce(t),Se.setValue("city",t))}},100))}},100)}t({title:"Location Auto-filled",description:`Location details populated from PIN code ${e}`})}},state:ge,district:ve,city:ye,placeholder:"Enter or select PIN code"})}),e.jsx(T,{}),s.value&&6===s.value.length&&c.isReady()&&e.jsx("div",{className:"text-xs",children:c.validatePincode(s.value)?e.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),"Valid PIN code"]}):e.jsxs("span",{className:"text-amber-600 flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),"PIN code not found in our database"]})})]})}),(ge||ve||ye)&&e.jsxs("div",{className:"bg-muted/50 border border-border rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Selected Location:"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[[ye,ve,ge,"India"].filter(Boolean).join(", "),Se.watch("pincode")&&` - ${Se.watch("pincode")}`]})]})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>a("/admin/users"),children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:M||H||K,children:["Create ",Pe?"Vendor":"User"]})]})]})})})]})};export{G as default};
