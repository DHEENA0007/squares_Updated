import{j as e}from"./ui-s1SEoZIF.js";import{R as t,r,d as s}from"./router-D8v2YSKU.js";import{D as n,al as a,a2 as i,a as o,b as c,c as l,e as d,d as u,f as x,$ as m,I as p,B as h,M as f,y as j,h as y,u as v,q as g,r as b,s as w,v as N,w as k,U as A,E as O,af as P,ag as S,ah as E,ai as C,x as R,R as T,V as D,k as L,am as I,i as B,Z as V}from"./index-DvBXyKtT.js";import{a as _}from"./analyticsService-DLxkuhVG.js";import{T as F,a as K,b as M,c as $,d as q,e as U}from"./table-Bkp50phG.js";import{D as G}from"./download-BpA-30tD.js";import{U as W}from"./user-x-BlB_KmrN.js";import{M as H}from"./message-circle-C5WEdOhN.js";import{f as z}from"./format-PfF_OkS9.js";import{T as Z}from"./trending-up-D3HFnEB_.js";import{D as Y}from"./dollar-sign-BlNquT1W.js";import{A as X}from"./arrow-right-DYIZNdeb.js";import{f as J,r as Q,a as ee,b as te,c as re,i as se,T as ne,p as ae,L as ie,g as oe,d as ce,e as le,D as de,C as ue,h as xe,j as me,S as pe,A as he,k as fe,l as je,m as ye,n as ve,o as ge,u as be,G as we,q as Ne,s as ke,t as Ae,v as Oe,w as Pe,x as Se,y as Ee,z as Ce,R as Re,B as Te,X as De,Y as Le,E as Ie,F as Be,H as Ve,I as _e}from"./generateCategoricalChart-BcNksiWQ.js";import{A as Fe,a as Ke,B as Me}from"./AreaChart-Cz5b3grR.js";import{g as $e}from"./vendor-BxThA0WO.js";import{M as qe,C as Ue}from"./mouse-pointer-BgheIzEz.js";import{G as Ge}from"./globe-D7-SMjbJ.js";import{L as We}from"./LineChart-FSLniYU_.js";import"./reviewsService-C63_b63b.js";const He=n("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),ze=n("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var Ze=["points","className","baseLinePoints","connectNulls"];function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ye.apply(this,arguments)}function Xe(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Je(e){return function(e){if(Array.isArray(e))return Qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var et,tt,rt=function(e){return e&&e.x===+e.x&&e.y===+e.y},st=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){rt(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),rt(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(r=[r.reduce(function(e,t){return[].concat(Je(e),Je(t))},[])]);var s=r.map(function(e){return e.reduce(function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===r.length?"".concat(s,"Z"):s},nt=function(e){var r=e.points,s=e.className,n=e.baseLinePoints,i=e.connectNulls,o=Xe(e,Ze);if(!r||!r.length)return null;var c=a("recharts-polygon",s);if(n&&n.length){var l=o.stroke&&"none"!==o.stroke,d=function(e,t,r){var s=st(e,r);return"".concat("Z"===s.slice(-1)?s.slice(0,-1):s,"L").concat(st(t.reverse(),r).slice(1))}(r,n,i);return t.createElement("g",{className:c},t.createElement("path",Ye({},J(o,!0),{fill:"Z"===d.slice(-1)?o.fill:"none",stroke:"none",d:d})),l?t.createElement("path",Ye({},J(o,!0),{fill:"none",d:st(r,i)})):null,l?t.createElement("path",Ye({},J(o,!0),{fill:"none",d:st(n,i)})):null)}var u=st(r,i);return t.createElement("path",Ye({},J(o,!0),{fill:"Z"===u.slice(-1)?o.fill:"none",className:c,d:u}))};const at=$e(function(){if(tt)return et;tt=1;var e=Q(),t=ee(),r=te();return et=function(s,n){return s&&s.length?e(s,r(n,2),t):void 0}}());var it,ot;const ct=$e(function(){if(ot)return it;ot=1;var e=Q(),t=te(),r=re();return it=function(s,n){return s&&s.length?e(s,t(n,2),r):void 0}}());var lt=["cx","cy","angle","ticks","axisLine"],dt=["ticks","tick","angle","tickFormatter","stroke"];function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xt.apply(this,arguments)}function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach(function(t){bt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ht(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ft(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,wt(s.key),s)}}function jt(e,t,r){return t=vt(t),function(e,t){if(t&&("object"===ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yt()?Reflect.construct(t,r||[],vt(e).constructor):t.apply(e,r))}function yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(yt=function(){return!!e})()}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bt(e,t,r){return(t=wt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e){var t=function(e,t){if("object"!=ut(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=ut(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ut(t)?t:t+""}var Nt=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jt(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gt(e,t)}(e,r.PureComponent),s=e,i=[{key:"renderTickItem",value:function(e,r,s){return t.isValidElement(e)?t.cloneElement(e,r):se(e)?e(r):t.createElement(ne,xt({},r,{className:"recharts-polar-radius-axis-tick-value"}),s)}}],(n=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,s=r.angle,n=r.cx,a=r.cy;return ae(n,a,t,s)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,s=e.angle,n=e.ticks,a=at(n,function(e){return e.coordinate||0});return{cx:t,cy:r,startAngle:s,endAngle:s,innerRadius:ct(n,function(e){return e.coordinate||0}).coordinate||0,outerRadius:a.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,r=e.cx,s=e.cy,n=e.angle,a=e.ticks,i=e.axisLine,o=ht(e,lt),c=a.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),l=ae(r,s,c[0],n),d=ae(r,s,c[1],n),u=pt(pt(pt({},J(o,!1)),{},{fill:"none"},J(i,!1)),{},{x1:l.x,y1:l.y,x2:d.x,y2:d.y});return t.createElement("line",xt({className:"recharts-polar-radius-axis-line"},u))}},{key:"renderTicks",value:function(){var r=this,s=this.props,n=s.ticks,i=s.tick,o=s.angle,c=s.tickFormatter,l=s.stroke,d=ht(s,dt),u=this.getTickTextAnchor(),x=J(d,!1),m=J(i,!1),p=n.map(function(s,n){var d=r.getTickValueCoord(s),p=pt(pt(pt(pt({textAnchor:u,transform:"rotate(".concat(90-o,", ").concat(d.x,", ").concat(d.y,")")},x),{},{stroke:"none",fill:l},m),{},{index:n},d),{},{payload:s});return t.createElement(ie,xt({className:a("recharts-polar-radius-axis-tick",oe(i)),key:"tick-".concat(s.coordinate)},ce(r.props,s,n)),e.renderTickItem(i,p,c?c(s.value,n):s.value))});return t.createElement(ie,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var e=this.props,r=e.ticks,s=e.axisLine,n=e.tick;return r&&r.length?t.createElement(ie,{className:a("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),n&&this.renderTicks(),le.renderCallByParent(this.props,this.getViewBox())):null}}])&&ft(s.prototype,n),i&&ft(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,n,i}();function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},At.apply(this,arguments)}function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach(function(t){Dt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function St(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Lt(s.key),s)}}function Et(e,t,r){return t=Rt(t),function(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ct()?Reflect.construct(t,r||[],Rt(e).constructor):t.apply(e,r))}function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ct=function(){return!!e})()}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e,t,r){return(t=Lt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lt(e){var t=function(e,t){if("object"!=kt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=kt(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==kt(t)?t:t+""}bt(Nt,"displayName","PolarRadiusAxis"),bt(Nt,"axisType","radiusAxis"),bt(Nt,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var It,Bt=Math.PI/180,Vt=1e-5,_t=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Et(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tt(e,t)}(e,r.PureComponent),s=e,i=[{key:"renderTickItem",value:function(e,r,s){return t.isValidElement(e)?t.cloneElement(e,r):se(e)?e(r):t.createElement(ne,At({},r,{className:"recharts-polar-angle-axis-tick-value"}),s)}}],(n=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,s=t.cy,n=t.radius,a=t.orientation,i=t.tickSize||8,o=ae(r,s,n,e.coordinate),c=ae(r,s,n+("inner"===a?-1:1)*i,e.coordinate);return{x1:o.x,y1:o.y,x2:c.x,y2:c.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*Bt);return r>Vt?"outer"===t?"start":"end":r<-Vt?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,r=e.cx,s=e.cy,n=e.radius,a=e.axisLine,i=e.axisLineType,o=Pt(Pt({},J(this.props,!1)),{},{fill:"none"},J(a,!1));if("circle"===i)return t.createElement(de,At({className:"recharts-polar-angle-axis-line"},o,{cx:r,cy:s,r:n}));var c=this.props.ticks.map(function(e){return ae(r,s,n,e.coordinate)});return t.createElement(nt,At({className:"recharts-polar-angle-axis-line"},o,{points:c}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,n=s.ticks,i=s.tick,o=s.tickLine,c=s.tickFormatter,l=s.stroke,d=J(this.props,!1),u=J(i,!1),x=Pt(Pt({},d),{},{fill:"none"},J(o,!1)),m=n.map(function(s,n){var m=r.getTickLineCoord(s),p=Pt(Pt(Pt({textAnchor:r.getTickTextAnchor(s)},d),{},{stroke:"none",fill:l},u),{},{index:n,payload:s,x:m.x2,y:m.y2});return t.createElement(ie,At({className:a("recharts-polar-angle-axis-tick",oe(i)),key:"tick-".concat(s.coordinate)},ce(r.props,s,n)),o&&t.createElement("line",At({className:"recharts-polar-angle-axis-tick-line"},x,m)),i&&e.renderTickItem(i,p,c?c(s.value,n):s.value))});return t.createElement(ie,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var e=this.props,r=e.ticks,s=e.radius,n=e.axisLine;return s<=0||!r||!r.length?null:t.createElement(ie,{className:a("recharts-polar-angle-axis",this.props.className)},n&&this.renderAxisLine(),this.renderTicks())}}])&&St(s.prototype,n),i&&St(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,n,i}();function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Kt.apply(this,arguments)}function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach(function(t){zt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qt(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Zt(s.key),s)}}function Ut(e,t,r){return t=Wt(t),function(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gt()?Reflect.construct(t,r||[],Wt(e).constructor):t.apply(e,r))}function Gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Gt=function(){return!!e})()}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t){return(Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zt(e,t,r){return(t=Zt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(e){var t=function(e,t){if("object"!=Ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=Ft(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ft(t)?t:t+""}Dt(_t,"displayName","PolarAngleAxis"),Dt(_t,"axisType","angleAxis"),Dt(_t,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Yt=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zt(r=Ut(this,e,[t]),"pieRef",null),zt(r,"sectorRefs",[]),zt(r,"id",be("recharts-pie-")),zt(r,"handleAnimationEnd",function(){var e=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),se(e)&&e()}),zt(r,"handleAnimationStart",function(){var e=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),se(e)&&e()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(e,r.PureComponent),s=e,i=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,r,s){if(t.isValidElement(e))return t.cloneElement(e,r);if(se(e))return e(r);var n=a("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return t.createElement(ue,Kt({},r,{key:s,type:"linear",className:n}))}},{key:"renderLabelItem",value:function(e,r,s){if(t.isValidElement(e))return t.cloneElement(e,r);var n=s;if(se(e)&&(n=e(r),t.isValidElement(n)))return n;var i=a("recharts-pie-label-text","boolean"==typeof e||se(e)?"":e.className);return t.createElement(ne,Kt({},r,{alignmentBaseline:"middle",className:i}),n)}}],(n=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,n=s.label,a=s.labelLine,i=s.dataKey,o=s.valueKey,c=J(this.props,!1),l=J(n,!1),d=J(a,!1),u=n&&n.offsetRadius||20,x=r.map(function(r,s){var x=(r.startAngle+r.endAngle)/2,m=ae(r.cx,r.cy,r.outerRadius+u,x),p=$t($t($t($t({},c),r),{},{stroke:"none"},l),{},{index:s,textAnchor:e.getTextAnchor(m.x,r.cx)},m),h=$t($t($t($t({},c),r),{},{fill:"none",stroke:r.fill},d),{},{index:s,points:[ae(r.cx,r.cy,r.outerRadius,x),m]}),f=i;return xe(i)&&xe(o)?f="value":xe(i)&&(f=o),t.createElement(ie,{key:"label-".concat(r.startAngle,"-").concat(r.endAngle,"-").concat(r.midAngle,"-").concat(s)},a&&e.renderLabelLineItem(a,h,"line"),e.renderLabelItem(n,p,me(r,f)))});return t.createElement(ie,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(e){var r=this,s=this.props,n=s.activeShape,a=s.blendStroke,i=s.inactiveShape;return e.map(function(s,o){if(0===(null==s?void 0:s.startAngle)&&0===(null==s?void 0:s.endAngle)&&1!==e.length)return null;var c=r.isActiveIndex(o),l=i&&r.hasActiveIndex()?i:null,d=c?n:l,u=$t($t({},s),{},{stroke:a?s.fill:s.stroke,tabIndex:-1});return t.createElement(ie,Kt({ref:function(e){e&&!r.sectorRefs.includes(e)&&r.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},ce(r.props,s,o),{key:"sector-".concat(null==s?void 0:s.startAngle,"-").concat(null==s?void 0:s.endAngle,"-").concat(s.midAngle,"-").concat(o)}),t.createElement(pe,Kt({option:d,isActive:c,shapeType:"sector"},u)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,r=this.props,s=r.sectors,n=r.isAnimationActive,a=r.animationBegin,i=r.animationDuration,o=r.animationEasing,c=r.animationId,l=this.state,d=l.prevSectors,u=l.prevIsAnimationActive;return t.createElement(he,{begin:a,duration:i,isActive:n,easing:o,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(u),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(r){var n=r.t,a=[],i=(s&&s[0]).startAngle;return s.forEach(function(e,t){var r=d&&d[t],s=t>0?fe(e,"paddingAngle",0):0;if(r){var o=je(r.endAngle-r.startAngle,e.endAngle-e.startAngle),c=$t($t({},e),{},{startAngle:i+s,endAngle:i+o(n)+s});a.push(c),i=c.endAngle}else{var l=e.endAngle,u=e.startAngle,x=je(0,l-u)(n),m=$t($t({},e),{},{startAngle:i+s,endAngle:i+x+s});a.push(m),i=m.endAngle}}),t.createElement(ie,null,e.renderSectorsStatically(a))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var s=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[s].focus(),t.setState({sectorToFocus:s});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,s=this.state.prevSectors;return!(r&&t&&t.length)||s&&ye(s,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,r=this.props,s=r.hide,n=r.sectors,i=r.className,o=r.label,c=r.cx,l=r.cy,d=r.innerRadius,u=r.outerRadius,x=r.isAnimationActive,m=this.state.isAnimationFinished;if(s||!n||!n.length||!ve(c)||!ve(l)||!ve(d)||!ve(u))return null;var p=a("recharts-pie",i);return t.createElement(ie,{tabIndex:this.props.rootTabIndex,className:p,ref:function(t){e.pieRef=t}},this.renderSectors(),o&&this.renderLabels(n),le.renderCallByParent(this.props,null,!1),(!x||m)&&ge.renderCallByParent(this.props,n,!1))}}])&&qt(s.prototype,n),i&&qt(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,n,i}();It=Yt,zt(Yt,"displayName","Pie"),zt(Yt,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!we.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),zt(Yt,"parseDeltaAngle",function(e,t){return Ne(t-e)*Math.min(Math.abs(t-e),360)}),zt(Yt,"getRealPieData",function(e){var t=e.data,r=e.children,s=J(e,!1),n=ke(r,Ae);return t&&t.length?t.map(function(e,t){return $t($t($t({payload:e},s),e),n&&n[t]&&n[t].props)}):n&&n.length?n.map(function(e){return $t($t({},s),e.props)}):[]}),zt(Yt,"parseCoordinateOfPie",function(e,t){var r=t.top,s=t.left,n=t.width,a=t.height,i=Oe(n,a);return{cx:s+Pe(e.cx,n,n/2),cy:r+Pe(e.cy,a,a/2),innerRadius:Pe(e.innerRadius,i,0),outerRadius:Pe(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(n*n+a*a)/2}}),zt(Yt,"getComposedData",function(e){var t=e.item,r=e.offset,s=void 0!==t.type.defaultProps?$t($t({},t.type.defaultProps),t.props):t.props,n=It.getRealPieData(s);if(!n||!n.length)return null;var a=s.cornerRadius,i=s.startAngle,o=s.endAngle,c=s.paddingAngle,l=s.dataKey,d=s.nameKey,u=s.valueKey,x=s.tooltipType,m=Math.abs(s.minAngle),p=It.parseCoordinateOfPie(s,r),h=It.parseDeltaAngle(i,o),f=Math.abs(h),j=l;xe(l)&&xe(u)?(Se(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),j="value"):xe(l)&&(Se(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),j=u);var y,v,g=n.filter(function(e){return 0!==me(e,j,0)}).length,b=f-g*m-(f>=360?g:g-1)*c,w=n.reduce(function(e,t){var r=me(t,j,0);return e+(ve(r)?r:0)},0);w>0&&(y=n.map(function(e,t){var r,s=me(e,j,0),n=me(e,d,t),o=(ve(s)?s:0)/w,l=(r=t?v.endAngle+Ne(h)*c*(0!==s?1:0):i)+Ne(h)*((0!==s?m:0)+o*b),u=(r+l)/2,f=(p.innerRadius+p.outerRadius)/2,y=[{name:n,value:s,payload:e,dataKey:j,type:x}],g=ae(p.cx,p.cy,f,u);return v=$t($t($t({percent:o,cornerRadius:a,name:n,tooltipPayload:y,midAngle:u,middleRadius:f,tooltipPosition:g},e),p),{},{value:me(e,j),startAngle:r,endAngle:l,payload:e,paddingAngle:Ne(h)*c})}));return $t($t({},p),{},{sectors:y,data:n})});var Xt=Ee({chartName:"PieChart",GraphicalChild:Yt,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:_t},{axisType:"radiusAxis",AxisComp:Nt}],formatAxisMap:Ce,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Jt=({dateRange:t,propertyId:s})=>{const{toast:n}=i(),[a,v]=r.useState(!0),[g,b]=r.useState(null),[w,N]=r.useState(""),[k,A]=r.useState([]);r.useEffect(()=>{O()},[t,s]),r.useEffect(()=>{if(g?.viewers){const e=w.toLowerCase(),t=g.viewers.filter(t=>t.property?.title?.toLowerCase().includes(e)||t.viewer?.firstName?.toLowerCase().includes(e)||t.viewer?.lastName?.toLowerCase().includes(e)||t.viewer?.email?.toLowerCase().includes(e)||t.viewer?.phone?.toLowerCase().includes(e)||!t.viewer&&"guest".includes(e));A(t)}},[w,g]);const O=async()=>{v(!0);try{const e=await _.getAllPropertyViewers(t,s);b(e.data),A(e.data.viewers)}catch(e){n({title:"Error",description:"Failed to fetch detailed report data",variant:"destructive"})}finally{v(!1)}};return a?e.jsx("div",{className:"p-8 text-center",children:"Loading detailed report..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(o,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Total Views"})}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g?.summary?.totalViews||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[g?.summary?.uniqueViewers||0," unique viewers"]})]})]}),e.jsxs(o,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Registered vs Guest"})}),e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:g?.summary?.registeredViewers||0}),e.jsx("span",{className:"text-sm text-muted-foreground mb-1",children:"/"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:g?.summary?.guestViewers||0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered / Guest"})]})]}),e.jsxs(o,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Total Interactions"})}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g?.summary?.totalInteractions||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Clicks & Shares"})]})]}),e.jsxs(o,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Avg. Duration"})}),e.jsxs(d,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[g?.summary?.avgDuration||0,"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per view"})]})]})]}),e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Detailed View Report"}),e.jsx(u,{children:"Detailed list of all property views including guest and registered users"})]}),e.jsxs(x,{onClick:()=>{if(!g?.viewers)return;const e=[["Date","Property","Viewer Name","Viewer Type","Email","Phone","Duration (s)","Interactions"].join(","),...g.viewers.map(e=>{const t=e.viewer?`${e.viewer.firstName} ${e.viewer.lastName}`:"Guest",r=e.viewer?e.viewer.role:"Guest",s=[];return e.interactions?.clickedPhone&&s.push("Phone"),e.interactions?.clickedEmail&&s.push("Email"),e.interactions?.clickedWhatsApp&&s.push("WhatsApp"),[z(new Date(e.viewedAt),"yyyy-MM-dd HH:mm:ss"),`"${e.property?.title||"Unknown"}"`,`"${t}"`,r,e.viewer?.email||"N/A",e.viewer?.phone||"N/A",e.viewDuration||0,`"${s.join("; ")}"`].join(",")})].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){const e=URL.createObjectURL(t);r.setAttribute("href",e),r.setAttribute("download",`property_views_report_${z(new Date,"yyyy-MM-dd")}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},variant:"outline",className:"gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Export CSV"]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(p,{placeholder:"Search by property, viewer name, email...",className:"pl-8",value:w,onChange:e=>N(e.target.value)})]})})]}),e.jsx(d,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(F,{children:[e.jsx(K,{children:e.jsxs(M,{children:[e.jsx($,{children:"Date & Time"}),e.jsx($,{children:"Property"}),e.jsx($,{children:"Viewer"}),e.jsx($,{children:"Contact Info"}),e.jsx($,{children:"Duration"}),e.jsx($,{children:"Interactions"})]})}),e.jsx(q,{children:0===k.length?e.jsx(M,{children:e.jsx(U,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No views found for this period"})}):k.map((t,r)=>e.jsxs(M,{children:[e.jsx(U,{className:"whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:z(new Date(t.viewedAt),"MMM dd, yyyy")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:z(new Date(t.viewedAt),"hh:mm a")})]})}),e.jsx(U,{children:e.jsxs("div",{className:"flex flex-col max-w-[200px]",children:[e.jsx("span",{className:"font-medium truncate",title:t.property?.title,children:t.property?.title||"Unknown Property"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate",children:t.property?.location?.address||"No location"})]})}),e.jsx(U,{children:t.viewer?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xs",children:[t.viewer.firstName?.[0],t.viewer.lastName?.[0]]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-medium text-sm",children:[t.viewer.firstName," ",t.viewer.lastName]}),e.jsx(h,{variant:"secondary",className:"w-fit text-[10px] px-1 py-0 h-4",children:t.viewer.role})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-sm text-muted-foreground",children:"Guest User"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Unregistered"})]})]})}),e.jsx(U,{children:t.viewer?e.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[t.viewer.email&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(f,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"truncate max-w-[150px]",title:t.viewer.email,children:t.viewer.email})]}),t.viewer.phone&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(j,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{children:t.viewer.phone})]})]}):e.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Login to view details"})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(y,{className:"h-3 w-3 text-muted-foreground"}),t.viewDuration<60?`${t.viewDuration}s`:`${Math.floor(t.viewDuration/60)}m ${t.viewDuration%60}s`]})}),e.jsx(U,{children:e.jsxs("div",{className:"flex gap-2",children:[t.interactions?.clickedPhone&&e.jsx(h,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",title:"Clicked Phone",children:e.jsx(j,{className:"h-3 w-3"})}),t.interactions?.clickedEmail&&e.jsx(h,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",title:"Clicked Email",children:e.jsx(f,{className:"h-3 w-3"})}),t.interactions?.clickedWhatsApp&&e.jsx(h,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",title:"Clicked WhatsApp",children:e.jsx(H,{className:"h-3 w-3"})}),!t.interactions?.clickedPhone&&!t.interactions?.clickedEmail&&!t.interactions?.clickedWhatsApp&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})]})})]},r))})]})})})]})]})},Qt=["#4285F4","#34A853","#FBBC05","#EA4335","#8884d8","#82ca9d"],er=()=>{const{user:t}=v(),{toast:n}=i(),a=s(),[x,m]=r.useState("30"),[p,h]=r.useState(!0),[f,F]=r.useState(null),[K,M]=r.useState(null),[$,q]=r.useState(null),[U,G]=r.useState(null),[W,H]=r.useState(null),[z,J]=r.useState(""),Q=e=>"superadmin"===t?.role||(t?.rolePermissions?.includes(e)||!1);r.useEffect(()=>{if(!Q(V.ANALYTICS_VIEW))return n({title:"Access Denied",description:"You don't have permission to view analytics.",variant:"destructive"}),void a("/rolebased");ee()},[x]);const ee=async()=>{h(!0);try{const e=await _.getConsolidatedAdminAnalytics(x);e.success&&e.data&&(F({overview:e.data.overview,usersByRole:e.data.overview.usersByRole}),M(e.data.propertyViews),q(e.data.conversion),G(e.data.traffic),H(e.data.engagement))}catch(e){n({title:"Error",description:"Failed to fetch analytics data",variant:"destructive"})}finally{h(!1)}};if(!Q(V.ANALYTICS_VIEW))return null;if(p)return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsxs(o,{className:"animate-pulse",children:[e.jsx(c,{className:"pb-2",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})}),e.jsx(d,{children:e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"})})]},t))})]});const te=({title:t,value:r,icon:s,change:n,color:a,subtext:i})=>e.jsxs(o,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(c,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:t}),e.jsx(s,{className:`h-4 w-4 ${a}`})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r}),i&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i}),n&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{className:n>=0?"text-green-600":"text-red-600",children:[n>=0?"+":"",n,"%"]})," from previous period"]})]})]});return e.jsxs("div",{className:"p-6 space-y-6 bg-background min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Reports snapshot and detailed insights"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(g,{value:x,onValueChange:m,children:[e.jsx(b,{className:"w-[180px]",children:e.jsx(w,{placeholder:"Select range"})}),e.jsxs(N,{children:[e.jsx(k,{value:"7",children:"Last 7 days"}),e.jsx(k,{value:"30",children:"Last 30 days"}),e.jsx(k,{value:"90",children:"Last 90 days"}),e.jsx(k,{value:"365",children:"Last year"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(te,{title:"Total Users",value:f?.overview?.totalUsers||0,icon:A,color:"text-blue-500",subtext:"Active accounts"}),e.jsx(te,{title:"Total Views",value:f?.overview?.totalViews||0,icon:O,color:"text-green-500",subtext:`${f?.overview?.uniqueViewers||0} unique viewers`}),e.jsx(te,{title:"Conversions",value:f?.overview?.totalRegistrations||0,icon:Z,color:"text-orange-500",subtext:"New registrations"}),e.jsx(te,{title:"Revenue",value:`â‚¹${(f?.overview?.totalRevenue||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:Y,color:"text-emerald-500",subtext:"Total earnings"})]}),e.jsxs(P,{defaultValue:"snapshot",className:"space-y-4",children:[e.jsxs(S,{className:"grid w-full grid-cols-2 md:grid-cols-5 lg:w-auto",children:[e.jsx(E,{value:"snapshot",children:"Snapshot"}),e.jsx(E,{value:"acquisition",children:"Acquisition"}),e.jsx(E,{value:"engagement",children:"Engagement"}),e.jsx(E,{value:"retention",children:"Retention"}),e.jsx(E,{value:"detailed",children:"Detailed Reports"})]}),e.jsxs(C,{value:"snapshot",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(o,{className:"lg:col-span-2",children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),"User Acquisition Funnel"]}),e.jsx(u,{children:"Guest visits turning into registrations"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"relative pt-4 pb-8",children:e.jsxs("div",{className:"flex items-center justify-between text-center relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Guest Visits"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600 my-2",children:$?.guestViews||0}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("div",{className:"flex-1 h-1 bg-muted mx-2 relative",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-background px-2 text-xs text-muted-foreground",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Registrations"}),e.jsx("span",{className:"text-2xl font-bold text-green-600 my-2",children:$?.newRegistrations||0}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("div",{className:"flex-1 h-1 bg-muted mx-2 relative",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-background px-2 text-xs text-muted-foreground",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Conversion Rate"}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600 my-2",children:[$?.conversionRate||0,"%"]}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]})]})}),e.jsx("div",{className:"h-[250px] w-full mt-4",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(Fe,{data:$?.registrationsByDate||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#34A853",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#34A853",stopOpacity:0})]})}),e.jsx(Te,{strokeDasharray:"3 3",vertical:!1}),e.jsx(De,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(Le,{axisLine:!1,tickLine:!1}),e.jsx(Ie,{}),e.jsx(Ke,{type:"monotone",dataKey:"count",stroke:"#34A853",fillOpacity:1,fill:"url(#colorCount)"})]})})})]})]}),e.jsxs(o,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5 text-primary"}),"User Distribution"]})}),e.jsx(d,{children:e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Xt,{children:[e.jsx(Yt,{data:f?.usersByRole||[],dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,children:(f?.usersByRole||[]).map((t,r)=>e.jsx(Ae,{fill:Qt[r%Qt.length]},`cell-${r}`))}),e.jsx(Ie,{}),e.jsx(Be,{verticalAlign:"bottom",height:36})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mt-4",children:[e.jsx(o,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"h-6 w-6 mx-auto text-blue-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Views"}),e.jsx("p",{className:"text-xl font-bold",children:f?.overview?.totalViews||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[f?.overview?.uniqueViewers||0," unique viewers"]})]})})}),e.jsx(o,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(A,{className:"h-6 w-6 mx-auto text-green-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered vs Guest"}),e.jsxs("p",{className:"text-xl font-bold",children:[f?.overview?.registeredViews||0," / ",f?.overview?.guestViews||0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered / Guest"})]})})}),e.jsx(o,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{className:"h-6 w-6 mx-auto text-purple-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Interactions"}),e.jsx("p",{className:"text-xl font-bold",children:f?.overview?.totalInteractions||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Clicks & Shares"})]})})}),e.jsx(o,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:"h-6 w-6 mx-auto text-orange-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg. Duration"}),e.jsxs("p",{className:"text-xl font-bold",children:[f?.overview?.avgViewDuration||0,"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per view"})]})})}),e.jsx(o,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(D,{className:"h-6 w-6 mx-auto text-indigo-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Properties"}),e.jsx("p",{className:"text-xl font-bold",children:f?.overview?.totalProperties||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total listings"})]})})}),e.jsx(o,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{className:"h-6 w-6 mx-auto text-emerald-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Conversion Rate"}),e.jsxs("p",{className:"text-xl font-bold",children:[$?.conversionRate||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest to user"})]})})})]})]}),e.jsx(C,{value:"acquisition",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5 text-primary"}),"Traffic Sources"]}),e.jsx(u,{children:"Where your users are coming from"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:0===(U?.trafficBySource||[]).length?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ge,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No traffic data yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Traffic will be tracked as users visit pages"})]}):(U?.trafficBySource||[]).map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:Qt[r%Qt.length]}}),e.jsx("span",{className:"text-sm font-medium truncate",children:t._id||"Direct"})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:t.count/(U?.trafficBySource[0]?.count||1)*100+"%",backgroundColor:Qt[r%Qt.length]}})}),e.jsxs("div",{className:"text-right min-w-[60px]",children:[e.jsx("span",{className:"text-sm font-bold",children:t.count}),t.uniqueVisitors&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",t.uniqueVisitors," unique)"]})]})]})]},r))})})]}),e.jsxs(o,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),"Device Breakdown"]})}),e.jsx(d,{children:e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Xt,{children:[e.jsx(Yt,{data:U?.trafficByDevice||[],dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",outerRadius:100,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,children:(U?.trafficByDevice||[]).map((t,r)=>e.jsx(Ae,{fill:Qt[r%Qt.length]},`cell-${r}`))}),e.jsx(Ie,{})]})})})]}),e.jsxs(o,{className:"md:col-span-2",children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),"Peak Hours"]}),e.jsx(u,{children:"When users are most active (24h format)"})]}),e.jsx(d,{children:e.jsx(Re,{width:"100%",height:250,children:e.jsxs(Me,{data:U?.peakHours||[],children:[e.jsx(Te,{strokeDasharray:"3 3",vertical:!1}),e.jsx(De,{dataKey:"_id",label:{value:"Hour of Day",position:"insideBottom",offset:-5},tickFormatter:e=>`${e}:00`}),e.jsx(Le,{axisLine:!1,tickLine:!1}),e.jsx(Ie,{labelFormatter:e=>`${e}:00 - ${e+1}:00`}),e.jsx(Ve,{dataKey:"count",fill:"#82ca9d",radius:[4,4,0,0]})]})})})]}),U?.trafficByCountry&&U.trafficByCountry.length>0&&e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5 text-primary"}),"Traffic by Country"]}),e.jsx(u,{children:"Geographic distribution of visitors"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:U.trafficByCountry.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Qt[r%Qt.length]}}),e.jsx("span",{className:"text-sm font-medium",children:t._id||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full",style:{width:t.count/(U.trafficByCountry[0]?.count||1)*100+"%",backgroundColor:Qt[r%Qt.length]}})}),e.jsx("span",{className:"text-sm font-bold w-8 text-right",children:t.count})]})]},r))})})]}),U?.trafficByBrowser&&U.trafficByBrowser.length>0&&e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-primary"}),"Traffic by Browser"]}),e.jsx(u,{children:"Which browsers your visitors use"})]}),e.jsx(d,{children:e.jsx(Re,{width:"100%",height:200,children:e.jsxs(Xt,{children:[e.jsx(Yt,{data:U.trafficByBrowser,dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",outerRadius:70,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,children:U.trafficByBrowser.map((t,r)=>e.jsx(Ae,{fill:Qt[r%Qt.length]},`cell-${r}`))}),e.jsx(Ie,{})]})})})]})]})}),e.jsx(C,{value:"engagement",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs(o,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-primary"}),"Property Views Over Time"]})}),e.jsx(d,{children:e.jsx(Re,{width:"100%",height:350,children:e.jsxs(Fe,{data:K?.viewsByDate||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#4285F4",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#4285F4",stopOpacity:0})]})}),e.jsx(Te,{strokeDasharray:"3 3",vertical:!1}),e.jsx(De,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(Le,{axisLine:!1,tickLine:!1}),e.jsx(Ie,{}),e.jsx(Be,{}),e.jsx(Ke,{type:"monotone",dataKey:"views",stroke:"#4285F4",fillOpacity:1,fill:"url(#colorViews)"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-primary"}),"Top Viewed Properties"]}),e.jsx(u,{children:"Most popular listings"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:(K?.viewsByProperty||[]).slice(0,5).map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors border",onClick:()=>J(t.propertyId),children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-8 h-8 rounded bg-primary/10 text-primary font-bold text-sm",children:r+1}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:t.propertyTitle}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.uniqueViewers," unique viewers"]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("p",{className:"text-lg font-bold",children:t.totalViews}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"views"})]})]},t.propertyId))})})]}),e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5 text-primary"}),"Interaction Types"]}),e.jsx(u,{children:"How users engage with properties"})]}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded text-blue-600 dark:text-blue-300",children:e.jsx(j,{className:"h-4 w-4"})}),e.jsx("span",{children:"Phone Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:K?.interactions?.phoneClicks||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded text-green-600 dark:text-green-300",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("span",{children:"WhatsApp Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:K?.interactions?.whatsappClicks||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900 rounded text-orange-600 dark:text-orange-300",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("span",{children:"Email Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:K?.interactions?.emailClicks||0})]})]})})]})]})]})}),e.jsx(C,{value:"retention",className:"space-y-4",children:e.jsxs(o,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),"Daily Active Users"]})}),e.jsx(d,{children:e.jsx(Re,{width:"100%",height:350,children:e.jsxs(We,{data:W?.activeUsers||[],children:[e.jsx(Te,{strokeDasharray:"3 3",vertical:!1}),e.jsx(De,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(Le,{axisLine:!1,tickLine:!1}),e.jsx(Ie,{}),e.jsx(Be,{}),e.jsx(_e,{type:"monotone",dataKey:"count",stroke:"#FBBC05",strokeWidth:3,dot:{r:4},activeDot:{r:8}})]})})})]})}),e.jsx(C,{value:"detailed",className:"space-y-4",children:e.jsx(Jt,{dateRange:x,propertyId:z})})]})]})};export{er as default};
