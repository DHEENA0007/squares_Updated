import{j as e}from"./ui-CEFKCYQo.js";import{d as s,r as a}from"./router-Bi51YGN-.js";import{D as r,z as t,t as i,a2 as l,a3 as n,a4 as c,a5 as d,a6 as o,h as m,B as p,at as h,au as x,av as u,W as j,G as v,f,Z as g,a as N,b as y,c as b,e as w,d as C,L as k,I as P,T as F,a7 as S,aw as A,aj as R,ak as T,al as $,am as E,an as V,ao as q,E as L,aq as O}from"./index-Ds-LUfCl.js";import{u as _}from"./usePagination-B0D_bLcL.js";import{P as D,a as I,b as U,c as z,d as M,e as Q}from"./pagination-BpE6F8as.js";import{D as B}from"./DataTable-joxODhLR.js";import{S as H}from"./SearchFilter-oOqKYIVL.js";import{A as J,b as W,c as G,d as X,e as Z,f as K,g as Y,h as ee}from"./alert-dialog-BnDdp1K_.js";import{S as se}from"./slider-Bl57bMOI.js";import{C as ae}from"./checkbox-DscVYI3N.js";import{S as re}from"./separator-ppO9nLCy.js";import{g as te}from"./propertyUtils-41DuwCMc.js";import{V as ie}from"./VirtualTourViewer-CwB8DaER.js";import{I as le}from"./indian-rupee-Bxz217zj.js";import{E as ne}from"./ellipsis-CAI-P-n6.js";import{S as ce}from"./square-pen-CwPfixkh.js";import{T as de}from"./trash-2-lrlF_EY_.js";import"./vendor-eVk5PToZ.js";import"./table-BXEnq082.js";import"./external-link-CxTCu2LW.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=r("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const me=new class{async makeRequest(e,s={}){const a=t.getToken(),r={headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...s.headers},...s},i=await fetch(`http://localhost:3001/api/admin${e}`,r);if(!i.ok){const e=await i.json().catch(()=>({}));throw new Error(e.message||`HTTP error! status: ${i.status}`)}return i.json()}async getProperties(e={}){try{const s=new URLSearchParams;Object.entries(e).forEach(([e,a])=>{null!=a&&""!==a&&s.append(e,String(a))});const a="/properties"+(s.toString()?`?${s.toString()}`:"");return await this.makeRequest(a)}catch(s){const e=s instanceof Error?s.message:"Failed to fetch properties";throw i({title:"Error",description:e,variant:"destructive"}),s}}async approveProperty(e){try{await this.makeRequest(`/properties/${e}/approve`,{method:"POST"}),i({title:"Success",description:"Property approved successfully!"})}catch(s){const e=s instanceof Error?s.message:"Failed to approve property";throw i({title:"Error",description:e,variant:"destructive"}),s}}async rejectProperty(e,s){try{await this.makeRequest(`/properties/${e}/reject`,{method:"POST",body:JSON.stringify({reason:s})}),i({title:"Success",description:"Property rejected successfully!"})}catch(a){const e=a instanceof Error?a.message:"Failed to reject property";throw i({title:"Error",description:e,variant:"destructive"}),a}}async deleteProperty(e){try{await this.makeRequest(`/properties/${e}`,{method:"DELETE"}),i({title:"Success",description:"Property deleted successfully!"})}catch(s){const e=s instanceof Error?s.message:"Failed to delete property";throw i({title:"Error",description:e,variant:"destructive"}),s}}async togglePropertyFeatured(e,s){try{await this.makeRequest(`/properties/${e}/featured`,{method:"PATCH",body:JSON.stringify({featured:s})}),i({title:"Success",description:`Property ${s?"marked as featured":"removed from featured"}!`})}catch(a){const e=a.response?.data||a,s=e.message||a.message||"Failed to update property";throw e.upgradeRequired||e.limitReached?i({title:e.limitReached?"Featured Limit Reached":"Upgrade Required",description:`${s} Visit the Subscription Plans page to upgrade.`,variant:"destructive"}):i({title:"Error",description:s,variant:"destructive"}),a}}getStatusOptions(){return[{label:"Active",value:"active"},{label:"Available",value:"available"},{label:"Pending",value:"pending"},{label:"Sold",value:"sold"},{label:"Rented",value:"rented"},{label:"Rejected",value:"rejected"}]}getStatusColor(e){switch(e.toLowerCase()){case"active":case"available":return"bg-green-500";case"pending":return"bg-yellow-500";case"sold":return"bg-blue-500";case"rented":return"bg-purple-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}getStatusText(e){return{available:"Available",pending:"Pending Review",sold:"Sold",rented:"Rented",rejected:"Rejected"}[e.toLowerCase()]||e.charAt(0).toUpperCase()+e.slice(1)}getPropertyTypeOptions(){return[{label:"Apartment",value:"apartment"},{label:"House",value:"house"},{label:"Villa",value:"villa"},{label:"Plot",value:"plot"},{label:"Commercial",value:"commercial"},{label:"Office",value:"office"}]}},pe=({property:s,open:a,onOpenChange:r})=>{if(!s)return null;return e.jsx(l,{open:a,onOpenChange:r,children:e.jsxs(n,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(c,{children:[e.jsx(d,{className:"text-2xl",children:s.title}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(m,{className:"w-4 h-4"}),s.address.street,", ",s.address.city,", ",s.address.state," - ",s.address.pincode]})})]}),e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(p,{variant:"available"===s.status?"default":"pending"===s.status?"outline":"destructive",children:["Status: ",s.status]}),e.jsx(p,{variant:"secondary",className:"capitalize",children:s.type?s.type.replace("_"," "):"property"}),e.jsxs(p,{variant:"sale"===s.listingType?"default":"outline",children:["For ","sale"===s.listingType?"Sale":"Rent"]}),s.featured&&e.jsx(p,{variant:"default",children:"Featured"}),s.verified&&e.jsx(p,{variant:"default",children:"Verified"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),e.jsx("p",{className:"font-semibold",children:((e,s)=>{const a=new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e);return"rent"===s?`₹${a}/month`:`₹${a}`})(s.price,s.listingType)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Area"}),e.jsx("p",{className:"font-semibold",children:(t=s.area,t?.builtUp?`${t.builtUp} ${t.unit||"sqft"}`:t?.carpet?`${t.carpet} ${t.unit||"sqft"}`:t?.plot?`${t.plot} ${t.unit||"sqft"}`:"N/A")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bedrooms"}),e.jsx("p",{className:"font-semibold",children:s.bedrooms||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bathrooms"}),e.jsx("p",{className:"font-semibold",children:s.bathrooms||"N/A"})]})]})]}),e.jsx(re,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),s.amenities&&s.amenities.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(re,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.amenities.map((s,a)=>e.jsx(p,{variant:"outline",className:"capitalize",children:s.replace("_"," ")},a))})]})]}),e.jsx(re,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Owner Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium",children:te(s.owner)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.owner?.email})]}),s.owner?.profile?.phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"font-medium",children:s.owner.profile.phone})]})]})]}),s.images&&s.images.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(re,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:s.images.map((s,a)=>e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden border",children:[e.jsx("img",{src:s.url,alt:s.caption||`Property ${a+1}`,className:"w-full h-full object-cover"}),s.isPrimary&&e.jsx(p,{className:"absolute top-2 left-2",variant:"default",children:"Primary"})]},a))})]})]}),s.videos&&s.videos.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(re,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Videos"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.videos.map((s,a)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden border bg-black",children:s.url.includes("youtube.com")||s.url.includes("youtu.be")?e.jsx("iframe",{src:s.url.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/"),className:"w-full h-full",allowFullScreen:!0,title:s.caption||`Video ${a+1}`}):e.jsx("video",{src:s.url,controls:!0,className:"w-full h-full object-contain",poster:s.thumbnail})}),s.caption&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.caption})]},a))})]})]}),s.virtualTour&&e.jsxs(e.Fragment,{children:[e.jsx(re,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Virtual Tour"}),e.jsx(ie,{url:s.virtualTour})]})]}),"rejected"===s.status&&s.rejectionReason&&e.jsxs(e.Fragment,{children:[e.jsx(re,{}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-red-700 mb-2",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-600",children:s.rejectionReason})]})]})]})]})});var t},he=()=>{const r=s(),{toast:i}=j(),[m,h]=a.useState(""),[x,u]=a.useState("all"),[re,te]=a.useState("all"),[ie,le]=a.useState([0,5e7]),[he,xe]=a.useState([]),[ue,je]=a.useState(!0),[ve,fe]=a.useState(!1),[ge,Ne]=a.useState(!1),[ye,be]=a.useState(!1),[we,Ce]=a.useState(!1),[ke,Pe]=a.useState(null),[Fe,Se]=a.useState(""),[Ae,Re]=a.useState(null),[Te,$e]=a.useState(""),[Ee,Ve]=a.useState({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),[qe,Le]=a.useState("");a.useEffect(()=>{const e=t.getCurrentUser();Re(e),e?.profile&&$e(`${e.profile.firstName||""} ${e.profile.lastName||""}`.trim()),Oe()},[]);const Oe=async()=>{try{je(!0);const e=await me.getProperties({limit:1e3});e.success&&xe(e.data.properties)}catch(e){i({title:"Error",description:"Failed to load properties",variant:"destructive"})}finally{je(!1)}},_e=a.useMemo(()=>he.filter(e=>{const s=e.title.toLowerCase().includes(m.toLowerCase())||e.address.city.toLowerCase().includes(m.toLowerCase())||e.address.state.toLowerCase().includes(m.toLowerCase()),a="all"===x||e.type===x,r="all"===re||e.status===re,t=e.price>=ie[0]&&e.price<=ie[1];return s&&a&&r&&t}),[he,m,x,re,ie]),{paginatedItems:De,currentPage:Ie,totalPages:Ue,goToPage:ze,nextPage:Me,previousPage:Qe}=_(_e,10),Be=()=>{Ve({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),Le(""),Ae?.profile&&$e(`${Ae.profile.firstName||""} ${Ae.profile.lastName||""}`.trim())},He=[{key:"title",label:"Property Title",render:s=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.address.district?`${s.address.city}, ${s.address.district}, ${s.address.state}`:`${s.address.city}, ${s.address.state}`})]})},{key:"type",label:"Type",render:s=>e.jsx(p,{variant:"secondary",className:"capitalize",children:s.type?s.type.replace("_"," "):"property"})},{key:"listingType",label:"Listing",render:s=>e.jsx(p,{variant:"sale"===s.listingType?"default":"outline",children:"sale"===s.listingType?"For Sale":"For Rent"})},{key:"price",label:"Price",render:s=>e.jsx("span",{className:"font-semibold",children:A.formatPrice(s.price,s.listingType)})},{key:"area",label:"Area",render:s=>e.jsx("span",{children:A.formatArea(s.area)})},{key:"status",label:"Status",render:s=>e.jsx(p,{variant:{available:"default",pending:"outline",rejected:"destructive",sold:"secondary",rented:"secondary"}[s.status]||"secondary",children:s.status})},{key:"featured",label:"Featured",render:s=>e.jsx(p,{variant:s.featured?"default":"secondary",children:s.featured?"Featured":"Regular"})},{key:"actions",label:"Actions",render:s=>{const a=(e=>!!e.owner&&(!(!Ae||e.owner._id!==Ae.id)||!e.vendor&&"available"===e.status))(s),t="pending"===s.status;return e.jsxs(R,{children:[e.jsx(T,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",children:e.jsx(ne,{className:"w-4 h-4"})})}),e.jsxs($,{align:"end",children:[e.jsx(E,{children:"Actions"}),e.jsx(V,{}),a&&e.jsxs(q,{onClick:()=>r(`/admin/properties/edit/${s._id}`),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Edit Property"]}),!a&&e.jsxs(q,{onClick:()=>(e=>{Pe(e),Ce(!0)})(s),children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"View Details"]}),!a&&t&&e.jsxs(e.Fragment,{children:[e.jsx(V,{}),e.jsxs(q,{onClick:()=>(e=>{Pe(e),Be(),be(!0)})(s),className:"text-green-600",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Approve & Publish"]}),e.jsxs(q,{onClick:()=>(e=>{Pe(e),Be(),Ne(!0)})(s),className:"text-red-600",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),"available"===s.status&&e.jsxs(e.Fragment,{children:[e.jsx(V,{}),e.jsx(q,{onClick:()=>(async e=>{try{await me.togglePropertyFeatured(e._id,!e.featured),xe(he.map(s=>s._id===e._id?{...s,featured:!s.featured}:s)),i({title:"Success",description:`Property ${e.featured?"removed from":"marked as"} featured`})}catch(s){i({title:"Error",description:"Failed to update featured status",variant:"destructive"})}})(s),children:s.featured?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Remove Featured"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Mark Featured"]})})]}),e.jsx(V,{}),e.jsxs(q,{onClick:()=>(e=>{Pe(e),fe(!0)})(s),className:"text-red-600",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}}];return ue?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(v,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"dashboard-header-responsive",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"dashboard-title-responsive",children:"Property Management"}),e.jsx("p",{className:"text-muted-foreground mt-1 md:mt-2 text-sm md:text-base",children:"Manage property listings and details"})]}),e.jsxs(f,{onClick:()=>r("/admin/properties/add"),className:"w-full sm:w-auto",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Property"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs(N,{className:"stats-card-responsive",children:[e.jsx(y,{className:"pb-2",children:e.jsx(b,{className:"stats-label-responsive",children:"Total Properties"})}),e.jsx(w,{children:e.jsx("div",{className:"stats-value-responsive",children:he.length})})]}),e.jsxs(N,{className:"stats-card-responsive",children:[e.jsx(y,{className:"pb-2",children:e.jsx(b,{className:"stats-label-responsive",children:"Pending Approval"})}),e.jsx(w,{children:e.jsx("div",{className:"stats-value-responsive text-yellow-600",children:he.filter(e=>"pending"===e.status).length})})]}),e.jsxs(N,{className:"stats-card-responsive",children:[e.jsx(y,{className:"pb-2",children:e.jsx(b,{className:"stats-label-responsive",children:"Available Properties"})}),e.jsx(w,{children:e.jsx("div",{className:"stats-value-responsive text-green-600",children:he.filter(e=>"available"===e.status).length})})]}),e.jsxs(N,{className:"stats-card-responsive",children:[e.jsx(y,{className:"pb-2",children:e.jsx(b,{className:"stats-label-responsive",children:"Featured"})}),e.jsx(w,{children:e.jsx("div",{className:"stats-value-responsive text-blue-600",children:he.filter(e=>e.featured).length})})]})]}),e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsx(b,{className:"text-lg md:text-xl",children:"All Properties"}),e.jsxs(C,{className:"text-sm md:text-base",children:[_e.length," propert",1!==_e.length?"ies":"y"," found"]})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(H,{searchTerm:m,onSearchChange:h})}),e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(k,{htmlFor:"type-filter",className:"text-sm font-medium",children:"Property Type"}),e.jsxs("select",{id:"type-filter",value:x,onChange:e=>u(e.target.value),className:"w-full p-2 border rounded-md mt-1",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"land",children:"Land"}),e.jsx("option",{value:"commercial",children:"Commercial"})]})]}),e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(k,{htmlFor:"status-filter",className:"text-sm font-medium",children:"Property Status"}),e.jsxs("select",{id:"status-filter",value:re,onChange:e=>te(e.target.value),className:"w-full p-2 border rounded-md mt-1",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"sold",children:"Sold"}),e.jsx("option",{value:"rented",children:"Rented"})]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(k,{className:"text-sm font-medium",children:"Price Range"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["₹",ie[0].toLocaleString()]}),e.jsx(se,{min:0,max:5e7,step:1e5,value:ie,onValueChange:le,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",ie[1].toLocaleString()]})]})]})]}),e.jsx("div",{className:"table-responsive-wrapper",children:e.jsx(B,{columns:He,data:De.map(e=>({...e,id:e._id})),hideDefaultActions:!0})}),Ue>1&&e.jsx("div",{className:"mt-4 md:mt-6",children:e.jsx(D,{children:e.jsxs(I,{className:"pagination-responsive",children:[e.jsx(U,{children:e.jsx(z,{onClick:Qe,className:"pagination-button-responsive "+(1===Ie?"pointer-events-none opacity-50":"cursor-pointer")})}),Array.from({length:Ue},(e,s)=>s+1).map(s=>e.jsx(U,{children:e.jsx(M,{onClick:()=>ze(s),isActive:Ie===s,className:"pagination-button-responsive cursor-pointer",children:s})},s)),e.jsx(U,{children:e.jsx(Q,{onClick:Me,className:"pagination-button-responsive "+(Ie===Ue?"pointer-events-none opacity-50":"cursor-pointer")})})]})})})]})]}),e.jsx(J,{open:ve,onOpenChange:fe,children:e.jsxs(W,{children:[e.jsxs(G,{children:[e.jsx(X,{children:"Delete Property"}),e.jsxs(Z,{children:['Are you sure you want to delete "',ke?.title,'"? This action cannot be undone.']})]}),e.jsxs(K,{children:[e.jsx(Y,{children:"Cancel"}),e.jsx(ee,{onClick:async()=>{if(ke)try{await me.deleteProperty(ke._id),xe(he.filter(e=>e._id!==ke._id)),fe(!1),Pe(null),i({title:"Success",description:"Property deleted successfully"})}catch(e){i({title:"Error",description:"Failed to delete property",variant:"destructive"})}},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(l,{open:ye,onOpenChange:be,children:e.jsxs(n,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(c,{children:[e.jsx(d,{children:"Approve Property"}),e.jsxs(o,{children:['Complete the verification checklist and provide your approval for "',ke?.title,'".']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"approver-name",children:"Approver Name *"}),e.jsx(P,{id:"approver-name",placeholder:"Enter your full name",value:Te,onChange:e=>$e(e.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{className:"text-base font-semibold",children:"Verification Checklist"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"documents",checked:Ee.documentsVerified,onCheckedChange:e=>Ve({...Ee,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents",className:"text-sm font-medium cursor-pointer",children:"All required documents are verified"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"location",checked:Ee.locationVerified,onCheckedChange:e=>Ve({...Ee,locationVerified:e})}),e.jsx("label",{htmlFor:"location",className:"text-sm font-medium cursor-pointer",children:"Property location is verified and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"price",checked:Ee.priceReasonable,onCheckedChange:e=>Ve({...Ee,priceReasonable:e})}),e.jsx("label",{htmlFor:"price",className:"text-sm font-medium cursor-pointer",children:"Price is reasonable and competitive"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"images",checked:Ee.imagesQuality,onCheckedChange:e=>Ve({...Ee,imagesQuality:e})}),e.jsx("label",{htmlFor:"images",className:"text-sm font-medium cursor-pointer",children:"Images are of good quality and relevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"description",checked:Ee.descriptionComplete,onCheckedChange:e=>Ve({...Ee,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description",className:"text-sm font-medium cursor-pointer",children:"Description is complete and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"ownership",checked:Ee.ownershipConfirmed,onCheckedChange:e=>Ve({...Ee,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership",className:"text-sm font-medium cursor-pointer",children:"Ownership is confirmed and legitimate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"handwritten-comments",children:"Additional Comments"}),e.jsx(F,{id:"handwritten-comments",placeholder:"Type your handwritten comments or notes here...",value:qe,onChange:e=>Le(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional observations, notes, or special remarks about this property"})]})]}),e.jsxs(S,{children:[e.jsx(f,{variant:"outline",onClick:()=>be(!1),children:"Cancel"}),e.jsx(f,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{if(ke&&Te.trim())try{await me.approveProperty(ke._id),xe(he.map(e=>e._id===ke._id?{...e,status:"available",verified:!0}:e)),be(!1),Pe(null),Be(),i({title:"Success",description:"Property approved and listed successfully!"})}catch(e){i({title:"Error",description:"Failed to approve property",variant:"destructive"})}else i({title:"Error",description:"Approver name is required",variant:"destructive"})},disabled:!Te.trim(),children:"Approve & Publish Property"})]})]})}),e.jsx(l,{open:ge,onOpenChange:Ne,children:e.jsxs(n,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(c,{children:[e.jsx(d,{children:"Reject Property"}),e.jsxs(o,{children:['Complete the form and provide a reason for rejecting "',ke?.title,'". The vendor will be notified.']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"approver-name-reject",children:"Approver Name *"}),e.jsx(P,{id:"approver-name-reject",placeholder:"Enter your full name",value:Te,onChange:e=>$e(e.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{className:"text-base font-semibold",children:"Issues Found (Check applicable items)"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"documents-reject",checked:Ee.documentsVerified,onCheckedChange:e=>Ve({...Ee,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents-reject",className:"text-sm font-medium cursor-pointer",children:"Documents are incomplete or invalid"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"location-reject",checked:Ee.locationVerified,onCheckedChange:e=>Ve({...Ee,locationVerified:e})}),e.jsx("label",{htmlFor:"location-reject",className:"text-sm font-medium cursor-pointer",children:"Property location is incorrect or unclear"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"price-reject",checked:Ee.priceReasonable,onCheckedChange:e=>Ve({...Ee,priceReasonable:e})}),e.jsx("label",{htmlFor:"price-reject",className:"text-sm font-medium cursor-pointer",children:"Price is unreasonable or suspicious"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"images-reject",checked:Ee.imagesQuality,onCheckedChange:e=>Ve({...Ee,imagesQuality:e})}),e.jsx("label",{htmlFor:"images-reject",className:"text-sm font-medium cursor-pointer",children:"Images are poor quality or irrelevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"description-reject",checked:Ee.descriptionComplete,onCheckedChange:e=>Ve({...Ee,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description-reject",className:"text-sm font-medium cursor-pointer",children:"Description is incomplete or misleading"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{id:"ownership-reject",checked:Ee.ownershipConfirmed,onCheckedChange:e=>Ve({...Ee,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership-reject",className:"text-sm font-medium cursor-pointer",children:"Ownership cannot be confirmed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"rejection-reason",children:"Rejection Reason *"}),e.jsx(F,{id:"rejection-reason",placeholder:"Enter the detailed reason for rejection...",value:Fe,onChange:e=>Se(e.target.value),className:"mt-1",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"handwritten-comments-reject",children:"Additional Comments"}),e.jsx(F,{id:"handwritten-comments-reject",placeholder:"Type your handwritten comments or notes here...",value:qe,onChange:e=>Le(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional feedback or suggestions for the vendor"})]})]}),e.jsxs(S,{children:[e.jsx(f,{variant:"outline",onClick:()=>Ne(!1),children:"Cancel"}),e.jsx(f,{variant:"destructive",onClick:async()=>{if(ke&&Fe.trim()&&Te.trim())try{await me.rejectProperty(ke._id,Fe),xe(he.map(e=>e._id===ke._id?{...e,status:"rejected"}:e)),Ne(!1),Pe(null),Se(""),Be(),i({title:"Property Rejected",description:"Property has been rejected and vendor has been notified."})}catch(e){i({title:"Error",description:"Failed to reject property",variant:"destructive"})}else i({title:"Error",description:"Approver name and rejection reason are required",variant:"destructive"})},disabled:!Fe.trim()||!Te.trim(),children:"Reject Property"})]})]})}),e.jsx(pe,{property:ke,open:we,onOpenChange:Ce})]})};export{he as default};
