import{j as e}from"./ui-DHQhougw.js";import{e as s,d as a,r as t}from"./router-Bi51YGN-.js";import{$ as i,f as l,A as n,a as r,b as c,c as d,e as u,L as o,I as m,S as h,q as x,r as p,s as j,v}from"./index-BElMMwCt.js";import{s as g}from"./subscriptionService-D_hs6MRd.js";import"./vendor-eVk5PToZ.js";const y=()=>{const{id:y}=s(),f=a(),{toast:N}=i(),[C,b]=t.useState(null),[D,F]=t.useState(!0);t.useEffect(()=>{(async()=>{if(y)try{F(!0);const e=await g.getSubscription(y);b(e.data.subscription)}catch(e){N({title:"Error",description:"Failed to load client data.",variant:"destructive"}),f("/admin/clients")}finally{F(!1)}})()},[y,f,N]);return C?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>f("/clients"),children:e.jsx(n,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Client"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Update client subscription details"})]})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(d,{children:"Client Information"})}),e.jsx(u,{children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),N({title:"Client updated",description:"The client details have been updated successfully."}),f("/clients")},className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Client Name"}),e.jsx(m,{id:"name",value:C.user?.name||"",onChange:e=>b({...C,user:{...C.user,name:e.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",type:"email",value:C.user?.email||"",onChange:e=>b({...C,user:{...C.user,email:e.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"planName",children:"Plan"}),e.jsx(m,{id:"planName",value:C.plan?.name||"",onChange:e=>b({...C,plan:{...C.plan,name:e.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"amount",children:"Amount"}),e.jsx(m,{id:"amount",type:"number",step:"0.01",value:C.amount,onChange:e=>b({...C,amount:parseFloat(e.target.value)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"subscriptionDate",children:"Subscription Date"}),e.jsx(m,{id:"subscriptionDate",type:"date",value:C.startDate?.split("T")[0]||"",onChange:e=>b({...C,startDate:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(m,{id:"expiryDate",type:"date",value:C.endDate?.split("T")[0]||"",onChange:e=>b({...C,endDate:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"status",children:"Status"}),e.jsxs(h,{value:C.status,onValueChange:e=>b({...C,status:e}),children:[e.jsx(x,{children:e.jsx(p,{})}),e.jsxs(j,{children:[e.jsx(v,{value:"active",children:"Active"}),e.jsx(v,{value:"expired",children:"Expired"}),e.jsx(v,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(l,{type:"submit",children:"Save Changes"}),e.jsx(l,{type:"button",variant:"outline",onClick:()=>f("/clients"),children:"Cancel"})]})]})})]})]}):e.jsx("div",{children:"Client not found"})};export{y as default};
