import{j as e}from"./ui-DYmpZ3pJ.js";import{r as l}from"./router-2SVJvIbS.js";import{a as u,e as g,J as C,I as P,p as y,q as k,ai as B,r as R,s as A,v as o,ah as F,h as I,B as T,U as $,f as i,E as z,C as E,a7 as U}from"./index-BbgqWuYN.js";import"./vendor-Dazix4UH.js";const q=()=>{const[f,v]=l.useState([]),[N,x]=l.useState(!0),[n,p]=l.useState(""),[d,w]=l.useState("pending"),[a,m]=l.useState(1),[c,b]=l.useState(1),h=async()=>{x(!0);try{const s=new URLSearchParams({page:a.toString(),limit:"10",status:d,search:n}),t=await fetch(`/api/admin/properties/review?${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t.ok){const r=await t.json();v(r.properties),b(r.totalPages)}}catch(s){console.error("Failed to fetch properties:",s)}finally{x(!1)}};l.useEffect(()=>{h()},[a,d,n]);const j=async(s,t)=>{try{(await fetch(`/api/admin/properties/${s}/${t}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok&&h()}catch(r){console.error(`Failed to ${t} property:`,r)}},S=s=>{const t={pending:{variant:"secondary",color:"bg-yellow-100 text-yellow-800"},approved:{variant:"default",color:"bg-green-100 text-green-800"},rejected:{variant:"destructive",color:"bg-red-100 text-red-800"}};return t[s]||t.pending};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Property Review"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Review and verify property listings submitted by vendors"})]})}),e.jsx(u,{children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(P,{placeholder:"Search properties...",value:n,onChange:s=>p(s.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(y,{value:d,onValueChange:w,children:[e.jsxs(k,{children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),e.jsx(R,{})]}),e.jsxs(A,{children:[e.jsx(o,{value:"pending",children:"Pending Review"}),e.jsx(o,{value:"approved",children:"Approved"}),e.jsx(o,{value:"rejected",children:"Rejected"})]})]})})]})})}),e.jsx("div",{className:"space-y-4",children:f.map(s=>{const t=S(s.status);return e.jsx(u,{className:"hover:shadow-md transition-shadow",children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"w-full lg:w-64 h-48 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx(F,{className:"w-12 h-12 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{className:"text-sm",children:[s.location.city,", ",s.location.state]})]})]}),e.jsx(T,{className:t.color,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-primary",children:["â‚¹",s.price.toLocaleString()]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Price"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.bedrooms}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bedrooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.bathrooms}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bathrooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.area}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Sq ft"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Vendor: ",s.vendor.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"View Details"]}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{variant:"default",size:"sm",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",onClick:()=>j(s._id,"approve"),children:[e.jsx(E,{className:"w-4 h-4"}),"Approve"]}),e.jsxs(i,{variant:"destructive",size:"sm",className:"flex items-center gap-2",onClick:()=>j(s._id,"reject"),children:[e.jsx(U,{className:"w-4 h-4"}),"Reject"]})]})]})]})]})]})})},s._id)})}),c>1&&e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(i,{variant:"outline",onClick:()=>m(Math.max(1,a-1)),disabled:a===1,children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4",children:["Page ",a," of ",c]}),e.jsx(i,{variant:"outline",onClick:()=>m(Math.min(c,a+1)),disabled:a===c,children:"Next"})]})]})};export{q as default};
