import{j as e}from"./ui-DHQhougw.js";import{h as s,d as a,r}from"./router-Bi51YGN-.js";import{a as t,b as c,s as n,C as o,c as l,d as i,e as d,f as m,H as u,v as x}from"./index-B494FSRu.js";import{A as h,a as j}from"./alert-DgPtPtZk.js";import{T as g}from"./triangle-alert-C0TBeKc1.js";import"./vendor-eVk5PToZ.js";const f=()=>{const[f]=s(),p=a(),[w,N]=r.useState("loading"),[b,v]=r.useState("");return r.useEffect(()=>{(async()=>{const e=f.get("token");if(!e)return N("error"),void v("Invalid or missing deletion token.");try{const s=await x.confirmAccountDeletion(e);s.success?(N("success"),v("Your account has been permanently deleted. All your data has been removed from our servers."),setTimeout(()=>{localStorage.clear(),sessionStorage.clear(),p("/")},5e3)):(N("error"),v(s.message||"Failed to delete account."))}catch(s){N("error"),v(s.message||"An error occurred while deleting your account.")}})()},[f,p]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-100 p-4",children:e.jsxs(t,{className:"w-full max-w-md",children:[e.jsxs(c,{className:"text-center",children:[e.jsxs("div",{className:"mx-auto mb-4",children:["loading"===w&&e.jsx(n,{className:"w-16 h-16 text-red-500 animate-spin"}),"success"===w&&e.jsx(o,{className:"w-16 h-16 text-green-500"}),"error"===w&&e.jsx(g,{className:"w-16 h-16 text-red-500"})]}),e.jsxs(l,{className:"text-2xl",children:["loading"===w&&"Deleting Account...","success"===w&&"Account Deleted","error"===w&&"Deletion Failed"]}),e.jsxs(i,{children:["loading"===w&&"Please wait while we permanently delete your account","success"===w&&"Your account has been permanently removed","error"===w&&"Unable to delete your account"]})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsx(h,{variant:"error"===w?"destructive":"default",children:e.jsx(j,{children:b})}),"success"===w&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-900",children:[e.jsx("strong",{children:"Important:"})," This action is permanent. All your data has been removed and cannot be recovered. You can create a new account anytime if needed."]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:["success"===w&&e.jsxs(m,{onClick:()=>p("/"),className:"w-full",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Go to Home"]}),"error"===w&&e.jsxs(e.Fragment,{children:[e.jsx(m,{onClick:()=>p("/customer/settings"),className:"w-full",children:"Back to Settings"}),e.jsxs(m,{variant:"outline",onClick:()=>p("/"),className:"w-full",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Go to Home"]})]})]})]})]})})};export{f as default};
