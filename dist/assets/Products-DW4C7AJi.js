import{j as e}from"./ui-DOY6021Z.js";import{r as a}from"./router-2SVJvIbS.js";import{P as F,a as E}from"./PropertyCard-DmGj99C1.js";import{H as w,I as k,f as I,ao as L,t as A}from"./index-DJqidggL.js";import{P as _,a as D,b as l,c as T,d as M,f as Q,e as R}from"./pagination-D07uMfTX.js";import{L as B}from"./loader-circle-C0zUPQir.js";import"./vendor-Dazix4UH.js";import"./propertyUtils-DZZpAHgC.js";import"./PropertyContactDialog-CkRl6Ywt.js";import"./dialog-DsaUnv7s.js";import"./label-B9O-vWmY.js";import"./textarea-DO9hd5Hf.js";import"./messageService-DGuX3xJM.js";import"./send-d1uHhC4x.js";import"./EnterprisePropertyContactDialog-Do6eXw9y.js";import"./dollar-sign-BoYqDhPx.js";import"./vendorService-BtSoYHTS.js";import"./square-C50VkgzQ.js";import"./ellipsis-BAZwf6Eg.js";const m=12,ie=()=>{const[s,i]=a.useState(1),[c,x]=a.useState(""),[p,P]=a.useState([]),[d,h]=a.useState(!0),[o,v]=a.useState(0),[g,N]=a.useState(0),[u,f]=a.useState({});a.useEffect(()=>{(async()=>{h(!0);try{const n={page:s,limit:m,search:c||void 0,...u},t=await L.getProperties(n);t.success&&(P(t.data.properties),v(t.data.pagination.totalPages),N(t.data.pagination.totalProperties))}catch(n){console.error("Failed to fetch properties:",n),A({title:"Error",description:"Failed to load properties. Please try again.",variant:"destructive"})}finally{h(!1)}})()},[s,c,u]);const y=r=>{x(r),i(1)},S=r=>{f(r),i(1)},j=(s-1)*m,C=Math.min(j+m,g);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(k,{type:"text",placeholder:"Search properties by location, type...",className:"pl-10 h-12",value:c,onChange:r=>y(r.target.value)})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:e.jsx(F,{onFilterChange:S})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),e.jsx("p",{className:"text-muted-foreground",children:d?"Loading properties...":e.jsxs(e.Fragment,{children:["Showing ",j+1,"-",C," of ",g," properties"]})})]}),d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(B,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No properties found matching your criteria."}),e.jsx(I,{onClick:()=>{f({}),x(""),i(1)},variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6 mb-8",children:p.map(r=>e.jsx(E,{property:r},r._id))}),!d&&p.length>0&&o>1&&e.jsx(_,{children:e.jsxs(D,{children:[e.jsx(l,{children:e.jsx(T,{href:"#",onClick:r=>{r.preventDefault(),s>1&&i(s-1)},className:s===1?"pointer-events-none opacity-50":""})}),[...Array(o)].map((r,n)=>{const t=n+1;return t===1||t===o||t>=s-1&&t<=s+1?e.jsx(l,{children:e.jsx(M,{href:"#",onClick:b=>{b.preventDefault(),i(t)},isActive:s===t,children:t})},t):t===s-2||t===s+2?e.jsx(l,{children:e.jsx(Q,{})},t):null}),e.jsx(l,{children:e.jsx(R,{href:"#",onClick:r=>{r.preventDefault(),s<o&&i(s+1)},className:s===o?"pointer-events-none opacity-50":""})})]})})]})]})]})};export{ie as default};
