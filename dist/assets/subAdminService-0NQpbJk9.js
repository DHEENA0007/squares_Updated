import{aK as t}from"./index-CM8T-gRV.js";const e=new class{async makeRequest(e,a={}){const r=`https://app.buildhomemartsquares.com/api${e}`,s={headers:{"Content-Type":"application/json",...a.headers},...a},o=localStorage.getItem("token");o&&(s.headers={...s.headers,Authorization:`Bearer ${o}`});try{const e=await fetch(r,s);if(t(e),!e.ok){const t=e.headers.get("content-type");let a;a=t&&t.includes("application/json")?await e.json().catch(()=>({success:!1,message:`HTTP ${e.status}: ${e.statusText}`})):{success:!1,message:`HTTP ${e.status}: ${e.statusText}`};const r=new Error(a.message||"An error occurred");throw r.status=e.status,r}const a=e.headers.get("content-type");if(!a||!a.includes("application/json"))throw new Error("Invalid response format: Expected JSON");return await e.json()}catch(n){throw n}}async getDashboardStats(){try{return(await this.makeRequest("/subadmin/dashboard")).data}catch(t){throw new Error(t.message||"Failed to fetch dashboard stats")}}async getPendingProperties(t=1,e=10,a=""){try{return(await this.makeRequest(`/subadmin/properties/pending?page=${t}&limit=${e}&search=${a}`)).data}catch(r){throw new Error(r.message||"Failed to fetch pending properties")}}async approveProperty(t){try{return(await this.makeRequest(`/subadmin/properties/${t}/approve`,{method:"POST"})).data}catch(e){throw new Error(e.message||"Failed to approve property")}}async rejectProperty(t,e){try{return(await this.makeRequest(`/subadmin/properties/${t}/reject`,{method:"POST",body:JSON.stringify({reason:e})})).data}catch(a){throw new Error(a.message||"Failed to reject property")}}async getSupportTickets(t=1,e=10,a="open"){try{return(await this.makeRequest(`/subadmin/support/tickets?page=${t}&limit=${e}&status=${a}`)).data}catch(r){throw new Error(r.message||"Failed to fetch support tickets")}}async updateSupportTicket(t,e,a){try{return(await this.makeRequest(`/subadmin/support/tickets/${t}`,{method:"PATCH",body:JSON.stringify({status:e,response:a})})).data}catch(r){const t=new Error(r.message||"Failed to update support ticket");throw t.status=r.status,t}}async getVendorPerformance(){try{return(await this.makeRequest("/subadmin/vendors/performance")).data}catch(t){throw new Error(t.message||"Failed to fetch vendor performance")}}async sendNotification(t){try{await this.makeRequest("/subadmin/notifications/send",{method:"POST",body:JSON.stringify(t)})}catch(e){throw new Error(e.message||"Failed to send notification")}}async getCityReport(t,e,a){try{const r=new URLSearchParams;e&&r.append("startDate",e),a&&r.append("endDate",a);return(await this.makeRequest(`/subadmin/reports/city/${t}?${r}`)).data}catch(r){throw new Error(r.message||"Failed to fetch city report")}}async getContentReports(){try{return(await this.makeRequest("/subadmin/content/reports")).data}catch(t){throw new Error(t.message||"Failed to fetch content reports")}}async getExportData(t){try{return(await this.makeRequest(`/subadmin/reports/export-data?range=${t}`)).data}catch(e){throw new Error(e.message||"Failed to fetch export data")}}async getPendingPromotions(){try{return(await this.makeRequest("/subadmin/promotions/pending")).data}catch(t){throw new Error(t.message||"Failed to fetch pending promotions")}}};export{e as s};
