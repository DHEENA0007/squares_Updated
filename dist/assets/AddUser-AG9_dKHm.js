import{j as e}from"./ui-DHQhougw.js";import{u as s,t as r,e as n,s as i,d as t,o as a,l}from"./types-y39mGcu7.js";import{R as o,a as d,b as c,c as x,d as j,e as m,I as u,S as h,l as p,m as b,n as f,o as g,E as y,T as v,f as N,v as C}from"./index-B494FSRu.js";import{F as w,a as _,b as E,c as S,d as I,e as V}from"./form-CMYf_Twk.js";import{d as P,r as A}from"./router-Bi51YGN-.js";import{E as D}from"./EnhancedLocationSelector-CLtbgE5x.js";import{E as B}from"./eye-off-BdlaNLa_.js";import"./vendor-eVk5PToZ.js";import"./command-BWiq5F-M.js";import"./globe-DafAowXY.js";const T={first_name:i().min(2,"First name must be at least 2 characters"),last_name:i().optional(),email:i().email("Invalid email address"),phone:i().regex(/^[0-9]{10}$/,"Must be 10 digits"),password:i().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])/,"Password must contain uppercase, lowercase, number, and special character (!@#$%^&*)"),confirm_password:i(),status:n(["active","inactive","suspended","pending"])},F={businessName:i().min(2,"Business name required"),businessType:i().min(1,"Business type required"),businessDescription:i().optional(),experience:i().optional(),licenseNumber:i().optional(),gstNumber:i().optional(),panNumber:i().optional(),website:i().optional(),address:i().optional(),city:i().optional(),district:i().optional(),state:i().optional(),pincode:i().optional()},L={businessName:i().optional(),businessType:i().optional(),businessDescription:i().optional(),experience:i().optional(),licenseNumber:i().optional(),gstNumber:i().optional(),panNumber:i().optional(),website:i().optional(),address:i().optional(),city:i().optional(),district:i().optional(),state:i().optional(),pincode:i().optional()},k=t("role",[a({role:l("agent"),...T,...F}),a({role:l("customer"),...T,...L}),a({role:l("admin"),...T,...L}),a({role:l("subadmin"),...T,...L}),a({role:l("superadmin"),...T,...L})]).refine(e=>e.password===e.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}),U=()=>{const{toast:n}=o(),i=P(),[t,a]=A.useState(!1),[l,T]=A.useState(!1),[F,L]=A.useState("customer"),[U,R]=A.useState({country:"India",countryCode:"IN",state:"",stateCode:"",district:"",districtCode:"",city:"",cityCode:"",pincode:""}),M=s({resolver:r(k),defaultValues:{first_name:"",last_name:"",email:"",phone:"",role:"customer",status:"active",password:"",confirm_password:"",businessName:"",businessType:"",businessDescription:"",experience:"",licenseNumber:"",gstNumber:"",panNumber:"",website:"",address:"",city:"",district:"",state:"",pincode:""}}),$="agent"===F;return e.jsxs("div",{className:"max-w-5xl mx-auto mt-16",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New User"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new user account"})]}),e.jsx("div",{className:"bg-card rounded-lg border p-6 md:p-8",children:e.jsx(w,{...M,children:e.jsxs("form",{onSubmit:M.handleSubmit(async e=>{try{const s={email:e.email,password:e.password,profile:{firstName:e.first_name,lastName:e.last_name,phone:e.phone},role:e.role,status:e.status};"agent"===e.role&&(s.businessInfo={businessName:e.businessName,businessType:e.businessType,businessDescription:e.businessDescription,experience:parseInt(e.experience||"0"),licenseNumber:e.licenseNumber,gstNumber:e.gstNumber,panNumber:e.panNumber,website:e.website},s.profile.address={street:e.address,city:U.city||e.city,district:U.district||e.district,state:U.state||e.state,zipCode:e.pincode,country:U.country,countryCode:U.countryCode,stateCode:U.stateCode,districtCode:U.districtCode,cityCode:U.cityCode}),await C.createUser(s),n({title:"Success",description:("agent"===e.role?"Vendor":"User")+" created successfully."}),i("/admin/users")}catch(s){n({title:"Error",description:"Failed to create user. Please try again.",variant:"destructive"})}}),className:"space-y-6",children:[e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(x,{children:"Basic Information"}),e.jsx(j,{children:"User account details"})]}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(_,{control:M.control,name:"first_name",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"First Name *"}),e.jsx(I,{children:e.jsx(u,{placeholder:"Enter first name",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"last_name",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Last Name"}),e.jsx(I,{children:e.jsx(u,{placeholder:"Enter last name",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"email",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Email *"}),e.jsx(I,{children:e.jsx(u,{type:"email",placeholder:"Enter email",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"phone",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Phone Number *"}),e.jsx(I,{children:e.jsx(u,{placeholder:"Enter 10-digit phone",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"role",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Role *"}),e.jsxs(h,{onValueChange:e=>{s.onChange(e),L(e)},defaultValue:s.value,children:[e.jsx(I,{children:e.jsx(p,{children:e.jsx(b,{placeholder:"Select role"})})}),e.jsxs(f,{children:[e.jsx(g,{value:"customer",children:"Customer"}),e.jsx(g,{value:"agent",children:"Vendor/Agent"}),e.jsx(g,{value:"admin",children:"Admin"}),e.jsx(g,{value:"subadmin",children:"Sub Admin"}),e.jsx(g,{value:"superadmin",children:"Super Admin"})]})]}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"status",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Status *"}),e.jsxs(h,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(I,{children:e.jsx(p,{children:e.jsx(b,{placeholder:"Select status"})})}),e.jsxs(f,{children:[e.jsx(g,{value:"active",children:"Active"}),e.jsx(g,{value:"inactive",children:"Inactive"}),e.jsx(g,{value:"suspended",children:"Suspended"}),e.jsx(g,{value:"pending",children:"Pending"})]})]}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"password",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Password *"}),e.jsx(I,{children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{type:t?"text":"password",placeholder:"Enter password",...s}),e.jsx("button",{type:"button",onClick:()=>a(!t),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?e.jsx(B,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})})]})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"confirm_password",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Confirm Password *"}),e.jsx(I,{children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{type:l?"text":"password",placeholder:"Re-enter password",...s}),e.jsx("button",{type:"button",onClick:()=>T(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l?e.jsx(B,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})})]})}),e.jsx(V,{})]})})]})})]}),$&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(x,{children:"Business Information"}),e.jsx(j,{children:"Vendor business details"})]}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(_,{control:M.control,name:"businessName",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Business Name *"}),e.jsx(I,{children:e.jsx(u,{placeholder:"Enter business name",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"businessType",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Business Type *"}),e.jsxs(h,{onValueChange:s.onChange,value:s.value,children:[e.jsx(I,{children:e.jsx(p,{children:e.jsx(b,{placeholder:"Select business type"})})}),e.jsxs(f,{children:[e.jsx(g,{value:"real_estate_agent",children:"Real Estate Agent"}),e.jsx(g,{value:"property_developer",children:"Property Developer"}),e.jsx(g,{value:"construction_company",children:"Construction Company"}),e.jsx(g,{value:"interior_designer",children:"Interior Designer"}),e.jsx(g,{value:"legal_services",children:"Legal Services"}),e.jsx(g,{value:"home_loan_provider",children:"Home Loan Provider"}),e.jsx(g,{value:"packers_movers",children:"Packers & Movers"}),e.jsx(g,{value:"property_management",children:"Property Management"}),e.jsx(g,{value:"other",children:"Other"})]})]}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"experience",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Years of Experience"}),e.jsx(I,{children:e.jsx(u,{type:"number",placeholder:"Enter years",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"website",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Website"}),e.jsx(I,{children:e.jsx(u,{placeholder:"https://example.com",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"businessDescription",render:({field:s})=>e.jsxs(E,{className:"md:col-span-2",children:[e.jsx(S,{children:"Business Description"}),e.jsx(I,{children:e.jsx(v,{placeholder:"Describe the business...",rows:3,...s})}),e.jsx(V,{})]})})]})})]}),e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(x,{children:"Legal Information"}),e.jsx(j,{children:"Business registration and license details"})]}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(_,{control:M.control,name:"panNumber",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"PAN Number"}),e.jsx(I,{children:e.jsx(u,{placeholder:"ABCDE1234F",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"gstNumber",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"GST Number"}),e.jsx(I,{children:e.jsx(u,{placeholder:"22ABCDE1234F1Z5",...s})}),e.jsx(V,{})]})}),e.jsx(_,{control:M.control,name:"licenseNumber",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"License Number"}),e.jsx(I,{children:e.jsx(u,{placeholder:"Enter license number",...s})}),e.jsx(V,{})]})})]})})]}),e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(x,{children:"Location Information"}),e.jsx(j,{children:"Business address and location"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{control:M.control,name:"address",render:({field:s})=>e.jsxs(E,{children:[e.jsx(S,{children:"Street Address"}),e.jsx(I,{children:e.jsx(u,{placeholder:"Enter street address",...s})}),e.jsx(V,{})]})}),e.jsx(D,{value:U,onChange:e=>{R({country:e.country||"India",countryCode:e.countryCode||"IN",state:e.state||"",stateCode:e.stateCode||"",district:e.district||"",districtCode:e.districtCode||"",city:e.city||"",cityCode:e.cityCode||"",pincode:e.pincode||""}),M.setValue("city",e.city||""),M.setValue("district",e.district||""),M.setValue("state",e.state||""),M.setValue("pincode",e.pincode||"")}})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>i("/admin/users"),children:"Cancel"}),e.jsxs(N,{type:"submit",children:["Create ",$?"Vendor":"User"]})]})]})})})]})};export{U as default};
