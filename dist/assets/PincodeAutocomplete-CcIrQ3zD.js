import{j as e}from"./ui-DHQhougw.js";import{r as s}from"./router-Bi51YGN-.js";import{r as t,V as a,W as c,X as i,f as r,s as n,$ as o,a0 as l}from"./index-B494FSRu.js";import{C as d,a as m,c as x,d as p,e as u}from"./command-BWiq5F-M.js";import{locaService as h}from"./locaService-BHv9WoZx.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=t("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);function j({value:t,onChange:j,state:N,district:y,city:g,placeholder:v="Select pincode...",disabled:S=!1,className:w,error:b}){const[C,$]=s.useState(!1),[k,P]=s.useState([]),[E,V]=s.useState(!1),[z,D]=s.useState(""),[L,O]=s.useState(!1);s.useEffect(()=>{(async()=>{if(h.isReady())O(!0);else{V(!0);try{await h.initialize(),O(!0)}catch(e){}finally{V(!1)}}})()},[]),s.useEffect(()=>{if(!L)return;(()=>{try{const e=h.getPincodeSuggestions(N,y,g,z);P(e)}catch(e){P([])}})()},[N,y,g,z,L]);const R=S||!L||!N&&!y&&!g;return e.jsxs("div",{className:a("relative",w),children:[e.jsxs(c,{open:C,onOpenChange:$,children:[e.jsx(i,{asChild:!0,children:e.jsxs(r,{variant:"outline",role:"combobox","aria-expanded":C,className:a("w-full justify-between",!t&&"text-muted-foreground",b&&"border-red-500"),disabled:R,children:[e.jsx("span",{className:"truncate",children:E?e.jsxs("span",{className:"flex items-center",children:[e.jsx(n,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(()=>{if(!t)return v;const e=k.find(e=>e.pincode===t);return e?`${e.pincode} - ${e.city}`:t})()}),e.jsx(f,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(o,{className:"w-full p-0",align:"start",children:e.jsxs(d,{children:[e.jsx(m,{placeholder:"Search pincode...",value:z,onValueChange:D}),e.jsx(x,{children:N||y||g?e.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"No pincodes found"}):e.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"Please select state, district, or city first"})}),e.jsx(p,{className:"max-h-64 overflow-auto",children:k.map(s=>e.jsxs(u,{value:s.pincode,onSelect:()=>{return j((e=s).pincode,e),$(!1),void D("");var e},children:[e.jsx(l,{className:a("mr-2 h-4 w-4",t===s.pincode?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.pincode}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.city,", ",s.district,", ",s.state]})]})]},`${s.pincode}-${s.city}`))})]})})]}),b&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:b}),!N&&!y&&!g&&!b&&e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Select state, district, or city to see available pincodes"})]})}export{j as P};
