import{j as e}from"./ui-BNZSgpjP.js";import{d as s,r as a}from"./router-D8v2YSKU.js";import{D as r,z as t,aK as i,t as l,a4 as n,a5 as c,a6 as d,a7 as o,a8 as m,k as p,B as h,aL as u,aM as x,aN as j,g as v,a2 as f,G as g,Z as y,f as b,a9 as N,a as w,b as C,c as P,e as k,d as S,L as F,I as R,as as E,au as A,av as T,aw as $,ax as O,ay as V,az as _,aA as q,T as I,ae as L,a3 as D,aO as M,aD as U,aE as z,aF as Q,aG as H,aH as B,aI as G,E as J,ad as W,Q as K}from"./index-XQ_rcKIR.js";import{u as Z}from"./usePagination-1Z845fFX.js";import{P as X,a as Y,b as ee,c as se,d as ae,e as re}from"./pagination-A8ZS9WOG.js";import{D as te}from"./DataTable-D-Xrq3vo.js";import{u as ie,S as le}from"./usePermissions-BzII90Lj.js";import{C as ne}from"./checkbox-CNljS6SN.js";import{g as ce}from"./propertyUtils-41DuwCMc.js";import{V as de}from"./VirtualTourViewer-C0JmyHO5.js";import{I as oe}from"./indian-rupee-DM7WHd-t.js";import{E as me}from"./ellipsis-Bfqht9Dz.js";import{S as pe}from"./square-pen-BWz2oivc.js";import"./vendor-BxThA0WO.js";import"./table-BaUPikoR.js";import"./external-link-CIlWapk1.js";const he=r("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const ue=new class{async makeRequest(e,s={}){const a=t.getToken(),r={headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...s.headers},...s},l=await fetch(`https://app.buildhomemartsquares.com/api/admin${e}`,r);if(i(l),!l.ok){const e=await l.json().catch(()=>({}));throw new Error(e.message||`HTTP error! status: ${l.status}`)}return l.json()}async getProperties(e={}){try{const s=new URLSearchParams;Object.entries(e).forEach(([e,a])=>{null!=a&&""!==a&&s.append(e,String(a))});const a="/properties"+(s.toString()?`?${s.toString()}`:"");return await this.makeRequest(a)}catch(s){const e=s instanceof Error?s.message:"Failed to fetch properties";throw l({title:"Error",description:e,variant:"destructive"}),s}}async approveProperty(e){try{await this.makeRequest(`/properties/${e}/approve`,{method:"POST"}),l({title:"Success",description:"Property approved successfully!"})}catch(s){const e=s instanceof Error?s.message:"Failed to approve property";throw l({title:"Error",description:e,variant:"destructive"}),s}}async rejectProperty(e,s){try{await this.makeRequest(`/properties/${e}/reject`,{method:"POST",body:JSON.stringify({reason:s})}),l({title:"Success",description:"Property rejected successfully!"})}catch(a){const e=a instanceof Error?a.message:"Failed to reject property";throw l({title:"Error",description:e,variant:"destructive"}),a}}async deleteProperty(e){try{await this.makeRequest(`/properties/${e}`,{method:"DELETE"}),l({title:"Success",description:"Property deleted successfully!"})}catch(s){const e=s instanceof Error?s.message:"Failed to delete property";throw l({title:"Error",description:e,variant:"destructive"}),s}}async togglePropertyFeatured(e,s){try{await this.makeRequest(`/properties/${e}/featured`,{method:"PATCH",body:JSON.stringify({featured:s})}),l({title:"Success",description:`Property ${s?"marked as featured":"removed from featured"}!`})}catch(a){const e=a.response?.data||a,s=e.message||a.message||"Failed to update property";throw e.upgradeRequired||e.limitReached?l({title:e.limitReached?"Featured Limit Reached":"Upgrade Required",description:`${s} Visit the Subscription Plans page to upgrade.`,variant:"destructive"}):l({title:"Error",description:s,variant:"destructive"}),a}}getStatusOptions(){return[{label:"Active",value:"active"},{label:"Available",value:"available"},{label:"Pending",value:"pending"},{label:"Sold",value:"sold"},{label:"Rented",value:"rented"},{label:"Rejected",value:"rejected"}]}getStatusColor(e){switch(e.toLowerCase()){case"active":case"available":return"bg-green-500";case"pending":return"bg-yellow-500";case"sold":return"bg-blue-500";case"rented":return"bg-purple-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}getStatusText(e){return{available:"Available",pending:"Pending Review",sold:"Sold",rented:"Rented",rejected:"Rejected"}[e.toLowerCase()]||e.charAt(0).toUpperCase()+e.slice(1)}getPropertyTypeOptions(){return[{label:"Apartment",value:"apartment"},{label:"House",value:"house"},{label:"Villa",value:"villa"},{label:"Plot",value:"plot"},{label:"Commercial",value:"commercial"},{label:"Office",value:"office"}]}},xe=({property:s,open:a,onOpenChange:r})=>{if(!s)return null;return e.jsx(n,{open:a,onOpenChange:r,children:e.jsxs(c,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(d,{children:[e.jsx(o,{className:"text-2xl",children:s.title}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(p,{className:"w-4 h-4"}),s.address.street,", ",s.address.city,", ",s.address.state," - ",s.address.pincode]})})]}),e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(h,{variant:"available"===s.status?"default":"pending"===s.status?"outline":"destructive",children:["Status: ",s.status]}),e.jsx(h,{variant:"secondary",className:"capitalize",children:s.type?s.type.replace("_"," "):"property"}),e.jsxs(h,{variant:"sale"===s.listingType?"default":"outline",children:["For ","sale"===s.listingType?"Sale":"Rent"]}),s.featured&&e.jsx(h,{variant:"default",children:"Featured"}),s.verified&&e.jsx(h,{variant:"default",children:"Verified"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),e.jsx("p",{className:"font-semibold",children:((e,s)=>{const a=new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e);return"rent"===s?`₹${a}/month`:`₹${a}`})(s.price,s.listingType)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Area"}),e.jsx("p",{className:"font-semibold",children:(t=s.area,t?.builtUp?`${t.builtUp} ${t.unit||"sqft"}`:t?.carpet?`${t.carpet} ${t.unit||"sqft"}`:t?.plot?`${t.plot} ${t.unit||"sqft"}`:"N/A")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bedrooms"}),e.jsx("p",{className:"font-semibold",children:s.bedrooms||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bathrooms"}),e.jsx("p",{className:"font-semibold",children:s.bathrooms||"N/A"})]})]})]}),e.jsx(v,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),s.amenities&&s.amenities.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.amenities.map((s,a)=>e.jsx(h,{variant:"outline",className:"capitalize",children:s.replace("_"," ")},a))})]})]}),e.jsx(v,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Owner Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium",children:ce(s.owner)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.owner?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Contact Number"}),e.jsx("p",{className:"font-medium",children:s.owner?.profile?.phone||"N/A"})]})]})]}),s.images&&s.images.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:s.images.map((s,a)=>e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden border",children:[e.jsx("img",{src:s.url,alt:s.caption||`Property ${a+1}`,className:"w-full h-full object-cover"}),s.isPrimary&&e.jsx(h,{className:"absolute top-2 left-2",variant:"default",children:"Primary"})]},a))})]})]}),s.videos&&s.videos.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Videos"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.videos.map((s,a)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden border bg-black",children:s.url.includes("youtube.com")||s.url.includes("youtu.be")?e.jsx("iframe",{src:s.url.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/"),className:"w-full h-full",allowFullScreen:!0,title:s.caption||`Video ${a+1}`}):e.jsx("video",{src:s.url,controls:!0,className:"w-full h-full object-contain",poster:s.thumbnail})}),s.caption&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.caption})]},a))})]})]}),s.virtualTour&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Virtual Tour"}),e.jsx(de,{url:s.virtualTour})]})]}),"rejected"===s.status&&s.rejectionReason&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-red-700 mb-2",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-600",children:s.rejectionReason})]})]})]})]})});var t},je=()=>{const r=s(),{toast:i}=f(),{hasPermission:l}=ie(),[p,u]=a.useState(""),[x,j]=a.useState("all"),[v,ce]=a.useState("all"),[de,oe]=a.useState([0,5e7]),[je,ve]=a.useState([]),[fe,ge]=a.useState(!0),[ye,be]=a.useState(!1),[Ne,we]=a.useState(!1),[Ce,Pe]=a.useState(!1),[ke,Se]=a.useState(!1),[Fe,Re]=a.useState(null),[Ee,Ae]=a.useState(""),[Te,$e]=a.useState(null),[Oe,Ve]=a.useState([]),[_e,qe]=a.useState(!0),[Ie,Le]=a.useState(""),[De,Me]=a.useState({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),[Ue,ze]=a.useState("");a.useEffect(()=>{(async()=>{const e=await t.getCurrentUser(),s=e?.data?.user||e;$e(s),s?.profile&&Le(`${s.profile.firstName||""} ${s.profile.lastName||""}`.trim()),Qe()})();(async()=>{try{qe(!0);const e=(await D.getAllPropertyTypes(!1)).sort((e,s)=>(e.displayOrder||0)-(s.displayOrder||0)).map(e=>({value:e.value,label:e.name}));Ve(e)}catch(e){i({title:"Warning",description:"Failed to load property types from configuration. Using defaults.",variant:"default"}),Ve([{value:"house",label:"House"},{value:"apartment",label:"Apartment"},{value:"land",label:"Land"},{value:"commercial",label:"Commercial"}])}finally{qe(!1)}})()},[]);const Qe=async()=>{try{ge(!0);const e=await ue.getProperties({limit:1e3});e.success&&ve(e.data.properties)}catch(e){i({title:"Error",description:"Failed to load properties",variant:"destructive"})}finally{ge(!1)}},He=a.useMemo(()=>je.filter(e=>{const s=e.title.toLowerCase().includes(p.toLowerCase())||e.address.city.toLowerCase().includes(p.toLowerCase())||e.address.state.toLowerCase().includes(p.toLowerCase()),a="all"===x||e.type===x,r="all"===v||e.status===v,t=e.price>=de[0]&&e.price<=de[1];return s&&a&&r&&t}),[je,p,x,v,de]),{paginatedItems:Be,currentPage:Ge,totalPages:Je,goToPage:We,nextPage:Ke,previousPage:Ze}=Z(He,10),Xe=()=>{Me({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),ze(""),Te?.profile&&Le(`${Te.profile.firstName||""} ${Te.profile.lastName||""}`.trim())},Ye=[{key:"sNo",label:"S.no",render:s=>e.jsx("span",{className:"font-medium",children:s.sNo})},{key:"title",label:"Property Title",render:s=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.address.district?`${s.address.city}, ${s.address.district}, ${s.address.state}`:`${s.address.city}, ${s.address.state}`})]})},{key:"type",label:"Type",render:s=>e.jsx(h,{variant:"secondary",className:"capitalize",children:s.type?s.type.replace("_"," "):"property"})},{key:"listingType",label:"Listing",render:s=>e.jsx(h,{variant:"sale"===s.listingType?"default":"outline",children:"sale"===s.listingType?"For Sale":"For Rent"})},{key:"price",label:"Price",render:s=>e.jsx("span",{className:"font-semibold",children:M.formatPrice(s.price,s.listingType)})},{key:"area",label:"Area",render:s=>e.jsx("span",{children:M.formatArea(s.area)})},{key:"status",label:"Status",render:s=>e.jsx(h,{variant:{available:"default",pending:"outline",rejected:"destructive",sold:"secondary",rented:"secondary"}[s.status]||"secondary",children:s.status})},{key:"featured",label:"Featured",render:s=>e.jsx(h,{variant:s.featured?"default":"secondary",children:s.featured?"Featured":"Regular"})},{key:"actions",label:"Actions",render:s=>{const a=(e=>!!e.owner&&(!(!Te||e.owner._id!==Te.id)||!e.vendor&&"available"===e.status))(s),t="pending"===s.status;return e.jsxs(U,{children:[e.jsx(z,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"sm",children:e.jsx(me,{className:"w-4 h-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(H,{children:"Actions"}),e.jsx(B,{}),l(y.PROPERTIES_VIEW)&&e.jsxs(G,{onClick:()=>(e=>{Re(e),Se(!0)})(s),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"View Details"]}),a&&l(y.PROPERTIES_EDIT)&&e.jsxs(G,{onClick:()=>r(`/admin/properties/edit/${s._id}`),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Edit Property"]}),!a&&t&&l(y.PROPERTIES_APPROVE)&&e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsxs(G,{onClick:()=>(e=>{Re(e),Xe(),Pe(!0)})(s),className:"text-green-600",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Approve & Publish"]}),e.jsxs(G,{onClick:()=>(e=>{Re(e),Xe(),we(!0)})(s),className:"text-red-600",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),"available"===s.status&&l(y.PROPERTIES_EDIT)&&e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsx(G,{onClick:()=>(async e=>{try{await ue.togglePropertyFeatured(e._id,!e.featured),ve(je.map(s=>s._id===e._id?{...s,featured:!s.featured}:s)),i({title:"Success",description:`Property ${e.featured?"removed from":"marked as"} featured`})}catch(s){i({title:"Error",description:"Failed to update featured status",variant:"destructive"})}})(s),children:s.featured?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Remove Featured"]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Mark Featured"]})})]}),l(y.PROPERTIES_DELETE)&&e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsxs(G,{onClick:()=>(e=>{Re(e),be(!0)})(s),className:"text-red-600",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}}];return fe?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(g,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"dashboard-header-responsive",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"dashboard-title-responsive",children:"Property Management"}),e.jsx("p",{className:"text-muted-foreground mt-1 md:mt-2 text-sm md:text-base",children:"Manage property listings and details"})]}),l(y.PROPERTIES_CREATE)&&e.jsxs(b,{onClick:()=>r("/admin/properties/add"),className:"w-full sm:w-auto",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Property"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs(w,{className:"stats-card-responsive",children:[e.jsx(C,{className:"pb-2",children:e.jsx(P,{className:"stats-label-responsive",children:"Total Properties"})}),e.jsx(k,{children:e.jsx("div",{className:"stats-value-responsive",children:je.length})})]}),e.jsxs(w,{className:"stats-card-responsive",children:[e.jsx(C,{className:"pb-2",children:e.jsx(P,{className:"stats-label-responsive",children:"Pending Approval"})}),e.jsx(k,{children:e.jsx("div",{className:"stats-value-responsive text-yellow-600",children:je.filter(e=>"pending"===e.status).length})})]}),e.jsxs(w,{className:"stats-card-responsive",children:[e.jsx(C,{className:"pb-2",children:e.jsx(P,{className:"stats-label-responsive",children:"Available Properties"})}),e.jsx(k,{children:e.jsx("div",{className:"stats-value-responsive text-green-600",children:je.filter(e=>"available"===e.status).length})})]}),e.jsxs(w,{className:"stats-card-responsive",children:[e.jsx(C,{className:"pb-2",children:e.jsx(P,{className:"stats-label-responsive",children:"Featured"})}),e.jsx(k,{children:e.jsx("div",{className:"stats-value-responsive text-blue-600",children:je.filter(e=>e.featured).length})})]})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(P,{className:"text-lg md:text-xl",children:"Property Approvals"}),e.jsxs(S,{className:"text-sm md:text-base",children:[He.length," propert",1!==He.length?"ies":"y"," found"]})]}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 items-end mb-6",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsx(le,{searchTerm:p,onSearchChange:u})}),e.jsxs("div",{className:"flex gap-4 flex-wrap xl:flex-nowrap w-full xl:w-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-28 sm:w-32",children:[e.jsx(F,{className:"text-xs text-muted-foreground mb-1.5 block",children:"Min Price"}),e.jsx(R,{type:"number",value:de[0],onChange:e=>oe([Number(e.target.value),de[1]]),min:0,max:5e7,className:"h-10",placeholder:"Min"})]}),e.jsxs("div",{className:"w-28 sm:w-32",children:[e.jsx(F,{className:"text-xs text-muted-foreground mb-1.5 block",children:"Max Price"}),e.jsx(R,{type:"number",value:de[1],onChange:e=>oe([de[0],Number(e.target.value)]),min:0,max:5e7,className:"h-10",placeholder:"Max"})]})]}),e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(F,{htmlFor:"type-filter",className:"text-xs text-muted-foreground mb-1.5 block",children:"Property Type"}),e.jsxs("select",{id:"type-filter",value:x,onChange:e=>j(e.target.value),className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:_e,children:[e.jsx("option",{value:"all",children:_e?"Loading...":"All Types"}),Oe.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(F,{htmlFor:"status-filter",className:"text-xs text-muted-foreground mb-1.5 block",children:"Property Status"}),e.jsxs("select",{id:"status-filter",value:v,onChange:e=>ce(e.target.value),className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"sold",children:"Sold"}),e.jsx("option",{value:"rented",children:"Rented"}),e.jsx("option",{value:"leased",children:"Leased"})]})]})]})]}),e.jsx("div",{className:"table-responsive-wrapper",children:e.jsx(te,{columns:Ye,data:Be.map((e,s)=>({...e,id:e._id,sNo:10*(Ge-1)+s+1})),hideDefaultActions:!0})}),Je>1&&e.jsx("div",{className:"mt-4 md:mt-6",children:e.jsx(X,{children:e.jsxs(Y,{className:"pagination-responsive",children:[e.jsx(ee,{children:e.jsx(se,{onClick:Ze,className:"pagination-button-responsive "+(1===Ge?"pointer-events-none opacity-50":"cursor-pointer")})}),Array.from({length:Je},(e,s)=>s+1).map(s=>e.jsx(ee,{children:e.jsx(ae,{onClick:()=>We(s),isActive:Ge===s,className:"pagination-button-responsive cursor-pointer",children:s})},s)),e.jsx(ee,{children:e.jsx(re,{onClick:Ke,className:"pagination-button-responsive "+(Ge===Je?"pointer-events-none opacity-50":"cursor-pointer")})})]})})})]})]}),e.jsx(E,{open:ye,onOpenChange:be,children:e.jsxs(A,{children:[e.jsxs(T,{children:[e.jsx($,{children:"Delete Property"}),e.jsxs(O,{children:['Are you sure you want to delete "',Fe?.title,'"? This action cannot be undone.']})]}),e.jsxs(V,{children:[e.jsx(_,{children:"Cancel"}),e.jsx(q,{onClick:async()=>{if(Fe)try{await ue.deleteProperty(Fe._id),ve(je.filter(e=>e._id!==Fe._id)),be(!1),Re(null),i({title:"Success",description:"Property deleted successfully"})}catch(e){i({title:"Error",description:"Failed to delete property",variant:"destructive"})}},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(n,{open:Ce,onOpenChange:Pe,children:e.jsxs(c,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(d,{children:[e.jsx(o,{children:"Approve Property"}),e.jsxs(m,{children:['Complete the verification checklist and provide your approval for "',Fe?.title,'".']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"approver-name",children:"Approver Name *"}),e.jsx(R,{id:"approver-name",placeholder:"Enter your full name",value:Ie,readOnly:!0,className:"mt-1 bg-muted cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"text-base font-semibold",children:"Verification Checklist"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"documents",checked:De.documentsVerified,onCheckedChange:e=>Me({...De,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents",className:"text-sm font-medium cursor-pointer",children:"All required documents are verified"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"location",checked:De.locationVerified,onCheckedChange:e=>Me({...De,locationVerified:e})}),e.jsx("label",{htmlFor:"location",className:"text-sm font-medium cursor-pointer",children:"Property location is verified and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"price",checked:De.priceReasonable,onCheckedChange:e=>Me({...De,priceReasonable:e})}),e.jsx("label",{htmlFor:"price",className:"text-sm font-medium cursor-pointer",children:"Price is reasonable and competitive"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"images",checked:De.imagesQuality,onCheckedChange:e=>Me({...De,imagesQuality:e})}),e.jsx("label",{htmlFor:"images",className:"text-sm font-medium cursor-pointer",children:"Images are of good quality and relevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"description",checked:De.descriptionComplete,onCheckedChange:e=>Me({...De,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description",className:"text-sm font-medium cursor-pointer",children:"Description is complete and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"ownership",checked:De.ownershipConfirmed,onCheckedChange:e=>Me({...De,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership",className:"text-sm font-medium cursor-pointer",children:"Ownership is confirmed and legitimate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"handwritten-comments",children:"Additional Comments"}),e.jsx(I,{id:"handwritten-comments",placeholder:"Type your handwritten comments or notes here...",value:Ue,onChange:e=>ze(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional observations, notes, or special remarks about this property"})]})]}),e.jsxs(L,{children:[e.jsx(b,{variant:"outline",onClick:()=>Pe(!1),children:"Cancel"}),e.jsx(b,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{if(Fe&&Ie.trim())try{await ue.approveProperty(Fe._id),ve(je.map(e=>e._id===Fe._id?{...e,status:"available",verified:!0}:e)),Pe(!1),Re(null),Xe(),i({title:"Success",description:"Property approved and listed successfully!"})}catch(e){i({title:"Error",description:"Failed to approve property",variant:"destructive"})}else i({title:"Error",description:"Approver name is required",variant:"destructive"})},disabled:!Ie.trim(),children:"Approve & Publish Property"})]})]})}),e.jsx(n,{open:Ne,onOpenChange:we,children:e.jsxs(c,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(d,{children:[e.jsx(o,{children:"Reject Property"}),e.jsxs(m,{children:['Complete the form and provide a reason for rejecting "',Fe?.title,'". The vendor will be notified.']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"approver-name-reject",children:"Approver Name *"}),e.jsx(R,{id:"approver-name-reject",placeholder:"Enter your full name",value:Ie,readOnly:!0,className:"mt-1 bg-muted cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"text-base font-semibold",children:"Issues Found (Check applicable items)"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"documents-reject",checked:De.documentsVerified,onCheckedChange:e=>Me({...De,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents-reject",className:"text-sm font-medium cursor-pointer",children:"Documents are incomplete or invalid"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"location-reject",checked:De.locationVerified,onCheckedChange:e=>Me({...De,locationVerified:e})}),e.jsx("label",{htmlFor:"location-reject",className:"text-sm font-medium cursor-pointer",children:"Property location is incorrect or unclear"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"price-reject",checked:De.priceReasonable,onCheckedChange:e=>Me({...De,priceReasonable:e})}),e.jsx("label",{htmlFor:"price-reject",className:"text-sm font-medium cursor-pointer",children:"Price is unreasonable or suspicious"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"images-reject",checked:De.imagesQuality,onCheckedChange:e=>Me({...De,imagesQuality:e})}),e.jsx("label",{htmlFor:"images-reject",className:"text-sm font-medium cursor-pointer",children:"Images are poor quality or irrelevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"description-reject",checked:De.descriptionComplete,onCheckedChange:e=>Me({...De,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description-reject",className:"text-sm font-medium cursor-pointer",children:"Description is incomplete or misleading"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"ownership-reject",checked:De.ownershipConfirmed,onCheckedChange:e=>Me({...De,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership-reject",className:"text-sm font-medium cursor-pointer",children:"Ownership cannot be confirmed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"rejection-reason",children:"Rejection Reason *"}),e.jsx(I,{id:"rejection-reason",placeholder:"Enter the detailed reason for rejection...",value:Ee,onChange:e=>Ae(e.target.value),className:"mt-1",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"handwritten-comments-reject",children:"Additional Comments"}),e.jsx(I,{id:"handwritten-comments-reject",placeholder:"Type your handwritten comments or notes here...",value:Ue,onChange:e=>ze(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional feedback or suggestions for the vendor"})]})]}),e.jsxs(L,{children:[e.jsx(b,{variant:"outline",onClick:()=>we(!1),children:"Cancel"}),e.jsx(b,{variant:"destructive",onClick:async()=>{if(Fe&&Ee.trim()&&Ie.trim())try{await ue.rejectProperty(Fe._id,Ee),ve(je.map(e=>e._id===Fe._id?{...e,status:"rejected"}:e)),we(!1),Re(null),Ae(""),Xe(),i({title:"Property Rejected",description:"Property has been rejected and vendor has been notified."})}catch(e){i({title:"Error",description:"Failed to reject property",variant:"destructive"})}else i({title:"Error",description:"Approver name and rejection reason are required",variant:"destructive"})},disabled:!Ee.trim()||!Ie.trim(),children:"Reject Property"})]})]})}),e.jsx(xe,{property:Fe,open:ke,onOpenChange:Se})]})};export{je as default};
