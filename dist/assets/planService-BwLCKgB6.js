import{y as t,t as e}from"./index-CV77Hym3.js";const r=new class{baseUrl="https://api.buildhomemartsquares.com/api";async makeRequest(e,r={}){const s=`${this.baseUrl}${e}`,a={headers:{"Content-Type":"application/json",...r.headers},...r},n=t.getToken();n&&(a.headers={...a.headers,Authorization:`Bearer ${n}`});try{const t=await fetch(s,a);if(!t.ok){const e=await t.json().catch(()=>({success:!1,message:`HTTP ${t.status}: ${t.statusText}`}));throw new Error(e.message||"An error occurred")}return await t.json()}catch(i){throw i}}async getPlans(t={}){try{const e=new URLSearchParams;Object.entries(t).forEach(([t,r])=>{null!=r&&""!==r&&e.append(t,String(r))});const r="/plans"+(e.toString()?`?${e.toString()}`:"");return await this.makeRequest(r)}catch(r){const t=r instanceof Error?r.message:"Failed to fetch plans";throw e({title:"Error",description:t,variant:"destructive"}),r}}async getPlan(t){try{return await this.makeRequest(`/plans/${t}`)}catch(r){const t=r instanceof Error?r.message:"Failed to fetch plan";throw e({title:"Error",description:t,variant:"destructive"}),r}}async createPlan(t){try{const r=await this.makeRequest("/plans",{method:"POST",body:JSON.stringify(t)});return e({title:"Success",description:"Plan created successfully!"}),r}catch(r){const t=r instanceof Error?r.message:"Failed to create plan";throw e({title:"Error",description:t,variant:"destructive"}),r}}async updatePlan(t,r){try{const s=await this.makeRequest(`/plans/${t}`,{method:"PUT",body:JSON.stringify(r)});return e({title:"Success",description:"Plan updated successfully!"}),s}catch(s){const t=s instanceof Error?s.message:"Failed to update plan";throw e({title:"Error",description:t,variant:"destructive"}),s}}async deletePlan(t){try{await this.makeRequest(`/plans/${t}`,{method:"DELETE"}),e({title:"Success",description:"Plan deleted successfully!"})}catch(r){const t=r instanceof Error?r.message:"Failed to delete plan";throw e({title:"Error",description:t,variant:"destructive"}),r}}async togglePlanStatus(t){try{const r=await this.makeRequest(`/plans/${t}/toggle-status`,{method:"PATCH"});return e({title:"Success",description:"Plan status updated successfully!"}),r}catch(r){const t=r instanceof Error?r.message:"Failed to update plan status";throw e({title:"Error",description:t,variant:"destructive"}),r}}formatPrice(t){const e="INR"===t.currency?"₹":"USD"===t.currency?"$":"€",r="monthly"===t.billingPeriod?"/month":"yearly"===t.billingPeriod?"/year":"";return`${e}${t.price.toLocaleString()}${r}`}getPlanBadgeVariant(t){return t.isActive?"secondary":"destructive"}getFeatureNames(t){return Array.isArray(t)?t.map(t=>"string"==typeof t?t:t.name):[]}formatFeatures(t){const e=this.getFeatureNames(t);return e.length<=3?e.join(", "):`${e.slice(0,2).join(", ")} and ${e.length-2} more`}async getPriceHistory(t){try{return await this.makeRequest(`/plans/${t}/price-history`)}catch(r){const t=r instanceof Error?r.message:"Failed to fetch price history";throw e({title:"Error",description:t,variant:"destructive"}),r}}};export{r as p};
