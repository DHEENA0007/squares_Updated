import{r as e,P as t,U as r,W as n,$ as a,X as l,p as i,j as s}from"./ui-BNZSgpjP.js";import{r as o}from"./router-D8v2YSKU.js";import{D as c,an as u,$ as d,P as f,m,f as p,G as v,n as h,o as g,l as x}from"./index-R8qjqeWQ.js";const b=c("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var y=.999,w=/[\\\/_+.#"@\[\(\{&]/,E=/[\\\/_+.#"@\[\(\{&]/g,N=/[\s-]/,k=/[\s-]/g;function S(e,t,r,n,a,l,i){if(l===t.length)return a===e.length?1:.99;var s=`${a},${l}`;if(void 0!==i[s])return i[s];for(var o,c,u,d,f=n.charAt(l),m=r.indexOf(f,a),p=0;m>=0;)(o=S(e,t,r,n,m+1,l+1,i))>p&&(m===a?o*=1:w.test(e.charAt(m-1))?(o*=.8,(u=e.slice(a,m-1).match(E))&&a>0&&(o*=Math.pow(y,u.length))):N.test(e.charAt(m-1))?(o*=.9,(d=e.slice(a,m-1).match(k))&&a>0&&(o*=Math.pow(y,d.length))):(o*=.17,a>0&&(o*=Math.pow(y,m-a))),e.charAt(m)!==t.charAt(l)&&(o*=.9999)),(o<.1&&r.charAt(m-1)===n.charAt(l+1)||n.charAt(l+1)===n.charAt(l)&&r.charAt(m-1)!==n.charAt(l))&&(.1*(c=S(e,t,r,n,m+1,l+2,i))>o&&(o=.1*c)),o>p&&(p=o),m=r.indexOf(f,m+1);return i[s]=p,p}function j(e){return e.toLowerCase().replace(k," ")}function C(e,t,r){return S(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,j(e),j(t),0,0,{})}var I='[cmdk-group=""]',R='[cmdk-group-items=""]',A='[cmdk-item=""]',M=`${A}:not([aria-disabled="true"])`,P="cmdk-item-select",$="data-value",D=(e,t,r)=>C(e,t,r),L=o.createContext(void 0),F=()=>o.useContext(L),K=o.createContext(void 0),O=()=>o.useContext(K),V=o.createContext(void 0),_=o.forwardRef((r,n)=>{let a=ee(()=>{var e,t;return{search:"",value:null!=(t=null!=(e=r.value)?e:r.defaultValue)?t:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),l=ee(()=>new Set),i=ee(()=>new Map),s=ee(()=>new Map),c=ee(()=>new Set),u=Y(r),{label:d,children:f,value:m,onValueChange:p,filter:v,shouldFilter:h,loop:g,disablePointerSelection:x=!1,vimBindings:b=!0,...y}=r,w=e(),E=e(),N=e(),k=o.useRef(null),S=ne();Z(()=>{if(void 0!==m){let e=m.trim();a.current.value=e,j.emit()}},[m]),Z(()=>{S(6,q)},[]);let j=o.useMemo(()=>({subscribe:e=>(c.current.add(e),()=>c.current.delete(e)),snapshot:()=>a.current,setState:(e,t,r)=>{var n,l,i,s;if(!Object.is(a.current[e],t)){if(a.current[e]=t,"search"===e)_(),O(),S(1,V);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(N);e?e.focus():null==(n=document.getElementById(w))||n.focus()}if(S(7,()=>{var e;a.current.selectedItemId=null==(e=z())?void 0:e.id,j.emit()}),r||S(5,q),void 0!==(null==(l=u.current)?void 0:l.value)){let e=null!=t?t:"";return void(null==(s=(i=u.current).onValueChange)||s.call(i,e))}}j.emit()}},emit:()=>{c.current.forEach(e=>e())}}),[]),C=o.useMemo(()=>({value:(e,t,r)=>{var n;t!==(null==(n=s.current.get(e))?void 0:n.value)&&(s.current.set(e,{value:t,keywords:r}),a.current.filtered.items.set(e,F(t,r)),S(2,()=>{O(),j.emit()}))},item:(e,t)=>(l.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),S(3,()=>{_(),O(),a.current.value||V(),j.emit()}),()=>{s.current.delete(e),l.current.delete(e),a.current.filtered.items.delete(e);let t=z();S(4,()=>{_(),(null==t?void 0:t.getAttribute("id"))===e&&V(),j.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{s.current.delete(e),i.current.delete(e)}),filter:()=>u.current.shouldFilter,label:d||r["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:w,inputId:N,labelId:E,listInnerRef:k}),[]);function F(e,t){var r,n;let l=null!=(n=null==(r=u.current)?void 0:r.filter)?n:D;return e?l(e,a.current.search,t):0}function O(){if(!a.current.search||!1===u.current.shouldFilter)return;let e=a.current.filtered.items,t=[];a.current.filtered.groups.forEach(r=>{let n=i.current.get(r),a=0;n.forEach(t=>{let r=e.get(t);a=Math.max(r,a)}),t.push([r,a])});let r=k.current;G().sort((t,r)=>{var n,a;let l=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(n=e.get(i))?n:0)-(null!=(a=e.get(l))?a:0)}).forEach(e=>{let t=e.closest(R);t?t.appendChild(e.parentElement===t?e:e.closest(`${R} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${R} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=k.current)?void 0:t.querySelector(`${I}[${$}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function V(){let e=G().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute($);j.setState("value",t||void 0)}function _(){var e,t,r,n;if(!a.current.search||!1===u.current.shouldFilter)return void(a.current.filtered.count=l.current.size);a.current.filtered.groups=new Set;let o=0;for(let i of l.current){let l=F(null!=(t=null==(e=s.current.get(i))?void 0:e.value)?t:"",null!=(n=null==(r=s.current.get(i))?void 0:r.keywords)?n:[]);a.current.filtered.items.set(i,l),l>0&&o++}for(let[l,s]of i.current)for(let e of s)if(a.current.filtered.items.get(e)>0){a.current.filtered.groups.add(l);break}a.current.filtered.count=o}function q(){var e,t,r;let n=z();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(I))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function z(){var e;return null==(e=k.current)?void 0:e.querySelector(`${A}[aria-selected="true"]`)}function G(){var e;return Array.from((null==(e=k.current)?void 0:e.querySelectorAll(M))||[])}function U(e){let t=G()[e];t&&j.setState("value",t.getAttribute($))}function B(e){var t;let r=z(),n=G(),a=n.findIndex(e=>e===r),l=n[a+e];null!=(t=u.current)&&t.loop&&(l=a+e<0?n[n.length-1]:a+e===n.length?n[0]:n[a+e]),l&&j.setState("value",l.getAttribute($))}function H(e){let t,r=z(),n=null==r?void 0:r.closest(I);for(;n&&!t;)n=e>0?Q(n,I):T(n,I),t=null==n?void 0:n.querySelector(M);t?j.setState("value",t.getAttribute($)):B(e)}let W=()=>U(G().length-1),X=e=>{e.preventDefault(),e.metaKey?W():e.altKey?H(1):B(1)},J=e=>{e.preventDefault(),e.metaKey?U(0):e.altKey?H(-1):B(-1)};return o.createElement(t.div,{ref:n,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=y.onKeyDown)||t.call(y,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!r)switch(e.key){case"n":case"j":b&&e.ctrlKey&&X(e);break;case"ArrowDown":X(e);break;case"p":case"k":b&&e.ctrlKey&&J(e);break;case"ArrowUp":J(e);break;case"Home":e.preventDefault(),U(0);break;case"End":e.preventDefault(),W();break;case"Enter":{e.preventDefault();let t=z();if(t){let e=new Event(P);t.dispatchEvent(e)}}}}},o.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:le},d),ae(r,e=>o.createElement(K.Provider,{value:j},o.createElement(L.Provider,{value:C},e))))}),q=o.forwardRef((r,n)=>{var a,l;let s=e(),c=o.useRef(null),u=o.useContext(V),d=F(),f=Y(r),m=null!=(l=null==(a=f.current)?void 0:a.forceMount)?l:null==u?void 0:u.forceMount;Z(()=>{if(!m)return d.item(s,null==u?void 0:u.id)},[m]);let p=re(s,c,[r.value,r.children,c],r.keywords),v=O(),h=te(e=>e.value&&e.value===p.current),g=te(e=>!(!m&&!1!==d.filter())||(!e.search||e.filtered.items.get(s)>0));function x(){var e,t;b(),null==(t=(e=f.current).onSelect)||t.call(e,p.current)}function b(){v.setState("value",p.current,!0)}if(o.useEffect(()=>{let e=c.current;if(e&&!r.disabled)return e.addEventListener(P,x),()=>e.removeEventListener(P,x)},[g,r.onSelect,r.disabled]),!g)return null;let{disabled:y,value:w,onSelect:E,forceMount:N,keywords:k,...S}=r;return o.createElement(t.div,{ref:i(c,n),...S,id:s,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!h,"data-disabled":!!y,"data-selected":!!h,onPointerMove:y||d.getDisablePointerSelection()?void 0:b,onClick:y?void 0:x},r.children)}),z=o.forwardRef((r,n)=>{let{heading:a,children:l,forceMount:s,...c}=r,u=e(),d=o.useRef(null),f=o.useRef(null),m=e(),p=F(),v=te(e=>!(!s&&!1!==p.filter())||(!e.search||e.filtered.groups.has(u)));Z(()=>p.group(u),[]),re(u,d,[r.value,r.heading,f]);let h=o.useMemo(()=>({id:u,forceMount:s}),[s]);return o.createElement(t.div,{ref:i(d,n),...c,"cmdk-group":"",role:"presentation",hidden:!v||void 0},a&&o.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:m},a),ae(r,e=>o.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?m:void 0},o.createElement(V.Provider,{value:h},e))))}),G=o.forwardRef((e,r)=>{let{alwaysRender:n,...a}=e,l=o.useRef(null),s=te(e=>!e.search);return n||s?o.createElement(t.div,{ref:i(l,r),...a,"cmdk-separator":"",role:"separator"}):null}),U=o.forwardRef((e,r)=>{let{onValueChange:n,...a}=e,l=null!=e.value,i=O(),s=te(e=>e.search),c=te(e=>e.selectedItemId),u=F();return o.useEffect(()=>{null!=e.value&&i.setState("search",e.value)},[e.value]),o.createElement(t.input,{ref:r,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":c,id:u.inputId,type:"text",value:l?e.value:s,onChange:e=>{l||i.setState("search",e.target.value),null==n||n(e.target.value)}})}),B=o.forwardRef((e,r)=>{let{children:n,label:a="Suggestions",...l}=e,s=o.useRef(null),c=o.useRef(null),u=te(e=>e.selectedItemId),d=F();return o.useEffect(()=>{if(c.current&&s.current){let e,t=c.current,r=s.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),o.createElement(t.div,{ref:i(s,r),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":a,id:d.listId},ae(e,e=>o.createElement("div",{ref:i(c,d.listInnerRef),"cmdk-list-sizer":""},e)))}),H=o.forwardRef((e,t)=>{let{open:i,onOpenChange:s,overlayClassName:c,contentClassName:u,container:d,...f}=e;return o.createElement(r,{open:i,onOpenChange:s},o.createElement(n,{container:d},o.createElement(a,{"cmdk-overlay":"",className:c}),o.createElement(l,{"aria-label":e.label,"cmdk-dialog":"",className:u},o.createElement(_,{ref:t,...f}))))}),W=o.forwardRef((e,r)=>te(e=>0===e.filtered.count)?o.createElement(t.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),X=o.forwardRef((e,r)=>{let{progress:n,children:a,label:l="Loading...",...i}=e;return o.createElement(t.div,{ref:r,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},ae(e,e=>o.createElement("div",{"aria-hidden":!0},e)))}),J=Object.assign(_,{List:B,Item:q,Input:U,Group:z,Separator:G,Dialog:H,Empty:W,Loading:X});function Q(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function T(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function Y(e){let t=o.useRef(e);return Z(()=>{t.current=e}),t}var Z="undefined"==typeof window?o.useEffect:o.useLayoutEffect;function ee(e){let t=o.useRef();return void 0===t.current&&(t.current=e()),t}function te(e){let t=O(),r=()=>e(t.snapshot());return o.useSyncExternalStore(t.subscribe,r,r)}function re(e,t,r,n=[]){let a=o.useRef(),l=F();return Z(()=>{var i;let s=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),o=n.map(e=>e.trim());l.value(e,s,o),null==(i=t.current)||i.setAttribute($,s),a.current=s}),a}var ne=()=>{let[e,t]=o.useState(),r=ee(()=>new Map);return Z(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function ae({asChild:e,children:t},r){return e&&o.isValidElement(t)?o.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var le={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ie=o.forwardRef(({className:e,...t},r)=>s.jsx(J,{ref:r,className:u("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));ie.displayName=J.displayName;const se=o.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(d,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(J.Input,{ref:r,className:u("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));se.displayName=J.Input.displayName;const oe=o.forwardRef(({className:e,...t},r)=>s.jsx(J.List,{ref:r,className:u("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));oe.displayName=J.List.displayName;const ce=o.forwardRef((e,t)=>s.jsx(J.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));ce.displayName=J.Empty.displayName;const ue=o.forwardRef(({className:e,...t},r)=>s.jsx(J.Group,{ref:r,className:u("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));ue.displayName=J.Group.displayName;o.forwardRef(({className:e,...t},r)=>s.jsx(J.Separator,{ref:r,className:u("-mx-1 h-px bg-border",e),...t})).displayName=J.Separator.displayName;const de=o.forwardRef(({className:e,...t},r)=>s.jsx(J.Item,{ref:r,className:u("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));function fe({value:e,onChange:t,state:r,district:n,city:a,placeholder:l="Select pincode...",disabled:i=!1,className:c,error:d}){const[y,w]=o.useState(!1),[E,N]=o.useState([]),[k,S]=o.useState(!1),[j,C]=o.useState(""),[I,R]=o.useState(!1);o.useEffect(()=>{(async()=>{if(x.isReady())R(!0);else{S(!0);try{await x.initialize(),R(!0)}catch(e){}finally{S(!1)}}})()},[]),o.useEffect(()=>{if(!I)return;(()=>{try{const e=x.getPincodeSuggestions(r,n,a,j);N(e)}catch(e){N([])}})()},[r,n,a,j,I]);const A=i||!I||!r&&!n&&!a;return s.jsxs("div",{className:u("relative",c),children:[s.jsxs(f,{open:y,onOpenChange:w,children:[s.jsx(m,{asChild:!0,children:s.jsxs(p,{variant:"outline",role:"combobox","aria-expanded":y,className:u("w-full justify-between",!e&&"text-muted-foreground",d&&"border-red-500"),disabled:A,children:[s.jsx("span",{className:"truncate",children:k?s.jsxs("span",{className:"flex items-center",children:[s.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(()=>{if(!e)return l;const t=E.find(t=>t.pincode===e);return t?`${t.pincode} - ${t.city}`:e})()}),s.jsx(b,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(h,{className:"w-full p-0",align:"start",children:s.jsxs(ie,{children:[s.jsx(se,{placeholder:"Search pincode...",value:j,onValueChange:C}),s.jsx(ce,{children:r||n||a?s.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"No pincodes found"}):s.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"Please select state, district, or city first"})}),s.jsx(ue,{className:"max-h-64 overflow-auto",children:E.map(r=>s.jsxs(de,{value:r.pincode,onSelect:()=>{return t((e=r).pincode,e),w(!1),void C("");var e},children:[s.jsx(g,{className:u("mr-2 h-4 w-4",e===r.pincode?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:r.pincode}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[r.city,", ",r.district,", ",r.state]})]})]},`${r.pincode}-${r.city}`))})]})})]}),d&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:d}),!r&&!n&&!a&&!d&&s.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Select state, district, or city to see available pincodes"})]})}de.displayName=J.Item.displayName;export{b as C,fe as P,ie as a,se as b,ce as c,ue as d,oe as e,de as f};
