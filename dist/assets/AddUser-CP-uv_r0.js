import{j as e}from"./ui-DHQhougw.js";import{u as s,t as r,o as a,e as n,s as t}from"./types-NAzHECuy.js";import{$ as l,I as d,S as i,q as o,r as c,s as m,v as x,E as j,f as h,O as u}from"./index-BElMMwCt.js";import{F as p,a as f,b as v,c as g,d as w,e as b}from"./form-C1MGA6HE.js";import{d as N,r as y}from"./router-Bi51YGN-.js";import{E as C}from"./eye-off-Do1hz3K5.js";import"./vendor-eVk5PToZ.js";const _=a({first_name:t().min(2,"First name must be at least 2 characters"),last_name:t().min(2,"Last name must be at least 2 characters"),email:t().email("Invalid email address"),phone:t().regex(/^[0-9]{10}$/,"Must be 10 digits"),password:t().min(8,"Password must be at least 8 characters"),confirm_password:t(),role:n(["customer","agent","admin","subadmin","superadmin"]),status:n(["active","inactive","suspended","pending"])}).refine(e=>e.password===e.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}),S=()=>{const{toast:a}=l(),n=N(),[t,S]=y.useState(!1),[E,P]=y.useState(!1),A=s({resolver:r(_),defaultValues:{first_name:"",last_name:"",email:"",phone:"",role:"customer",status:"active",password:"",confirm_password:""}});return e.jsxs("div",{className:"max-w-5xl mx-auto mt-16",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New User"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new user account"})]}),e.jsx("div",{className:"bg-card rounded-lg border p-6 md:p-8",children:e.jsx(p,{...A,children:e.jsxs("form",{onSubmit:A.handleSubmit(async e=>{try{const s={email:e.email,password:e.password,profile:{firstName:e.first_name,lastName:e.last_name,phone:e.phone},role:e.role,status:e.status};await u.createUser(s),a({title:"Success",description:"User created successfully."}),n("/admin/users")}catch(s){a({title:"Error",description:"Failed to create user. Please try again.",variant:"destructive"})}}),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(f,{control:A.control,name:"first_name",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{children:"First Name *"}),e.jsx(w,{children:e.jsx(d,{placeholder:"Enter first name",...s})}),e.jsx(b,{})]})}),e.jsx(f,{control:A.control,name:"last_name",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{children:"Last Name *"}),e.jsx(w,{children:e.jsx(d,{placeholder:"Enter last name",...s})}),e.jsx(b,{})]})}),e.jsx(f,{control:A.control,name:"email",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{children:"Email *"}),e.jsx(w,{children:e.jsx(d,{type:"email",placeholder:"Enter email",...s})}),e.jsx(b,{})]})}),e.jsx(f,{control:A.control,name:"phone",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{children:"Phone Number *"}),e.jsx(w,{children:e.jsx(d,{placeholder:"Enter phone number",...s})}),e.jsx(b,{})]})}),e.jsx(f,{control:A.control,name:"role",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{children:"Role *"}),e.jsxs(i,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(w,{children:e.jsx(o,{children:e.jsx(c,{placeholder:"Select role"})})}),e.jsxs(m,{children:[e.jsx(x,{value:"customer",children:"Customer"}),e.jsx(x,{value:"agent",children:"Agent"}),e.jsx(x,{value:"admin",children:"Admin"}),e.jsx(x,{value:"subadmin",children:"Sub Admin"}),e.jsx(x,{value:"superadmin",children:"Super Admin"})]})]}),e.jsx(b,{})]})}),e.jsx(f,{control:A.control,name:"status",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{children:"Status *"}),e.jsxs(i,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(w,{children:e.jsx(o,{children:e.jsx(c,{placeholder:"Select status"})})}),e.jsxs(m,{children:[e.jsx(x,{value:"active",children:"Active"}),e.jsx(x,{value:"inactive",children:"Inactive"}),e.jsx(x,{value:"suspended",children:"Suspended"}),e.jsx(x,{value:"pending",children:"Pending"})]})]}),e.jsx(b,{})]})}),e.jsx(f,{control:A.control,name:"password",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{children:"Password *"}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:t?"text":"password",placeholder:"Enter password",...s}),e.jsx("button",{type:"button",onClick:()=>S(!t),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?e.jsx(C,{className:"h-4 w-4"}):e.jsx(j,{className:"h-4 w-4"})})]})}),e.jsx(b,{})]})}),e.jsx(f,{control:A.control,name:"confirm_password",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{children:"Confirm Password *"}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:E?"text":"password",placeholder:"Re-enter password",...s}),e.jsx("button",{type:"button",onClick:()=>P(!E),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:E?e.jsx(C,{className:"h-4 w-4"}):e.jsx(j,{className:"h-4 w-4"})})]})}),e.jsx(b,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>n("/admin/users"),children:"Cancel"}),e.jsx(h,{type:"submit",children:"Create User"})]})]})})})]})};export{S as default};
