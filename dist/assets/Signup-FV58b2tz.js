import{j as e}from"./ui-CEFKCYQo.js";import{d as s,r as a}from"./router-Bi51YGN-.js";import{N as t,L as r,I as i,E as l,f as n,F as c,t as o,z as d}from"./index-Ds-LUfCl.js";import{I as m,a as h,b as u}from"./input-otp-2iy1Rqq9.js";import{E as x}from"./eye-off-CBqGfRUW.js";import"./vendor-eVk5PToZ.js";const p=()=>e.jsx("div",{className:"w-full h-auto flex items-center justify-center",children:e.jsx("img",{src:"/v2/assets/reg-pg.2zN6ULKb.png",alt:"Signup Illustration",className:"w-full h-auto max-w-4xl"})}),g=()=>{const g=s();a.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[]);const[f,v]=a.useState("form"),[j,N]=a.useState(""),[b,w]=a.useState(!1),[y,P]=a.useState(0),[k,C]=a.useState(!0),[E,S]=a.useState(!1),[T,F]=a.useState(!1),[L,A]=a.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[O,q]=a.useState({checking:!1,available:null,message:""});return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(t,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-12 bg-gradient-to-br from-background to-accent/10",children:e.jsxs("div",{className:"w-full max-w-6xl grid lg:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"w-full h-auto rounded-2xl shadow-2xl bg-gradient-to-br from-blue-50 to-indigo-100 overflow-hidden",children:e.jsx(p,{})})}),e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-card rounded-2xl shadow-xl p-8 border",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Account"}),e.jsx("p",{className:"text-muted-foreground",children:"form"===f?"Sign up to get started with BuildHomeMart":"Enter the OTP sent to your email"})]}),"form"===f?e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(L.firstName?.trim()&&L.lastName?.trim()&&L.email&&L.phone&&L.password&&L.confirmPassword))return void o({title:"Error",description:"Please fill in all fields",variant:"destructive"});if(L.firstName.trim().length<2)return void o({title:"Error",description:"First name must be at least 2 characters",variant:"destructive"});if(L.password!==L.confirmPassword)return void o({title:"Error",description:"Passwords do not match",variant:"destructive"});if(L.password.length<8)return void o({title:"Error",description:"Password must be at least 8 characters",variant:"destructive"});if(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])/.test(L.password))if(/^\d{10}$/.test(L.phone))if(!1!==O.available){w(!0);try{const e=await d.sendOTP(L.email,L.firstName,L.phone);e.success&&(v("otp"),P(e.expiryMinutes||10),window.scrollTo({top:0,left:0,behavior:"smooth"}))}catch(s){}finally{w(!1)}}else o({title:"Error",description:O.message||"Phone number is not available",variant:"destructive"});else o({title:"Error",description:"Please enter a valid 10-digit phone number",variant:"destructive"});else o({title:"Error",description:"Password must contain uppercase, lowercase, number, and special character (!@#$%^&*)",variant:"destructive"})},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"firstName",children:"First Name *"}),e.jsx(i,{id:"firstName",type:"text",placeholder:"First name",value:L.firstName,onChange:e=>A({...L,firstName:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(i,{id:"lastName",type:"text",placeholder:"Last name",value:L.lastName,onChange:e=>A({...L,lastName:e.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",children:"Email *"}),e.jsx(i,{id:"email",type:"email",placeholder:"Enter your email",value:L.email,onChange:e=>A({...L,email:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(i,{id:"phone",type:"tel",placeholder:"10-digit phone number",value:L.phone,onChange:e=>{const s=e.target.value.replace(/\D/g,"").slice(0,10);A({...L,phone:s}),10===s.length?setTimeout(()=>(async e=>{if(10===e.length){q({checking:!0,available:null,message:""});try{const s=await d.checkPhoneAvailability(e);q({checking:!1,available:s.available,message:s.message})}catch(s){q({checking:!1,available:!1,message:"Unable to validate phone number"})}}else q({checking:!1,available:null,message:""})})(s),500):q({checking:!1,available:null,message:""})},required:!0,className:!1===O.available?"border-red-500":!0===O.available?"border-green-500":""}),O.checking&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Checking availability..."}),!1===O.available&&e.jsx("p",{className:"text-xs text-red-500",children:O.message}),!0===O.available&&e.jsx("p",{className:"text-xs text-green-600",children:O.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:"password",type:E?"text":"password",placeholder:"Create a password",value:L.password,onChange:e=>A({...L,password:e.target.value}),required:!0,className:"pr-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>S(!E),children:E?e.jsx(x,{className:"h-4 w-4 text-gray-400"}):e.jsx(l,{className:"h-4 w-4 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be 8+ characters with uppercase, lowercase, number, and special character (!@#$%^&*)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:"confirmPassword",type:T?"text":"password",placeholder:"Re-enter your password",value:L.confirmPassword,onChange:e=>A({...L,confirmPassword:e.target.value}),required:!0,className:"pr-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>F(!T),children:T?e.jsx(x,{className:"h-4 w-4 text-gray-400"}):e.jsx(l,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsx(n,{type:"submit",className:"w-full",size:"lg",disabled:b,children:b?"Creating Account...":"Create Account"}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-primary font-medium hover:underline",children:"Login here"})]})]}):"otp"===f?e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),6===j.length){w(!0);try{(await d.register({email:L.email,password:L.password,firstName:L.firstName,lastName:L.lastName,phone:L.phone,role:"customer",agreeToTerms:!0,otp:j})).success&&(v("success"),window.scrollTo({top:0,left:0,behavior:"smooth"}),o({title:"Registration Successful!",description:"Your account has been created successfully. Redirecting to login..."}),setTimeout(()=>{g("/login")},3e3))}catch(s){N("")}finally{w(!1)}}else o({title:"Error",description:"Please enter the 6-digit OTP",variant:"destructive"})},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"text-center block",children:"Enter 6-Digit OTP"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(m,{maxLength:6,value:j,onChange:e=>N(e),children:e.jsxs(h,{children:[e.jsx(u,{index:0}),e.jsx(u,{index:1}),e.jsx(u,{index:2}),e.jsx(u,{index:3}),e.jsx(u,{index:4}),e.jsx(u,{index:5})]})})}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["OTP sent to ",L.email]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{type:"submit",className:"w-full",size:"lg",disabled:b,children:b?"Verifying...":"Register"}),e.jsx(n,{type:"button",variant:"outline",className:"w-full",onClick:async()=>{try{w(!0),await d.sendOTP(L.email,L.firstName,L.phone),N("")}catch(e){}finally{w(!1)}},disabled:b,children:"Resend OTP"}),e.jsx(n,{type:"button",variant:"ghost",className:"w-full",onClick:()=>v("form"),children:"Back to Form"})]})]}):"success"===f?e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-green-600 mb-2",children:"Account Created Successfully!"}),e.jsx("p",{className:"text-muted-foreground",children:"Your account has been created and email verified. Redirecting to login page..."})]}),e.jsx(n,{onClick:()=>g("/login"),className:"w-full",children:"Continue to Login"})]}):null]})})]})}),e.jsx(c,{})]})};export{g as default};
