import{j as e}from"./ui-CEFKCYQo.js";import{d as s,u as a,r as t,L as r}from"./router-Bi51YGN-.js";import{u as o,t as l,N as n,L as i,I as d,E as c,f as m,F as u}from"./index-Ds-LUfCl.js";import{E as p}from"./eye-off-CBqGfRUW.js";import"./vendor-eVk5PToZ.js";const x=()=>{const x=s(),h=a(),{login:f,logout:g,clearAuthDataAndUser:j}=o(),[v,b]=t.useState(""),[y,N]=t.useState(""),[w,S]=t.useState(!1),[E,P]=t.useState(!1),I=h.state?.from||null;t.useEffect(()=>{h.state?.message&&(l({title:"Portal Access",description:h.state.message,variant:"default"}),x(h.pathname,{replace:!0,state:{}}))},[h.state?.message]);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(n,{}),e.jsx("main",{className:"container mx-auto px-4 py-12",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-center text-muted-foreground mb-8",children:"Sign in to your BuildHomeMart account"}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),v&&y){S(!0);try{if(await f(v,y)){const e=JSON.parse(localStorage.getItem("user")||"{}");if("agent"===e.role)return l({title:"Incorrect Portal",description:"Please login through the Vendor Portal to access your vendor account.",variant:"destructive"}),j(),void setTimeout(()=>{x("/vendor/login")},2e3);if(I)if(I.startsWith("/property/")){const e=I.replace("/property/","");x(`/customer/property/${e}`,{replace:!0})}else x(I,{replace:!0});else"superadmin"===e.role?x("/admin/dashboard"):"subadmin"===e.role?x("/subadmin/dashboard"):"admin"===e.role?x("/admin/dashboard"):x("/customer/dashboard")}}catch(s){}finally{S(!1)}}else l({title:"Validation Error",description:"Please enter both email and password",variant:"destructive"})},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",type:"email",placeholder:"you@example.com",required:!0,value:v,onChange:e=>b(e.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsx(r,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"password",type:E?"text":"password",placeholder:"Enter your password",required:!0,value:y,onChange:e=>N(e.target.value),className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>P(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:E?e.jsx(p,{className:"h-5 w-5"}):e.jsx(c,{className:"h-5 w-5"})})]})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:w,children:w?"Signing In...":"Sign In"})]}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",e.jsx(r,{to:"/signup",className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})}),e.jsx(u,{})]})};export{x as default};
