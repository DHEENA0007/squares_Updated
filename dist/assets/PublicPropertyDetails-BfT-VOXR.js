import{j as e}from"./ui-DHQhougw.js";import{e as s,d as t,r,L as a}from"./router-Bi51YGN-.js";import{u as i,aw as l,t as n,aG as c,f as o,A as d,a as m,e as x,h as p,J as h,aJ as j,B as u,aq as f,b as N,c as g,au as y,av as v,at as b,w,ae as k,x as C,E as $}from"./index-BElMMwCt.js";import{S}from"./separator-CzSSRtfs.js";import{g as L,a as P}from"./propertyUtils-41DuwCMc.js";import{vendorService as T}from"./vendorService-Bueh694j.js";import{E as F}from"./EnterprisePropertyContactDialog-SkHXAxVi.js";import{L as A}from"./log-in-DamO1Ttm.js";import{S as E}from"./share-2-DJbvrUdN.js";import{E as q}from"./external-link-DSwaidzZ.js";import"./vendor-eVk5PToZ.js";import"./reviewsService-B2qbl_eg.js";import"./dollar-sign-B40_qfqk.js";const D=()=>{const{id:D}=s(),B=t(),{isAuthenticated:z}=i(),[V,_]=r.useState(null),[I,U]=r.useState(!0),[M,O]=r.useState(0),[J,G]=r.useState(!1),[H,Q]=r.useState(!1),[R,W]=r.useState(!1),K=r.useCallback(async()=>{if(D)try{U(!0);const s=await l.getProperty(D);if(s.success){if(_(s.data.property),s.data.property.vendor?._id||s.data.property.owner?._id)try{W(!0);const e=s.data.property.vendor?._id||s.data.property.owner?._id,t=await T.isVendorEnterpriseProperty(e);Q(t)}catch(e){Q(!1)}finally{W(!1)}}else n({title:"Error",description:"Property not found",variant:"destructive"}),B("/")}catch(e){n({title:"Error",description:"Failed to load property details",variant:"destructive"}),B("/")}finally{U(!1)}},[D,B]);r.useEffect(()=>{K()},[K]);const X=e=>{n({title:"Login Required",description:`Please login to ${e}`,variant:"default"}),B("/login",{state:{from:`/property/${D}`}})},Y=async()=>{const e=`${window.location.origin}/property/${D}`;if(navigator.share&&V)try{await navigator.share({title:V.title,text:`Check out this property: ${V.title}`,url:e})}catch(s){navigator.clipboard.writeText(e),n({title:"Link copied",description:"Property link has been copied to clipboard"})}else navigator.clipboard.writeText(e),n({title:"Link copied",description:"Property link has been copied to clipboard"})},Z=e=>{if(!e)return"N/A";if("object"==typeof e){if(e.builtUp)return`${e.builtUp} ${e.unit||"sq ft"}`;if(e.plot)return`${e.plot} ${e.unit||"sq ft"}`;if(e.carpet)return`${e.carpet} ${e.unit||"sq ft"}`}return"number"==typeof e?`${e} sq ft`:"N/A"},ee=e=>{const s=e.area;let t=0;return"object"==typeof s&&null!==s?t=s.builtUp||s.carpet||s.plot||0:"number"==typeof s&&(t=s),0===t?0:Math.round(e.price/t)};return I?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading property details..."})]})}):V?e.jsxs("div",{className:"min-h-screen bg-background pt-20 pb-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[!z&&e.jsx(m,{className:"border-primary bg-primary/5",children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Login to unlock all features"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save favorites, send messages, and access more property details"})]})]}),e.jsx(o,{onClick:()=>B("/login",{state:{from:`/property/${D}`}}),children:"Login"})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>B("/"),children:e.jsx(d,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:V.title}),e.jsxs("div",{className:"flex items-center text-muted-foreground mt-1",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:(e=>{const s=e.address;if("string"==typeof s)return s;const t=[];return s.street&&t.push(s.street),s.locationName&&t.push(s.locationName),s.city&&t.push(s.city),s.state&&t.push(s.state),s.pincode&&t.push(s.pincode),t.join(", ")})(V)})]})]})]}),e.jsx("div",{className:"flex gap-2",children:z?e.jsxs(e.Fragment,{children:[e.jsxs(o,{variant:"outline",onClick:()=>B(`/customer/property/${D}`),children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Save to Favorites"]}),e.jsxs(o,{variant:"outline",onClick:Y,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Share"]}),e.jsxs(o,{onClick:()=>B(`/customer/property/${D}`),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Compare"]})]}):e.jsxs(o,{variant:"outline",onClick:Y,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Share"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:`${(e=>{switch(e.toLowerCase()){case"available":return"bg-green-600";case"sold":return"bg-red-600";case"rented":return"bg-blue-600";case"pending":return"bg-yellow-600";default:return"bg-gray-600"}})(V.status)} text-white`,children:V.status}),V.featured&&e.jsxs(u,{variant:"secondary",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),"Featured"]}),V.verified&&e.jsx(u,{className:"bg-green-600 text-white",children:"Verified"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-primary",children:(se=V.price,te=V.listingType,"rent"===te?`₹${se.toLocaleString("en-IN")}/month`:"lease"===te?`₹${se.toLocaleString("en-IN")}/year`:se>=1e7?`₹${(se/1e7).toFixed(1)} Cr`:se>=1e5?`₹${(se/1e5).toFixed(1)} Lac`:`₹${se.toLocaleString("en-IN")}`)}),ee(V)>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["₹",ee(V),"/sq ft"]})]})]}),V.images&&V.images.length>0&&e.jsx(m,{children:e.jsxs(x,{className:"p-0",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-lg overflow-hidden",children:e.jsx("img",{src:"string"==typeof V.images[M]?V.images[M]:V.images[M].url,alt:V.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-property.jpg"}})}),V.images.length>1&&e.jsx("div",{className:"flex gap-2 p-4 overflow-x-auto",children:V.images.map((s,t)=>e.jsx("button",{onClick:()=>O(t),className:"flex-shrink-0 w-20 h-16 rounded-lg overflow-hidden border-2 "+(t===M?"border-primary":"border-transparent"),children:e.jsx("img",{src:"string"==typeof s?s:s.url,alt:`Property image ${t+1}`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-property.jpg"}})},t))})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(m,{children:[e.jsx(N,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(c,{className:"w-5 h-5 mr-2"}),"Property Overview"]})}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[V.bedrooms&&V.bedrooms>0&&e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(y,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:V.bedrooms}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bedrooms"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(v,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:V.bathrooms||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bathrooms"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(b,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:Z(V.area).split(" ")[0]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sq Ft"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(c,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold capitalize",children:V.type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"})]})]}),V.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:V.description})]})]})]}),e.jsxs(m,{children:[e.jsx(N,{children:e.jsx(g,{children:"Property Details"})}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Property Type:"}),e.jsx("span",{className:"font-medium capitalize",children:V.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listing Type:"}),e.jsx("span",{className:"font-medium capitalize",children:V.listingType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bedrooms:"}),e.jsx("span",{className:"font-medium",children:V.bedrooms||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bathrooms:"}),e.jsx("span",{className:"font-medium",children:V.bathrooms||0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Area:"}),e.jsx("span",{className:"font-medium",children:Z(V.area)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"font-medium capitalize",children:V.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listed On:"}),e.jsx("span",{className:"font-medium",children:new Date(V.createdAt).toLocaleDateString()})]})]})]})})]}),V.amenities&&V.amenities.length>0&&e.jsxs(m,{children:[e.jsx(N,{children:e.jsx(g,{children:"Amenities"})}),e.jsx(x,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:V.amenities.map((s,t)=>e.jsxs("div",{className:"flex items-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:s})]},t))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(N,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),"Contact Information"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:L(V.owner)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P(V)})]}),e.jsx(S,{}),e.jsx("div",{className:"space-y-3",children:z?e.jsx(e.Fragment,{children:e.jsxs(o,{className:"w-full",onClick:()=>B(`/customer/property/${D}`),children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"View Full Details"]})}):e.jsxs(e.Fragment,{children:[e.jsxs(o,{className:"w-full",onClick:()=>X("contact the owner"),children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Login to Contact"]}),!R&&H&&e.jsxs(o,{className:"w-full bg-green-600 hover:bg-green-700 text-white",onClick:()=>G(!0),children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"WhatsApp Contact"]})]})})]})]}),e.jsxs(m,{children:[e.jsx(N,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-2"}),"Property Stats"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Views"}),e.jsx("span",{className:"font-semibold",children:V.views||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Listed"}),e.jsxs("span",{className:"font-semibold",children:[Math.floor((Date.now()-new Date(V.createdAt).getTime())/864e5)," days ago"]})]})]})]}),e.jsxs(m,{children:[e.jsx(N,{children:e.jsx(g,{children:"Quick Actions"})}),e.jsxs(x,{className:"space-y-3",children:[V.virtualTour&&e.jsxs(o,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open(V.virtualTour,"_blank"),children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Virtual Tour"]}),z?e.jsxs(e.Fragment,{children:[e.jsxs(o,{variant:"outline",className:"w-full justify-start",onClick:()=>B(`/customer/property/${D}`),children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Add to Favorites"]}),e.jsxs(o,{variant:"outline",className:"w-full justify-start",onClick:()=>B(`/customer/property/${D}`),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Compare Property"]})]}):e.jsxs(o,{variant:"outline",className:"w-full justify-start",onClick:()=>X("save to favorites"),children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Login for More Actions"]}),e.jsxs(o,{variant:"outline",className:"w-full justify-start",onClick:Y,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Share Property"]})]})]})]})]})]}),e.jsx(F,{open:J,onOpenChange:G,property:V})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Property Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The property you're looking for doesn't exist."}),e.jsx(a,{to:"/",children:e.jsxs(o,{children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})});var se,te};export{D as default};
