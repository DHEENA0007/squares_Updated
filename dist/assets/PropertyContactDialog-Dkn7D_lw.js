import{j as e}from"./ui-DYmpZ3pJ.js";import{r as o}from"./router-2SVJvIbS.js";import{D as v,a as y,b as C,c as S,d as k,e as I}from"./dialog-DsX3mE8Q.js";import{x as D,Y as M,I as P,f as n,t as p,w as g,au as E,z as T,l as f,M as N}from"./index-BbgqWuYN.js";import{L as b}from"./label-DRahLfWI.js";import{T as F}from"./textarea-Cl1lQCIh.js";import{M as $}from"./messageService-C1TBUsqx.js";import{g as q,b as z}from"./propertyUtils-B_5yebUt.js";import{S as L}from"./send-cM2_Cj8i.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=D("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),J=({open:h,onOpenChange:r,property:a,onMessageSent:d})=>{const[c,m]=o.useState(`Inquiry about ${a.title}`),[i,s]=o.useState(""),[l,x]=o.useState(!1),u=async()=>{if(!i.trim()){p({title:"Error",description:"Please enter a message",variant:"destructive"});return}try{x(!0),await $.sendPropertyInquiry(a._id,c.trim(),i.trim()),p({title:"Success",description:"Your message has been sent successfully!"}),s(""),m(`Inquiry about ${a.title}`),d&&d(),r(!1)}catch(t){console.error("Failed to send message:",t)}finally{x(!1)}},j=()=>a.vendor?.name?a.vendor.name:q(a.owner);return e.jsx(v,{open:h,onOpenChange:r,children:e.jsxs(y,{className:"sm:max-w-[525px]",children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Send Message"]}),e.jsxs(k,{children:["Send a message to ",j()," about this property"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:a.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.address.city,", ",a.address.state]}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-1",children:["₹",a.price.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"subject",children:"Subject"}),e.jsx(P,{id:"subject",value:c,onChange:t=>m(t.target.value),placeholder:"Enter subject"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"message",children:"Message"}),e.jsx(F,{id:"message",value:i,onChange:t=>s(t.target.value),placeholder:"Type your message here...",rows:6,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Introduce yourself and let the owner know what you're looking for"})]})]}),e.jsxs(I,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:l,children:"Cancel"}),e.jsx(n,{type:"button",onClick:u,disabled:l||!i.trim(),children:l?e.jsx(e.Fragment,{children:"Sending..."}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})]})})},K=({open:h,onOpenChange:r,property:a})=>{const[d,c]=o.useState(!1),[m,i]=o.useState(!1),s=z(a),l=(j,t)=>{navigator.clipboard.writeText(j).then(()=>{t==="phone"?(c(!0),setTimeout(()=>c(!1),2e3)):(i(!0),setTimeout(()=>i(!1),2e3)),p({title:"Copied!",description:`${t==="phone"?"Phone number":"Email"} copied to clipboard`})})},x=()=>{s.phone&&s.phone!=="Not available"&&(window.location.href=`tel:${s.phone}`)},u=()=>{s.email&&s.email!=="Not available"&&(window.location.href=`mailto:${s.email}?subject=Inquiry about ${a.title}`)};return e.jsx(v,{open:h,onOpenChange:r,children:e.jsxs(y,{className:"sm:max-w-[425px]",children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Contact Information"]}),e.jsx(k,{children:"Get in touch with the property owner"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:a.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.address.city,", ",a.address.state]}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-1",children:["₹",a.price.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.type==="Vendor"?e.jsx(E,{className:"w-5 h-5 text-primary"}):e.jsx(T,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.type})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(g,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium truncate",children:s.phone})]}),s.phone!=="Not available"&&e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>l(s.phone,"phone"),children:d?e.jsx(f,{className:"w-4 h-4 text-green-600"}):e.jsx(w,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(N,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm font-medium truncate",children:s.email})]}),s.email!=="Not available"&&e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>l(s.email,"email"),children:m?e.jsx(f,{className:"w-4 h-4 text-green-600"}):e.jsx(w,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsxs(n,{variant:"outline",onClick:x,disabled:s.phone==="Not available",className:"w-full",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Call Now"]}),e.jsxs(n,{variant:"outline",onClick:u,disabled:s.email==="Not available",className:"w-full",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Send Email"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Contact during business hours for the best response"})]})]})})};export{J as P,K as a};
