import{j as e}from"./ui-BHyUY8Z8.js";import{r as x}from"./router-2SVJvIbS.js";import{W as U,s as A,v as L,w as V,x as P,y as N,f as m,a as t,b as l,c as i,r as M,e as a,U as y,E as $,a9 as b,$ as O,a0 as B,a1 as h,am as p,d as j,T as w,aD as I}from"./index-Bd1eLXM_.js";import{D as u}from"./download-CP-CumYq.js";import"./vendor-Dazix4UH.js";const H=()=>{const[s,S]=x.useState(null),[T,g]=x.useState(!0),[R,C]=x.useState("overview"),[f,k]=x.useState("30days"),{toast:n}=U();x.useEffect(()=>{E()},[f]);const E=async()=>{try{g(!0);const r=await fetch(`/api/subadmin/reports?range=${f}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(r.ok){const d=await r.json();S(d.data)}else n({title:"Error",description:"Failed to fetch report data",variant:"destructive"})}catch{n({title:"Error",description:"Error fetching report data",variant:"destructive"})}finally{g(!1)}},c=async r=>{try{n({title:"Exporting",description:`Generating ${r} report...`});const d=await fetch(`/api/subadmin/reports/export?type=${r}&range=${f}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(d.ok){const D=await d.blob(),v=window.URL.createObjectURL(D),o=document.createElement("a");o.href=v,o.download=`${r}_report_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(v),document.body.removeChild(o),n({title:"Success",description:"Report exported successfully"})}else n({title:"Error",description:"Failed to export report",variant:"destructive"})}catch{n({title:"Error",description:"Error exporting report",variant:"destructive"})}};return T||!s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Reports"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Analytics and insights dashboard"})]}),e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4].map(r=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"},r))})]}):e.jsxs("div",{className:"p-6 space-y-6 mt-16",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Reports"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Analytics and insights dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(A,{value:f,onValueChange:k,children:[e.jsx(L,{className:"w-[180px]",children:e.jsx(V,{})}),e.jsxs(P,{children:[e.jsx(N,{value:"7days",children:"Last 7 Days"}),e.jsx(N,{value:"30days",children:"Last 30 Days"}),e.jsx(N,{value:"90days",children:"Last 90 Days"}),e.jsx(N,{value:"1year",children:"Last Year"})]})]}),e.jsxs(m,{variant:"outline",onClick:()=>c("full"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(t,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.propertyStats.total}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"text-xs text-green-600",children:[s.propertyStats.active," Active"]}),e.jsxs("div",{className:"text-xs text-yellow-600",children:[s.propertyStats.pending," Pending"]}),e.jsxs("div",{className:"text-xs text-red-600",children:[s.propertyStats.rejected," Rejected"]})]})]})]}),e.jsxs(t,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.userStats.totalVendors+s.userStats.totalCustomers}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"text-xs text-blue-600",children:[s.userStats.totalVendors," Vendors"]}),e.jsxs("div",{className:"text-xs text-purple-600",children:[s.userStats.totalCustomers," Customers"]})]})]})]}),e.jsxs(t,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Views"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.engagementStats.totalViews.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Property page views"})]})]}),e.jsxs(t,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Support Tickets"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.supportStats.totalTickets}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"text-xs text-orange-600",children:[s.supportStats.openTickets," Open"]}),e.jsxs("div",{className:"text-xs text-green-600",children:[s.supportStats.resolvedTickets," Resolved"]})]})]})]})]}),e.jsxs(O,{value:R,onValueChange:C,children:[e.jsxs(B,{children:[e.jsx(h,{value:"overview",children:"Overview"}),e.jsx(h,{value:"properties",children:"Properties"}),e.jsx(h,{value:"users",children:"Users"}),e.jsx(h,{value:"engagement",children:"Engagement"}),e.jsx(h,{value:"support",children:"Support"})]}),e.jsxs(p,{value:"overview",className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Property Distribution"}),e.jsx(j,{children:"Breakdown of property statuses"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Active Properties"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[s.propertyStats.active," (",Math.round(s.propertyStats.active/s.propertyStats.total*100),"%)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Pending Review"}),e.jsxs("span",{className:"text-sm font-semibold text-yellow-600",children:[s.propertyStats.pending," (",Math.round(s.propertyStats.pending/s.propertyStats.total*100),"%)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Rejected"}),e.jsxs("span",{className:"text-sm font-semibold text-red-600",children:[s.propertyStats.rejected," (",Math.round(s.propertyStats.rejected/s.propertyStats.total*100),"%)"]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"User Growth"}),e.jsx(j,{children:"User registration statistics"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Active Users"}),e.jsx("span",{className:"text-sm font-semibold",children:s.userStats.activeUsers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"New Users This Month"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:s.userStats.newUsersThisMonth})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Vendors"}),e.jsx("span",{className:"text-sm font-semibold",children:s.userStats.totalVendors})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Customers"}),e.jsx("span",{className:"text-sm font-semibold",children:s.userStats.totalCustomers})]})]})})]}),e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Engagement Metrics"}),e.jsx(j,{children:"User interaction statistics"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Views"}),e.jsx("span",{className:"text-sm font-semibold",children:s.engagementStats.totalViews.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Messages"}),e.jsx("span",{className:"text-sm font-semibold",children:s.engagementStats.totalMessages.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Reviews"}),e.jsx("span",{className:"text-sm font-semibold",children:s.engagementStats.totalReviews.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Rating"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.engagementStats.averageRating.toFixed(1)," / 5.0"]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Support Performance"}),e.jsx(j,{children:"Customer support metrics"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Tickets"}),e.jsx("span",{className:"text-sm font-semibold",children:s.supportStats.totalTickets})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Open Tickets"}),e.jsx("span",{className:"text-sm font-semibold text-orange-600",children:s.supportStats.openTickets})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resolved Tickets"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:s.supportStats.resolvedTickets})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Avg Resolution Time"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.supportStats.avgResolutionTime,"h"]})]})]})})]})]}),e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Export Options"}),e.jsx(j,{children:"Download detailed reports"})]}),e.jsxs(a,{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",onClick:()=>c("properties"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Properties Report"]}),e.jsxs(m,{variant:"outline",onClick:()=>c("users"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Users Report"]}),e.jsxs(m,{variant:"outline",onClick:()=>c("engagement"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Engagement Report"]}),e.jsxs(m,{variant:"outline",onClick:()=>c("support"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Support Report"]})]})]})]}),e.jsx(p,{value:"properties",className:"space-y-4 mt-6",children:e.jsx(t,{children:e.jsxs(a,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(I,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Detailed Property Analytics"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Comprehensive property statistics and charts will be displayed here"})]})})}),e.jsx(p,{value:"users",className:"space-y-4 mt-6",children:e.jsx(t,{children:e.jsxs(a,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(y,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Detailed User Analytics"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Comprehensive user statistics and charts will be displayed here"})]})})}),e.jsx(p,{value:"engagement",className:"space-y-4 mt-6",children:e.jsx(t,{children:e.jsxs(a,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Detailed Engagement Analytics"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Comprehensive engagement statistics and charts will be displayed here"})]})})}),e.jsx(p,{value:"support",className:"space-y-4 mt-6",children:e.jsx(t,{children:e.jsxs(a,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(b,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Detailed Support Analytics"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Comprehensive support statistics and charts will be displayed here"})]})})})]})]})};export{H as default};
