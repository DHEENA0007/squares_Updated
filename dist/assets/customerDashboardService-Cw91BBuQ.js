import{y as e}from"./index-CV77Hym3.js";const t=new class{baseUrl="https://api.buildhomemartsquares.com/api";async makeRequest(t,r={}){const a=`${this.baseUrl}${t}`,s={headers:{"Content-Type":"application/json",...r.headers},...r},i=e.getToken();i&&(s.headers={...s.headers,Authorization:`Bearer ${i}`});try{const e=await fetch(a,s);if(!e.ok){const t=await e.json().catch(()=>({success:!1,message:`HTTP ${e.status}: ${e.statusText}`}));throw new Error(t.message||"An error occurred")}return await e.json()}catch(o){throw o}}async getCustomerDashboardData(){try{return await this.makeRequest("/customer/dashboard")}catch(e){return{success:!0,data:{stats:{propertiesViewed:0,propertiesViewedChange:"+0 this week",savedFavorites:0,savedFavoritesChange:"+0 new",activeInquiries:0,activeInquiriesChange:"0 pending response",myProperties:0,myPropertiesChange:"0 active listing"},recentActivities:[],recommendedProperties:[],quickStats:{favoritesCount:0,messagesCount:0,propertiesCount:0,unreadMessages:0}}}}}async getCustomerStats(){try{const e=await this.makeRequest("/dashboard/customer/stats");if(e.success&&e.data)return e.data;throw new Error("Failed to fetch customer stats")}catch(e){return{propertiesViewed:0,propertiesViewedChange:"+0 this week",savedFavorites:0,savedFavoritesChange:"+0 new",activeInquiries:0,activeInquiriesChange:"0 pending response",myProperties:0,myPropertiesChange:"0 active listing"}}}async getRecentActivities(){try{const e=await this.makeRequest("/customer/activities");if(e.success&&e.data)return e.data;throw new Error("Failed to fetch recent activities")}catch(e){return[]}}async getRecommendedProperties(e=6){try{const t=await this.makeRequest(`/customer/recommended-properties?limit=${e}`);if(t.success&&t.data)return t.data;throw new Error("Failed to fetch recommended properties")}catch(t){return[]}}async getQuickStats(){try{const e=await this.makeRequest("/customer/quick-stats");if(e.success&&e.data)return e.data;throw new Error("Failed to fetch quick stats")}catch(e){return{favoritesCount:0,messagesCount:0,propertiesCount:0,unreadMessages:0}}}formatPrice(e,t){return"rent"===t?`₹${e.toLocaleString("en-IN")}/month`:"lease"===t?`₹${e.toLocaleString("en-IN")}/year`:e>=1e7?`₹${(e/1e7).toFixed(1)} Cr`:e>=1e5?`₹${(e/1e5).toFixed(1)} Lac`:`₹${e.toLocaleString("en-IN")}`}formatTimeAgo(e){const t=new Date(e),r=(new Date).getTime()-t.getTime(),a=Math.floor(r/6e4),s=Math.floor(a/60),i=Math.floor(s/24);return a<1?"Just now":a<60?`${a} min ago`:s<24?`${s} hour${s>1?"s":""} ago`:i<7?`${i} day${i>1?"s":""} ago`:t.toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}getActivityIcon(e){return{favorite:"Heart",inquiry:"MessageSquare",search:"Search",property_posted:"Home",property_updated:"Edit"}[e]||"Activity"}getDaysRemaining(e){const t=new Date(e),r=new Date,a=t.getTime()-r.getTime();return Math.max(0,Math.ceil(a/864e5))}async trackPropertyView(e){try{await this.makeRequest("/dashboard/customer/track-view",{method:"POST",body:JSON.stringify({propertyId:e})})}catch(t){}}async trackSearchActivity(e,t){try{await this.makeRequest("/dashboard/customer/track-search",{method:"POST",body:JSON.stringify({searchQuery:e,filters:t})})}catch(r){}}};export{t as c};
