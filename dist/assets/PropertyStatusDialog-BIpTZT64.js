import{j as e}from"./ui-DYmpZ3pJ.js";import{r as o,R as S}from"./router-2SVJvIbS.js";import{D as p,a as N,b as w,c as D,d as R,e as C}from"./dialog-DsX3mE8Q.js";import{B as u,p as F,q as P,r as U,s as T,v as B,f as v}from"./index-BbgqWuYN.js";import{L as r}from"./label-DRahLfWI.js";import{T as E}from"./textarea-Cl1lQCIh.js";const q=({property:a,open:i,onOpenChange:c,onUpdateStatus:f})=>{const[l,m]=o.useState(""),[x,h]=o.useState(""),[g,j]=o.useState(!1),n=[{value:"available",label:"Available",color:"bg-green-500"},{value:"active",label:"Active",color:"bg-green-500"},{value:"sold",label:"Sold",color:"bg-blue-500"},{value:"rented",label:"Rented",color:"bg-purple-500"},{value:"pending",label:"Under Review",color:"bg-yellow-500"},{value:"rejected",label:"Rejected",color:"bg-red-500"}];S.useEffect(()=>{a&&i&&(m(a.status),h(""))},[a,i]);const b=async()=>{if(!(!a||!l)){j(!0);try{await f(a._id,l,x.trim()||void 0),c(!1)}catch(s){console.error("Failed to update status:",s)}finally{j(!1)}}},t=n.find(s=>s.value===a?.status),d=n.find(s=>s.value===l);return e.jsx(p,{open:i,onOpenChange:c,children:e.jsxs(N,{className:"sm:max-w-[425px]",children:[e.jsxs(w,{children:[e.jsx(D,{children:"Update Property Status"}),e.jsxs(R,{children:['Change the status of "',a?.title,'"']})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"current-status",className:"text-right",children:"Current Status"}),e.jsx("div",{className:"col-span-3",children:t&&e.jsx(u,{className:`${t.color} text-white`,children:t.label})})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"new-status",className:"text-right",children:"New Status"}),e.jsx("div",{className:"col-span-3",children:e.jsxs(F,{value:l,onValueChange:m,children:[e.jsx(P,{children:e.jsx(U,{placeholder:"Select new status"})}),e.jsx(T,{children:n.map(s=>e.jsx(B,{value:s.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.color}`}),s.label]})},s.value))})]})})]}),e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx(r,{htmlFor:"reason",className:"text-right mt-2",children:"Reason"}),e.jsx("div",{className:"col-span-3",children:e.jsx(E,{id:"reason",placeholder:"Optional: Provide a reason for status change...",value:x,onChange:s=>h(s.target.value),rows:3})})]}),l&&l!==a?.status&&e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{className:"text-right",children:"Preview"}),e.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[t&&e.jsx(u,{variant:"outline",children:t.label}),e.jsx("span",{className:"text-muted-foreground",children:"â†’"}),d&&e.jsx(u,{className:`${d.color} text-white`,children:d.label})]})]})]}),e.jsxs(C,{children:[e.jsx(v,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(v,{onClick:b,disabled:g||!l||l===a?.status,children:g?"Updating...":"Update Status"})]})]})})};export{q as P};
