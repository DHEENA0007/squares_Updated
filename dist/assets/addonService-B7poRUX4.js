import{t as n}from"./index-CiYV0Sy0.js";const d="https://squares-9d84.onrender.com/api";class i{async makeRequest(a,e={}){const r=`${d}${a}`,s={headers:{"Content-Type":"application/json",...e.headers},...e},o=localStorage.getItem("token");o&&(s.headers={...s.headers,Authorization:`Bearer ${o}`});try{const t=await fetch(r,s);if(!t.ok){const c=await t.json().catch(()=>({success:!1,message:`HTTP ${t.status}: ${t.statusText}`}));throw new Error(c.message||"An error occurred")}return await t.json()}catch(t){throw console.error("Addon API request failed:",t),t}}async getAddons(a){try{const e=new URLSearchParams;a&&e.append("category",a);const r=`/addons${e.toString()?"?"+e.toString():""}`,s=await this.makeRequest(r);if(s.success&&s.data)return s.data.addons;throw new Error("Failed to fetch addons")}catch(e){const r=e instanceof Error?e.message:"Failed to fetch addons";throw n({title:"Error",description:r,variant:"destructive"}),e}}async getAddonById(a){try{const e=await this.makeRequest(`/addons/${a}`);if(e.success&&e.data)return e.data;throw new Error("Failed to fetch addon")}catch(e){const r=e instanceof Error?e.message:"Failed to fetch addon";throw n({title:"Error",description:r,variant:"destructive"}),e}}}const f=new i;export{f as a};
