import{j as e}from"./ui-BHyUY8Z8.js";import{u as _,t as P,o as A,e as p,s as i}from"./types-Cl7zAayM.js";import{W as I,I as d,s as f,v,w,x as g,y as a,E as b,f as N}from"./index-Bd1eLXM_.js";import{F as V,a as t,b as n,c as l,d as o,e as c}from"./form-ClDLNePD.js";import{d as T,r as y}from"./router-2SVJvIbS.js";import{u as U}from"./userService-CKE-Zb2D.js";import{E as S}from"./eye-off-pZLnB8vP.js";import"./vendor-Dazix4UH.js";const k=A({first_name:i().min(2,"First name must be at least 2 characters"),last_name:i().min(2,"Last name must be at least 2 characters"),email:i().email("Invalid email address"),phone:i().regex(/^[0-9]{10}$/,"Must be 10 digits"),password:i().min(8,"Password must be at least 8 characters"),confirm_password:i(),role:p(["customer","agent","admin","subadmin","superadmin"]),status:p(["active","inactive","suspended","pending"])}).refine(m=>m.password===m.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}),q=()=>{const{toast:m}=I(),j=T(),[x,C]=y.useState(!1),[u,E]=y.useState(!1),r=_({resolver:P(k),defaultValues:{first_name:"",last_name:"",email:"",phone:"",role:"customer",status:"active",password:"",confirm_password:""}}),F=async s=>{try{const h={email:s.email,password:s.password,profile:{firstName:s.first_name,lastName:s.last_name,phone:s.phone},role:s.role,status:s.status};await U.createUser(h),m({title:"Success",description:"User created successfully."}),j("/admin/users")}catch(h){console.error("Failed to create user:",h),m({title:"Error",description:"Failed to create user. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"max-w-5xl mx-auto mt-16",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New User"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new user account"})]}),e.jsx("div",{className:"bg-card rounded-lg border p-6 md:p-8",children:e.jsx(V,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(F),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{control:r.control,name:"first_name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"First Name *"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter first name",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"last_name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Last Name *"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter last name",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"email",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Email *"}),e.jsx(o,{children:e.jsx(d,{type:"email",placeholder:"Enter email",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Phone Number *"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter phone number",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"role",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Role *"}),e.jsxs(f,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(v,{children:e.jsx(w,{placeholder:"Select role"})})}),e.jsxs(g,{children:[e.jsx(a,{value:"customer",children:"Customer"}),e.jsx(a,{value:"agent",children:"Agent"}),e.jsx(a,{value:"admin",children:"Admin"}),e.jsx(a,{value:"subadmin",children:"Sub Admin"}),e.jsx(a,{value:"superadmin",children:"Super Admin"})]})]}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"status",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Status *"}),e.jsxs(f,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(v,{children:e.jsx(w,{placeholder:"Select status"})})}),e.jsxs(g,{children:[e.jsx(a,{value:"active",children:"Active"}),e.jsx(a,{value:"inactive",children:"Inactive"}),e.jsx(a,{value:"suspended",children:"Suspended"}),e.jsx(a,{value:"pending",children:"Pending"})]})]}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"password",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Password *"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:x?"text":"password",placeholder:"Enter password",...s}),e.jsx("button",{type:"button",onClick:()=>C(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:x?e.jsx(S,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"confirm_password",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Confirm Password *"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:u?"text":"password",placeholder:"Re-enter password",...s}),e.jsx("button",{type:"button",onClick:()=>E(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:u?e.jsx(S,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>j("/admin/users"),children:"Cancel"}),e.jsx(N,{type:"submit",children:"Create User"})]})]})})})]})};export{q as default};
