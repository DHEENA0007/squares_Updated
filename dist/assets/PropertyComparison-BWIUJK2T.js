import{j as e}from"./ui-DHQhougw.js";import{r as s,d as t,h as a,L as r}from"./router-Bi51YGN-.js";import{t as l,ax as i,D as c,G as n,J as d,K as o,O as m,a4 as x,a5 as p,a6 as h,z as u,x as j,ak as f,s as g,I as N,a as v,e as b,j as y,av as w,aw as k,au as C,B as S,a2 as $,aB as _,f as P,aJ as A,Y as z,H as L,Q as F,b as T,c as E,a0 as I,P as B,p as M}from"./index-B494FSRu.js";import{i as R,c as U,g as O}from"./propertyUtils-41DuwCMc.js";import{S as Y}from"./scroll-area-CnOgGps6.js";import{f as H}from"./favoriteService-D1neprGz.js";import{R as V}from"./refresh-cw-CG5q2i5F.js";import{S as W}from"./share-CT0I1v9g.js";import"./vendor-eVk5PToZ.js";const D=({open:t,onOpenChange:a,onPropertySelect:r,selectedPropertyIds:v,maxSelections:b=10})=>{const[y,w]=s.useState([]),[k,C]=s.useState([]),[S,$]=s.useState(!1),[_,P]=s.useState(!1),[A,z]=s.useState(null),[L,F]=s.useState(""),[T,E]=s.useState("favorites"),[I,B]=s.useState(null);s.useEffect(()=>{t&&"favorites"===T&&0===y.length&&M()},[t,T]),s.useEffect(()=>{if(!t||"search"!==T)return;if(I&&clearTimeout(I),L.trim().length<2)return void C([]);const e=setTimeout(()=>{R(L)},500);return B(e),()=>{e&&clearTimeout(e)}},[L,T,t]),s.useEffect(()=>{t||(F(""),z(null),C([]))},[t]);const M=async()=>{try{$(!0);const e=await H.getFavorites({limit:100});e.success&&w(e.data.favorites)}catch(e){l({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{$(!1)}},R=async e=>{try{P(!0);const s=await i.getProperties({search:e,page:1,limit:50});s.success&&C(s.data.properties)}catch(s){l({title:"Error",description:"Failed to search properties",variant:"destructive"})}finally{P(!1)}},U=s.useCallback(async e=>{if(!A)if(v.includes(e))l({title:"Already Selected",description:"This property is already in your comparison",variant:"destructive"});else if(v.length>=b)l({title:"Maximum Selections Reached",description:`You can only compare up to ${b} properties`,variant:"destructive"});else try{z(e),await r(e),a(!1)}catch(s){}finally{z(null)}},[A,v,b,r,a]),O=s.useMemo(()=>y.filter(e=>e.property&&!v.includes(e.property._id)),[y,v]),V=s.useMemo(()=>k.filter(e=>!v.includes(e._id)),[k,v]);return e.jsx(c,{open:t,onOpenChange:a,children:e.jsxs(n,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(d,{children:[e.jsx(o,{children:"Select Property to Compare"}),e.jsxs(m,{children:["Click on a property to add it to your comparison. You can select up to ",b," properties. (",v.length,"/",b," selected)"]})]}),e.jsxs(x,{value:T,onValueChange:E,children:[e.jsxs(p,{className:"grid w-full grid-cols-2",children:[e.jsxs(h,{value:"favorites",className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Favorites (",O.length,")"]}),e.jsxs(h,{value:"search",className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Search Properties"]})]}),e.jsx(f,{value:"favorites",className:"mt-4",children:e.jsx(Y,{className:"h-[500px] pr-4",children:S?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(g,{className:"w-8 h-8 animate-spin text-primary"})}):0===O.length?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(u,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Available Favorites"}),e.jsx("p",{className:"text-sm",children:0===y.length?"You haven't favorited any properties yet":"All your favorite properties are already in the comparison"})]}):e.jsx("div",{className:"space-y-3",children:O.map(s=>e.jsx(K,{property:s.property,isAdding:A===s.property._id,onClick:()=>U(s.property._id)},s._id))})})}),e.jsxs(f,{value:"search",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(N,{placeholder:"Search by property name, location, or area...",value:L,onChange:e=>F(e.target.value),className:"pl-10"})]}),e.jsx(Y,{className:"h-[450px] pr-4",children:_?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(g,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Searching properties..."})]}):L.trim().length<2?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Properties"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Enter at least 2 characters to search"})]}):0===V.length?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(j,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-sm",children:"No available properties match your search criteria"})]}):e.jsx("div",{className:"space-y-3",children:V.map(s=>e.jsx(K,{property:s,isAdding:A===s._id,onClick:()=>U(s._id)},s._id))})})]})]})]})})},K=s.memo(({property:s,isAdding:t,onClick:a})=>{return e.jsx(v,{className:"cursor-pointer transition-all hover:shadow-md "+(t?"opacity-50":""),onClick:t?void 0:a,children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:(e=>{const s=e.find(e=>e.isPrimary);return s?.url||e[0]?.url||"/placeholder-property.jpg"})(s.images),alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-property.jpg"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(y,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[s.address.city,", ",s.address.state]})]}),e.jsx("div",{className:"text-primary font-semibold text-sm mb-2",children:(l=s.price,i=s.listingType,"rent"===i?`₹${l.toLocaleString("en-IN")}/month`:"lease"===i?`₹${l.toLocaleString("en-IN")}/year`:l>=1e7?`₹${(l/1e7).toFixed(1)} Cr`:l>=1e5?`₹${(l/1e5).toFixed(1)} Lac`:`₹${l.toLocaleString("en-IN")}`)}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:s.bedrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"}),e.jsx("span",{children:s.bathrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),e.jsx("span",{children:(r=s.area,r.builtUp?`${r.builtUp} ${r.unit}`:r.plot?`${r.plot} ${r.unit}`:r.carpet?`${r.carpet} ${r.unit}`:"N/A")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"outline",className:"text-xs",children:s.type}),e.jsx(S,{variant:"outline",className:"text-xs capitalize",children:s.listingType}),t&&e.jsxs(S,{variant:"secondary",className:"text-xs",children:[e.jsx(g,{className:"w-3 h-3 mr-1 animate-spin"}),"Adding..."]})]})]})]})})});var r,l,i});K.displayName="PropertyCard";const q=()=>{t();const{isConnected:x,lastEvent:p}=$(),[h,j]=a(),[f,g]=s.useState([]),[N,w]=s.useState([]),[k,C]=s.useState(!0),[Y,H]=s.useState(!1),[K,q]=s.useState(!1),[J,G]=s.useState(!1),[Q,X]=s.useState(null),Z=s.useRef(!1),ee=s.useCallback(async e=>{if(0===e.length)return w([]),void C(!1);try{C(!0);const s=e.map(e=>i.getProperty(e).catch(e=>null)),t=(await Promise.all(s)).filter(e=>null!==e&&e.success).map(e=>e.data.property);w(t)}catch(s){l({title:"Error",description:"Failed to load properties for comparison",variant:"destructive"})}finally{C(!1)}},[]),se=s.useCallback(async()=>{0!==f.length&&(H(!0),await ee(f),H(!1))},[ee,f]);s.useEffect(()=>{if(!Z.current){const e=h.get("properties")?.split(",").filter(Boolean)||[];g(e),ee(e),Z.current=!0}},[]);const te=s.useCallback(e=>{e.propertyId&&f.includes(e.propertyId)&&ee(f)},[f,ee]),ae=s.useCallback(e=>{e.propertyId&&w(s=>s.map(s=>s._id===e.propertyId?{...s,isFavorited:"add"===e.action}:s))},[]);_("property_updated",te),_("property_favorited",ae);const re=s.useCallback((e,s)=>"rent"===s?`₹${e.toLocaleString("en-IN")}/month`:"lease"===s?`₹${e.toLocaleString("en-IN")}/year`:e>=1e7?`₹${(e/1e7).toFixed(1)} Cr`:e>=1e5?`₹${(e/1e5).toFixed(1)} Lac`:`₹${e.toLocaleString("en-IN")}`,[]),le=s.useCallback(e=>e.builtUp?`${e.builtUp} ${e.unit}`:e.plot?`${e.plot} ${e.unit}`:e.carpet?`${e.carpet} ${e.unit}`:"N/A",[]),ie=s.useCallback(e=>{const s=e.area.builtUp||e.area.carpet||e.area.plot||0;return 0===s?0:Math.round(e.price/s)},[]),ce=s.useCallback(e=>{const s=e.images.find(e=>e.isPrimary);return s?.url||e.images[0]?.url||"/placeholder-property.jpg"},[]),ne=s.useCallback(e=>{const s=f.filter(s=>s!==e);g(s),w(s=>s.filter(s=>s._id!==e)),s.length>0?j({properties:s.join(",")},{replace:!0}):j({},{replace:!0})},[f,j]),de=s.useCallback(()=>{f.length>=10?l({title:"Comparison Limit Reached",description:"You can compare up to 10 properties at once. Remove a property to add another.",variant:"destructive"}):q(!0)},[f.length]),oe=s.useCallback(async e=>{try{if(f.includes(e))return void l({title:"Already Selected",description:"This property is already in your comparison list",variant:"destructive"});const s=await i.getProperty(e);if(!s.success)throw new Error("Failed to load property");{const t=[...f,e];g(t),w(e=>[...e,s.data.property]),j({properties:t.join(",")},{replace:!0}),l({title:"Property Added",description:`${s.data.property.title} has been added to comparison`})}}catch(s){throw l({title:"Error",description:"Failed to add property to comparison",variant:"destructive"}),s}},[f,j]),me=s.useCallback((e,s=!1)=>{if(!e)return{display:"-",color:"text-muted-foreground"};if(s&&N.length>1){const s=N.map(s=>"number"==typeof e?e:0),t=Math.max(...s),a=Math.min(...s);if(e===t&&e!==a)return{display:e,color:"text-green-600",isBest:!0};if(e===a&&e!==t)return{display:e,color:"text-red-600",isWorst:!0}}return{display:e,color:"text-foreground"}},[N]),xe=s.useMemo(()=>Array.from(new Set(N.flatMap(e=>e.amenities))),[N]),pe=s.useCallback(e=>{const s=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),t=e.owner?.profile?.phone||e.agent?.profile?.phone;t?s?window.location.href=`tel:${t}`:(X(e),G(!0)):l({title:"Contact Unavailable",description:"Contact information is not available for this property",variant:"destructive"})},[]),he=e=>e.owner?.profile?.phone||e.agent?.profile?.phone||null;return e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(P,{variant:"outline",size:"sm",onClick:se,disabled:Y,children:[e.jsx(V,{className:"w-4 h-4 mr-2 "+(Y?"animate-spin":"")}),Y?"Refreshing...":"Refresh"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(A,{className:"w-8 h-8 text-primary"}),"Compare Properties"]}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Side-by-side comparison of your selected properties (",N.length,"/10)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{to:"/customer/favorites",children:e.jsxs(P,{variant:"outline",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Back to Favorites"]})}),e.jsxs(P,{variant:"outline",disabled:0===N.length,children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Share Comparison"]})]})]}),k&&e.jsx(v,{children:e.jsx(b,{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Loading properties for comparison..."})]})})}),k||0!==N.length?!k&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[N.map(s=>e.jsxs(v,{className:"relative",children:[e.jsx("button",{onClick:()=>ne(s._id),className:"absolute top-2 right-2 z-10 p-1 bg-destructive text-destructive-foreground rounded-full hover:bg-destructive/90",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsxs(b,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-muted flex items-center justify-center mb-4 rounded-lg overflow-hidden",children:[e.jsx("img",{src:ce(s),alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling?.classList.remove("hidden")}}),e.jsx(L,{className:"w-8 h-8 text-muted-foreground hidden"})]}),e.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{className:"line-clamp-1",children:[s.address.city,", ",s.address.state]})]}),e.jsx("div",{className:"text-lg font-bold text-primary mb-2",children:re(s.price,s.listingType)}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[s.bedrooms," BHK"]}),e.jsx("span",{children:le(s.area)}),e.jsxs("span",{children:["₹",ie(s),"/sq.ft"]})]})]})]},s._id)),N.length<10&&e.jsx(v,{className:"border-dashed border-2",children:e.jsx(b,{className:"p-4 h-full flex items-center justify-center min-h-[300px]",children:e.jsxs(P,{variant:"ghost",className:"h-full w-full flex flex-col gap-2",onClick:de,children:[e.jsx(F,{className:"w-8 h-8 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Add Property"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",N.length,"/10)"]})]})})})]}),e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(E,{children:"Detailed Comparison"})}),e.jsx(b,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4 w-48 sticky left-0 bg-background z-10",children:"Feature"}),N.map(s=>e.jsx("th",{className:"text-left p-4 min-w-64",children:e.jsx("div",{className:"truncate max-w-64",children:s.title})},s._id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Price"}),N.map(s=>{const t=me(s.price,!0);return e.jsx("td",{className:`p-4 ${t.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[re(s.price,s.listingType),t.isBest&&e.jsx(S,{variant:"default",className:"text-xs",children:"Expensive"}),t.isWorst&&e.jsx(S,{variant:"secondary",className:"text-xs",children:"Affordable"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Price per sq.ft"}),N.map(s=>{const t=ie(s),a=me(t,!0);return e.jsx("td",{className:`p-4 ${a.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:["₹",t,a.isBest&&e.jsx(S,{variant:"default",className:"text-xs",children:"Highest"}),a.isWorst&&e.jsx(S,{variant:"secondary",className:"text-xs",children:"Best Value"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Area"}),N.map(s=>{const t=s.area.builtUp||s.area.carpet||s.area.plot||0,a=me(t,!0);return e.jsx("td",{className:`p-4 ${a.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[le(s.area),a.isBest&&e.jsx(S,{variant:"default",className:"text-xs",children:"Largest"}),a.isWorst&&e.jsx(S,{variant:"secondary",className:"text-xs",children:"Smallest"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Bedrooms"}),N.map(s=>e.jsxs("td",{className:"p-4",children:[s.bedrooms," BHK"]},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Bathrooms"}),N.map(s=>e.jsx("td",{className:"p-4",children:s.bathrooms},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Property Type"}),N.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(S,{variant:"outline",className:"capitalize",children:s.type})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Listing Type"}),N.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(S,{variant:"outline",className:"capitalize",children:s.listingType})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Status"}),N.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(S,{variant:"available"===s.status?"default":"secondary",className:"available"===s.status?"bg-green-500":"",children:"available"===s.status?"Available":s.status})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Location"}),N.map(s=>e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.address.city}),e.jsx("div",{className:"text-muted-foreground",children:s.address.state})]})},s._id))]})]})]})})})]}),e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(E,{children:"Amenities Comparison"})}),e.jsx(b,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-background p-4 text-left font-semibold min-w-[200px] border-r",children:"Amenity"}),N.map(s=>e.jsx("th",{className:"p-4 text-center font-medium min-w-[150px]",children:e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("span",{className:"text-sm truncate",title:s.title,children:s.title.length>20?`${s.title.slice(0,20)}...`:s.title})})},s._id))]})}),e.jsx("tbody",{children:xe.map((s,t)=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"sticky left-0 z-10 bg-background p-4 font-medium border-r",children:String(s)}),N.map(t=>e.jsx("td",{className:"p-4 text-center",children:t.amenities.includes(String(s))?e.jsx(I,{className:"w-5 h-5 text-green-600 mx-auto"}):e.jsx(z,{className:"w-5 h-5 text-red-400 mx-auto"})},t._id))]},t))})]})})})]}),e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(E,{children:"Contact Information"})}),e.jsx(b,{children:e.jsx("div",{className:"grid gap-4",children:N.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:s.title}),e.jsxs("div",{className:"space-y-2",children:[s.owner&&s.owner.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:R(s.owner)?"Listed by":"Owner"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:U(s)}),s.owner.profile.phone&&!R(s.owner)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.owner.profile.phone})]}),s.agent&&s.agent.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:R(s.agent)?"Listed by":"Agent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:O(s.agent)}),s.agent.profile.phone&&!R(s.agent)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.agent.profile.phone})]}),!s.owner?.profile&&!s.agent?.profile&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact information not available"})]})]},s._id))})})]}),e.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:N.map(s=>e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm truncate",title:s.title,children:s.title}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(P,{size:"sm",variant:"outline",onClick:()=>pe(s),disabled:!he(s),children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"Call"]}),e.jsx(r,{to:`/customer/property/${s._id}`,children:e.jsx(P,{size:"sm",children:"View Details"})})]})]})},s._id))})]}):e.jsx(v,{children:e.jsxs(b,{className:"p-12 text-center",children:[e.jsx(A,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No properties to compare"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add properties from your favorites or search results to start comparing"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(r,{to:"/customer/favorites",children:e.jsxs(P,{children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"View Favorites"]})}),e.jsx(r,{to:"/customer/search",children:e.jsx(P,{variant:"outline",children:"Search Properties"})})]})]})}),e.jsx(D,{open:K,onOpenChange:q,onPropertySelect:oe,selectedPropertyIds:f,maxSelections:10}),e.jsx(c,{open:J,onOpenChange:G,children:e.jsxs(n,{className:"sm:max-w-md",children:[e.jsxs(d,{children:[e.jsx(o,{children:"Contact Information"}),e.jsx(m,{children:Q?.title})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[e.jsx(M,{className:"w-10 h-10 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:Q&&(ue=Q,ue.owner?.profile?U(ue):ue.agent?.profile?O(ue.agent):"Property Contact")}),e.jsx("p",{className:"text-muted-foreground text-xs",children:Q?.owner&&!R(Q.owner)?"Owner":Q?.agent&&!R(Q.agent)?"Agent":"Contact"})]})]}),Q&&he(Q)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-lg",children:he(Q)})]}),e.jsx(P,{size:"sm",onClick:()=>{const e=he(Q);e&&(navigator.clipboard.writeText(e),l({description:"Phone number copied to clipboard"}))},children:"Copy"})]}),e.jsxs(P,{className:"w-full",size:"lg",onClick:()=>{const e=he(Q);e&&(window.location.href=`tel:${e}`)},children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Call Now"]})]})]})]})})]});var ue};export{q as default};
