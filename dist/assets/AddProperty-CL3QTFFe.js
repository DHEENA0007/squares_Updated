import{j as e}from"./ui-s1SEoZIF.js";import{r as s,d as a}from"./router-D8v2YSKU.js";import{_ as t,x as i,$ as r,L as l,a8 as d,m as n,n as c,o,p as m,q as p,I as u,l as h,t as x,f as g,A as f,H as j,S as b,a as y,e as v,aE as N,B as w,b as C,c as F,E as A,j as S,ay as P,k as q,T,ax as k}from"./index-YrVmIx3a.js";import{C as U}from"./checkbox-OYdlbG4C.js";import{R as B,a as E}from"./radio-group-DEULfiy8.js";import{A as L,a as V}from"./alert-DvMw1BgD.js";import{P as R}from"./PincodeAutocomplete-CX-7rD-g.js";import{C as D}from"./camera-BGEwbgLA.js";import{V as O}from"./video-DWB-SJ9w.js";import{I}from"./indian-rupee-EkOzOuU4.js";import"./vendor-BxThA0WO.js";const M=({propertyTypeId:a,values:h,onChange:x,errors:g={},onValidationChange:f})=>{const[j,b]=s.useState([]),[y,v]=s.useState(!0),{toast:N}=t();s.useEffect(()=>{if(!f||0===j.length)return;const e={};j.forEach(s=>{if(s.isRequired){const a=h[s.fieldName];(!a||"string"==typeof a&&""===a.trim())&&(e[s.fieldName]=`${s.fieldLabel} is required`)}});const s=0===Object.keys(e).length;f(s,e)},[h,j,f]),s.useEffect(()=>{(async()=>{if(!a)return b([]),void v(!1);try{v(!0);const e=(await r.getPropertyTypeFields(a,!1)).sort((e,s)=>e.displayOrder-s.displayOrder);b(e)}catch(e){N({title:"Error",description:"Failed to load property fields",variant:"destructive"}),b([])}finally{v(!1)}})()},[a,N]);if(y)return e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(i,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading property fields..."})]});if(0===j.length)return e.jsx(L,{children:e.jsx(V,{children:"No custom fields configured for this property type. The property type may be using default fields."})});const w=[];for(let e=0;e<j.length;e+=3)w.push(j.slice(e,e+3));return e.jsx("div",{className:"space-y-6",children:w.map((s,a)=>e.jsx("div",{className:`grid grid-cols-1 ${1===s.length?"md:grid-cols-1":2===s.length?"md:grid-cols-2":"sm:grid-cols-2 lg:grid-cols-3"} gap-4 md:gap-6`,children:s.map(s=>(s=>{const a=h[s.fieldName]??"",t=!!g[s.fieldName];switch(s.fieldType){case"text":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:s.fieldName,className:"text-sm md:text-base",children:[s.fieldLabel," ",s.isRequired&&"*"]}),e.jsx(u,{id:s.fieldName,value:a,onChange:e=>x(s.fieldName,e.target.value),placeholder:`Enter ${s.fieldLabel.toLowerCase()}`,className:"text-sm md:text-base "+(t?"border-destructive":"")}),t&&e.jsx("p",{className:"text-sm text-destructive",children:g[s.fieldName]})]},s._id);case"number":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:s.fieldName,className:"text-sm md:text-base",children:[s.fieldLabel," ",s.isRequired&&"*"]}),e.jsx(u,{id:s.fieldName,type:"number",value:a,onChange:e=>x(s.fieldName,e.target.value),placeholder:`Enter ${s.fieldLabel.toLowerCase()}`,className:"text-sm md:text-base "+(t?"border-destructive":"")}),t&&e.jsx("p",{className:"text-sm text-destructive",children:g[s.fieldName]})]},s._id);case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:s.fieldName,className:"text-sm md:text-base",children:[s.fieldLabel," ",s.isRequired&&"*"]}),e.jsxs(n,{value:a,onValueChange:e=>x(s.fieldName,e),children:[e.jsx(c,{className:"text-sm md:text-base "+(t?"border-destructive":""),children:e.jsx(o,{placeholder:`Select ${s.fieldLabel.toLowerCase()}`})}),e.jsx(m,{children:s.fieldOptions?.map(s=>e.jsx(p,{value:s,className:"text-sm md:text-base",children:s},s))})]}),t&&e.jsx("p",{className:"text-sm text-destructive",children:g[s.fieldName]})]},s._id);case"multiselect":const i=Array.isArray(a)?a:[];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{className:"text-sm md:text-base",children:[s.fieldLabel," ",s.isRequired&&"*"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 border rounded-lg",children:s.fieldOptions?.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:`${s.fieldName}-${a}`,checked:i.includes(a),onCheckedChange:e=>{const t=e?[...i,a]:i.filter(e=>e!==a);x(s.fieldName,t)}}),e.jsx(l,{htmlFor:`${s.fieldName}-${a}`,className:"text-sm font-normal cursor-pointer",children:a})]},a))}),t&&e.jsx("p",{className:"text-sm text-destructive",children:g[s.fieldName]})]},s._id);case"boolean":return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs(l,{htmlFor:s.fieldName,className:"text-sm md:text-base",children:[s.fieldLabel," ",s.isRequired&&"*"]}),e.jsx(d,{id:s.fieldName,checked:!0===a||"true"===a,onCheckedChange:e=>x(s.fieldName,e)}),t&&e.jsx("p",{className:"text-sm text-destructive",children:g[s.fieldName]})]},s._id);default:return null}})(s))},a))})},H=[{type:"apartment",label:"Apartment",category:"residential",requiredFields:["bedrooms","bathrooms","builtUpArea","floor","totalFloors"],optionalFields:["carpetArea","furnishing","age","facing","parkingSpaces"],fieldConfigurations:{bedrooms:{label:"Bedrooms",options:[{value:"1",label:"1 BHK"},{value:"2",label:"2 BHK"},{value:"3",label:"3 BHK"},{value:"4",label:"4 BHK"},{value:"5",label:"5+ BHK"}]},bathrooms:{label:"Bathrooms",options:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4+"}]},areaFields:{builtUpArea:{label:"Built-up Area (sq ft)",placeholder:"e.g., 1200",required:!0},carpetArea:{label:"Carpet Area (sq ft)",placeholder:"e.g., 1000",required:!1}},furnishing:{options:[{value:"fully-furnished",label:"Fully Furnished"},{value:"semi-furnished",label:"Semi Furnished"},{value:"unfurnished",label:"Unfurnished"}]},specialFields:{floor:{label:"Floor",type:"input",placeholder:"e.g., Ground, 1st, 2nd",required:!0},totalFloors:{label:"Total Floors",type:"input",placeholder:"e.g., 5, 10, 15",required:!0}}},amenitiesFilter:["Elevator","Parking","Security","Power Backup","Water Supply","Gym/Fitness Center","Swimming Pool","Garden/Park"]},{type:"house",label:"House",category:"residential",requiredFields:["bedrooms","bathrooms","builtUpArea"],optionalFields:["carpetArea","plotArea","furnishing","age","facing","parkingSpaces"],fieldConfigurations:{bedrooms:{label:"Bedrooms",options:[{value:"1",label:"1 BHK"},{value:"2",label:"2 BHK"},{value:"3",label:"3 BHK"},{value:"4",label:"4 BHK"},{value:"5",label:"5+ BHK"}]},bathrooms:{label:"Bathrooms",options:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4+"}]},areaFields:{builtUpArea:{label:"Built-up Area (sq ft)",placeholder:"e.g., 2000",required:!0},carpetArea:{label:"Carpet Area (sq ft)",placeholder:"e.g., 1800",required:!1},plotArea:{label:"Plot Area (sq ft)",placeholder:"e.g., 3000",required:!1}},furnishing:{options:[{value:"fully-furnished",label:"Fully Furnished"},{value:"semi-furnished",label:"Semi Furnished"},{value:"unfurnished",label:"Unfurnished"}]}},amenitiesFilter:["Parking","Security","Garden/Park","Power Backup","Water Supply","Bore Well"]},{type:"villa",label:"Villa",category:"residential",requiredFields:["bedrooms","bathrooms","builtUpArea","plotArea"],optionalFields:["carpetArea","furnishing","age","facing","parkingSpaces"],fieldConfigurations:{bedrooms:{label:"Bedrooms",options:[{value:"2",label:"2 BHK"},{value:"3",label:"3 BHK"},{value:"4",label:"4 BHK"},{value:"5",label:"5+ BHK"}]},bathrooms:{label:"Bathrooms",options:[{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5+"}]},areaFields:{builtUpArea:{label:"Built-up Area (sq ft)",placeholder:"e.g., 3500",required:!0},carpetArea:{label:"Carpet Area (sq ft)",placeholder:"e.g., 3000",required:!1},plotArea:{label:"Plot Area (sq ft)",placeholder:"e.g., 5000",required:!0}},furnishing:{options:[{value:"fully-furnished",label:"Fully Furnished"},{value:"semi-furnished",label:"Semi Furnished"},{value:"unfurnished",label:"Unfurnished"}]}},amenitiesFilter:["Swimming Pool","Garden/Park","Parking","Security","Power Backup","Clubhouse","Spa"]},{type:"commercial",label:"Commercial",category:"commercial",requiredFields:["builtUpArea"],optionalFields:["carpetArea","furnishing","floor","totalFloors","parkingSpaces"],fieldConfigurations:{areaFields:{builtUpArea:{label:"Built-up Area (sq ft)",placeholder:"e.g., 2500",required:!0},carpetArea:{label:"Carpet Area (sq ft)",placeholder:"e.g., 2200",required:!1}},furnishing:{options:[{value:"fully-furnished",label:"Fully Furnished"},{value:"semi-furnished",label:"Semi Furnished"},{value:"unfurnished",label:"Bare Shell"}]},specialFields:{commercialType:{label:"Commercial Type",type:"select",options:[{value:"office",label:"Office Space"},{value:"retail",label:"Retail Shop"},{value:"showroom",label:"Showroom"},{value:"warehouse",label:"Warehouse"},{value:"restaurant",label:"Restaurant Space"}],required:!0}}},amenitiesFilter:["Parking","Security","Power Backup","Elevator","CCTV Surveillance","Fire Safety","Central AC"]},{type:"office",label:"Office Space",category:"commercial",requiredFields:["builtUpArea","floor"],optionalFields:["carpetArea","furnishing","totalFloors","parkingSpaces"],fieldConfigurations:{areaFields:{builtUpArea:{label:"Built-up Area (sq ft)",placeholder:"e.g., 1500",required:!0},carpetArea:{label:"Carpet Area (sq ft)",placeholder:"e.g., 1300",required:!1}},furnishing:{options:[{value:"fully-furnished",label:"Fully Furnished"},{value:"semi-furnished",label:"Semi Furnished"},{value:"unfurnished",label:"Bare Shell"}]},specialFields:{floor:{label:"Floor",type:"input",placeholder:"e.g., Ground, 1st, 2nd",required:!0},cabins:{label:"Number of Cabins",type:"number",placeholder:"e.g., 3",required:!1},workstations:{label:"Workstations",type:"number",placeholder:"e.g., 20",required:!1}}},amenitiesFilter:["Parking","Security","Power Backup","Elevator","CCTV Surveillance","Central AC","Cafeteria"]},{type:"plot",label:"Plot",category:"land",requiredFields:["plotArea"],optionalFields:["facing"],fieldConfigurations:{areaFields:{plotArea:{label:"Plot Area (sq ft)",placeholder:"e.g., 5000",required:!0},builtUpArea:{label:"Total Area (sq ft)",placeholder:"Same as plot area",required:!0}},specialFields:{plotType:{label:"Plot Type",type:"select",options:[{value:"residential",label:"Residential"},{value:"commercial",label:"Commercial"},{value:"industrial",label:"Industrial"}],required:!0},boundaryWall:{label:"Boundary Wall",type:"select",options:[{value:"complete",label:"Complete"},{value:"partial",label:"Partial"},{value:"none",label:"None"}],required:!1},roadWidth:{label:"Road Width (ft)",type:"input",placeholder:"e.g., 30",required:!1},cornerPlot:{label:"Corner Plot",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],required:!1}}},amenitiesFilter:["Road Access","Electricity","Water Connection","Sewerage"]},{type:"land",label:"Land",category:"land",requiredFields:["plotArea"],optionalFields:["facing"],fieldConfigurations:{areaFields:{plotArea:{label:"Land Area",placeholder:"Enter area with unit",required:!0},builtUpArea:{label:"Total Area",placeholder:"Same as land area",required:!0}},specialFields:{landType:{label:"Land Type",type:"select",options:[{value:"residential",label:"Residential"},{value:"commercial",label:"Commercial"},{value:"agricultural",label:"Agricultural"},{value:"industrial",label:"Industrial"}],required:!0},areaUnit:{label:"Area Unit",type:"select",options:[{value:"sqft",label:"Square Feet"},{value:"acre",label:"Acre"},{value:"sqm",label:"Square Meter"}],required:!0},roadWidth:{label:"Road Width (ft)",type:"input",placeholder:"e.g., 30",required:!1},cornerPlot:{label:"Corner Plot",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],required:!1}}},amenitiesFilter:["Road Access","Electricity","Water Connection","Clear Title"]},{type:"pg",label:"PG (Paying Guest)",category:"special",requiredFields:["bedrooms","builtUpArea"],optionalFields:["bathrooms","floor","furnishing"],fieldConfigurations:{bedrooms:{label:"Room Sharing",options:[{value:"1",label:"Single Sharing"},{value:"2",label:"Double Sharing"},{value:"3",label:"Triple Sharing"},{value:"4",label:"4+ Sharing"}]},bathrooms:{label:"Bathroom Type",options:[{value:"1",label:"Attached"},{value:"0",label:"Common"}]},areaFields:{builtUpArea:{label:"Room Area (sq ft)",placeholder:"e.g., 150",required:!0}},furnishing:{options:[{value:"fully-furnished",label:"Fully Furnished"},{value:"semi-furnished",label:"Semi Furnished"},{value:"unfurnished",label:"Unfurnished"}]},specialFields:{foodAvailability:{label:"Food Availability",type:"select",options:[{value:"meals-included",label:"Meals Included"},{value:"kitchen-available",label:"Kitchen Available"},{value:"no-meals",label:"No Meals"}],required:!0},gender:{label:"Gender Preference",type:"select",options:[{value:"male",label:"Boys Only"},{value:"female",label:"Girls Only"},{value:"both",label:"Co-ed"}],required:!0}}},amenitiesFilter:["Meals Included","Laundry Service","Room Cleaning","24/7 Security","WiFi","AC Rooms","Attached Bathroom"]}],W=e=>H.find(s=>s.type===e)||null,$=e=>{const s=W(e);return s?s.requiredFields:[]},K=e=>{const a=s.useMemo(()=>W(e),[e]),t=s.useMemo(()=>$(e),[e]),i=s.useMemo(()=>(e=>{const s=W(e);return s?s.optionalFields:[]})(e),[e]),r=s.useMemo(()=>["apartment","villa","house"].includes(e),[e]),l=s.useMemo(()=>["commercial","office"].includes(e),[e]),d=s.useMemo(()=>["plot","land"].includes(e),[e]),n=s.useMemo(()=>"pg"===e,[e]);return{config:a,requiredFields:t,optionalFields:i,allPropertyTypes:H,isFieldRequired:s=>((e,s)=>$(e).includes(s))(e,s),getFieldConfig:s=>((e,s)=>{const a=W(e);return a&&a.fieldConfigurations[s]||null})(e,s),getAmenities:()=>(e=>{const s=W(e);return s?.amenitiesFilter||[]})(e),validateData:s=>((e,s)=>{const a=W(e);if(!a)return{isValid:!1,errors:["Invalid property type"]};const t=[];a.requiredFields.forEach(e=>{if(!s[e]||""===s[e]){const s=e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1");t.push(`${s} is required`)}});const i=a.fieldConfigurations.areaFields;return i&&Object.entries(i).forEach(([e,a])=>{!a||!a.required||s[e]&&""!==s[e]||t.push(`${a.label} is required`)}),{isValid:0===t.length,errors:t}})(e,s),isResidential:r,isCommercial:l,isLand:d,isPG:n}},_=({propertyType:s,formData:a,setFormData:t,showValidationErrors:i=!1})=>{const{config:r,isResidential:d,isCommercial:h,isLand:x,isPG:g,isFieldRequired:f,validateData:j}=K(s),b=j(a);if(!r)return e.jsx(L,{children:e.jsx(V,{children:"Please select a property type to see relevant property specifications."})});const y=(e,s)=>{t(a=>({...a,[e]:s}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[r.category," Property Details"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Fill in the details specific to ",r.label.toLowerCase()]})]}),i&&!b.isValid&&b.errors.length>0&&e.jsx(L,{variant:"destructive",children:e.jsxs(V,{children:[e.jsx("div",{children:"Please fix the following errors:"}),e.jsx("ul",{className:"list-disc list-inside mt-2",children:b.errors.map((s,a)=>e.jsx("li",{children:s},a))})]})}),(()=>{if(!d&&!g)return null;const s=r.fieldConfigurations.bedrooms,t=r.fieldConfigurations.bathrooms;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"bedrooms",className:"text-base font-medium",children:[s.label," ",f("bedrooms")&&"*"]}),e.jsxs(n,{value:a.bedrooms,onValueChange:e=>y("bedrooms",e),children:[e.jsx(c,{className:"h-12",children:e.jsx(o,{placeholder:"Select"})}),e.jsx(m,{children:s.options.map(s=>e.jsx(p,{value:s.value,children:s.label},s.value))})]})]}),t&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"bathrooms",className:"text-base font-medium",children:[t.label," ",f("bathrooms")&&"*"]}),e.jsxs(n,{value:a.bathrooms,onValueChange:e=>y("bathrooms",e),children:[e.jsx(c,{className:"h-12",children:e.jsx(o,{placeholder:"Select"})}),e.jsx(m,{children:t.options.map(s=>e.jsx(p,{value:s.value,children:s.label},s.value))})]})]}),r.fieldConfigurations.furnishing&&(d||h)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"furnishing",className:"text-base font-medium",children:["Furnishing ",f("furnishing")&&"*"]}),e.jsxs(n,{value:a.furnishing,onValueChange:e=>y("furnishing",e),children:[e.jsx(c,{className:"h-12",children:e.jsx(o,{placeholder:"Select"})}),e.jsx(m,{children:r.fieldConfigurations.furnishing.options.map(s=>e.jsx(p,{value:s.value,children:s.label},s.value))})]})]})]})})(),(()=>{const s=r.fieldConfigurations.areaFields;return s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.builtUpArea&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"builtUpArea",className:"text-base font-medium",children:[s.builtUpArea.label," ",s.builtUpArea.required&&"*"]}),e.jsx(u,{id:"builtUpArea",placeholder:s.builtUpArea.placeholder,className:"h-12",value:a.builtUpArea,onChange:e=>y("builtUpArea",e.target.value)})]}),s.carpetArea&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"carpetArea",className:"text-base font-medium",children:[s.carpetArea.label," ",s.carpetArea.required&&"*"]}),e.jsx(u,{id:"carpetArea",placeholder:s.carpetArea.placeholder,className:"h-12",value:a.carpetArea,onChange:e=>y("carpetArea",e.target.value)})]}),s.plotArea&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"plotArea",className:"text-base font-medium",children:[s.plotArea.label," ",s.plotArea.required&&"*"]}),e.jsx(u,{id:"plotArea",placeholder:s.plotArea.placeholder,className:"h-12",value:a.plotArea,onChange:e=>y("plotArea",e.target.value)})]})]}):null})(),(()=>{const s=r.fieldConfigurations.specialFields;return s?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(s).map(([s,t])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:s,className:"text-base font-medium",children:[t.label," ",t.required&&"*"]}),"select"===t.type&&t.options?e.jsxs(n,{value:a[s],onValueChange:e=>y(s,e),children:[e.jsx(c,{className:"h-12",children:e.jsx(o,{placeholder:"Select"})}),e.jsx(m,{children:t.options.map(s=>e.jsx(p,{value:s.value,children:s.label},s.value))})]}):e.jsx(u,{id:s,type:"number"===t.type?"number":"text",placeholder:t.placeholder,className:"h-12",value:a[s],onChange:e=>y(s,e.target.value)})]},s))}):null})(),g&&e.jsx(L,{children:e.jsx(V,{children:"For PG properties, room sharing indicates the number of people per room, and area should reflect the individual room size."})}),x&&e.jsx(L,{children:e.jsx(V,{children:"For land/plot properties, ensure you specify the correct land type and verify all legal documentation before listing."})}),h&&e.jsx(L,{children:e.jsx(V,{children:"Commercial properties may have different pricing structures and legal requirements. Verify zoning permissions before listing."})})]})},G=async(e,s)=>{const a=new FormData;a.append("file",e),a.append("folder",s);try{const e=await fetch("https://app.buildhomemartsquares.com/api/upload/single",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:a});if(!e.ok)throw new Error("Failed to upload file");const s=await e.json();if(!s.success)throw new Error(s.message||"Upload failed");return s.data.url}catch(t){throw new Error("Failed to upload file")}},z=()=>{const t=a(),[d,H]=s.useState(1),[W,$]=s.useState(!1),[z,Y]=s.useState([]),[Z,J]=s.useState([]),[Q,X]=s.useState([]),[ee,se]=s.useState(!0),[ae,te]=s.useState({title:"",description:"",propertyType:"",listingType:"",address:"",country:"India",countryCode:"IN",state:"",stateCode:"",district:"",districtCode:"",city:"",cityCode:"",taluk:"",locationName:"",pincode:"",bedrooms:"",bathrooms:"",floor:"",totalFloors:"",furnishing:"",age:"",builtUpArea:"",carpetArea:"",plotArea:"",price:"",priceNegotiable:!1,maintenanceCharges:"",securityDeposit:"",amenities:[],images:[],videos:[],virtualTour:"",availability:"",possession:"",facing:"",parkingSpaces:"",roadWidth:"",cornerPlot:"",isVerified:!0,isFeatured:!1,status:"active",ownerType:"admin",clientName:""}),[ie,re]=s.useState([]),[le,de]=s.useState([]),[ne,ce]=s.useState(!1),[oe,me]=s.useState(!1),[pe,ue]=s.useState(""),[he,xe]=s.useState({}),[ge,fe]=s.useState({});K(ae.propertyType);const[je,be]=s.useState({country:"India",state:"",district:"",city:""}),[ye,ve]=s.useState([]),[Ne,we]=s.useState([]),[Ce,Fe]=s.useState([]),[Ae,Se]=s.useState({states:!1,districts:!1,cities:!1,pincode:!1});s.useEffect(()=>{(async()=>{Se(e=>({...e,states:!0}));try{await h.initialize();const e=h.getStates();ve(e);const[s,a,t]=await Promise.all([r.getAllPropertyTypes(!1),r.getAllAmenities(!1),r.getFilterConfigurationsByType("listing_type",!1)]);Y(s),J(a);const i=t.map(e=>({id:e._id,name:e.name,value:e.value,displayLabel:e.displayLabel}));X(i)}catch(e){x({title:"Error",description:"Failed to load data. Please refresh the page.",variant:"destructive"})}finally{Se(e=>({...e,states:!1})),se(!1)}})()},[]),s.useEffect(()=>{if(ae.state){Se(e=>({...e,districts:!0}));try{const e=h.getDistricts(ae.state);we(e),te(e=>({...e,district:"",city:"",pincode:""})),be(e=>({...e,district:"",city:""})),Fe([])}catch(e){x({title:"Error",description:"Failed to load districts. Please try again.",variant:"destructive"})}finally{Se(e=>({...e,districts:!1}))}}else we([])},[ae.state]),s.useEffect(()=>{if(ae.state&&ae.district){Se(e=>({...e,cities:!0}));try{const e=h.getCities(ae.state,ae.district);Fe(e),te(e=>({...e,city:"",pincode:""})),be(e=>({...e,city:""}))}catch(e){x({title:"Error",description:"Failed to load cities. Please try again.",variant:"destructive"})}finally{Se(e=>({...e,cities:!1}))}}else Fe([])},[ae.state,ae.district]),s.useEffect(()=>{ae.state&&be(e=>({...e,state:ae.state}))},[ae.state]),s.useEffect(()=>{ae.district&&be(e=>({...e,district:ae.district}))},[ae.district]),s.useEffect(()=>{ae.city&&be(e=>({...e,city:ae.city}))},[ae.city]),s.useEffect(()=>{(async()=>{if(ae.propertyType)try{const e=z.find(e=>e.value===ae.propertyType);if(e){const s=await r.getPropertyTypeAmenities(e._id);J(s)}}catch(e){}})()},[ae.propertyType,z]),s.useEffect(()=>{const e=[];je.city&&e.push(je.city),je.district&&e.push(je.district),je.state&&e.push(je.state),ae.pincode&&e.push(ae.pincode),e.length>0&&!ae.address.trim()&&te(s=>({...s,address:e.join(", ")}))},[je,ae.pincode]);const Pe=[{id:1,title:"Basic Details",description:"Property type and listing details"},{id:2,title:"Location",description:"Address and location information"},{id:3,title:"Property Details",description:"Specifications and measurements"},{id:4,title:"Pricing",description:"Price and financial details"},{id:5,title:"Amenities",description:"Features and facilities"},{id:6,title:"Media",description:"Photos, videos, and virtual tours"},{id:7,title:"Owner Information",description:"Property owner details"},{id:8,title:"Admin Settings",description:"Verification and status settings"},{id:9,title:"Review",description:"Review and submit listing"}],qe=async e=>{if(e.target.files){const a=Array.from(e.target.files);ce(!0);try{const e=a.map(e=>({id:Date.now()+Math.random(),name:e.name,url:URL.createObjectURL(e),file:e}));re(s=>[...s,...e])}catch(s){}finally{ce(!1)}}},Te=async e=>{if(e.target.files){const a=Array.from(e.target.files);me(!0);try{const e=a.map(e=>({id:Date.now()+Math.random(),name:e.name,url:URL.createObjectURL(e),file:e}));de(s=>[...s,...e])}catch(s){}finally{me(!1)}}};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 md:space-y-8 p-4 md:p-6 mt-6 md:mt-8",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>t("/admin/properties"),className:"mt-1",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center gap-2 flex-wrap",children:[e.jsx(j,{className:"w-6 md:w-8 h-6 md:h-8 text-primary"}),e.jsx(b,{className:"w-5 md:w-6 h-5 md:h-6 text-blue-600"}),e.jsx("span",{children:"Add New Property (Admin)"})]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm md:text-base",children:"Admin panel - Add properties with unlimited access and special privileges"})]})]})}),e.jsxs(L,{className:"border-blue-200 bg-blue-50 dark:bg-black p-4 md:p-6",children:[e.jsx(b,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),e.jsxs(V,{className:"text-sm md:text-base",children:[e.jsx("strong",{children:"Admin Mode:"})," You have unlimited property creation privileges. Properties added through admin panel are automatically verified and bypass subscription limits."]})]}),e.jsx(y,{className:"shadow-lg",children:e.jsxs(v,{className:"p-6 md:p-8",children:[e.jsx("div",{className:"flex items-start justify-between mb-10 gap-2 overflow-x-auto pb-4",children:Pe.map((s,a)=>e.jsxs("div",{className:"flex flex-col items-center min-w-[120px] flex-shrink-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center border-2 mb-3 "+(d>=s.id?"bg-primary border-primary text-primary-foreground":"border-muted-foreground text-muted-foreground"),children:d>s.id?e.jsx(N,{className:"w-6 h-6"}):e.jsx("span",{className:"text-sm font-semibold",children:s.id})}),e.jsxs("div",{className:"text-center px-1",children:[e.jsx("p",{className:"text-sm font-medium leading-tight break-words",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-1 break-words",children:s.description})]})]},s.id))}),e.jsx("div",{className:"min-h-[500px] bg-gradient-to-br from-background to-muted/20 rounded-lg p-4 md:p-8 border",children:(()=>{switch(d){case 1:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"title",className:"text-base font-medium",children:"Property Title *"}),e.jsx(u,{id:"title",placeholder:"e.g., Luxury 3BHK Apartment in Bandra",value:ae.title,onChange:e=>te(s=>({...s,title:e.target.value})),className:"h-12 text-base"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"propertyType",className:"text-base font-medium",children:"Property Type *"}),e.jsxs(n,{value:ae.propertyType,onValueChange:e=>{const s=z.find(s=>s.value===e);te(s=>({...s,propertyType:e})),ue(s?._id||""),xe({})},disabled:ee,children:[e.jsx(c,{className:"h-12",children:e.jsx(o,{placeholder:ee?"Loading property types...":"Select property type"})}),e.jsx(m,{children:z.map(s=>e.jsx(p,{value:s.value,children:s.name},s._id))})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{className:"text-base font-medium",children:"Listing Type *"}),e.jsx(B,{value:ae.listingType,onValueChange:e=>te(s=>({...s,listingType:e})),disabled:ee||0===Q.length,children:ee?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(i,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading listing types..."})]}):0===Q.length?e.jsx("div",{className:"p-3 rounded-lg border bg-muted/30",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No listing types configured. Please add listing types in Filter Management."})}):Q.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border hover:bg-muted/30",children:[e.jsx(E,{value:s.value,id:s.value}),e.jsx(l,{htmlFor:s.value,className:"text-base",children:s.displayLabel?.trim()||s.name})]},s.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"description",className:"text-base font-medium",children:"Property Description"}),e.jsx(T,{id:"description",placeholder:"Describe your property in detail...",rows:6,value:ae.description,onChange:e=>te(s=>({...s,description:e.target.value})),className:"text-base"})]})]});case 2:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(y,{className:"border-primary/30 shadow-md",children:[e.jsxs(C,{className:"pb-4",children:[e.jsxs(F,{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[e.jsx(q,{className:"w-6 h-6 text-primary"}),"Property Location"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select your property location and pincode"})]}),e.jsx(v,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"state",children:"State *"}),e.jsxs(n,{value:ae.state,onValueChange:e=>{te(s=>({...s,state:e,stateCode:e}))},disabled:Ae.states,children:[e.jsx(c,{children:e.jsx(o,{placeholder:Ae.states?"Loading states...":"Select state"})}),e.jsx(m,{children:ye.map(s=>e.jsx(p,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"district",children:"District *"}),e.jsxs(n,{value:ae.district,onValueChange:e=>{te(s=>({...s,district:e,districtCode:e}))},disabled:!ae.state||Ae.districts,children:[e.jsx(c,{children:e.jsx(o,{placeholder:ae.state?Ae.districts?"Loading districts...":"Select district":"Select state first"})}),e.jsx(m,{children:Ne.map(s=>e.jsx(p,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"city",children:"City *"}),e.jsxs(n,{value:ae.city,onValueChange:e=>{te(s=>({...s,city:e,cityCode:e}))},disabled:!ae.district||Ae.cities,children:[e.jsx(c,{children:e.jsx(o,{placeholder:ae.district?Ae.cities?"Loading cities...":"Select city":"Select district first"})}),e.jsx(m,{children:Ce.map(s=>e.jsx(p,{value:s,children:s},s))})]})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"pincode",className:"text-base font-medium",children:"PIN Code *"}),e.jsx(R,{value:ae.pincode,onChange:(e,s)=>{te(s=>({...s,pincode:e})),s&&(s.state&&ye.includes(s.state.toUpperCase())&&(te(e=>({...e,state:s.state.toUpperCase(),stateCode:s.state.toUpperCase()})),setTimeout(()=>{if(s.district){const e=h.getDistricts(s.state.toUpperCase()).find(e=>e.toUpperCase()===s.district.toUpperCase());e&&(te(s=>({...s,district:e,districtCode:e})),setTimeout(()=>{if(s.city){const a=h.getCities(s.state.toUpperCase(),e).find(e=>e.toUpperCase()===s.city.toUpperCase());a&&te(e=>({...e,city:a,cityCode:a}))}},100))}},100)),x({title:"Location Auto-filled âœ“",description:`${s.city}, ${s.district}, ${s.state}`}))},state:ae.state,district:ae.district,city:ae.city,placeholder:"Enter or select 6-digit PIN code",className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select state, district, and city above to see matching pincodes, or type to search"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"address",children:"Complete Address"}),e.jsx(T,{id:"address",placeholder:"Enter complete address with landmark",rows:3,value:ae.address,onChange:e=>te(s=>({...s,address:e.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will be auto-filled from location details above"})]})]});case 3:return e.jsx("div",{className:"space-y-4",children:ae.propertyType?pe?e.jsx(M,{propertyTypeId:pe,values:he,onChange:(e,s)=>{xe(a=>({...a,[e]:s})),ge[e]&&fe(s=>{const a={...s};return delete a[e],a})},errors:ge,onValidationChange:(e,s)=>{fe(s)}}):e.jsx(_,{propertyType:ae.propertyType,formData:ae,setFormData:te,showValidationErrors:!1}):e.jsx(L,{children:e.jsx(V,{children:"Please select a property type in the Basic Details step to see relevant property specifications."})})});case 4:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"price",className:"text-base font-medium",children:"Price *"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(u,{id:"price",placeholder:"Enter price",className:"pl-12 h-12 text-base",value:ae.price,onChange:e=>te(s=>({...s,price:e.target.value}))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"maintenanceCharges",className:"text-base font-medium",children:"Maintenance Charges (Monthly)"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(u,{id:"maintenanceCharges",placeholder:"Optional",className:"pl-12 h-12 text-base",value:ae.maintenanceCharges,onChange:e=>te(s=>({...s,maintenanceCharges:e.target.value}))})]})]})]}),("rent"===ae.listingType||"lease"===ae.listingType)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"securityDeposit",className:"text-base font-medium",children:"Security Deposit"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(u,{id:"securityDeposit",placeholder:"Enter security deposit",className:"pl-12 h-12 text-base",value:ae.securityDeposit,onChange:e=>te(s=>({...s,securityDeposit:e.target.value}))})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-muted/20 rounded-lg border",children:[e.jsx(U,{id:"priceNegotiable",checked:ae.priceNegotiable,onCheckedChange:e=>te(s=>({...s,priceNegotiable:!0===e})),className:"h-5 w-5"}),e.jsx(l,{htmlFor:"priceNegotiable",className:"text-base font-medium",children:"Price is negotiable"})]})]});case 5:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-base font-medium",children:"Property Amenities"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Select all amenities available in your property"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:ee?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(i,{className:"w-6 h-6 animate-spin mx-auto text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading amenities..."})]}):0===Z.length&&ae.propertyType?e.jsx("div",{className:"col-span-full text-center py-8",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No amenities configured for this property type"})}):Z.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:s.name,checked:ae.amenities.includes(s.name),onCheckedChange:()=>(e=>{te(s=>({...s,amenities:s.amenities.includes(e)?s.amenities.filter(s=>s!==e):[...s.amenities,e]}))})(s.name)}),e.jsx(l,{htmlFor:s.name,className:"text-sm",children:s.name})]},s._id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"facing",children:"Facing"}),e.jsxs(n,{value:ae.facing,onValueChange:e=>te(s=>({...s,facing:e})),children:[e.jsx(c,{children:e.jsx(o,{placeholder:"Select"})}),e.jsxs(m,{children:[e.jsx(p,{value:"north",children:"North"}),e.jsx(p,{value:"south",children:"South"}),e.jsx(p,{value:"east",children:"East"}),e.jsx(p,{value:"west",children:"West"}),e.jsx(p,{value:"north-east",children:"North-East"}),e.jsx(p,{value:"north-west",children:"North-West"}),e.jsx(p,{value:"south-east",children:"South-East"}),e.jsx(p,{value:"south-west",children:"South-West"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"parkingSpaces",children:"Parking Spaces"}),e.jsxs(n,{value:ae.parkingSpaces,onValueChange:e=>te(s=>({...s,parkingSpaces:e})),children:[e.jsx(c,{children:e.jsx(o,{placeholder:"Select"})}),e.jsxs(m,{children:[e.jsx(p,{value:"0",children:"No Parking"}),e.jsx(p,{value:"1",children:"1 Car"}),e.jsx(p,{value:"2",children:"2 Cars"}),e.jsx(p,{value:"3",children:"3+ Cars"})]})]})]})]})]});case 6:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-xl font-semibold",children:"Property Images"}),e.jsx("p",{className:"text-base text-muted-foreground mb-6 mt-2",children:"Upload high-quality images of your property (up to 20 images)"}),e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-12 text-center hover:border-primary/50 transition-colors",children:[e.jsx(D,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{variant:"outline",onClick:()=>document.getElementById("image-upload")?.click(),size:"lg",className:"px-8",disabled:ne,children:ne?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"Choose Images"]})}),e.jsx("p",{className:"text-base text-muted-foreground",children:"or drag and drop images here"})]}),e.jsx("input",{id:"image-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:qe,disabled:ne})]}),ne&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx(i,{className:"w-5 h-5 animate-spin text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Processing images..."})]}),ie.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:ie.map(s=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.url,alt:s.name,className:"w-full h-24 object-cover rounded-lg"}),e.jsx(g,{size:"icon",variant:"destructive",className:"absolute -top-2 -right-2 h-6 w-6",onClick:()=>{return e=s.id,void re(s=>s.filter(s=>s.id!==e));var e},children:e.jsx(P,{className:"h-3 w-3"})})]},s.id))})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-xl font-semibold",children:"Property Videos (Optional)"}),e.jsx("p",{className:"text-base text-muted-foreground mb-6 mt-2",children:"Upload videos to showcase your property better"}),e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-12 text-center hover:border-primary/50 transition-colors",children:[e.jsx(O,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{variant:"outline",onClick:()=>document.getElementById("video-upload")?.click(),size:"lg",className:"px-8",disabled:oe,children:oe?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"Upload Video"]})}),e.jsx("p",{className:"text-base text-muted-foreground",children:"MP4, MOV, AVI (max 100MB)"})]}),e.jsx("input",{id:"video-upload",type:"file",multiple:!0,accept:"video/*",className:"hidden",onChange:Te,disabled:oe})]}),oe&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx(i,{className:"w-5 h-5 animate-spin text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Processing videos..."})]}),le.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:le.map(s=>e.jsx("div",{className:"relative border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Video file"})]}),e.jsx(g,{size:"icon",variant:"destructive",className:"h-6 w-6",onClick:()=>de(e=>e.filter(e=>e.id!==s.id)),children:e.jsx(P,{className:"h-3 w-3"})})]})},s.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"virtualTour",className:"text-base font-medium",children:"Virtual Tour URL (Optional)"}),e.jsx(u,{id:"virtualTour",placeholder:"e.g., https://your-virtual-tour-link.com",value:ae.virtualTour,onChange:e=>te(s=>({...s,virtualTour:e.target.value})),className:"h-12 text-base"})]})]});case 7:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-primary to-blue-600 rounded-full flex items-center justify-center mb-6 shadow-lg",children:e.jsx(j,{className:"h-12 w-12 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent mb-3",children:"Owner Information"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-md mx-auto",children:"Specify who owns this property"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(y,{className:"border-2 border-primary/20 bg-gradient-to-r from-primary/5 to-blue-50/50 hover:shadow-lg transition-all duration-300",children:[e.jsx(C,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(F,{className:"text-xl",children:"Property Owner"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select who owns this property"})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{htmlFor:"ownerType",className:"text-base font-medium",children:"Owner Type *"}),e.jsxs(n,{value:ae.ownerType,onValueChange:e=>te(s=>({...s,ownerType:e,clientName:"admin"===e?"":s.clientName})),children:[e.jsx(c,{className:"h-12 border-2 border-primary/20 bg-background/50",children:e.jsx(o,{placeholder:"Select owner type"})}),e.jsxs(m,{children:[e.jsx(p,{value:"admin",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-blue-600"}),"Admin"]})}),e.jsx(p,{value:"client",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-green-600"}),"Client"]})})]})]}),"client"===ae.ownerType&&e.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-2 duration-300",children:[e.jsx(l,{htmlFor:"clientName",className:"text-base font-medium",children:"Client Name *"}),e.jsx(u,{id:"clientName",placeholder:"Enter client's full name",className:"h-12 border-2 border-green-200/50 bg-background/50",value:ae.clientName,onChange:e=>te(s=>({...s,clientName:e.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will be shown as the property owner in contact information"})]})]})})]}),e.jsxs(y,{className:"border-2 border-green-200 bg-gradient-to-r from-green-50/50 to-emerald-50/50 hover:shadow-lg transition-all duration-300",children:[e.jsx(C,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx(F,{className:"text-xl",children:"Contact Information Preview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"How customers will see the contact information"})]})]})}),e.jsx(v,{children:e.jsx("div",{className:"p-4 bg-background/50 rounded-lg border border-green-200/50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Owner:"}),e.jsx("span",{children:"admin"===ae.ownerType?"Squares":ae.clientName||"Client Name"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Type:"}),e.jsx("span",{children:"admin"===ae.ownerType?"Platform Admin":"Property Owner"})]})]})})})]})]})]});case 8:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-primary to-blue-600 rounded-full flex items-center justify-center mb-6 shadow-lg",children:e.jsx(b,{className:"h-12 w-12 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent mb-3",children:"Admin Settings"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-md mx-auto",children:"Configure admin-specific settings for this property"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(y,{className:"border-2 border-primary/20 bg-gradient-to-r from-primary/5 to-blue-50/50 hover:shadow-lg transition-all duration-300",children:[e.jsx(C,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(F,{className:"text-xl",children:"Property Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Admin properties are automatically verified"})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-background/50 rounded-lg border border-primary/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(N,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx(l,{className:"text-base font-medium",children:"Verified Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically approved"})]})]}),e.jsx(U,{id:"isVerified",checked:ae.isVerified,onCheckedChange:e=>te(s=>({...s,isVerified:!0===e})),className:"h-5 w-5 border-2"})]})})]}),e.jsxs(y,{className:"border-2 border-amber-200 bg-gradient-to-r from-amber-50/50 to-orange-50/50 hover:shadow-lg transition-all duration-300",children:[e.jsx(C,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx(F,{className:"text-xl",children:"Featured Property"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark as featured for better visibility"})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-background/50 rounded-lg border border-amber-200/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"h-4 w-4 text-amber-600"})}),e.jsxs("div",{children:[e.jsx(l,{className:"text-base font-medium",children:"Featured Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enhanced visibility"})]})]}),e.jsx(U,{id:"isFeatured",checked:ae.isFeatured,onCheckedChange:e=>te(s=>({...s,isFeatured:!0===e})),className:"h-5 w-5 border-2"})]})})]}),e.jsxs(y,{className:"border-2 border-blue-200 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 hover:shadow-lg transition-all duration-300",children:[e.jsx(C,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(F,{className:"text-xl",children:"Property Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set the current status of this property"})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"status",className:"text-base font-medium",children:"Current Status"}),e.jsxs(n,{value:ae.status,onValueChange:e=>te(s=>({...s,status:e})),children:[e.jsx(c,{className:"h-12 border-2 border-blue-200/50 bg-background/50",children:e.jsx(o,{placeholder:"Select property status"})}),e.jsxs(m,{children:[e.jsx(p,{value:"active",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Active"]})}),e.jsx(p,{value:"pending",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),"Pending"]})}),e.jsx(p,{value:"inactive",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),"Inactive"]})}),e.jsx(p,{value:"sold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Sold"]})}),e.jsx(p,{value:"rented",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Rented"]})})]})]})]})})]})]}),e.jsx(L,{className:"border-2 border-amber-200 bg-gradient-to-r from-amber-50 to-yellow-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx(b,{className:"h-4 w-4 text-amber-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-amber-800 text-lg",children:"Admin Privileges"}),e.jsx(V,{className:"text-amber-700 text-base leading-relaxed",children:"As an admin, you can add unlimited properties without subscription limits. All admin properties bypass normal verification processes and get priority listing placement."})]})]})})]});case 9:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"mx-auto h-20 w-20 text-green-600 mb-6"}),e.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Review Your Listing"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Please review all the details before submitting your property listing"})]}),e.jsx(y,{className:"shadow-lg",children:e.jsxs(v,{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Basic Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",ae.title]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",ae.propertyType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Listing:"})," ",ae.listingType]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Location"}),e.jsxs("p",{children:[e.jsx("strong",{children:"State:"})," ",ae.state||"Not selected"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",ae.city||"Not selected"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pincode:"})," ",ae.pincode||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Property Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",ae.bedrooms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Area:"})," ",ae.builtUpArea," sq ft"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Furnishing:"})," ",ae.furnishing]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Pricing"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," â‚¹",ae.price]}),ae.maintenanceCharges&&e.jsxs("p",{children:[e.jsx("strong",{children:"Maintenance:"})," â‚¹",ae.maintenanceCharges,"/month"]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-green-600"}),"Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Owner Type:"})," ","admin"===ae.ownerType?"Admin":"Client"]}),"client"===ae.ownerType&&e.jsxs("p",{children:[e.jsx("strong",{children:"Client Name:"})," ",ae.clientName||"Not specified"]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-primary"}),"Admin Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Verified:"})," ",ae.isVerified?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Featured:"})," ",ae.isFeatured?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",ae.status]})]})]}),ae.amenities.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ae.amenities.map(s=>e.jsx(w,{variant:"secondary",children:s},s))})]}),ie.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-semibold mb-2",children:["Images (",ie.length,")"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[ie.slice(0,4).map(s=>e.jsx("img",{src:s.url,alt:s.name,className:"w-full h-16 object-cover rounded"},s.id)),ie.length>4&&e.jsxs("div",{className:"w-full h-16 bg-muted rounded flex items-center justify-center text-sm",children:["+",ie.length-4," more"]})]})]})]})})]});default:return null}})()}),e.jsxs("div",{className:"flex justify-between mt-8 md:mt-10",children:[e.jsx(g,{variant:"outline",onClick:()=>{d>1&&H(d-1)},disabled:1===d,size:"lg",className:"px-8",children:"Previous"}),d===Pe.length?e.jsx(g,{onClick:async()=>{if(W)return;const e={title:ae.title?.trim(),description:ae.description?.trim(),propertyType:ae.propertyType,listingType:ae.listingType,price:ae.price,pincode:ae.pincode},s=Object.entries(e).filter(([e,s])=>!s).map(([e])=>e);if(s.length>0)x({title:"Missing Required Fields",description:`Please fill in: ${s.join(", ")}`,variant:"destructive"});else if(ae.ownerType)if("client"!==ae.ownerType||ae.clientName?.trim())if(ae.state&&ae.city)if(Object.keys(ge).length>0)x({title:"Validation Error",description:"Please fix the errors in property details",variant:"destructive"});else{$(!0);try{const e=[];for(const t of ie)if(t.file){const s=await G(t.file,"admin_property_images");e.push({url:s,caption:t.name,isPrimary:0===e.length})}const s=[];for(const t of le)if(t.file){const e=await G(t.file,"admin_property_videos");s.push({url:e,caption:t.name})}const a={title:ae.title.trim(),description:ae.description.trim(),type:ae.propertyType,listingType:ae.listingType,price:parseFloat(ae.price),address:{street:ae.address.trim(),district:ae.district||"",city:ae.city||"",state:ae.state||"",pincode:ae.pincode},amenities:ae.amenities||[],images:e||[],videos:s||[],isVerified:ae.isVerified,isFeatured:ae.isFeatured,status:ae.status,isAdminProperty:!0,ownerType:ae.ownerType,clientName:"client"===ae.ownerType?ae.clientName:void 0};void 0!==ae.priceNegotiable&&(a.priceNegotiable=ae.priceNegotiable),ae.maintenanceCharges?.trim()&&(a.maintenanceCharges=parseFloat(ae.maintenanceCharges)),ae.securityDeposit?.trim()&&(a.securityDeposit=parseFloat(ae.securityDeposit)),ae.virtualTour?.trim()&&(a.virtualTour=ae.virtualTour.trim()),Object.keys(he).length>0&&(a.customFields=he,he.builtUpArea&&(a.area=a.area||{},a.area.builtUp=parseFloat(he.builtUpArea),a.area.unit="sqft"),he.carpetArea&&(a.area=a.area||{},a.area.carpet=parseFloat(he.carpetArea)),he.plotArea&&(a.area=a.area||{},a.area.plot=parseFloat(he.plotArea)),he.bedrooms&&(a.bedrooms=parseInt(he.bedrooms)),he.bathrooms&&(a.bathrooms=parseInt(he.bathrooms)));await k.createProperty(a);x({title:"Success!",description:"Property created successfully by admin."}),t("/admin/properties")}catch(a){let e="Failed to submit property. Please try again.";a instanceof Error&&(e=a.message),x({title:"Error",description:e,variant:"destructive"})}finally{$(!1)}}else x({title:"Location Required",description:"Please select state and city for your property",variant:"destructive"});else x({title:"Client Name Required",description:"Please enter the client name when owner type is Client",variant:"destructive"});else x({title:"Owner Information Required",description:"Please select owner type (Admin or Client)",variant:"destructive"})},className:"px-12",disabled:W,size:"lg",children:W?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-5 h-5 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-5 h-5 mr-2"}),"Submit Property (Admin)"]})}):e.jsx(g,{onClick:()=>{d<Pe.length&&H(d+1)},size:"lg",className:"px-8",children:"Next"})]})]})})]})};export{z as default};
