import{j as e}from"./ui-CEt46o3G.js";import{r as l}from"./router-2SVJvIbS.js";import{C as m,d as u}from"./card-YvDMUmzt.js";import{c as X,t as d,f as Z,a as x,P as D,I as y,K as ee,U as M,a6 as se,T as te,h as re,i as C,S as ae,v as E,B as ie,z as ce,o as oe,b as ne}from"./index-CiYV0Sy0.js";import{T as le}from"./textarea-BbecYreM.js";import{S as B,a as L,b as _,c as $,d as F}from"./select-BHWxeluH.js";import{D as de,f as me,a as ue,b as xe,c as he}from"./dialog-B2oiH0OC.js";import{L as f}from"./label-BV_cIshD.js";import{L as I}from"./loader-circle-Cj-dvH02.js";import{F as ge}from"./file-text-BHu0z9sa.js";import{D as ve}from"./dollar-sign-DeqxH75V.js";import{T as pe}from"./truck-DK_R_OBX.js";import{S as fe}from"./shield-CFIF9xqz.js";import{S as je}from"./square-pen-HkJ1oMBu.js";import{E as ye}from"./eye-CDS1ofgA.js";import{T as Se}from"./trash-DifX2xze.js";import"./vendor-Dazix4UH.js";import"./index-BdQq_4o_.js";import"./index-DHzxUTm5.js";import"./chevron-down-DeDu0PPf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=X("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Ne="https://squares-9d84.onrender.com/api";class be{async makeRequest(r,s={}){const a=`${Ne}${r}`,n={headers:{"Content-Type":"application/json",...s.headers},...s},h=localStorage.getItem("token");h&&(n.headers={...n.headers,Authorization:`Bearer ${h}`});try{const c=await fetch(a,n);if(!c.ok){const S=await c.json().catch(()=>({success:!1,message:`HTTP ${c.status}: ${c.statusText}`}));throw new Error(S.message||"An error occurred")}return await c.json()}catch(c){throw console.error("Services API request failed:",c),c}}async getServices(r={}){try{const s=new URLSearchParams;Object.entries(r).forEach(([h,c])=>{c!=null&&c!==""&&s.append(h,c.toString())});const a=`/vendors/services${s.toString()?`?${s.toString()}`:""}`,n=await this.makeRequest(a);return n.success&&n.data?n.data:{services:[],totalCount:0,totalPages:0,currentPage:1}}catch(s){return console.error("Failed to fetch services:",s),{services:[],totalCount:0,totalPages:0,currentPage:1}}}async getServiceById(r){try{const s=await this.makeRequest(`/vendors/services/${r}`);return s.success?s.data:null}catch(s){return console.error("Failed to fetch service:",s),null}}async createService(r){try{const s=await this.makeRequest("/vendors/services",{method:"POST",body:JSON.stringify(r)});if(s.success)return d({title:"Success",description:s.message||"Service created successfully!"}),s.data;throw new Error(s.message||"Failed to create service")}catch(s){const a=s instanceof Error?s.message:"Failed to create service";throw d({title:"Error",description:a,variant:"destructive"}),s}}async updateService(r,s){try{const a=await this.makeRequest(`/vendors/services/${r}`,{method:"PUT",body:JSON.stringify(s)});if(a.success)return d({title:"Success",description:a.message||"Service updated successfully!"}),a.data;throw new Error(a.message||"Failed to update service")}catch(a){const n=a instanceof Error?a.message:"Failed to update service";throw d({title:"Error",description:n,variant:"destructive"}),a}}async deleteService(r){try{const s=await this.makeRequest(`/vendors/services/${r}`,{method:"DELETE"});if(s.success)return d({title:"Success",description:s.message||"Service deleted successfully!"}),!0;throw new Error(s.message||"Failed to delete service")}catch(s){const a=s instanceof Error?s.message:"Failed to delete service";return d({title:"Error",description:a,variant:"destructive"}),!1}}async toggleServiceStatus(r){try{const s=await this.makeRequest(`/vendors/services/${r}/toggle-status`,{method:"PATCH"});if(s.success)return d({title:"Success",description:s.message||"Service status updated!"}),s.data;throw new Error(s.message||"Failed to update service status")}catch(s){const a=s instanceof Error?s.message:"Failed to update service status";return d({title:"Error",description:a,variant:"destructive"}),null}}async getServiceBookings(r){try{const s=await this.makeRequest(`/vendors/services/${r}/bookings`);return s.success?s.data:[]}catch(s){return console.error("Failed to fetch service bookings:",s),[]}}async getServiceStats(){try{const r=await this.makeRequest("/vendors/services/stats");return r.success&&r.data?r.data:{totalServices:0,activeServices:0,totalBookings:0,pendingBookings:0,completedBookings:0,totalRevenue:0,monthlyRevenue:0,averageRating:0,popularCategories:[]}}catch(r){return console.error("Failed to fetch service stats:",r),{totalServices:0,activeServices:0,totalBookings:0,pendingBookings:0,completedBookings:0,totalRevenue:0,monthlyRevenue:0,averageRating:0,popularCategories:[]}}}async updateBookingStatus(r,s){try{const a=await this.makeRequest(`/vendors/bookings/${r}/status`,{method:"PATCH",body:JSON.stringify({status:s})});if(a.success)return d({title:"Success",description:a.message||"Booking status updated!"}),a.data;throw new Error(a.message||"Failed to update booking status")}catch(a){const n=a instanceof Error?a.message:"Failed to update booking status";return d({title:"Error",description:n,variant:"destructive"}),null}}formatCurrency(r){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r)}formatDuration(r){if(r<60)return`${r} min`;const s=Math.floor(r/60),a=r%60;return a>0?`${s}h ${a}m`:`${s}h`}getServiceCategoryLabel(r){return{property_management:"Property Management",consultation:"Real Estate Consultation",legal_services:"Legal Services",home_loans:"Home Loans",interior_design:"Interior Design",moving_services:"Moving Services",insurance:"Property Insurance",other:"Other Services"}[r]||r}getStatusColor(r){return{active:"text-green-600 bg-green-100",inactive:"text-gray-600 bg-gray-100",pending:"text-yellow-600 bg-yellow-100",confirmed:"text-blue-600 bg-blue-100",in_progress:"text-purple-600 bg-purple-100",completed:"text-green-600 bg-green-100",cancelled:"text-red-600 bg-red-100"}[r]||"text-gray-600 bg-gray-100"}getPricingDisplay(r){if(!r)return"Contact for pricing";if(r.type==="negotiable")return"Negotiable";if(!r.amount)return"Contact for pricing";const s=this.formatCurrency(r.amount);switch(r.type){case"hourly":return`${s}/hour`;case"percentage":return`${r.amount}% commission`;case"fixed":default:return s}}}const v=new be,Ke=()=>{const{toast:P}=Z(),[r,s]=l.useState("all"),[a,n]=l.useState(""),[h,c]=l.useState(!1),[S,R]=l.useState(!0),[N,b]=l.useState([]),[g,O]=l.useState(null),[A,we]=l.useState(1),[ke,q]=l.useState(1),[Ce,Ee]=l.useState(null),[Fe,z]=l.useState(null),[w,j]=l.useState(null),H={page:A,limit:10,category:r!=="all"?r:void 0,search:a||void 0,status:"all",sortBy:"updatedAt",sortOrder:"desc"},V=async()=>{try{R(!0);const[t,i]=await Promise.all([v.getServices(H),v.getServiceStats()]);b(t.services),q(t.totalPages),O(i)}catch(t){console.error("Failed to load services:",t),P({title:"Error",description:"Failed to load services. Please try again.",variant:"destructive"})}finally{R(!1)}};l.useEffect(()=>{V()},[A,r,a]);const U=async t=>{try{j(t);const i=await v.toggleServiceStatus(t);i&&b(N.map(o=>o._id===t?i:o))}catch(i){console.error("Failed to toggle service status:",i)}finally{j(null)}},J=async t=>{if(confirm("Are you sure you want to delete this service?"))try{j(t),await v.deleteService(t)&&b(N.filter(o=>o._id!==t))}catch(i){console.error("Failed to delete service:",i)}finally{j(null)}},p=[{id:"property_management",name:"Property Management",icon:ee,color:"text-blue-600"},{id:"consultation",name:"Real Estate Consultation",icon:M,color:"text-green-600"},{id:"legal_services",name:"Legal Services",icon:ge,color:"text-purple-600"},{id:"home_loans",name:"Home Loans",icon:ve,color:"text-pink-600"},{id:"interior_design",name:"Interior Design",icon:se,color:"text-orange-600"},{id:"moving_services",name:"Moving Services",icon:pe,color:"text-indigo-600"},{id:"insurance",name:"Property Insurance",icon:fe,color:"text-red-600"},{id:"other",name:"Other Services",icon:T,color:"text-teal-600"}],k=N.filter(t=>{const i=r==="all"||t.category===r,o=!a||t.title.toLowerCase().includes(a.toLowerCase())||t.description.toLowerCase().includes(a.toLowerCase());return i&&o});if(S)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading services..."})]})});const Q=t=>{const i=p.find(o=>o.id===t);return i?i.icon:T},Y=t=>{const i=p.find(o=>o.id===t);return i?i.color:"text-gray-600"},K=t=>{const i=p.find(o=>o.id===t);return i?i.name:"Other"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Value-Added Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Offer additional services to your property clients"})]}),e.jsxs(de,{open:h,onOpenChange:c,children:[e.jsx(me,{asChild:!0,children:e.jsxs(x,{children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Add Service"]})}),e.jsxs(ue,{className:"max-w-2xl",children:[e.jsx(xe,{children:e.jsx(he,{children:"Add New Service"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"service-title",children:"Service Title"}),e.jsx(y,{id:"service-title",placeholder:"Enter service title"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"service-category",children:"Category"}),e.jsxs(B,{children:[e.jsx(L,{children:e.jsx(_,{placeholder:"Select category"})}),e.jsx($,{children:p.map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"service-description",children:"Description"}),e.jsx(le,{id:"service-description",placeholder:"Describe your service"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"service-price",children:"Price Range"}),e.jsx(y,{id:"service-price",placeholder:"₹0 - ₹0"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"service-commission",children:"Commission (%)"}),e.jsx(y,{id:"service-commission",placeholder:"15%"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(x,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(x,{onClick:()=>c(!1),children:"Add Service"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(m,{children:e.jsxs(u,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g?.totalServices||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Services"})]})}),e.jsx(m,{children:e.jsxs(u,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:g?.activeServices||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Services"})]})}),e.jsx(m,{children:e.jsxs(u,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:g?.totalBookings||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Orders"})]})}),e.jsx(m,{children:e.jsxs(u,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:g?v.formatCurrency(g.totalRevenue):"₹0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Revenue Earned"})]})}),e.jsx(m,{children:e.jsxs(u,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:g?.averageRating.toFixed(1)||"0.0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Rating"})]})})]}),e.jsxs(te,{defaultValue:"my-services",className:"space-y-6",children:[e.jsxs(re,{children:[e.jsxs(C,{value:"my-services",children:["My Services (",k.length,")"]}),e.jsx(C,{value:"marketplace",children:"Service Marketplace"}),e.jsx(C,{value:"orders",children:"Orders & Bookings"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(y,{placeholder:"Search services...",value:a,onChange:t=>n(t.target.value),className:"pl-10"})]}),e.jsxs(B,{value:r,onValueChange:s,children:[e.jsx(L,{className:"w-full sm:w-48",children:e.jsx(_,{placeholder:"All Categories"})}),e.jsxs($,{children:[e.jsx(F,{value:"all",children:"All Categories"}),p.map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))]})]})]}),e.jsx(E,{value:"my-services",className:"space-y-4",children:k.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:k.map(t=>{const i=Q(t.category);return e.jsx(m,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted",children:e.jsx(i,{className:`w-5 h-5 ${Y(t.category)}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:K(t.category)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{variant:t.isActive?"default":"secondary",className:t.isActive?"bg-green-100 text-green-800":"",children:t.isActive?"Active":"Inactive"}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>z(t),children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>U(t._id),disabled:w===t._id,children:w===t._id?e.jsx(I,{className:"w-4 h-4 animate-spin"}):e.jsx(ye,{className:"w-4 h-4"})}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>J(t._id),disabled:w===t._id,children:e.jsx(Se,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Price Range"}),e.jsx("p",{className:"font-semibold",children:v.getPricingDisplay(t.pricing)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"font-semibold text-green-600",children:t.duration||"Flexible"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Bookings"}),e.jsx("p",{className:"font-semibold",children:t.statistics.totalBookings})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rating"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 text-yellow-500 fill-current mr-1"}),e.jsx("span",{className:"font-semibold",children:t.statistics.averageRating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",t.statistics.totalBookings,")"]})]})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:t.features.slice(0,2).map((o,G)=>{const W=typeof o=="string"?o:o.name||String(o);return e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full mr-2"}),e.jsx("span",{children:W})]},G)})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",t.vendorId]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(x,{size:"sm",variant:"outline",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Messages"]}),e.jsx(x,{size:"sm",children:"View Details"})]})]})]})},t._id)})}):e.jsx(m,{children:e.jsxs(u,{className:"p-12 text-center",children:[e.jsx(M,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Services Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Start offering value-added services to your clients"}),e.jsxs(x,{onClick:()=>c(!0),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Add Your First Service"]})]})})}),e.jsx(E,{value:"marketplace",className:"space-y-4",children:e.jsx(m,{children:e.jsxs(u,{className:"p-12 text-center",children:[e.jsx(ne,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Service Marketplace Coming Soon"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Discover and add third-party services to expand your offerings. This feature will be available soon."}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:"• Browse professional service providers"}),e.jsx("p",{children:"• Add services to your portfolio"}),e.jsx("p",{children:"• Earn commissions on referrals"})]})]})})}),e.jsx(E,{value:"orders",className:"space-y-4",children:e.jsx(m,{children:e.jsxs(u,{className:"p-12 text-center",children:[e.jsx(T,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Orders Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Service orders and bookings will appear here"})]})})})]})]})};export{Ke as default};
