import{j as e}from"./ui-s1SEoZIF.js";import{r as t,R as r,d as s}from"./router-D8v2YSKU.js";import{al as a,a2 as n,G as o,q as i,r as l,s as c,v as d,w as p,f as u,a as h,e as m,b as x,c as f,E as y,U as v,a1 as g,am as b,V as j,J as w,aN as P,y as N,Q as S}from"./index-DvBXyKtT.js";import{a as R}from"./analyticsService-DLxkuhVG.js";import{u as T}from"./use-mobile-C5fBmhy-.js";import{E as C,a as A}from"./jspdf.plugin.autotable-BXWlMDZl.js";import{D as O}from"./download-BpA-30tD.js";import{T as k}from"./trending-up-D3HFnEB_.js";import{T as F}from"./trending-down-DUfdRAaV.js";import{S as D,P as E,f as $,L,d as V,A as z,l as K,m as M,s as I,Q as W,j as Y,U as _,i as B,C as G,h as U,o as q,u as H,G as J,t as Q,N as X,y as Z,I as ee,H as te,X as re,Y as se,O as ae,R as ne,B as oe,E as ie,F as le}from"./generateCategoricalChart-BcNksiWQ.js";import{a as ce,A as de,B as pe}from"./AreaChart-Cz5b3grR.js";import{S as ue}from"./share-C4Gi_Pwo.js";import"./vendor-BxThA0WO.js";import"./reviewsService-C63_b63b.js";function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,be(s.key),s)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(e,t,r){return t=ye(t),function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fe()?Reflect.construct(t,r||[],ye(e).constructor):t.apply(e,r))}function fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(fe=function(){return!!e})()}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t,r){return(t=be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){var t=function(e,t){if("object"!=he(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=he(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==he(t)?t:t+""}var je=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(e,t.Component),me(e,[{key:"render",value:function(){return null}}])}();ge(je,"displayName","ZAxis"),ge(je,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var we=["option","isActive"];function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Pe.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Se(e){var r=e.option,s=e.isActive,a=Ne(e,we);return"string"==typeof r?t.createElement(D,Pe({option:t.createElement(E,Pe({type:r},a)),isActive:s,shapeType:"symbols"},a)):t.createElement(D,Pe({option:r,isActive:s,shapeType:"symbols"},a))}function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Te.apply(this,arguments)}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach(function(t){$e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Oe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Le(s.key),s)}}function ke(e,t,r){return t=De(t),function(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fe()?Reflect.construct(t,r||[],De(e).constructor):t.apply(e,r))}function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Fe=function(){return!!e})()}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $e(e,t,r){return(t=Le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=Re(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Re(t)?t:t+""}var Ve=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return $e(t=ke(this,e,[].concat(s)),"state",{isAnimationFinished:!1}),$e(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0})}),$e(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1})}),$e(t,"id",H("recharts-scatter-")),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(e,t.PureComponent),s=e,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}}],(n=[{key:"renderSymbolsStatically",value:function(e){var t=this,s=this.props,a=s.shape,n=s.activeShape,o=s.activeIndex,i=$(this.props,!1);return e.map(function(e,s){var l=o===s,c=l?n:a,d=Ae(Ae({},i),e);return r.createElement(L,Te({className:"recharts-scatter-symbol",key:"symbol-".concat(null==e?void 0:e.cx,"-").concat(null==e?void 0:e.cy,"-").concat(null==e?void 0:e.size,"-").concat(s)},V(t.props,e,s),{role:"img"}),r.createElement(Se,Te({option:c,isActive:l,key:"symbol-".concat(s)},d)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,t=this.props,s=t.points,a=t.isAnimationActive,n=t.animationBegin,o=t.animationDuration,i=t.animationEasing,l=t.animationId,c=this.state.prevPoints;return r.createElement(z,{begin:n,duration:o,isActive:a,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var a=t.t,n=s.map(function(e,t){var r=c&&c[t];if(r){var s=K(r.cx,e.cx),n=K(r.cy,e.cy),o=K(r.size,e.size);return Ae(Ae({},e),{},{cx:s(a),cy:n(a),size:o(a)})}var i=K(0,e.size);return Ae(Ae({},e),{},{size:i(a)})});return r.createElement(L,null,e.renderSymbolsStatically(n))})}},{key:"renderSymbols",value:function(){var e=this.props,t=e.points,r=e.isAnimationActive,s=this.state.prevPoints;return!(r&&t&&t.length)||s&&M(s,t)?this.renderSymbolsStatically(t):this.renderSymbolsWithAnimation()}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.points,s=e.xAxis,a=e.yAxis,n=e.children,o=I(n,W);return o?o.map(function(e,n){var o=e.props,i=o.direction,l=o.dataKey;return r.cloneElement(e,{key:"".concat(i,"-").concat(l,"-").concat(t[n]),data:t,xAxis:s,yAxis:a,layout:"x"===i?"vertical":"horizontal",dataPointFormatter:function(e,t){return{x:e.cx,y:e.cy,value:"x"===i?+e.node.x:+e.node.y,errorVal:Y(e,t)}}})}):null}},{key:"renderLine",value:function(){var e,t,s=this.props,a=s.points,n=s.line,o=s.lineType,i=s.lineJointType,l=$(this.props,!1),c=$(n,!1);if("joint"===o)e=a.map(function(e){return{x:e.cx,y:e.cy}});else if("fitting"===o){var d=_(a),p=d.xmin,u=d.xmax,h=d.a,m=d.b,x=function(e){return h*e+m};e=[{x:p,y:x(p)},{x:u,y:x(u)}]}var f=Ae(Ae(Ae({},l),{},{fill:"none",stroke:l&&l.fill},c),{},{points:e});return t=r.isValidElement(n)?r.cloneElement(n,f):B(n)?n(f):r.createElement(G,Te({},f,{type:i})),r.createElement(L,{className:"recharts-scatter-line",key:"recharts-scatter-line"},t)}},{key:"render",value:function(){var e=this.props,t=e.hide,s=e.points,n=e.line,o=e.className,i=e.xAxis,l=e.yAxis,c=e.left,d=e.top,p=e.width,u=e.height,h=e.id,m=e.isAnimationActive;if(t||!s||!s.length)return null;var x=this.state.isAnimationFinished,f=a("recharts-scatter",o),y=i&&i.allowDataOverflow,v=l&&l.allowDataOverflow,g=y||v,b=U(h)?this.id:h;return r.createElement(L,{className:f,clipPath:g?"url(#clipPath-".concat(b,")"):null},y||v?r.createElement("defs",null,r.createElement("clipPath",{id:"clipPath-".concat(b)},r.createElement("rect",{x:y?c:c-p/2,y:v?d:d-u/2,width:y?p:2*p,height:v?u:2*u}))):null,n&&this.renderLine(),this.renderErrorBar(),r.createElement(L,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||x)&&q.renderCallByParent(this.props,s))}}])&&Oe(s.prototype,n),o&&Oe(s,o),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,n,o}();$e(Ve,"displayName","Scatter"),$e(Ve,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!J.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"}),$e(Ve,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,s=e.zAxis,a=e.item,n=e.displayedData,o=e.xAxisTicks,i=e.yAxisTicks,l=e.offset,c=a.props.tooltipType,d=I(a.props.children,Q),p=U(t.dataKey)?a.props.dataKey:t.dataKey,u=U(r.dataKey)?a.props.dataKey:r.dataKey,h=s&&s.dataKey,m=s?s.range:je.defaultProps.range,x=m&&m[0],f=t.scale.bandwidth?t.scale.bandwidth():0,y=r.scale.bandwidth?r.scale.bandwidth():0,v=n.map(function(e,n){var l=Y(e,p),m=Y(e,u),v=!U(h)&&Y(e,h)||"-",g=[{name:U(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:l,payload:e,dataKey:p,type:c},{name:U(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:m,payload:e,dataKey:u,type:c}];"-"!==v&&g.push({name:s.name||s.dataKey,unit:s.unit||"",value:v,payload:e,dataKey:h,type:c});var b=X({axis:t,ticks:o,bandSize:f,entry:e,index:n,dataKey:p}),j=X({axis:r,ticks:i,bandSize:y,entry:e,index:n,dataKey:u}),w="-"!==v?s.scale(v):x,P=Math.sqrt(Math.max(w,0)/Math.PI);return Ae(Ae({},e),{},{cx:b,cy:j,x:b-P,y:j-P,xAxis:t,yAxis:r,zAxis:s,width:2*P,height:2*P,size:w,node:{x:l,y:m,z:v},tooltipPayload:g,tooltipPosition:{x:b,y:j},payload:e},d&&d[n]&&d[n].props)});return Ae({points:v},l)});var ze=Z({chartName:"ComposedChart",GraphicalChild:[ee,ce,te,Ve],axisComponents:[{axisType:"xAxis",AxisComp:re},{axisType:"yAxis",AxisComp:se},{axisType:"zAxis",AxisComp:je}],formatAxisMap:ae});const Ke=()=>{const r=s(),{toast:a}=n(),D=T(),[E,$]=t.useState("30days"),[L,V]=t.useState("all"),[z,K]=t.useState(!0),[M,I]=t.useState(null),[W,Y]=t.useState(null),[_,B]=t.useState([]),[G,U]=t.useState(!1),[q,H]=t.useState("all"),[J,Q]=t.useState("composed"),X={timeframe:E,propertyId:"all"!==L?L:void 0};t.useEffect(()=>{(async()=>{try{K(!0);const[e,t,r]=await Promise.all([R.getOverviewStats(X),R.getPerformanceMetrics(X),P.getVendorProperties({page:1,limit:100})]);I(e),Y(t);const s=r.success?r.data.properties:[];B(s),"all"===L||s.find(e=>e._id===L)||V("all")}catch(e){a({title:"Error",description:"Failed to load analytics data. Please try again.",variant:"destructive"})}finally{K(!1)}})()},[E,L]);const Z=async e=>{try{U(!0),"csv"===e?await ae():"pdf"===e&&await he(),a({title:"Success",description:`Analytics data exported as ${e.toUpperCase()}!`})}catch(t){a({title:"Error",description:`Failed to export analytics data as ${e.toUpperCase()}`,variant:"destructive"})}finally{U(!1)}},ae=()=>{const e=[],t=(new Date).toLocaleDateString(),r={"7days":"Last 7 Days","30days":"Last 30 Days","90days":"Last 90 Days","1year":"Last Year"}[E];if(e.push(["Advanced Analytics Report"]),e.push(["Generated on",t]),e.push(["Time Period",r]),e.push(["Report Type","Vendor Property Performance"]),e.push([]),e.push(["EXECUTIVE SUMMARY"]),M&&(e.push(["Total Properties",W?.propertyPerformance?.length||0]),e.push(["Total Views",M.totalViews||0]),e.push(["Total Leads",M.totalLeads||0]),e.push(["Total Revenue (₹)",M.totalRevenue||0]),e.push(["Average Rating",M.averageRating?.toFixed(1)||"0.0"]),e.push(["Overall Conversion Rate",`${((M.totalLeads||0)/(M.totalViews||1)*100).toFixed(1)}%`])),e.push([]),e.push(["REVENUE BREAKDOWN BY PROPERTY TYPE"]),e.push(["Property Type","Revenue (₹)","Percentage of Total"]),M){const t=M.totalRevenue||1;e.push(["Sold Properties",M.soldPropertyRevenue||0,`${((M.soldPropertyRevenue||0)/t*100).toFixed(1)}%`]),e.push(["Leased Properties",M.leasedPropertyRevenue||0,`${((M.leasedPropertyRevenue||0)/t*100).toFixed(1)}%`]),e.push(["Rented Properties",M.rentedPropertyRevenue||0,`${((M.rentedPropertyRevenue||0)/t*100).toFixed(1)}%`]),e.push(["Total Revenue",M.totalRevenue||0,"100%"])}if(e.push([]),e.push(["KEY PERFORMANCE INDICATORS"]),e.push(["Metric","Value","Target Status","Trend"]),M&&(e.push(["Total Views",M.totalViews||0,"On Track","+12%"]),e.push(["Total Leads",M.totalLeads||0,"Above Target","+8%"]),e.push(["Total Revenue",`₹${M.totalRevenue||0}`,"Excellent","+15%"]),e.push(["Conversion Rate",`${((M.totalLeads||0)/(M.totalViews||1)*100).toFixed(1)}%`,"Good","+5%"]),e.push(["Average Rating",M.averageRating?.toFixed(1)||"0.0","Stable","0%"])),e.push([]),e.push(["PROPERTY PERFORMANCE DETAILS"]),e.push(["Property Title","Status","Views","Favorites","Conversion Rate","Revenue (₹)","Performance Rank","Engagement Score"]),W?.propertyPerformance?.length){[...W.propertyPerformance].sort((e,t)=>(t.revenue||0)-(e.revenue||0)).forEach((t,r)=>{const s=t.status?t.status.charAt(0).toUpperCase()+t.status.slice(1):"Pending",a=(.4*(t.views||0)+.3*(t.favorites||0)+.3*(t.conversionRate||0)).toFixed(1);e.push([t.title||"Untitled Property",s,t.views||0,t.favorites||0,`${t.conversionRate||0}%`,t.revenue||0,`#${r+1}`,a])})}e.push([]),e.push(["INSIGHTS AND RECOMMENDATIONS"]);if(["Top performing property: "+(W?.propertyPerformance?.[0]?.title||"N/A"),"Focus on properties with conversion rates above 20%","Optimize listings with low engagement scores","Monitor response times to improve conversion rates","Properties with higher view counts perform better"].forEach(t=>e.push([t])),e.push([]),e.push(["SUMMARY STATISTICS"]),W?.propertyPerformance?.length){const t=W.propertyPerformance,r=t.reduce((e,t)=>e+(t.views||0),0),s=t.reduce((e,t)=>e+(t.revenue||0),0),a=t.reduce((e,t)=>e+(t.conversionRate||0),0)/t.length;e.push(["Total Properties Analyzed",t.length]),e.push(["Average Views per Property",Math.round(r/t.length)]),e.push(["Average Revenue per Property",Math.round(s/t.length)]),e.push(["Average Conversion Rate",`${a.toFixed(1)}%`]),e.push(["Highest Performing Property",t[0]?.title||"N/A"])}const s=e.map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=`advanced-analytics-${E}-${Date.now()}.csv`;R.downloadBlob(a,n)},he=()=>{const e=new C,t=e.internal.pageSize.width,r=e.internal.pageSize.height,s={primary:[41,128,185],secondary:[52,152,219],success:[46,204,113],purple:[155,89,182],dark:[44,62,80],light:[245,245,245]},a=(t,r,s,a,n,o)=>{for(let i=0;i<a;i++){const l=i/a,c=Math.round(n[0]*(1-l)+o[0]*l),d=Math.round(n[1]*(1-l)+o[1]*l),p=Math.round(n[2]*(1-l)+o[2]*l);e.setFillColor(c,d,p),e.rect(t,r+i,s,1,"F")}};a(0,0,t,40,s.primary,s.secondary),e.setTextColor(255,255,255),e.setFontSize(28),e.setFont("helvetica","bold"),e.text("SQUARES",20,25),e.setFontSize(14),e.setFont("helvetica","normal"),e.text("Property Analytics Report",20,35),e.setFillColor(255,255,255),e.setDrawColor(...s.primary),e.setLineWidth(.5),e.roundedRect(120,10,70,25,3,3,"FD"),e.setTextColor(...s.dark),e.setFontSize(10),e.setFont("helvetica","bold");const n=(new Date).toLocaleDateString(),o={"7days":"Last 7 Days","30days":"Last 30 Days","90days":"Last 90 Days","1year":"Last Year"}[E];e.text("Report Period:",125,18),e.text(o,125,25),e.text(`Generated: ${n}`,125,32);let i=55;if(M){e.setFillColor(...s.light),e.setDrawColor(...s.primary),e.setLineWidth(.3),e.roundedRect(15,i-5,t-30,15,2,2,"FD"),e.setTextColor(...s.primary),e.setFontSize(16),e.setFont("helvetica","bold"),e.text("Executive Summary",20,i+5),i+=20,e.setTextColor(...s.dark),e.setFontSize(11),e.setFont("helvetica","normal");const a=`This comprehensive analytics report covers the ${o.toLowerCase()} period, showcasing ${R.formatNumber(M.totalViews||0)} total property views, ${R.formatNumber(M.totalLeads||0)} leads generated, and ₹${R.formatNumber(M.totalRevenue||0)} in total revenue across ${W?.propertyPerformance?.length||0} properties.`,n=e.splitTextToSize(a,t-40);let l=i;for(let t=0;t<n.length;t++)l>r-30&&(e.addPage(),l=20),e.text(n[t],20,l),l+=5;i=l+5}if(M){i>r-100&&(e.addPage(),i=20),e.setFillColor(...s.secondary),e.setDrawColor(...s.secondary),e.roundedRect(15,i-5,t-30,12,2,2,"F"),e.setTextColor(255,255,255),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Key Performance Indicators",20,i+2),i+=18;const a=[["Metric","Value","Change","Target Status"],["Total Views",R.formatNumber(M.totalViews||0),"+12%","On Track"],["Total Leads",R.formatNumber(M.totalLeads||0),"+8%","Above Target"],["Total Revenue",`₹${R.formatNumber(M.totalRevenue||0)}`,"+15%","Excellent"],["Conversion Rate",`${((M.totalLeads||0)/(M.totalViews||1)*100).toFixed(1)}%`,"+5%","Good"],["Average Rating",`${M.averageRating?.toFixed(1)||"0.0"}`,"0%","Stable"]];A(e,{body:a,startY:i,theme:"grid",styles:{fontSize:10,cellPadding:4,lineColor:[200,200,200],lineWidth:.1},headStyles:{fillColor:s.primary,textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[248,249,250]},columnStyles:{0:{fontStyle:"bold",cellWidth:35},1:{halign:"right",cellWidth:30},2:{halign:"center",cellWidth:25},3:{halign:"center",cellWidth:30}},margin:{left:20,right:20}}),i=e.lastAutoTable.finalY+15}if(M&&(M.soldPropertyRevenue||M.leasedPropertyRevenue||M.rentedPropertyRevenue)){i>r-120&&(e.addPage(),i=20),e.setFillColor(...s.success),e.setDrawColor(...s.success),e.roundedRect(15,i-5,t-30,12,2,2,"F"),e.setTextColor(255,255,255),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Revenue Breakdown by Property Type",20,i+2),i+=18;const a=M.totalRevenue||1,n=[["Property Type","Revenue","Percentage","Status"],["Sold Properties",`₹${R.formatNumber(M.soldPropertyRevenue||0)}`,`${((M.soldPropertyRevenue||0)/a*100).toFixed(1)}%`,"High Performer"],["Leased Properties",`₹${R.formatNumber(M.leasedPropertyRevenue||0)}`,`${((M.leasedPropertyRevenue||0)/a*100).toFixed(1)}%`,"Steady"],["Rented Properties",`₹${R.formatNumber(M.rentedPropertyRevenue||0)}`,`${((M.rentedPropertyRevenue||0)/a*100).toFixed(1)}%`,"Growing"],["Total Revenue",`₹${R.formatNumber(M.totalRevenue||0)}`,"100%","Portfolio Total"]];A(e,{body:n,startY:i,theme:"grid",styles:{fontSize:10,cellPadding:4,lineColor:[200,200,200],lineWidth:.1},headStyles:{fillColor:s.success,textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[248,249,250]},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{halign:"right",cellWidth:35},2:{halign:"center",cellWidth:25},3:{halign:"center",cellWidth:30}},margin:{left:20,right:20}}),i=e.lastAutoTable.finalY+15}if(W?.propertyPerformance?.length){i>r-150&&(e.addPage(),i=20),e.setFillColor(...s.purple),e.setDrawColor(...s.purple),e.roundedRect(15,i-5,t-30,12,2,2,"F"),e.setTextColor(255,255,255),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Property Performance Details",20,i+2),i+=18;const a=[["Property Title","Status","Views","Favorites","Conv. Rate","Revenue","Rank"]];[...W.propertyPerformance].sort((e,t)=>(t.revenue||0)-(e.revenue||0)).forEach((e,t)=>{const r=e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Pending";e.status?.toLowerCase(),a.push([e.title||"Untitled Property",r,R.formatNumber(e.views||0),R.formatNumber(e.favorites||0),`${e.conversionRate||0}%`,`₹${R.formatNumber(e.revenue||0)}`,`#${t+1}`])}),A(e,{body:a,startY:i,theme:"grid",styles:{fontSize:9,cellPadding:3,lineColor:[200,200,200],lineWidth:.1},headStyles:{fillColor:s.purple,textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[248,249,250]},columnStyles:{0:{cellWidth:45,fontStyle:"bold"},1:{halign:"center",cellWidth:25},2:{halign:"right",cellWidth:20},3:{halign:"right",cellWidth:20},4:{halign:"center",cellWidth:20},5:{halign:"right",cellWidth:30},6:{halign:"center",cellWidth:15}},margin:{left:15,right:15}}),i=e.lastAutoTable.finalY+15}const l=e.getNumberOfPages();for(let d=1;d<=l;d++)e.setPage(d),a(0,r-15,t,15,s.light,[220,220,220]),e.setTextColor(...s.dark),e.setFontSize(8),e.setFont("helvetica","normal"),e.text(`Page ${d} of ${l}`,20,r-5),e.text("Generated by Squares Vendor Analytics Dashboard",t-90,r-5),e.text(`© ${(new Date).getFullYear()} Squares - Confidential Report`,t/2-35,r-5);const c=`advanced-analytics-${E}-${Date.now()}.pdf`;e.save(c)};if(z)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading analytics..."})]})});const me=M?(e=>{if(!e)return[{title:"Total Views",value:"0",change:"0%",changeType:"neutral",icon:y,description:"Property page views"},{title:"Phone Calls",value:"0",change:"0%",changeType:"neutral",icon:N,description:"Direct calls"},{title:"Messages",value:"0",change:"0%",changeType:"neutral",icon:b,description:"Chat inquiries"},{title:"Total Revenue",value:"₹0",change:"0%",changeType:"neutral",icon:S,description:"Customer reviews"},{title:"Avg. Rating",value:"0.0",change:"0%",changeType:"neutral",icon:S,description:"Customer reviews"}];const t=e=>{if(null==e||isNaN(e))return{change:"0%",changeType:"neutral"};const t=e.toFixed(1);return{change:`${e>0?"+":""}${t}%`,changeType:e>0?"increase":e<0?"decrease":"neutral"}},r=t(e.trends?.views?.growth);t(e.trends?.leads?.growth),t(e.trends?.properties?.growth);const s=t(e.trends?.revenue?.growth),a="0%",n="neutral",o="0%",i="neutral",l="0%",c="neutral";return[{title:"Total Views",value:R.formatNumber(e.totalViews),change:r.change,changeType:r.changeType,icon:y,description:"Property page views"},{title:"Phone Calls",value:R.formatNumber(e.totalCalls),change:"0%",changeType:"neutral",icon:N,description:"Direct calls"},{title:"Messages",value:R.formatNumber(e.totalMessages),change:"0%",changeType:"neutral",icon:b,description:"Chat inquiries"},{title:"Total Revenue",value:`₹${R.formatNumber(e.totalRevenue)}`,change:s.change,changeType:s.changeType,icon:S,description:"All property revenue"},{title:"Sold Properties",value:`₹${R.formatNumber(e.soldPropertyRevenue)}`,change:a,changeType:n,icon:S,description:"Revenue from sold properties"},{title:"Leased Properties",value:`₹${R.formatNumber(e.leasedPropertyRevenue)}`,change:o,changeType:i,icon:S,description:"Revenue from leased properties"},{title:"Rented Properties",value:`₹${R.formatNumber(e.rentedPropertyRevenue)}`,change:l,changeType:c,icon:S,description:"Revenue from rented properties"},{title:"Avg. Rating",value:e.averageRating?.toFixed(1)||"0.0",change:"0%",changeType:"neutral",icon:S,description:"Customer reviews"}]})(M):[];W?.viewsData?.length?W.viewsData:R.generateDateRange(E);const xe=W?.leadsData?.length?W.leadsData:R.generateDateRange(E);W?.conversionData?.length?W.conversionData:R.generateDateRange(E),W?.revenueData?.length?W.revenueData:R.generateDateRange(E);const fe=W?.propertyPerformance||[];!W?.leadSources?.length||W.leadSources,!W?.demographicsData?.length||W.demographicsData,!W?.viewsData?.length||W.viewsData.slice(0,7).map((e,t)=>({name:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][t]||e.name,favorites:Math.floor(.1*e.value),shares:Math.floor(.05*e.value),inquiries:Math.floor(.02*e.value)}));const ye=W?.viewsData?.length?W.viewsData.map((e,t)=>({name:e.name,views:e.value||0,interactions:Math.floor(.15*(e.value||0)),conversions:Math.floor(.03*(e.value||0)),favorites:Math.floor(.08*(e.value||0)),shares:Math.floor(.04*(e.value||0)),inquiries:Math.floor(.06*(e.value||0))})):[],ve=ye.length?ye:[];return W?.propertyPerformance.slice(0,3),e.jsxs("div",{className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"flex "+(D?"flex-col space-y-4":"justify-between items-center"),children:[e.jsxs("div",{children:[e.jsx("h1",{className:(D?"text-2xl":"text-3xl")+" font-bold tracking-tight",children:"Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your property performance and marketing insights"})]}),e.jsxs("div",{className:"flex "+(D?"flex-col space-y-2":"gap-2"),children:[e.jsxs(i,{value:E,onValueChange:e=>$(e),children:[e.jsx(l,{className:""+(D?"w-full":"w-40"),children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(p,{value:"7days",children:"Last 7 days"}),e.jsx(p,{value:"30days",children:"Last 30 days"}),e.jsx(p,{value:"90days",children:"Last 90 Days"}),e.jsx(p,{value:"1year",children:"Last year"})]})]}),e.jsxs("div",{className:"flex "+(D?"flex-col space-y-2":"space-x-2"),children:[e.jsxs(u,{variant:"outline",onClick:()=>Z("csv"),disabled:G,className:""+(D?"w-full h-11":"h-9"),children:[G?e.jsx(o,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(O,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(u,{variant:"outline",onClick:()=>Z("pdf"),disabled:G,className:""+(D?"w-full h-11":"h-9"),children:[G?e.jsx(o,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(O,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})]})]}),e.jsx("div",{className:"grid gap-4 "+(D?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"),children:me.map(t=>e.jsx(h,{children:e.jsx(m,{className:""+(D?"p-4":"p-6"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:(D?"text-xs":"text-sm")+" font-medium text-muted-foreground",children:t.title}),e.jsx("p",{className:(D?"text-xl":"text-2xl")+" font-bold",children:t.value}),e.jsxs("div",{className:"flex items-center mt-2",children:["increase"===t.changeType?e.jsx(k,{className:(D?"w-3 h-3":"w-4 h-4")+" text-green-500 mr-1"}):"decrease"===t.changeType?e.jsx(F,{className:(D?"w-3 h-3":"w-4 h-4")+" text-red-500 mr-1"}):null,e.jsx("span",{className:`${D?"text-xs":"text-sm"} ${"increase"===t.changeType?"text-green-500":"decrease"===t.changeType?"text-red-500":"text-muted-foreground"}`,children:t.change})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.description})]}),e.jsx(t.icon,{className:(D?"h-6 w-6":"h-8 w-8")+" text-muted-foreground"})]})})},t.title))}),e.jsxs("div",{className:"grid gap-6 "+(D?"grid-cols-1":"grid-cols-1 lg:grid-cols-2"),children:[e.jsxs(h,{className:"lg:col-span-2",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(f,{children:"Property Engagement Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track views, interactions, and conversions across your properties"})]}),e.jsxs("div",{className:"flex gap-2 "+(D?"flex-col":"flex-row"),children:[e.jsxs(i,{value:q,onValueChange:e=>H(e),children:[e.jsx(l,{className:""+(D?"w-full":"w-40"),children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(p,{value:"all",children:"All Metrics"}),e.jsx(p,{value:"views",children:"Views Only"}),e.jsx(p,{value:"interactions",children:"Interactions"}),e.jsx(p,{value:"conversions",children:"Conversions"})]})]}),e.jsxs(i,{value:J,onValueChange:e=>Q(e),children:[e.jsx(l,{className:""+(D?"w-full":"w-36"),children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(p,{value:"composed",children:"Combined"}),e.jsx(p,{value:"area",children:"Area Chart"}),e.jsx(p,{value:"bar",children:"Bar Chart"})]})]})]})]})}),e.jsx(m,{children:ve.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ne,{width:"100%",height:350,children:"composed"===J?e.jsxs(ze,{data:ve,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorInteractions",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:.1})]})]}),e.jsx(oe,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(re,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(se,{stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ie,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}}),e.jsx(le,{wrapperStyle:{paddingTop:"15px"},iconType:"circle"}),"all"===q||"views"===q?e.jsx(ce,{type:"monotone",dataKey:"views",fill:"url(#colorViews)",stroke:"#3b82f6",strokeWidth:2,name:"Views"}):null,"all"===q||"interactions"===q?e.jsx(te,{dataKey:"interactions",fill:"#8b5cf6",name:"Interactions",radius:[4,4,0,0]}):null,"all"===q||"conversions"===q?e.jsx(ee,{type:"monotone",dataKey:"conversions",stroke:"#10b981",strokeWidth:3,dot:{r:5,fill:"#10b981"},name:"Conversions"}):null,"all"===q?e.jsxs(e.Fragment,{children:[e.jsx(ee,{type:"monotone",dataKey:"favorites",stroke:"#f59e0b",strokeWidth:2,strokeDasharray:"5 5",dot:{r:4},name:"Favorites"}),e.jsx(ee,{type:"monotone",dataKey:"shares",stroke:"#ec4899",strokeWidth:2,strokeDasharray:"5 5",dot:{r:4},name:"Shares"})]}):null]}):"area"===J?e.jsxs(de,{data:ve,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"areaViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"areaInteractions",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"areaConversions",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]})]}),e.jsx(oe,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(re,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(se,{stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ie,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(le,{wrapperStyle:{paddingTop:"15px"}}),"all"===q||"views"===q?e.jsx(ce,{type:"monotone",dataKey:"views",stroke:"#3b82f6",fill:"url(#areaViews)",name:"Views"}):null,"all"===q||"interactions"===q?e.jsx(ce,{type:"monotone",dataKey:"interactions",stroke:"#8b5cf6",fill:"url(#areaInteractions)",name:"Interactions"}):null,"all"===q||"conversions"===q?e.jsx(ce,{type:"monotone",dataKey:"conversions",stroke:"#10b981",fill:"url(#areaConversions)",name:"Conversions"}):null]}):e.jsxs(pe,{data:ve,children:[e.jsx(oe,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(re,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(se,{stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ie,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(le,{wrapperStyle:{paddingTop:"15px"}}),"all"===q||"views"===q?e.jsx(te,{dataKey:"views",fill:"#3b82f6",name:"Views",radius:[4,4,0,0]}):null,"all"===q||"interactions"===q?e.jsx(te,{dataKey:"interactions",fill:"#8b5cf6",name:"Interactions",radius:[4,4,0,0]}):null,"all"===q||"conversions"===q?e.jsx(te,{dataKey:"conversions",fill:"#10b981",name:"Conversions",radius:[4,4,0,0]}):null]})}),e.jsxs("div",{className:"grid gap-3 mt-6 pt-4 border-t "+(D?"grid-cols-1":"grid-cols-3 md:grid-cols-6"),children:[e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded-lg",children:[e.jsx(y,{className:(D?"w-4 h-4":"w-5 h-5")+" mx-auto text-blue-600 mb-1"}),e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Views"}),e.jsx("div",{className:(D?"text-sm":"text-lg")+" font-bold text-blue-700",children:ve.reduce((e,t)=>e+(t.views||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded-lg",children:[e.jsx(v,{className:(D?"w-4 h-4":"w-5 h-5")+" mx-auto text-purple-600 mb-1"}),e.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Interactions"}),e.jsx("div",{className:(D?"text-sm":"text-lg")+" font-bold text-purple-700",children:ve.reduce((e,t)=>e+(t.interactions||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-lg",children:[e.jsx(k,{className:(D?"w-4 h-4":"w-5 h-5")+" mx-auto text-green-600 mb-1"}),e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Conversions"}),e.jsx("div",{className:(D?"text-sm":"text-lg")+" font-bold text-green-700",children:ve.reduce((e,t)=>e+(t.conversions||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-amber-50 rounded-lg",children:[e.jsx(g,{className:(D?"w-4 h-4":"w-5 h-5")+" mx-auto text-amber-600 mb-1"}),e.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Favorites"}),e.jsx("div",{className:(D?"text-sm":"text-lg")+" font-bold text-amber-700",children:ve.reduce((e,t)=>e+(t.favorites||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-pink-50 rounded-lg",children:[e.jsx(ue,{className:(D?"w-4 h-4":"w-5 h-5")+" mx-auto text-pink-600 mb-1"}),e.jsx("div",{className:"text-xs text-pink-600 font-medium",children:"Shares"}),e.jsx("div",{className:(D?"text-sm":"text-lg")+" font-bold text-pink-700",children:ve.reduce((e,t)=>e+(t.shares||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-cyan-50 rounded-lg",children:[e.jsx(b,{className:(D?"w-4 h-4":"w-5 h-5")+" mx-auto text-cyan-600 mb-1"}),e.jsx("div",{className:"text-xs text-cyan-600 font-medium",children:"Inquiries"}),e.jsx("div",{className:(D?"text-sm":"text-lg")+" font-bold text-cyan-700",children:ve.reduce((e,t)=>e+(t.inquiries||0),0).toLocaleString()})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[350px] text-center",children:[e.jsx(j,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Engagement Data"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Property engagement metrics will appear here once your properties start receiving views and interactions from potential buyers."})]})})]}),e.jsxs(h,{className:"lg:col-span-2",children:[e.jsxs(x,{children:[e.jsx(f,{children:"Inquiry Response Time"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Average time to respond to customer inquiries"})]}),e.jsxs(m,{children:[e.jsx(ne,{width:"100%",height:300,children:e.jsxs(de,{data:xe,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorResponseTime",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]})}),e.jsx(oe,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(re,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(se,{stroke:"#6b7280",tick:{fontSize:12},label:{value:"Hours",angle:-90,position:"insideLeft"}}),e.jsx(ie,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:e=>[`${e.toFixed(1)} hours`,"Response Time"]}),e.jsx(ce,{type:"monotone",dataKey:"value",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorResponseTime)"})]})}),e.jsxs("div",{className:"grid gap-4 mt-6 pt-4 border-t "+(D?"grid-cols-1":"grid-cols-3"),children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Response"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[xe.length>0?(xe.reduce((e,t)=>e+t.value,0)/xe.length).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fastest"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[xe.length>0?Math.min(...xe.map(e=>e.value)).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Inquiries"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:M?.totalMessages||0})]})]})]})]})]}),e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(f,{children:"Property Performance"}),e.jsxs(i,{value:L,onValueChange:V,children:[e.jsx(l,{className:"w-48",children:e.jsx(c,{placeholder:"Filter by property"})}),e.jsxs(d,{children:[e.jsx(p,{value:"all",children:"All Properties"}),_.length>0?_.map(t=>e.jsxs(p,{value:t._id,children:[(t.title||"Untitled Property").substring(0,30),t.title&&t.title.length>30?"...":""]},t._id)):e.jsx(p,{value:"no-properties",disabled:!0,children:"No properties available"})]})]})]})}),e.jsx(m,{children:0===_.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-center",children:[e.jsx(w,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mb-4",children:"You haven't added any properties yet. Add your first property to start tracking performance analytics."}),e.jsx(u,{onClick:()=>r("/vendor/properties/add"),className:"mt-2",children:"Add Your First Property"})]}):fe.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsx(ne,{width:"100%",height:400,children:e.jsxs(de,{data:fe,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),e.jsx(oe,{strokeDasharray:"3 3",stroke:"#e5e7eb",opacity:.5}),e.jsx(re,{dataKey:"title",angle:-45,textAnchor:"end",height:100,tick:{fontSize:11,fill:"#6b7280"},interval:0}),e.jsx(se,{tick:{fontSize:12,fill:"#6b7280"},label:{value:"Views",angle:-90,position:"insideLeft",style:{fill:"#6b7280"}}}),e.jsx(ie,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.96)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:(e,t)=>[e,t]}),e.jsx(le,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),e.jsx(ce,{type:"monotone",dataKey:"views",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorViews)"})]})}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left p-3 text-sm font-semibold",children:"Property"}),e.jsx("th",{className:"text-right p-3 text-sm font-semibold",children:"Views"}),e.jsx("th",{className:"text-right p-3 text-sm font-semibold",children:"Favorites"}),e.jsx("th",{className:"text-right p-3 text-sm font-semibold",children:"Conv. Rate"}),e.jsx("th",{className:"text-right p-3 text-sm font-semibold",children:"Revenue"})]})}),e.jsx("tbody",{children:fe.map((t,r)=>e.jsxs("tr",{className:"border-b hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"p-3 text-sm font-medium",children:t.title}),e.jsx("td",{className:"p-3 text-sm text-right",children:R.formatNumber(t.views||0)}),e.jsx("td",{className:"p-3 text-sm text-right",children:R.formatNumber(t.favorites||0)}),e.jsxs("td",{className:"p-3 text-sm text-right",children:[t.conversionRate||0,"%"]}),e.jsxs("td",{className:"p-3 text-sm text-right font-semibold",children:["₹",R.formatNumber(t.revenue||0)]})]},r))})]})})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-center",children:[e.jsx(j,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Performance Data"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"Performance data for your properties will appear here once they receive views and interactions."})]})})]})]})};export{Ke as default};
