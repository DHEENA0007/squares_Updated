import{j as e}from"./ui-BNZSgpjP.js";import{r as s,d as t,h as a,L as r}from"./router-D8v2YSKU.js";import{t as i,aL as l,a4 as c,a5 as n,a6 as d,a7 as o,a8 as m,af as x,ag as p,ah as h,a1 as u,$ as j,ai as f,aB as g,G as N,I as v,a as b,e as y,k as w,bP as k,bQ as C,bu as S,B as $,bY as P,aO as _,f as A,al as z,bX as L,aM as F,J as I,a9 as E,b as T,c as B,o as M,y as O,x as U}from"./index-BxQlwZ4N.js";import{i as R,c as Y,g as V}from"./propertyUtils-41DuwCMc.js";import{f as W}from"./favoriteService-BFI4bFBG.js";import{S as H}from"./share-C7LgiFX4.js";import"./vendor-BxThA0WO.js";const J=({open:t,onOpenChange:a,onPropertySelect:r,selectedPropertyIds:b,maxSelections:y=10})=>{const[w,k]=s.useState([]),[C,S]=s.useState([]),[$,P]=s.useState(!1),[_,A]=s.useState(!1),[z,L]=s.useState(null),[F,I]=s.useState(""),[E,T]=s.useState("favorites"),[B,M]=s.useState(null);s.useEffect(()=>{t&&"favorites"===E&&0===w.length&&O()},[t,E]),s.useEffect(()=>{if(!t||"search"!==E)return;if(B&&clearTimeout(B),F.trim().length<2)return void S([]);const e=setTimeout(()=>{U(F)},500);return M(e),()=>{e&&clearTimeout(e)}},[F,E,t]),s.useEffect(()=>{t||(I(""),L(null),S([]))},[t]);const O=async()=>{try{P(!0);const e=await W.getFavorites({limit:100});e.success&&k(e.data.favorites)}catch(e){i({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{P(!1)}},U=async e=>{try{A(!0);const s=await l.getProperties({search:e,page:1,limit:50});s.success&&S(s.data.properties)}catch(s){i({title:"Error",description:"Failed to search properties",variant:"destructive"})}finally{A(!1)}},R=s.useCallback(async e=>{if(!z)if(b.includes(e))i({title:"Already Selected",description:"This property is already in your comparison",variant:"destructive"});else if(b.length>=y)i({title:"Maximum Selections Reached",description:`You can only compare up to ${y} properties`,variant:"destructive"});else try{L(e),await r(e),a(!1)}catch(s){}finally{L(null)}},[z,b,y,r,a]),Y=s.useMemo(()=>w.filter(e=>e.property&&!b.includes(e.property._id)),[w,b]),V=s.useMemo(()=>C.filter(e=>!b.includes(e._id)),[C,b]);return e.jsx(c,{open:t,onOpenChange:a,children:e.jsxs(n,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(d,{children:[e.jsx(o,{children:"Select Property to Compare"}),e.jsxs(m,{children:["Click on a property to add it to your comparison. You can select up to ",y," properties. (",b.length,"/",y," selected)"]})]}),e.jsxs(x,{value:E,onValueChange:T,children:[e.jsxs(p,{className:"grid w-full grid-cols-2",children:[e.jsxs(h,{value:"favorites",className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Favorites (",Y.length,")"]}),e.jsxs(h,{value:"search",className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Search Properties"]})]}),e.jsx(f,{value:"favorites",className:"mt-4",children:e.jsx(g,{className:"h-[500px] pr-4",children:$?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(N,{className:"w-8 h-8 animate-spin text-primary"})}):0===Y.length?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(u,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Available Favorites"}),e.jsx("p",{className:"text-sm",children:0===w.length?"You haven't favorited any properties yet":"All your favorite properties are already in the comparison"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Y.map(s=>e.jsx(q,{property:s.property,isAdding:z===s.property._id,onClick:()=>R(s.property._id)},s._id))})})}),e.jsxs(f,{value:"search",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search by property name, location, or area...",value:F,onChange:e=>I(e.target.value),className:"pl-10"})]}),e.jsx(g,{className:"h-[450px] pr-4",children:_?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(N,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Searching properties..."})]}):F.trim().length<2?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Properties"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Enter at least 2 characters to search"})]}):0===V.length?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(j,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-sm",children:"No available properties match your search criteria"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:V.map(s=>e.jsx(q,{property:s,isAdding:z===s._id,onClick:()=>R(s._id)},s._id))})})]})]})]})})},q=s.memo(({property:s,isAdding:t,onClick:a})=>{return e.jsx(b,{className:"cursor-pointer transition-all hover:shadow-md "+(t?"opacity-50":""),onClick:t?void 0:a,children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:(e=>{const s=e.find(e=>e.isPrimary);return s?.url||e[0]?.url||"/placeholder-property.jpg"})(s.images),alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-property.jpg"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(w,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.address.district?`${s.address.city}, ${s.address.district}, ${s.address.state}`:`${s.address.city}, ${s.address.state}`})]}),e.jsx("div",{className:"text-primary font-semibold text-sm mb-2",children:(i=s.price,l=s.listingType,"rent"===l?`₹${i.toLocaleString("en-IN")}/month`:"lease"===l?`₹${i.toLocaleString("en-IN")}/year`:i>=1e7?`₹${(i/1e7).toFixed(1)} Cr`:i>=1e5?`₹${(i/1e5).toFixed(1)} Lac`:`₹${i.toLocaleString("en-IN")}`)}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"}),e.jsx("span",{children:s.bedrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),e.jsx("span",{children:s.bathrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{children:(r=s.area,r.builtUp?`${r.builtUp} ${r.unit}`:r.plot?`${r.plot} ${r.unit}`:r.carpet?`${r.carpet} ${r.unit}`:"N/A")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{variant:"outline",className:"text-xs",children:s.type}),e.jsx($,{variant:"outline",className:"text-xs capitalize",children:s.listingType}),t&&e.jsxs($,{variant:"secondary",className:"text-xs",children:[e.jsx(N,{className:"w-3 h-3 mr-1 animate-spin"}),"Adding..."]})]})]})]})})});var r,i,l});q.displayName="PropertyCard";const D=()=>{t();const{isConnected:x,lastEvent:p}=P(),[h,j]=a(),[f,g]=s.useState([]),[N,v]=s.useState([]),[k,C]=s.useState(!0),[S,W]=s.useState(!1),[q,D]=s.useState(!1),[K,X]=s.useState(!1),[G,Q]=s.useState(null),Z=s.useRef(!1),ee=s.useCallback(async e=>{if(0===e.length)return v([]),void C(!1);try{C(!0);const s=e.map(e=>l.getProperty(e).catch(e=>null)),t=(await Promise.all(s)).filter(e=>null!==e&&e.success).map(e=>e.data.property);v(t)}catch(s){i({title:"Error",description:"Failed to load properties for comparison",variant:"destructive"})}finally{C(!1)}},[]),se=s.useCallback(async()=>{0!==f.length&&(W(!0),await ee(f),W(!1))},[ee,f]);s.useEffect(()=>{if(!Z.current){const e=h.get("properties")?.split(",").filter(Boolean)||[],s=localStorage.getItem("compareProperties"),t=e.length>0?e:s?JSON.parse(s):[];g(t),ee(t),Z.current=!0}},[]),s.useEffect(()=>{Z.current&&localStorage.setItem("compareProperties",JSON.stringify(f))},[f]);const te=s.useCallback(e=>{e.propertyId&&f.includes(e.propertyId)&&ee(f)},[f,ee]),ae=s.useCallback(e=>{e.propertyId&&v(s=>s.map(s=>s._id===e.propertyId?{...s,isFavorited:"add"===e.action}:s))},[]);_("property_updated",te),_("property_favorited",ae);const re=s.useCallback((e,s)=>"rent"===s?`₹${e.toLocaleString("en-IN")}/month`:"lease"===s?`₹${e.toLocaleString("en-IN")}/year`:e>=1e7?`₹${(e/1e7).toFixed(1)} Cr`:e>=1e5?`₹${(e/1e5).toFixed(1)} Lac`:`₹${e.toLocaleString("en-IN")}`,[]),ie=s.useCallback(e=>e.builtUp?`${e.builtUp} ${e.unit}`:e.plot?`${e.plot} ${e.unit}`:e.carpet?`${e.carpet} ${e.unit}`:"N/A",[]),le=s.useCallback(e=>{const s=e.area.builtUp||e.area.carpet||e.area.plot||0;return 0===s?0:Math.round(e.price/s)},[]),ce=s.useCallback(e=>{const s=e.images.find(e=>e.isPrimary);return s?.url||e.images[0]?.url||"/placeholder-property.jpg"},[]),ne=s.useCallback(e=>{const s=f.filter(s=>s!==e);g(s),v(s=>s.filter(s=>s._id!==e)),s.length>0?j({properties:s.join(",")},{replace:!0}):j({},{replace:!0})},[f,j]),de=s.useCallback(()=>{f.length>=10?i({title:"Comparison Limit Reached",description:"You can compare up to 10 properties at once. Remove a property to add another.",variant:"destructive"}):D(!0)},[f.length]),oe=s.useCallback(async e=>{try{if(f.includes(e))return void i({title:"Already Selected",description:"This property is already in your comparison list",variant:"destructive"});const s=await l.getProperty(e);if(!s.success)throw new Error("Failed to load property");{const t=[...f,e];g(t),v(e=>[...e,s.data.property]),j({properties:t.join(",")},{replace:!0}),i({title:"Property Added",description:`${s.data.property.title} has been added to comparison`})}}catch(s){throw i({title:"Error",description:"Failed to add property to comparison",variant:"destructive"}),s}},[f,j]),me=s.useCallback((e,s=!1)=>{if(!e)return{display:"-",color:"text-muted-foreground"};if(s&&N.length>1){const s=N.map(s=>"number"==typeof e?e:0),t=Math.max(...s),a=Math.min(...s);if(e===t&&e!==a)return{display:e,color:"text-green-600",isBest:!0};if(e===a&&e!==t)return{display:e,color:"text-red-600",isWorst:!0}}return{display:e,color:"text-foreground"}},[N]),xe=s.useMemo(()=>Array.from(new Set(N.flatMap(e=>e.amenities))),[N]),pe=s.useCallback(e=>{const s=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),t=e.owner?.profile?.phone||e.agent?.profile?.phone;t?s?window.location.href=`tel:${t}`:(Q(e),X(!0)):i({title:"Contact Unavailable",description:"Contact information is not available for this property",variant:"destructive"})},[]),he=e=>e.owner?.profile?.phone||e.agent?.profile?.phone||null;return e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(A,{variant:"outline",size:"sm",onClick:se,disabled:S,children:[e.jsx(z,{className:"w-4 h-4 mr-2 "+(S?"animate-spin":"")}),S?"Refreshing...":"Refresh"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(L,{className:"w-8 h-8 text-primary"}),"Compare Properties"]}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Side-by-side comparison of your selected properties (",N.length,"/10)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{to:"/customer/favorites",children:e.jsxs(A,{variant:"outline",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Back to Favorites"]})}),e.jsxs(A,{variant:"outline",disabled:0===N.length,children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Share Comparison"]})]})]}),k&&e.jsx(b,{children:e.jsx(y,{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Loading properties for comparison..."})]})})}),k||0!==N.length?!k&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[N.map(s=>e.jsxs(b,{className:"relative",children:[e.jsx("button",{onClick:()=>ne(s._id),className:"absolute top-2 right-2 z-10 p-1 bg-destructive text-destructive-foreground rounded-full hover:bg-destructive/90",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-muted flex items-center justify-center mb-4 rounded-lg overflow-hidden",children:[e.jsx("img",{src:ce(s),alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling?.classList.remove("hidden")}}),e.jsx(I,{className:"w-8 h-8 text-muted-foreground hidden"})]}),e.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"line-clamp-1",children:s.address.district?`${s.address.city}, ${s.address.district}, ${s.address.state}`:`${s.address.city}, ${s.address.state}`})]}),e.jsx("div",{className:"text-lg font-bold text-primary mb-2",children:re(s.price,s.listingType)}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[s.bedrooms," BHK"]}),e.jsx("span",{children:ie(s.area)}),e.jsxs("span",{children:["₹",le(s),"/sq.ft"]})]})]})]},s._id)),N.length<10&&e.jsx(b,{className:"border-dashed border-2",children:e.jsx(y,{className:"p-4 h-full flex items-center justify-center min-h-[300px]",children:e.jsxs(A,{variant:"ghost",className:"h-full w-full flex flex-col gap-2",onClick:de,children:[e.jsx(E,{className:"w-8 h-8 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Add Property"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",N.length,"/10)"]})]})})})]}),e.jsxs(b,{children:[e.jsx(T,{children:e.jsx(B,{children:"Detailed Comparison"})}),e.jsx(y,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4 w-48 sticky left-0 bg-background z-10",children:"Feature"}),N.map(s=>e.jsx("th",{className:"text-left p-4 min-w-64",children:e.jsx("div",{className:"truncate max-w-64",children:s.title})},s._id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Price"}),N.map(s=>{const t=me(s.price,!0);return e.jsx("td",{className:`p-4 ${t.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[re(s.price,s.listingType),t.isBest&&e.jsx($,{variant:"default",className:"text-xs",children:"Expensive"}),t.isWorst&&e.jsx($,{variant:"secondary",className:"text-xs",children:"Affordable"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Price per sq.ft"}),N.map(s=>{const t=le(s),a=me(t,!0);return e.jsx("td",{className:`p-4 ${a.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:["₹",t,a.isBest&&e.jsx($,{variant:"default",className:"text-xs",children:"Highest"}),a.isWorst&&e.jsx($,{variant:"secondary",className:"text-xs",children:"Best Value"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Area"}),N.map(s=>{const t=s.area.builtUp||s.area.carpet||s.area.plot||0,a=me(t,!0);return e.jsx("td",{className:`p-4 ${a.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[ie(s.area),a.isBest&&e.jsx($,{variant:"default",className:"text-xs",children:"Largest"}),a.isWorst&&e.jsx($,{variant:"secondary",className:"text-xs",children:"Smallest"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Bedrooms"}),N.map(s=>e.jsxs("td",{className:"p-4",children:[s.bedrooms," BHK"]},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Bathrooms"}),N.map(s=>e.jsx("td",{className:"p-4",children:s.bathrooms},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Property Type"}),N.map(s=>e.jsx("td",{className:"p-4",children:e.jsx($,{variant:"outline",className:"capitalize",children:s.type})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Listing Type"}),N.map(s=>e.jsx("td",{className:"p-4",children:e.jsx($,{variant:"outline",className:"capitalize",children:s.listingType})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Status"}),N.map(s=>e.jsx("td",{className:"p-4",children:e.jsx($,{variant:"available"===s.status?"default":"secondary",className:"available"===s.status?"bg-green-500":"",children:"available"===s.status?"Available":s.status})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Location"}),N.map(s=>e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.address.city}),e.jsx("div",{className:"text-muted-foreground",children:s.address.district?`${s.address.district}, ${s.address.state}`:s.address.state})]})},s._id))]})]})]})})})]}),e.jsxs(b,{children:[e.jsx(T,{children:e.jsx(B,{children:"Amenities Comparison"})}),e.jsx(y,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-background p-4 text-left font-semibold min-w-[200px] border-r",children:"Amenity"}),N.map(s=>e.jsx("th",{className:"p-4 text-center font-medium min-w-[150px]",children:e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("span",{className:"text-sm truncate",title:s.title,children:s.title.length>20?`${s.title.slice(0,20)}...`:s.title})})},s._id))]})}),e.jsx("tbody",{children:xe.map((s,t)=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"sticky left-0 z-10 bg-background p-4 font-medium border-r",children:String(s)}),N.map(t=>e.jsx("td",{className:"p-4 text-center",children:t.amenities.includes(String(s))?e.jsx(M,{className:"w-5 h-5 text-green-600 mx-auto"}):e.jsx(F,{className:"w-5 h-5 text-red-400 mx-auto"})},t._id))]},t))})]})})})]}),e.jsxs(b,{children:[e.jsx(T,{children:e.jsx(B,{children:"Contact Information"})}),e.jsx(y,{children:e.jsx("div",{className:"grid gap-4",children:N.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:s.title}),e.jsxs("div",{className:"space-y-2",children:[s.owner&&s.owner.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:R(s.owner)?"Listed by":"Owner"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Y(s)}),s.owner.profile.phone&&!R(s.owner)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.owner.profile.phone})]}),s.agent&&s.agent.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:R(s.agent)?"Listed by":"Agent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:V(s.agent)}),s.agent.profile.phone&&!R(s.agent)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.agent.profile.phone})]}),!s.owner?.profile&&!s.agent?.profile&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact information not available"})]})]},s._id))})})]}),e.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:N.map(s=>e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm truncate",title:s.title,children:s.title}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(A,{size:"sm",variant:"outline",onClick:()=>pe(s),disabled:!he(s),children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"Call"]}),e.jsx(r,{to:`/customer/property/${s._id}`,children:e.jsx(A,{size:"sm",children:"View Details"})})]})]})},s._id))})]}):e.jsx(b,{children:e.jsxs(y,{className:"p-12 text-center",children:[e.jsx(L,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No properties to compare"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add properties from your favorites or search results to start comparing"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(r,{to:"/customer/favorites",children:e.jsxs(A,{children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"View Favorites"]})}),e.jsx(r,{to:"/customer/search",children:e.jsx(A,{variant:"outline",children:"Search Properties"})})]})]})}),e.jsx(J,{open:q,onOpenChange:D,onPropertySelect:oe,selectedPropertyIds:f,maxSelections:10}),e.jsx(c,{open:K,onOpenChange:X,children:e.jsxs(n,{className:"sm:max-w-md",children:[e.jsxs(d,{children:[e.jsx(o,{children:"Contact Information"}),e.jsx(m,{children:G?.title})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[e.jsx(U,{className:"w-10 h-10 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:G&&(ue=G,ue.owner?.profile?Y(ue):ue.agent?.profile?V(ue.agent):"Property Contact")}),e.jsx("p",{className:"text-muted-foreground text-xs",children:G?.owner&&!R(G.owner)?"Owner":G?.agent&&!R(G.agent)?"Agent":"Contact"})]})]}),G&&he(G)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-lg",children:he(G)})]}),e.jsx(A,{size:"sm",onClick:()=>{const e=he(G);e&&(navigator.clipboard.writeText(e),i({description:"Phone number copied to clipboard"}))},children:"Copy"})]}),e.jsxs(A,{className:"w-full",size:"lg",onClick:()=>{const e=he(G);e&&(window.location.href=`tel:${e}`)},children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Call Now"]})]})]})]})})]});var ue};export{D as default};
