import{j as e}from"./ui-BNZSgpjP.js";import{d as s,r as t}from"./router-D8v2YSKU.js";import{u as a,a2 as r,a as i,b as n,e as l,q as c,r as o,s as d,v as m,w as x,P as u,m as h,f as p,n as j,al as v,i as w,aj as g,c as f,d as y,U as N,E as b,af as C,ag as k,ah as R,ai as V,x as D,R as S,V as T,h as A,k as M,y as B,am as U,Z as _}from"./index-AgUnwITA.js";import{s as P,C as L}from"./calendar-Dyvh5wfx.js";import{a as $,L as E}from"./Line-DeXv0VW0.js";import{E as I}from"./exportUtils-BVtTTkrA.js";import{C as F,P as G,a as q,M as K,D as O}from"./DetailedPropertyReport-CbqnTfQf.js";import{C as H}from"./calendar-2Sn-_EOq.js";import{D as z}from"./download-CXE3n3CE.js";import{D as W}from"./dollar-sign-1JDb9RV9.js";import{T as Y}from"./trending-up-Bs2xH4To.js";import{A as Q}from"./arrow-right-Cl7U0LB-.js";import{R as X,C as Z,X as J,Y as ee,T as se,a as te,L as ae,B as re}from"./generateCategoricalChart-qMd4ICK8.js";import{A as ie,a as ne}from"./AreaChart-CAi02FXr.js";import{M as le,C as ce,L as oe}from"./LineChart-BhuAb5YO.js";import{G as de}from"./globe-C65ndl9Z.js";import{B as me}from"./BarChart-DoqLt6u9.js";import{T as xe}from"./thumbs-up-Bij4JGVQ.js";import{f as ue}from"./format-BRqA6CKp.js";import"./vendor-BxThA0WO.js";import"./reviewsService-C_afqTUu.js";import"./xlsx-BjkOj9O8.js";import"./table-DK1Ni377.js";import"./user-x-CcSIHLic.js";import"./message-circle-BfnkDeyG.js";import"./share-2-CpOqeowE.js";const he=["#4285F4","#34A853","#FBBC05","#EA4335","#8884d8","#82ca9d"],pe=()=>{const{user:pe}=a(),{toast:je}=r(),ve=s(),[we,ge]=t.useState("30"),[fe,ye]=t.useState(!0),[Ne,be]=t.useState(null),[Ce,ke]=t.useState(null),[Re,Ve]=t.useState(null),[De,Se]=t.useState(null),[Te,Ae]=t.useState(null),[Me,Be]=t.useState(""),[Ue,_e]=t.useState(P(new Date,30)),[Pe,Le]=t.useState(new Date),[$e,Ee]=t.useState(!1),[Ie,Fe]=t.useState(!1),Ge=e=>"superadmin"===pe?.role||(pe?.rolePermissions?.includes(e)||!1);t.useEffect(()=>{if(!Ge(_.ANALYTICS_VIEW))return je({title:"Access Denied",description:"You don't have permission to view analytics.",variant:"destructive"}),void ve("/rolebased");qe()},[we]);const qe=async()=>{ye(!0);try{const e=await $.getConsolidatedAdminAnalytics(we,"custom"===we?Ue:void 0,"custom"===we?Pe:void 0);e.success&&e.data&&(be({overview:e.data.overview,usersByRole:e.data.overview.usersByRole}),ke(e.data.propertyViews),Ve(e.data.conversion),Se(e.data.traffic),Ae(e.data.engagement))}catch(e){je({title:"Error",description:"Failed to fetch analytics data",variant:"destructive"})}finally{ye(!1)}};if(!Ge(_.ANALYTICS_VIEW))return null;if(fe)return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsxs(i,{className:"animate-pulse",children:[e.jsx(n,{className:"pb-2",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})}),e.jsx(l,{children:e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"})})]},s))})]});const Ke=({title:s,value:t,icon:a,change:r,color:c,subtext:o})=>e.jsxs(i,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(n,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:s}),e.jsx(a,{className:`h-4 w-4 ${c}`})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t}),o&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o}),r&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{className:r>=0?"text-green-600":"text-red-600",children:[r>=0?"+":"",r,"%"]})," from previous period"]})]})]});return e.jsxs("div",{className:"p-6 space-y-6 bg-background min-h-screen",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Reports snapshot and detailed insights"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(c,{value:we,onValueChange:e=>{ge(e),Ee("custom"===e)},children:[e.jsxs(o,{className:"w-[160px]",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),e.jsx(d,{placeholder:"Select range"})]}),e.jsxs(m,{children:[e.jsx(x,{value:"1",children:"Today"}),e.jsx(x,{value:"7",children:"Last 7 days"}),e.jsx(x,{value:"30",children:"Last 30 days"}),e.jsx(x,{value:"90",children:"Last 90 days"}),e.jsx(x,{value:"180",children:"Last 6 months"}),e.jsx(x,{value:"365",children:"Last year"}),e.jsx(x,{value:"custom",children:"Custom Range"})]})]}),$e&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{children:[e.jsx(h,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"w-[130px] text-left",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),Ue?ue(Ue,"MMM dd"):"Start"]})}),e.jsx(j,{className:"w-auto p-0",align:"start",children:e.jsx(L,{mode:"single",selected:Ue,onSelect:_e,initialFocus:!0})})]}),e.jsx("span",{className:"text-muted-foreground",children:"to"}),e.jsxs(u,{children:[e.jsx(h,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"w-[130px] text-left",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),Pe?ue(Pe,"MMM dd"):"End"]})}),e.jsx(j,{className:"w-auto p-0",align:"start",children:e.jsx(L,{mode:"single",selected:Pe,onSelect:Le,initialFocus:!0})})]}),e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>qe(),children:"Apply"})]}),e.jsx(p,{variant:"outline",size:"icon",onClick:()=>qe(),disabled:fe,children:e.jsx(v,{className:"h-4 w-4 "+(fe?"animate-spin":"")})}),e.jsxs(p,{onClick:()=>{Fe(!0);try{const e=ue(new Date,"MMMM dd, yyyy"),s="custom"===we?Math.ceil((Pe.getTime()-Ue.getTime())/864e5):parseInt(we),t=e=>`₹${(e||0).toLocaleString("en-IN")}`,a=[{Metric:"Report Period",Value:`Last ${s} days`,Details:`Generated on ${e}`},{Metric:"Total Users",Value:Ne?.overview?.totalUsers||0,Details:"All registered users"},{Metric:"Total Customers",Value:Ne?.overview?.totalCustomers||0,Details:"Customer role users"},{Metric:"New Registrations",Value:Ne?.overview?.newRegistrations||0,Details:"Users registered in this period"},{Metric:"Total Properties",Value:Ne?.overview?.totalProperties||0,Details:"All listed properties"},{Metric:"Total Views",Value:Ne?.overview?.totalViews||0,Details:"Property page views"},{Metric:"Unique Viewers",Value:Ne?.overview?.uniqueViewers||0,Details:"Distinct visitors"},{Metric:"Avg. View Duration",Value:`${Ne?.overview?.avgViewDuration||0}s`,Details:"Average time on property pages"},{Metric:"Total Revenue",Value:t(Ne?.overview?.totalRevenue||0),Details:"Revenue in this period"},{Metric:"Guest Views",Value:Ne?.overview?.guestViews||0,Details:"Views from unregistered users"},{Metric:"Registered Views",Value:Ne?.overview?.registeredViews||0,Details:"Views from registered users"},{Metric:"Total Interactions",Value:Ne?.overview?.totalInteractions||0,Details:"Phone + Message clicks"}],r=(Ne?.usersByRole||[]).map(e=>({Role:e._id||"Unknown",Count:e.count||0,Percentage:`${Ne?.overview?.totalUsers>0?(e.count/Ne.overview.totalUsers*100).toFixed(1):0}%`})),i=[{Metric:"Total Views",Value:Re?.totalViews||0},{Metric:"Guest Views",Value:Re?.guestViews||0},{Metric:"Registered Views",Value:Re?.registeredViews||0},{Metric:"New Registrations",Value:Re?.newRegistrations||0},{Metric:"Conversion Rate",Value:`${Re?.conversionRate||0}%`}],n=(Re?.registrationsByDate||[]).map(e=>({Date:e._id,"New Registrations":e.count})),l=(Ce?.viewsByDate||[]).map(e=>({Date:e._id,Views:e.count})),c=(Ce?.viewsByProperty||[]).slice(0,30).map((e,s)=>({"#":s+1,"Property Title":e.title||"Unknown","Total Views":e.views||0,"Views in Period":e.periodViews||e.views||0})),o=(Ce?.viewerTypes||[]).map(e=>({"Viewer Type":e.name||e._id||"Unknown",Count:e.value||e.count||0})),d=[{"Interaction Type":"Phone Clicks",Count:Ce?.interactions?.phoneClicks||0},{"Interaction Type":"Message Clicks",Count:Ce?.interactions?.messageClicks||0},{"Interaction Type":"Interest Clicks",Count:Ce?.interactions?.interestClicks||0},{"Interaction Type":"Total",Count:(Ce?.interactions?.phoneClicks||0)+(Ce?.interactions?.messageClicks||0)+(Ce?.interactions?.interestClicks||0)}],m=(De?.trafficBySource||[]).map((e,s)=>({"#":s+1,Source:e.source||"Unknown",Visits:e.count||0,Percentage:De?.trafficBySource?.length>0?`${(e.count/De.trafficBySource.reduce((e,s)=>e+s.count,0)*100).toFixed(1)}%`:"0%"})),x=(De?.trafficByDevice||[]).map(e=>({Device:e.name||e._id||"Unknown",Count:e.value||e.count||0})),u=(De?.trafficByBrowser||[]).map(e=>({Browser:e._id||"Unknown",Count:e.count||0})),h=(De?.trafficByCountry||[]).map(e=>({Country:e._id||"Unknown",Visits:e.count||0})),p=(De?.peakHours||[]).map(e=>({Hour:`${e._id||0}:00`,Visits:e.count||0})),j=(Te?.activeUsers||[]).map(e=>({Date:e._id,"Total Active":e.count||0,Customers:e.customers||0,"Vendors/Agents":e.vendors||0})),v=[{Role:"Customers",Count:Te?.activeUsersSummary?.customers?.count||0},{Role:"Vendors/Agents",Count:Te?.activeUsersSummary?.vendors?.count||0},{Role:"Total Active",Count:(Te?.activeUsersSummary?.customers?.count||0)+(Te?.activeUsersSummary?.vendors?.count||0)}],w=(Te?.messageActivity||[]).map(e=>({Date:e._id,"Messages Sent":e.count||0})),g=(Te?.reviewActivity||[]).map(e=>({Date:e._id,Reviews:e.count||0,"Avg. Rating":(e.avgRating||0).toFixed(1)})),f=(Ne?.overview?.recentActivity||[]).map(e=>({Type:e.type||"Unknown",Count:e.count||0})),y={filename:`analytics_comprehensive_report_${ue(new Date,"yyyy-MM-dd")}`,title:"Comprehensive Analytics Report",metadata:{"Generated on":e,"Report Period":`Last ${s} days`,"Total Users":(Ne?.overview?.totalUsers||0).toString(),"Total Properties":(Ne?.overview?.totalProperties||0).toString(),"Total Views":(Ne?.overview?.totalViews||0).toString(),"Total Revenue":t(Ne?.overview?.totalRevenue||0),"Generated By":pe?.email||"Admin"}},N=[{name:"Executive Summary",data:a,columns:[{wch:25},{wch:20},{wch:40}]},{name:"Users by Role",data:r,columns:[{wch:15},{wch:12},{wch:12}]},{name:"Conversion Metrics",data:i,columns:[{wch:20},{wch:15}]},{name:"Daily Registrations",data:n,columns:[{wch:15},{wch:15}]},{name:"Daily Views",data:l,columns:[{wch:15},{wch:12}]},{name:"Top Properties",data:c,columns:[{wch:5},{wch:40},{wch:12},{wch:15}]},{name:"Viewer Types",data:o,columns:[{wch:15},{wch:12}]},{name:"Interactions",data:d,columns:[{wch:18},{wch:12}]},{name:"Traffic Sources",data:m,columns:[{wch:5},{wch:30},{wch:12},{wch:12}]},{name:"Devices",data:x,columns:[{wch:15},{wch:12}]},{name:"Browsers",data:u,columns:[{wch:20},{wch:12}]},{name:"Countries",data:h,columns:[{wch:20},{wch:12}]},{name:"Peak Hours",data:p,columns:[{wch:10},{wch:12}]},{name:"Daily Active Users",data:j,columns:[{wch:15},{wch:12},{wch:12},{wch:15}]},{name:"Active Users Summary",data:v,columns:[{wch:15},{wch:12}]},{name:"Message Activity",data:w,columns:[{wch:15},{wch:15}]},{name:"Review Activity",data:g,columns:[{wch:15},{wch:10},{wch:12}]},{name:"Recent Activity",data:f,columns:[{wch:15},{wch:12}]}];I.generateExcelReport(y,N),je({title:"Report Generated",description:`Comprehensive analytics report with ${N.length} sheets has been downloaded`})}catch(e){je({title:"Export Failed",description:"Failed to generate analytics report. Please try again.",variant:"destructive"})}finally{Fe(!1)}},disabled:Ie||fe,className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),Ie?"Generating...":"Export Report"]}),e.jsxs(p,{onClick:async()=>{Fe(!0);try{const e=await $.getPropertyReport();if(e.success&&e.data){const s=ue(new Date,"yyyy-MM-dd"),t=e=>`₹${(e||0).toLocaleString("en-IN")}`,a=e.data.map(e=>({"Property Title":e.title,Type:e.type,"Listing Type":e.listingType,Price:t(e.price),Status:e.status,Views:e.views||0,City:e.address?.city||"N/A",State:e.address?.state||"N/A",Pincode:e.address?.pincode||"N/A","Owner Name":e.owner?.name||"N/A","Owner Email":e.owner?.email||"N/A","Owner Phone":e.owner?.phone||"N/A","Subscription Status":e.subscription?.status||"N/A","Plan Name":e.subscription?.planName||"N/A","Subscription End Date":e.subscription?.endDate?ue(new Date(e.subscription.endDate),"yyyy-MM-dd"):"N/A","Created At":ue(new Date(e.createdAt),"yyyy-MM-dd")}));I.generateExcelReport({filename:`comprehensive_property_report_${s}`,title:"Comprehensive Property Report",metadata:{Generated:s,"Total Properties":a.length.toString()}},[{name:"Property Details",data:a,columns:[{wch:30},{wch:15},{wch:15},{wch:15},{wch:15},{wch:10},{wch:15},{wch:15},{wch:10},{wch:20},{wch:25},{wch:15},{wch:20},{wch:20},{wch:15},{wch:15}]}]),je({title:"Property Report Downloaded"})}}catch(e){je({title:"Export Failed",description:"Failed to generate property report",variant:"destructive"})}finally{Fe(!1)}},disabled:Ie||fe,variant:"secondary",className:"gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),"Property Report"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:"Quick Filters:"})]}),["1","7","30","90"].map(s=>e.jsx(p,{variant:we===s?"default":"outline",size:"sm",onClick:()=>{ge(s),Ee(!1)},className:"h-7 text-xs",children:"1"===s?"Today":`${s}D`},s))]})]}),e.jsxs(i,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-950/30 dark:to-teal-950/30 border-emerald-200 dark:border-emerald-800",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs("div",{children:[e.jsxs(f,{className:"flex items-center gap-2 text-emerald-700 dark:text-emerald-300",children:[e.jsx(W,{className:"h-5 w-5"}),"Revenue Summary"]}),e.jsx(y,{children:"Complete financial overview for the selected period"})]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=ue(new Date,"yyyy-MM-dd"),s=e=>`₹${(e||0).toLocaleString("en-IN")}`,t=[{Metric:"Total Revenue",Value:s(Ne?.overview?.totalRevenue||0)},{Metric:"Subscription Revenue",Value:s(Ne?.overview?.subscriptionRevenue||0)},{Metric:"Addon Revenue",Value:s(Ne?.overview?.addonRevenue||0)},{Metric:"Active Subscriptions",Value:Ne?.overview?.activeSubscriptions||0},{Metric:"Revenue Period",Value:`Last ${we} days`}];I.generateExcelReport({filename:`revenue_report_${e}`,title:"Revenue Report",metadata:{Generated:e}},[{name:"Revenue Summary",data:t,columns:[{wch:25},{wch:20}]}]),je({title:"Revenue Report Downloaded"})},className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Export Revenue"]})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-4 border shadow-sm",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:["₹",(Ne?.overview?.totalRevenue||0).toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last ",we," days"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-4 border shadow-sm",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Subscriptions"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["₹",(Ne?.overview?.subscriptionRevenue||0).toLocaleString("en-IN")]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ne?.overview?.activeSubscriptions||0," active"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-4 border shadow-sm",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Addons"}),e.jsxs("p",{className:"text-xl font-bold text-purple-600",children:["₹",(Ne?.overview?.addonRevenue||0).toLocaleString("en-IN")]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Addon services"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ke,{title:"Total Users",value:Ne?.overview?.totalUsers||0,icon:N,color:"text-blue-500",subtext:"Active accounts"}),e.jsx(Ke,{title:"Total Views",value:Ne?.overview?.totalViews||0,icon:b,color:"text-green-500",subtext:`${Ne?.overview?.uniqueViewers||0} unique viewers`}),e.jsx(Ke,{title:"Conversions",value:Ne?.overview?.totalRegistrations||0,icon:Y,color:"text-orange-500",subtext:"New registrations"}),e.jsx(Ke,{title:"Revenue",value:`₹${(Ne?.overview?.totalRevenue||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:W,color:"text-emerald-500",subtext:"Total earnings"})]}),e.jsxs(C,{defaultValue:"snapshot",className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:e.jsxs(k,{className:"grid w-full grid-cols-2 md:grid-cols-5 lg:w-auto",children:[e.jsx(R,{value:"snapshot",children:"Snapshot"}),e.jsx(R,{value:"acquisition",children:"Acquisition"}),e.jsx(R,{value:"engagement",children:"Engagement"}),e.jsx(R,{value:"retention",children:"Retention"}),e.jsx(R,{value:"detailed",children:"Detailed Reports"})]})}),e.jsxs(V,{value:"snapshot",className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=ue(new Date,"yyyy-MM-dd"),s=[{Metric:"Total Users",Value:Ne?.overview?.totalUsers||0},{Metric:"Total Customers",Value:Ne?.overview?.totalCustomers||0},{Metric:"New Registrations",Value:Ne?.overview?.newRegistrations||0},{Metric:"Total Properties",Value:Ne?.overview?.totalProperties||0},{Metric:"Total Views",Value:Ne?.overview?.totalViews||0},{Metric:"Unique Viewers",Value:Ne?.overview?.uniqueViewers||0},{Metric:"Avg. View Duration",Value:`${Ne?.overview?.avgViewDuration||0}s`},{Metric:"Total Revenue",Value:(t=Ne?.overview?.totalRevenue||0,`₹${(t||0).toLocaleString("en-IN")}`)},{Metric:"Total Interactions",Value:Ne?.overview?.totalInteractions||0}];var t;const a=(Ne?.usersByRole||[]).map(e=>({Role:e._id,Count:e.count}));I.generateExcelReport({filename:`overview_report_${e}`,title:"Overview Report",metadata:{Generated:e}},[{name:"Overview",data:s,columns:[{wch:25},{wch:20}]},{name:"Users by Role",data:a,columns:[{wch:15},{wch:12}]}]),je({title:"Overview Report Downloaded"})},className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Export Snapshot"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(i,{className:"lg:col-span-2",children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5 text-primary"}),"User Acquisition Funnel"]}),e.jsx(y,{children:"Guest visits turning into registrations"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"relative pt-4 pb-8",children:e.jsxs("div",{className:"flex items-center justify-between text-center relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Guest Visits"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600 my-2",children:Re?.guestViews||0}),e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("div",{className:"flex-1 h-1 bg-muted mx-2 relative",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-background px-2 text-xs text-muted-foreground",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Registrations"}),e.jsx("span",{className:"text-2xl font-bold text-green-600 my-2",children:Re?.newRegistrations||0}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("div",{className:"flex-1 h-1 bg-muted mx-2 relative",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-background px-2 text-xs text-muted-foreground",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex flex-col items-center bg-background p-2 rounded-lg border shadow-sm w-1/4",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Conversion Rate"}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600 my-2",children:[Re?.conversionRate||0,"%"]}),e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]})]})}),e.jsx("div",{className:"h-[250px] w-full mt-4",children:e.jsx(X,{width:"100%",height:"100%",children:e.jsxs(ie,{data:Re?.registrationsByDate||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#34A853",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#34A853",stopOpacity:0})]})}),e.jsx(Z,{strokeDasharray:"3 3",vertical:!1}),e.jsx(J,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(ee,{axisLine:!1,tickLine:!1}),e.jsx(se,{}),e.jsx(ne,{type:"monotone",dataKey:"count",stroke:"#34A853",fillOpacity:1,fill:"url(#colorCount)"})]})})})]})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),"User Distribution"]})}),e.jsx(l,{children:e.jsx(X,{width:"100%",height:300,children:e.jsxs(G,{children:[e.jsx(q,{data:Ne?.usersByRole||[],dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,children:(Ne?.usersByRole||[]).map((s,t)=>e.jsx(te,{fill:he[t%he.length]},`cell-${t}`))}),e.jsx(se,{}),e.jsx(ae,{verticalAlign:"bottom",height:36})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mt-4",children:[e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(l,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"h-6 w-6 mx-auto text-blue-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Views"}),e.jsx("p",{className:"text-xl font-bold",children:Ne?.overview?.totalViews||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ne?.overview?.uniqueViewers||0," unique viewers"]})]})})}),e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(l,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"h-6 w-6 mx-auto text-green-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered vs Guest"}),e.jsxs("p",{className:"text-xl font-bold",children:[Ne?.overview?.registeredViews||0," / ",Ne?.overview?.guestViews||0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered / Guest"})]})})}),e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(l,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{className:"h-6 w-6 mx-auto text-purple-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Interactions"}),e.jsx("p",{className:"text-xl font-bold",children:Ne?.overview?.totalInteractions||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Clicks & Shares"})]})})}),e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(l,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"h-6 w-6 mx-auto text-indigo-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Properties"}),e.jsx("p",{className:"text-xl font-bold",children:Ne?.overview?.totalProperties||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total listings"})]})})}),e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(l,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"h-6 w-6 mx-auto text-emerald-500 mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Conversion Rate"}),e.jsxs("p",{className:"text-xl font-bold",children:[Re?.conversionRate||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest to user"})]})})})]})]}),e.jsxs(V,{value:"acquisition",className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=ue(new Date,"yyyy-MM-dd"),s=(De?.trafficBySource||[]).map((e,s)=>({"#":s+1,Source:e.source,Visits:e.count})),t=(De?.trafficByDevice||[]).map(e=>({Device:e.name||e._id,Count:e.value||e.count})),a=(De?.trafficByBrowser||[]).map(e=>({Browser:e._id,Count:e.count})),r=(De?.trafficByCountry||[]).map(e=>({Country:e._id,Visits:e.count})),i=(De?.peakHours||[]).map(e=>({Hour:`${e._id}:00`,Visits:e.count}));I.generateExcelReport({filename:`traffic_report_${e}`,title:"Traffic Report",metadata:{Generated:e}},[{name:"Traffic Sources",data:s,columns:[{wch:5},{wch:35},{wch:12}]},{name:"Devices",data:t,columns:[{wch:15},{wch:12}]},{name:"Browsers",data:a,columns:[{wch:20},{wch:12}]},{name:"Countries",data:r,columns:[{wch:20},{wch:12}]},{name:"Peak Hours",data:i,columns:[{wch:10},{wch:12}]}]),je({title:"Traffic Report Downloaded"})},className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Export Acquisition"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-primary"}),"Traffic Sources"]}),e.jsx(y,{children:"Where your users are coming from"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:0===(De?.trafficBySource||[]).length?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(de,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No traffic data yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Traffic will be tracked as users visit pages"})]}):(De?.trafficBySource||[]).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:he[t%he.length]}}),e.jsx("span",{className:"text-sm font-medium truncate",children:s._id||"Direct"})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:s.count/(De?.trafficBySource[0]?.count||1)*100+"%",backgroundColor:he[t%he.length]}})}),e.jsxs("div",{className:"text-right min-w-[60px]",children:[e.jsx("span",{className:"text-sm font-bold",children:s.count}),s.uniqueVisitors&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",s.uniqueVisitors," unique)"]})]})]})]},t))})})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-primary"}),"Device Breakdown"]})}),e.jsx(l,{children:e.jsx(X,{width:"100%",height:300,children:e.jsxs(G,{children:[e.jsx(q,{data:De?.trafficByDevice||[],dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",outerRadius:100,label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,children:(De?.trafficByDevice||[]).map((s,t)=>e.jsx(te,{fill:he[t%he.length]},`cell-${t}`))}),e.jsx(se,{})]})})})]}),e.jsxs(i,{className:"md:col-span-2",children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),"Peak Hours"]}),e.jsx(y,{children:"When users are most active (24h format)"})]}),e.jsx(l,{children:e.jsx(X,{width:"100%",height:250,children:e.jsxs(me,{data:De?.peakHours||[],children:[e.jsx(Z,{strokeDasharray:"3 3",vertical:!1}),e.jsx(J,{dataKey:"_id",label:{value:"Hour of Day",position:"insideBottom",offset:-5},tickFormatter:e=>`${e}:00`}),e.jsx(ee,{axisLine:!1,tickLine:!1}),e.jsx(se,{labelFormatter:e=>`${e}:00 - ${e+1}:00`}),e.jsx(re,{dataKey:"count",fill:"#82ca9d",radius:[4,4,0,0]})]})})})]}),De?.trafficByCountry&&De.trafficByCountry.length>0&&e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-primary"}),"Traffic by Country"]}),e.jsx(y,{children:"Geographic distribution of visitors"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:De.trafficByCountry.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:he[t%he.length]}}),e.jsx("span",{className:"text-sm font-medium",children:s._id||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full",style:{width:s.count/(De.trafficByCountry[0]?.count||1)*100+"%",backgroundColor:he[t%he.length]}})}),e.jsx("span",{className:"text-sm font-bold w-8 text-right",children:s.count})]})]},t))})})]}),De?.trafficByBrowser&&De.trafficByBrowser.length>0&&e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),"Traffic by Browser"]}),e.jsx(y,{children:"Which browsers your visitors use"})]}),e.jsx(l,{children:e.jsx(X,{width:"100%",height:200,children:e.jsxs(G,{children:[e.jsx(q,{data:De.trafficByBrowser,dataKey:"count",nameKey:"_id",cx:"50%",cy:"50%",outerRadius:70,label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,children:De.trafficByBrowser.map((s,t)=>e.jsx(te,{fill:he[t%he.length]},`cell-${t}`))}),e.jsx(se,{})]})})})]})]})]}),e.jsxs(V,{value:"engagement",className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=ue(new Date,"yyyy-MM-dd"),s=(Ce?.viewsByDate||[]).map(e=>({Date:e._id,Views:e.count})),t=(Ce?.viewsByProperty||[]).map((e,s)=>({"#":s+1,Title:e.title,Views:e.views})),a=(Ce?.viewerTypes||[]).map(e=>({Type:e.name||e._id,Count:e.value||e.count})),r=[{Type:"Phone Clicks",Count:Ce?.interactions?.phoneClicks||0},{Type:"Message Clicks",Count:Ce?.interactions?.messageClicks||0},{Type:"Interest Clicks",Count:Ce?.interactions?.interestClicks||0}];I.generateExcelReport({filename:`property_views_report_${e}`,title:"Property Views Report",metadata:{Generated:e}},[{name:"Daily Views",data:s,columns:[{wch:15},{wch:12}]},{name:"Top Properties",data:t,columns:[{wch:5},{wch:40},{wch:12}]},{name:"Viewer Types",data:a,columns:[{wch:15},{wch:12}]},{name:"Interactions",data:r,columns:[{wch:18},{wch:12}]}]),je({title:"Property Views Report Downloaded"})},className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Export Engagement"]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-primary"}),"Property Views Over Time"]})}),e.jsx(l,{children:e.jsx(X,{width:"100%",height:350,children:e.jsxs(ie,{data:Ce?.viewsByDate||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#4285F4",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#4285F4",stopOpacity:0})]})}),e.jsx(Z,{strokeDasharray:"3 3",vertical:!1}),e.jsx(J,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(ee,{axisLine:!1,tickLine:!1}),e.jsx(se,{}),e.jsx(ae,{}),e.jsx(ne,{type:"monotone",dataKey:"views",stroke:"#4285F4",fillOpacity:1,fill:"url(#colorViews)"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-primary"}),"Top Viewed Properties"]}),e.jsx(y,{children:"Most popular listings"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:(Ce?.viewsByProperty||[]).slice(0,5).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors border",onClick:()=>Be(s.propertyId),children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-8 h-8 rounded bg-primary/10 text-primary font-bold text-sm",children:t+1}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:s.propertyTitle}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.uniqueViewers," unique viewers"]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("p",{className:"text-lg font-bold",children:s.totalViews}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"views"})]})]},s.propertyId))})})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-primary"}),"Interaction Types"]}),e.jsx(y,{children:"How users engage with properties"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded text-blue-600 dark:text-blue-300",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("span",{children:"Phone Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:Ce?.interactions?.phoneClicks||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded text-green-600 dark:text-green-300",children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("span",{children:"Message Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:Ce?.interactions?.messageClicks||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded text-purple-600 dark:text-purple-300",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx("span",{children:"Interest Clicks"})]}),e.jsx("span",{className:"font-bold text-lg",children:Ce?.interactions?.interestClicks||0})]})]})})]})]})]})]}),e.jsxs(V,{value:"retention",className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{const e=ue(new Date,"yyyy-MM-dd"),s=(Te?.activeUsers||[]).map(e=>({Date:e._id,Total:e.count,Customers:e.customers||0,Agents:e.vendors||0})),t=(Te?.messageActivity||[]).map(e=>({Date:e._id,Messages:e.count})),a=(Te?.reviewActivity||[]).map(e=>({Date:e._id,Reviews:e.count,"Avg Rating":(e.avgRating||0).toFixed(1)}));I.generateExcelReport({filename:`engagement_report_${e}`,title:"Engagement Report",metadata:{Generated:e}},[{name:"Daily Active Users",data:s,columns:[{wch:15},{wch:10},{wch:12},{wch:10}]},{name:"Message Activity",data:t,columns:[{wch:15},{wch:12}]},{name:"Review Activity",data:a,columns:[{wch:15},{wch:10},{wch:12}]}]),je({title:"Engagement Report Downloaded"})},className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Export Retention"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(i,{className:"lg:col-span-2",children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-primary"}),"Daily Active Users"]}),e.jsx(y,{children:"Users who logged in by role (customers vs agents/vendors)"})]}),e.jsx(l,{children:e.jsx(X,{width:"100%",height:350,children:e.jsxs(oe,{data:Te?.activeUsers||[],children:[e.jsx(Z,{strokeDasharray:"3 3",vertical:!1}),e.jsx(J,{dataKey:"_id",axisLine:!1,tickLine:!1}),e.jsx(ee,{axisLine:!1,tickLine:!1}),e.jsx(se,{content:({active:s,payload:t,label:a})=>{if(s&&t&&t.length){const s=t[0]?.payload;return e.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3",children:[e.jsx("p",{className:"font-bold text-sm mb-2",children:a}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-blue-600",children:["Customers: ",s?.customers||0]}),e.jsxs("p",{className:"text-green-600",children:["Agents/Vendors: ",s?.vendors||0]}),e.jsxs("p",{className:"font-semibold",children:["Total: ",s?.count||0]})]}),s?.topUsers&&s.topUsers.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Active users:"}),e.jsx("ul",{className:"text-xs space-y-0.5",children:s.topUsers.map((s,t)=>e.jsx("li",{children:s},t))})]})]})}return null}}),e.jsx(ae,{}),e.jsx(E,{type:"monotone",dataKey:"customers",name:"Customers",stroke:"#4285F4",strokeWidth:2,dot:{r:4,fill:"#4285F4"},activeDot:{r:6,fill:"#4285F4"}}),e.jsx(E,{type:"monotone",dataKey:"vendors",name:"Agents/Vendors",stroke:"#34A853",strokeWidth:2,dot:{r:4,fill:"#34A853"},activeDot:{r:6,fill:"#34A853"}})]})})})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-primary"}),"Active Users Summary"]}),e.jsx(y,{children:"Breakdown by role"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Customers"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:Te?.activeUsersSummary?.customers?.count||0})]}),e.jsxs("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[(Te?.activeUsersSummary?.customers?.users||[]).slice(0,5).map((s,t)=>e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),s.name||s.email]},t)),(Te?.activeUsersSummary?.customers?.users?.length||0)>5&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(Te?.activeUsersSummary?.customers?.users?.length||0)-5," more"]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Agents/Vendors"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:Te?.activeUsersSummary?.vendors?.count||0})]}),e.jsxs("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[(Te?.activeUsersSummary?.vendors?.users||[]).slice(0,5).map((s,t)=>e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),s.name||s.email]},t)),(Te?.activeUsersSummary?.vendors?.users?.length||0)>5&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(Te?.activeUsersSummary?.vendors?.users?.length||0)-5," more"]})]})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Active Users"}),e.jsx("span",{className:"text-xl font-bold text-primary",children:(Te?.activeUsersSummary?.customers?.count||0)+(Te?.activeUsersSummary?.vendors?.count||0)})]})})]})]})]})]}),e.jsx(V,{value:"detailed",className:"space-y-4",children:e.jsx(O,{dateRange:we,propertyId:Me,customStartDate:Ue,customEndDate:Pe})})]})]})};export{pe as default};
