import{y as e,t}from"./index-CV77Hym3.js";const r=new class{baseUrl="https://api.buildhomemartsquares.com/api";async makeRequest(t,r={}){const a=`${this.baseUrl}${t}`,s={headers:{"Content-Type":"application/json",...r.headers},...r},o=e.getToken();o&&(s.headers={...s.headers,Authorization:`Bearer ${o}`});try{const e=await fetch(a,s);if(!e.ok){const t=await e.json().catch(()=>({success:!1,message:`HTTP ${e.status}: ${e.statusText}`}));throw new Error(t.message||"An error occurred")}return await e.json()}catch(i){throw i}}async getFavorites(e={}){try{const t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&""!==r&&t.append(e,String(r))});const r="/favorites"+(t.toString()?`?${t.toString()}`:"");return await this.makeRequest(r)}catch(r){const e=r instanceof Error?r.message:"Failed to fetch favorites";throw t({title:"Error",description:e,variant:"destructive"}),r}}async addToFavorites(e){try{const r=await this.makeRequest(`/favorites/${e}`,{method:"POST"});return t({title:"Success",description:"Property added to favorites!"}),r}catch(r){const e=r instanceof Error?r.message:"Failed to add to favorites";throw t({title:"Error",description:e,variant:"destructive"}),r}}async removeFromFavorites(e){try{await this.makeRequest(`/favorites/${e}`,{method:"DELETE"}),t({title:"Success",description:"Property removed from favorites!"})}catch(r){const e=r instanceof Error?r.message:"Failed to remove from favorites";throw t({title:"Error",description:e,variant:"destructive"}),r}}async isFavorite(e){try{return(await this.makeRequest(`/favorites/check/${e}`)).data.isFavorite}catch(t){return!1}}async getFavoriteStats(){try{return await this.makeRequest("/favorites/stats")}catch(e){const r=e instanceof Error?e.message:"Failed to fetch favorite statistics";throw t({title:"Error",description:r,variant:"destructive"}),e}}formatPrice(e){return e>=1e7?`₹${(e/1e7).toFixed(1)} Cr`:e>=1e5?`₹${(e/1e5).toFixed(0)} Lac`:`₹${e.toLocaleString()}`}formatPricePerSqFt(e,t){const r=Math.round(e/t);return this.formatPrice(r)}formatDate(e){return new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}getPropertyStatusBadge(e){const t=e?.status||"available";switch(t.toLowerCase()){case"sold":return{variant:"destructive",label:"Sold"};case"rented":return{variant:"secondary",label:"Rented"};case"pending":return{variant:"outline",label:"Under Review"};case"rejected":return{variant:"destructive",label:"Rejected"};case"active":case"available":return{variant:"default",label:"Available"};default:return{variant:"outline",label:t.charAt(0).toUpperCase()+t.slice(1)}}}getTimeAgo(e){const t=new Date(e),r=(new Date).getTime()-t.getTime(),a=Math.floor(r/864e5);return 0===a?"Today":1===a?"Yesterday":a<7?`${a} days ago`:a<30?`${Math.floor(a/7)} weeks ago`:`${Math.floor(a/30)} months ago`}};export{r as f};
