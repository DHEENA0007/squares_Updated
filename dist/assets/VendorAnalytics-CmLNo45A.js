import{j as e}from"./ui-BHyUY8Z8.js";import{R as y,r as E}from"./router-2SVJvIbS.js";import{aW as Le,t as pe,W as _e,H as ne,s as he,v as xe,w as fe,x as ge,y as I,f as se,a as _,e as $,T as ve,b as B,c as W,aB as ie,n as G,E as oe,U as $e,B as Ve,az as Be,A as ye,a9 as be,at as je}from"./index-Bd1eLXM_.js";import{D as we}from"./download-CP-CumYq.js";import{T as We}from"./trending-down-eQbUB_Gl.js";import{f as z,b as H,m as Z,i as K,c as le,A as ze,d as q,e as Ne,g as qe,h as Ae,j as Ke,k as Ue,u as Ge,l as ce,G as He,n as Pe,o as Se,D as Ye,p as Xe,X,Y as J,q as Je,R as ee,L as De,C as te,T as ae,a as Y,r as Qe}from"./LineChart-CN_TXT6y.js";import{D as ke}from"./dollar-sign-Ce6I0kKs.js";import"./vendor-Dazix4UH.js";var Ze=["layout","type","stroke","connectNulls","isRange","ref"],et=["key"],Ee;function U(s){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(s)}function Fe(s,t){if(s==null)return{};var n=tt(s,t),a,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(n[a]=s[a])}return n}function tt(s,t){if(s==null)return{};var n={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;n[a]=s[a]}return n}function V(){return V=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},V.apply(this,arguments)}function Te(s,t){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),n.push.apply(n,a)}return n}function M(s){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Te(Object(n),!0).forEach(function(a){R(s,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a))})}return s}function at(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(s,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,Ie(a.key),a)}}function rt(s,t,n){return t&&Ce(s.prototype,t),n&&Ce(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function nt(s,t,n){return t=re(t),st(s,Me()?Reflect.construct(t,n||[],re(s).constructor):t.apply(s,n))}function st(s,t){if(t&&(U(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return it(s)}function it(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Me(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Me=function(){return!!s})()}function re(s){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},re(s)}function ot(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&de(s,t)}function de(s,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},de(s,t)}function R(s,t,n){return t=Ie(t),t in s?Object.defineProperty(s,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[t]=n,s}function Ie(s){var t=lt(s,"string");return U(t)=="symbol"?t:t+""}function lt(s,t){if(U(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var a=n.call(s,t);if(U(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var F=(function(s){function t(){var n;at(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=nt(this,t,[].concat(r)),R(n,"state",{isAnimationFinished:!0}),R(n,"id",Ge("recharts-area-")),R(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ce(l)&&l()}),R(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ce(l)&&l()}),n}return ot(t,s),rt(t,[{key:"renderDots",value:function(a,r,i){var l=this.props.isAnimationActive,d=this.state.isAnimationFinished;if(l&&!d)return null;var u=this.props,c=u.dot,h=u.points,m=u.dataKey,g=z(this.props,!1),b=z(c,!0),w=h.map(function(j,k){var A=M(M(M({key:"dot-".concat(k),r:3},g),b),{},{index:k,cx:j.x,cy:j.y,dataKey:m,value:j.value,payload:j.payload,points:h});return t.renderDotItem(c,A)}),N={clipPath:a?"url(#clipPath-".concat(r?"":"dots-").concat(i,")"):null};return y.createElement(H,V({className:"recharts-area-dots"},N),w)}},{key:"renderHorizontalRect",value:function(a){var r=this.props,i=r.baseLine,l=r.points,d=r.strokeWidth,u=l[0].x,c=l[l.length-1].x,h=a*Math.abs(u-c),m=Z(l.map(function(g){return g.y||0}));return K(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(Z(i.map(function(g){return g.y||0})),m)),K(m)?y.createElement("rect",{x:u<c?u:u-h,y:0,width:h,height:Math.floor(m+(d?parseInt("".concat(d),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var r=this.props,i=r.baseLine,l=r.points,d=r.strokeWidth,u=l[0].y,c=l[l.length-1].y,h=a*Math.abs(u-c),m=Z(l.map(function(g){return g.x||0}));return K(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(Z(i.map(function(g){return g.x||0})),m)),K(m)?y.createElement("rect",{x:0,y:u<c?u:u-h,width:m+(d?parseInt("".concat(d),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(a){var r=this.props.layout;return r==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,r,i,l){var d=this.props,u=d.layout,c=d.type,h=d.stroke,m=d.connectNulls,g=d.isRange;d.ref;var b=Fe(d,Ze);return y.createElement(H,{clipPath:i?"url(#clipPath-".concat(l,")"):null},y.createElement(le,V({},z(b,!0),{points:a,connectNulls:m,type:c,baseLine:r,layout:u,stroke:"none",className:"recharts-area-area"})),h!=="none"&&y.createElement(le,V({},z(this.props,!1),{className:"recharts-area-curve",layout:u,type:c,connectNulls:m,fill:"none",points:a})),h!=="none"&&g&&y.createElement(le,V({},z(this.props,!1),{className:"recharts-area-curve",layout:u,type:c,connectNulls:m,fill:"none",points:r})))}},{key:"renderAreaWithAnimation",value:function(a,r){var i=this,l=this.props,d=l.points,u=l.baseLine,c=l.isAnimationActive,h=l.animationBegin,m=l.animationDuration,g=l.animationEasing,b=l.animationId,w=this.state,N=w.prevPoints,j=w.prevBaseLine;return y.createElement(ze,{begin:h,duration:m,isActive:c,easing:g,from:{t:0},to:{t:1},key:"area-".concat(b),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var A=k.t;if(N){var O=N.length/d.length,v=d.map(function(D,o){var p=Math.floor(o*O);if(N[p]){var P=N[p],S=q(P.x,D.x),L=q(P.y,D.y);return M(M({},D),{},{x:S(A),y:L(A)})}return D}),x;if(K(u)&&typeof u=="number"){var f=q(j,u);x=f(A)}else if(Ne(u)||qe(u)){var C=q(j,0);x=C(A)}else x=u.map(function(D,o){var p=Math.floor(o*O);if(j[p]){var P=j[p],S=q(P.x,D.x),L=q(P.y,D.y);return M(M({},D),{},{x:S(A),y:L(A)})}return D});return i.renderAreaStatically(v,x,a,r)}return y.createElement(H,null,y.createElement("defs",null,y.createElement("clipPath",{id:"animationClipPath-".concat(r)},i.renderClipRect(A))),y.createElement(H,{clipPath:"url(#animationClipPath-".concat(r,")")},i.renderAreaStatically(d,u,a,r)))})}},{key:"renderArea",value:function(a,r){var i=this.props,l=i.points,d=i.baseLine,u=i.isAnimationActive,c=this.state,h=c.prevPoints,m=c.prevBaseLine,g=c.totalLength;return u&&l&&l.length&&(!h&&g>0||!Ae(h,l)||!Ae(m,d))?this.renderAreaWithAnimation(a,r):this.renderAreaStatically(l,d,a,r)}},{key:"render",value:function(){var a,r=this.props,i=r.hide,l=r.dot,d=r.points,u=r.className,c=r.top,h=r.left,m=r.xAxis,g=r.yAxis,b=r.width,w=r.height,N=r.isAnimationActive,j=r.id;if(i||!d||!d.length)return null;var k=this.state.isAnimationFinished,A=d.length===1,O=Le("recharts-area",u),v=m&&m.allowDataOverflow,x=g&&g.allowDataOverflow,f=v||x,C=Ne(j)?this.id:j,D=(a=z(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},o=D.r,p=o===void 0?3:o,P=D.strokeWidth,S=P===void 0?2:P,L=Ke(l)?l:{},ue=L.clipDot,me=ue===void 0?!0:ue,Q=p*2+S;return y.createElement(H,{className:O},v||x?y.createElement("defs",null,y.createElement("clipPath",{id:"clipPath-".concat(C)},y.createElement("rect",{x:v?h:h-b/2,y:x?c:c-w/2,width:v?b:b*2,height:x?w:w*2})),!me&&y.createElement("clipPath",{id:"clipPath-dots-".concat(C)},y.createElement("rect",{x:h-Q/2,y:c-Q/2,width:b+Q,height:w+Q}))):null,A?null:this.renderArea(f,C),(l||A)&&this.renderDots(f,me,C),(!N||k)&&Ue.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(a,r){return a.animationId!==r.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:r.curPoints,prevBaseLine:r.curBaseLine}:a.points!==r.curPoints||a.baseLine!==r.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(E.PureComponent);Ee=F;R(F,"displayName","Area");R(F,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!He.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});R(F,"getBaseValue",function(s,t,n,a){var r=s.layout,i=s.baseValue,l=t.props.baseValue,d=l??i;if(K(d)&&typeof d=="number")return d;var u=r==="horizontal"?a:n,c=u.scale.domain();if(u.type==="number"){var h=Math.max(c[0],c[1]),m=Math.min(c[0],c[1]);return d==="dataMin"?m:d==="dataMax"||h<0?h:Math.max(Math.min(c[0],c[1]),0)}return d==="dataMin"?c[0]:d==="dataMax"?c[1]:c[0]});R(F,"getComposedData",function(s){var t=s.props,n=s.item,a=s.xAxis,r=s.yAxis,i=s.xAxisTicks,l=s.yAxisTicks,d=s.bandSize,u=s.dataKey,c=s.stackedData,h=s.dataStartIndex,m=s.displayedData,g=s.offset,b=t.layout,w=c&&c.length,N=Ee.getBaseValue(t,n,a,r),j=b==="horizontal",k=!1,A=m.map(function(v,x){var f;w?f=c[h+x]:(f=Pe(v,u),Array.isArray(f)?k=!0:f=[N,f]);var C=f[1]==null||w&&Pe(v,u)==null;return j?{x:Se({axis:a,ticks:i,bandSize:d,entry:v,index:x}),y:C?null:r.scale(f[1]),value:f,payload:v}:{x:C?null:a.scale(f[1]),y:Se({axis:r,ticks:l,bandSize:d,entry:v,index:x}),value:f,payload:v}}),O;return w||k?O=A.map(function(v){var x=Array.isArray(v.value)?v.value[0]:null;return j?{x:v.x,y:x!=null&&v.y!=null?r.scale(x):null}:{x:x!=null?a.scale(x):null,y:v.y}}):O=j?r.scale(N):a.scale(N),M({points:A,baseLine:O,layout:b,isRange:k},g)});R(F,"renderDotItem",function(s,t){var n;if(y.isValidElement(s))n=y.cloneElement(s,t);else if(ce(s))n=s(t);else{var a=Le("recharts-area-dot",typeof s!="boolean"?s.className:""),r=t.key,i=Fe(t,et);n=y.createElement(Ye,V({},i,{key:r,className:a}))}return n});var Oe=Xe({chartName:"AreaChart",GraphicalChild:F,axisComponents:[{axisType:"xAxis",AxisComp:X},{axisType:"yAxis",AxisComp:J}],formatAxisMap:Je});const Re="https://api.akodefy.com/api";class ct{async makeRequest(t,n={}){const a=`${Re}${t}`,r={headers:{"Content-Type":"application/json",...n.headers},...n},i=localStorage.getItem("token");i&&(r.headers={...r.headers,Authorization:`Bearer ${i}`});try{const l=await fetch(a,r);if(!l.ok){const d=await l.json().catch(()=>({success:!1,message:`HTTP ${l.status}: ${l.statusText}`}));throw new Error(d.message||"An error occurred")}return await l.json()}catch(l){throw console.error("Analytics API request failed:",l),l}}async getOverviewStats(t){try{const n=new URLSearchParams;n.append("timeframe",t.timeframe),t.propertyId&&n.append("propertyId",t.propertyId),t.dateFrom&&n.append("dateFrom",t.dateFrom),t.dateTo&&n.append("dateTo",t.dateTo);const a=`/vendors/analytics/overview?${n.toString()}`,r=await this.makeRequest(a);return r.success&&r.data?r.data:{totalViews:0,totalLeads:0,totalCalls:0,totalMessages:0,totalRevenue:0,totalProperties:0,averageRating:0,responseTime:"Not calculated",conversionRate:0}}catch(n){return console.error("Failed to fetch overview stats:",n),{totalViews:0,totalLeads:0,totalCalls:0,totalMessages:0,totalRevenue:0,totalProperties:0,averageRating:0,responseTime:"Not calculated",conversionRate:0}}}async getPerformanceMetrics(t){try{const n=new URLSearchParams;n.append("timeframe",t.timeframe),t.propertyId&&n.append("propertyId",t.propertyId),t.dateFrom&&n.append("dateFrom",t.dateFrom),t.dateTo&&n.append("dateTo",t.dateTo);const a=`/vendors/analytics/performance?${n.toString()}`,r=await this.makeRequest(a);return r.success&&r.data?r.data:{viewsData:[],leadsData:[],conversionData:[],revenueData:[],propertyPerformance:[],leadSources:[],demographicsData:[]}}catch(n){return console.error("Failed to fetch performance metrics:",n),{viewsData:[],leadsData:[],conversionData:[],revenueData:[],propertyPerformance:[],leadSources:[],demographicsData:[]}}}async exportAnalyticsData(t,n="csv"){try{const a=new URLSearchParams;a.append("timeframe",t.timeframe),a.append("format",n),t.propertyId&&a.append("propertyId",t.propertyId),t.dateFrom&&a.append("dateFrom",t.dateFrom),t.dateTo&&a.append("dateTo",t.dateTo);const r=`/vendors/analytics/export?${a.toString()}`,i=await fetch(`${Re}${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!i.ok)throw new Error("Failed to export analytics data");const l=await i.blob();return pe({title:"Success",description:`Analytics data exported as ${n.toUpperCase()}!`}),l}catch(a){const r=a instanceof Error?a.message:"Failed to export analytics data";throw pe({title:"Error",description:r,variant:"destructive"}),a}}formatCurrency(t){return t==null||isNaN(t)?"₹0":t>=1e7?`₹${(t/1e7).toFixed(1)} Cr`:t>=1e5?`₹${(t/1e5).toFixed(1)} L`:`₹${t.toLocaleString("en-IN")}`}formatNumber(t){return t==null||isNaN(t)?"0":t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString()}formatPercentage(t){return t==null||isNaN(t)?"0%":`${t.toFixed(1)}%`}calculateChangePercentage(t,n){return n===0?t>0?100:0:(t-n)/n*100}getChangeType(t){return t>0?"increase":t<0?"decrease":"neutral"}getChangeColor(t){switch(t){case"increase":return"text-green-600";case"decrease":return"text-red-600";case"neutral":return"text-gray-600"}}generateDateRange(t){const n=new Date,a=[];switch(t){case"7days":for(let r=6;r>=0;r--){const i=new Date(n);i.setDate(i.getDate()-r),a.push({name:i.toLocaleDateString("en-US",{weekday:"short"}),value:0})}break;case"30days":for(let r=29;r>=0;r--){const i=new Date(n);i.setDate(i.getDate()-r),a.push({name:i.getDate().toString(),value:0})}break;case"90days":for(let r=11;r>=0;r--){const i=new Date(n);i.setMonth(i.getMonth()-r),a.push({name:i.toLocaleDateString("en-US",{month:"short"}),value:0})}break;case"1year":for(let r=11;r>=0;r--){const i=new Date(n);i.setMonth(i.getMonth()-r),a.push({name:i.toLocaleDateString("en-US",{month:"short"}),value:0})}break}return a}downloadBlob(t,n){const a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}}const T=new ct,vt=()=>{const{toast:s}=_e(),[t,n]=E.useState("30days"),[a,r]=E.useState("all"),[i,l]=E.useState(!0),[d,u]=E.useState(null),[c,h]=E.useState(null),[m,g]=E.useState([]),[b,w]=E.useState(!1),N={timeframe:t,propertyId:a!=="all"?a:void 0},j=async()=>{try{l(!0);const[o,p,P]=await Promise.all([T.getOverviewStats(N),T.getPerformanceMetrics(N),Be.getVendorProperties({page:1,limit:100})]);u(o),h(p);const S=P.success?P.data.properties:[];g(S),a!=="all"&&!S.find(L=>L._id===a)&&r("all")}catch(o){console.error("Failed to load analytics data:",o),s({title:"Error",description:"Failed to load analytics data. Please try again.",variant:"destructive"})}finally{l(!1)}};E.useEffect(()=>{j()},[t,a]);const k=async o=>{try{w(!0);const p=await T.exportAnalyticsData(N,o),P=`analytics-${t}-${Date.now()}.${o}`;T.downloadBlob(p,P)}catch(p){console.error("Export failed:",p)}finally{w(!1)}};if(i)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading analytics..."})]})});const O=d?(o=>{if(!o)return[{title:"Total Views",value:"0",change:"0%",changeType:"neutral",icon:oe,description:"Property page views"},{title:"Leads Generated",value:"Coming Soon",change:"",changeType:"neutral",icon:G,description:"Feature in development"},{title:"Phone Calls",value:"0",change:"0%",changeType:"neutral",icon:ye,description:"Direct calls"},{title:"Messages",value:"0",change:"0%",changeType:"neutral",icon:be,description:"Chat inquiries"},{title:"Total Revenue",value:"₹0",change:"0%",changeType:"neutral",icon:ke,description:"All properties"},{title:"Avg. Rating",value:"0.0",change:"0%",changeType:"neutral",icon:je,description:"Customer reviews"}];const p=S=>{if(S==null||isNaN(S))return{change:"0%",changeType:"neutral"};const L=S.toFixed(1);return{change:`${S>0?"+":""}${L}%`,changeType:S>0?"increase":S<0?"decrease":"neutral"}},P=p(o.trends?.views?.growth);return p(o.trends?.leads?.growth),p(o.trends?.properties?.growth),[{title:"Total Views",value:T.formatNumber(o.totalViews),change:P.change,changeType:P.changeType,icon:oe,description:"Property page views"},{title:"Leads Generated",value:"Coming Soon",change:"",changeType:"neutral",icon:G,description:"Feature in development"},{title:"Phone Calls",value:T.formatNumber(o.totalCalls),change:"0%",changeType:"neutral",icon:ye,description:"Direct calls"},{title:"Messages",value:T.formatNumber(o.totalMessages),change:"0%",changeType:"neutral",icon:be,description:"Chat inquiries"},{title:"Total Revenue",value:`₹${T.formatNumber(o.totalRevenue)}`,change:"0%",changeType:"neutral",icon:ke,description:"All properties"},{title:"Avg. Rating",value:o.averageRating?.toFixed(1)||"0.0",change:"0%",changeType:"neutral",icon:je,description:"Customer reviews"}]})(d):[],v=c?.viewsData?.length?c.viewsData:T.generateDateRange(t),x=c?.leadsData?.length?c.leadsData:T.generateDateRange(t);c?.conversionData?.length?c.conversionData:T.generateDateRange(t),c?.revenueData?.length?c.revenueData:T.generateDateRange(t);const f=c?.propertyPerformance||[];c?.leadSources?.length&&c.leadSources,c?.demographicsData?.length&&c.demographicsData;const C=c?.viewsData?.length?c.viewsData.slice(0,7).map((o,p)=>({name:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][p]||o.name,favorites:Math.floor(o.value*.1),shares:Math.floor(o.value*.05),inquiries:Math.floor(o.value*.02)})):[],D=c?.propertyPerformance.slice(0,3)||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your property performance and marketing insights"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(he,{value:t,onValueChange:o=>n(o),children:[e.jsx(xe,{className:"w-40",children:e.jsx(fe,{})}),e.jsxs(ge,{children:[e.jsx(I,{value:"7days",children:"Last 7 days"}),e.jsx(I,{value:"30days",children:"Last 30 days"}),e.jsx(I,{value:"90days",children:"Last 90 days"}),e.jsx(I,{value:"1year",children:"Last year"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(se,{variant:"outline",onClick:()=>k("csv"),disabled:b,children:[b?e.jsx(ne,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(we,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(se,{variant:"outline",onClick:()=>k("pdf"),disabled:b,children:[b?e.jsx(ne,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(we,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:O.map(o=>e.jsx(_,{children:e.jsx($,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:o.title}),e.jsx("p",{className:"text-2xl font-bold",children:o.value}),e.jsxs("div",{className:"flex items-center mt-2",children:[o.changeType==="increase"?e.jsx(ve,{className:"w-4 h-4 text-green-500 mr-1"}):o.changeType==="decrease"?e.jsx(We,{className:"w-4 h-4 text-red-500 mr-1"}):null,e.jsx("span",{className:`text-sm ${o.changeType==="increase"?"text-green-500":o.changeType==="decrease"?"text-red-500":"text-muted-foreground"}`,children:o.change})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o.description})]}),e.jsx(o.icon,{className:"h-8 w-8 text-muted-foreground"})]})})},o.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsx(B,{children:e.jsx(W,{children:"Property Engagement Overview"})}),e.jsx($,{children:e.jsx(ee,{width:"100%",height:300,children:e.jsxs(De,{data:v,children:[e.jsx(te,{strokeDasharray:"3 3"}),e.jsx(X,{dataKey:"name"}),e.jsx(J,{}),e.jsx(ae,{}),e.jsx(Y,{type:"monotone",dataKey:"views",stroke:"#8884d8",strokeWidth:2,dot:{r:4},name:"Page Views"}),e.jsx(Y,{type:"monotone",dataKey:"leads",stroke:"#82ca9d",strokeWidth:2,dot:{r:4},name:"Leads"})]})})})]}),e.jsxs(_,{children:[e.jsxs(B,{children:[e.jsx(W,{children:"Inquiry Response Time"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Average time to respond to customer inquiries"})]}),e.jsxs($,{children:[e.jsx(ee,{width:"100%",height:300,children:e.jsxs(Oe,{data:x,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorResponseTime",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]})}),e.jsx(te,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(X,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(J,{stroke:"#6b7280",tick:{fontSize:12},label:{value:"Hours",angle:-90,position:"insideLeft"}}),e.jsx(ae,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:o=>[`${o.toFixed(1)} hours`,"Response Time"]}),e.jsx(F,{type:"monotone",dataKey:"value",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorResponseTime)"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Response"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[x.length>0?(x.reduce((o,p)=>o+p.value,0)/x.length).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fastest"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.length>0?Math.min(...x.map(o=>o.value)).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Inquiries"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d?.totalMessages||0})]})]})]})]})]}),e.jsxs(_,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Property Performance"}),e.jsxs(he,{value:a,onValueChange:r,children:[e.jsx(xe,{className:"w-48",children:e.jsx(fe,{placeholder:"Filter by property"})}),e.jsxs(ge,{children:[e.jsx(I,{value:"all",children:"All Properties"}),m.length>0?m.map(o=>e.jsxs(I,{value:o._id,children:[(o.title||"Untitled Property").substring(0,30),o.title&&o.title.length>30?"...":""]},o._id)):e.jsx(I,{value:"no-properties",disabled:!0,children:"No properties available"})]})]})]})}),e.jsx($,{children:m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-center",children:[e.jsx(ie,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mb-4",children:"You haven't added any properties yet. Add your first property to start tracking performance analytics."}),e.jsx(se,{onClick:()=>window.location.href="/vendor/properties/add",className:"mt-2",children:"Add Your First Property"})]}):f.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsx(ee,{width:"100%",height:400,children:e.jsxs(Oe,{data:f,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),e.jsx(te,{strokeDasharray:"3 3",stroke:"#e5e7eb",opacity:.5}),e.jsx(X,{dataKey:"title",angle:-45,textAnchor:"end",height:100,tick:{fontSize:11,fill:"#6b7280"},interval:0}),e.jsx(J,{tick:{fontSize:12,fill:"#6b7280"},label:{value:"Views",angle:-90,position:"insideLeft",style:{fill:"#6b7280"}}}),e.jsx(ae,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.96)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:(o,p)=>[o,p]}),e.jsx(Qe,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),e.jsx(F,{type:"monotone",dataKey:"views",fill:"url(#colorViews)",stroke:"#3b82f6",strokeWidth:3,name:"Property Views"})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"Total Views"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:f.reduce((o,p)=>o+(p.views||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-600 font-medium mb-1",children:"Total Leads"}),e.jsxs("div",{className:"text-sm font-semibold text-gray-500 flex items-center justify-center gap-1",children:[e.jsx(G,{className:"w-4 h-4"}),"Coming Soon"]})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-purple-600 font-medium mb-1",children:"Active Properties"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:f.length})]}),e.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-amber-600 font-medium mb-1",children:"Avg Views/Property"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700",children:f.length>0?Math.round(f.reduce((o,p)=>o+(p.views||0),0)/f.length):"0"})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-center",children:[e.jsx(G,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"Property performance analytics will be available once your properties receive sufficient views and interactions."})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsx(B,{children:e.jsx(W,{children:"Weekly Engagement"})}),e.jsx($,{children:C.length>0?e.jsx(ee,{width:"100%",height:300,children:e.jsxs(De,{data:C,children:[e.jsx(te,{strokeDasharray:"3 3"}),e.jsx(X,{dataKey:"name"}),e.jsx(J,{}),e.jsx(ae,{}),e.jsx(Y,{type:"monotone",dataKey:"favorites",stroke:"#8884d8",strokeWidth:2,name:"Favorites"}),e.jsx(Y,{type:"monotone",dataKey:"shares",stroke:"#82ca9d",strokeWidth:2,name:"Shares"}),e.jsx(Y,{type:"monotone",dataKey:"inquiries",stroke:"#ffc658",strokeWidth:2,name:"Inquiries"})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] text-center",children:[e.jsx(G,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Weekly engagement data will be displayed once sufficient activity is recorded"})]})})]}),e.jsxs(_,{children:[e.jsx(B,{children:e.jsx(W,{children:"Top Performing Properties"})}),e.jsx($,{children:D.length>0?e.jsx("div",{className:"space-y-4",children:D.map((o,p)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(ie,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium truncate",children:o.title||"Untitled Property"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("span",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),o.views||0]}),e.jsxs("span",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx($e,{className:"w-3 h-3 mr-1"}),o.leads||0]}),e.jsxs("span",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),o.conversionRate||0,"%"]})]})]}),e.jsx(Ve,{variant:"default",className:"flex-shrink-0",children:T.formatCurrency(o.revenue||0)})]},o.propertyId||p))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-center",children:[e.jsx(ie,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Top performing properties will appear here once you have property data and analytics"})]})})]})]}),e.jsxs(_,{children:[e.jsx(B,{children:e.jsx(W,{children:"Insights & Recommendations"})}),e.jsx($,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Performance Analytics"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Detailed analytics insights will be available once sufficient data is collected from your property listings."})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Content Optimization"}),e.jsx("p",{className:"text-sm text-green-700",children:"Recommendations for improving your property listings will appear here based on performance data."})]}),e.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"Market Insights"}),e.jsx("p",{className:"text-sm text-amber-700",children:"Market trends and pricing strategy insights will be generated from your property performance data."})]})]})})]})]})};export{vt as default};
