import{j as e}from"./ui-BHyUY8Z8.js";import{r as i,d as te,h as re,L as R}from"./router-2SVJvIbS.js";import{G as ie,t as g,az as K,J as le,K as ne,O as ce,Q as oe,R as de,$ as me,a0 as xe,a1 as G,aK as H,Y as M,am as J,H as Q,I as he,a as j,e as y,h as ae,ax as ue,ay as fe,aw as pe,B as d,aQ as je,aC as X,f as b,aP as Z,X as ge,aB as Ne,V as ve,b as q,c as Y,l as be,A as ye}from"./index-Bd1eLXM_.js";import{i as I,c as we,g as Se}from"./propertyUtils-DZZpAHgC.js";import{S as ee}from"./scroll-area-BsoQGGOn.js";import{f as Ce}from"./favoriteService-B3PEnQsM.js";import{R as se}from"./refresh-cw-D2lAUAYb.js";import{S as ke}from"./share-CXvuewnn.js";import"./vendor-Dazix4UH.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),$e=({open:n,onOpenChange:h,onPropertySelect:C,selectedPropertyIds:o,maxSelections:c=10})=>{const[u,a]=i.useState([]),[m,p]=i.useState([]),[$,k]=i.useState(!1),[T,A]=i.useState(!1),[w,P]=i.useState(null),[x,E]=i.useState(""),[S,U]=i.useState("favorites"),[_,F]=i.useState(null);i.useEffect(()=>{n&&S==="favorites"&&u.length===0&&z()},[n,S]),i.useEffect(()=>{if(!n||S!=="search")return;if(_&&clearTimeout(_),x.trim().length<2){p([]);return}const r=setTimeout(()=>{V(x)},500);return F(r),()=>{r&&clearTimeout(r)}},[x,S,n]),i.useEffect(()=>{n||(E(""),P(null),p([]))},[n]);const z=async()=>{try{k(!0);const r=await Ce.getFavorites({limit:100});r.success&&a(r.data.favorites)}catch(r){console.error("Error loading favorites:",r),g({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{k(!1)}},V=async r=>{try{A(!0);const N=await K.getProperties({search:r,page:1,limit:50});N.success&&p(N.data.properties)}catch(N){console.error("Error searching properties:",N),g({title:"Error",description:"Failed to search properties",variant:"destructive"})}finally{A(!1)}},B=i.useCallback(async r=>{if(!w){if(o.includes(r)){g({title:"Already Selected",description:"This property is already in your comparison",variant:"destructive"});return}if(o.length>=c){g({title:"Maximum Selections Reached",description:`You can only compare up to ${c} properties`,variant:"destructive"});return}try{P(r),await C(r),h(!1)}catch(N){console.error("Error selecting property:",N)}finally{P(null)}}},[w,o,c,C,h]),L=i.useMemo(()=>u.filter(r=>r.property&&!o.includes(r.property._id)),[u,o]),D=i.useMemo(()=>m.filter(r=>!o.includes(r._id)),[m,o]);return e.jsx(le,{open:n,onOpenChange:h,children:e.jsxs(ne,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(ce,{children:[e.jsx(oe,{children:"Select Property to Compare"}),e.jsxs(de,{children:["Click on a property to add it to your comparison. You can select up to ",c," properties. (",o.length,"/",c," selected)"]})]}),e.jsxs(me,{value:S,onValueChange:U,children:[e.jsxs(xe,{className:"grid w-full grid-cols-2",children:[e.jsxs(G,{value:"favorites",className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Favorites (",L.length,")"]}),e.jsxs(G,{value:"search",className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Search Properties"]})]}),e.jsx(J,{value:"favorites",className:"mt-4",children:e.jsx(ee,{className:"h-[500px] pr-4",children:$?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Q,{className:"w-8 h-8 animate-spin text-primary"})}):L.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(H,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Available Favorites"}),e.jsx("p",{className:"text-sm",children:u.length===0?"You haven't favorited any properties yet":"All your favorite properties are already in the comparison"})]}):e.jsx("div",{className:"space-y-3",children:L.map(r=>e.jsx(W,{property:r.property,isAdding:w===r.property._id,onClick:()=>B(r.property._id)},r._id))})})}),e.jsxs(J,{value:"search",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(he,{placeholder:"Search by property name, location, or area...",value:x,onChange:r=>E(r.target.value),className:"pl-10"})]}),e.jsx(ee,{className:"h-[450px] pr-4",children:T?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Q,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Searching properties..."})]}):x.trim().length<2?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Properties"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Enter at least 2 characters to search"})]}):D.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(M,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-sm",children:"No available properties match your search criteria"})]}):e.jsx("div",{className:"space-y-3",children:D.map(r=>e.jsx(W,{property:r,isAdding:w===r._id,onClick:()=>B(r._id)},r._id))})})]})]})]})})},W=i.memo(({property:n,isAdding:h,onClick:C})=>{const o=(a,m)=>m==="rent"?`₹${a.toLocaleString("en-IN")}/month`:m==="lease"?`₹${a.toLocaleString("en-IN")}/year`:a>=1e7?`₹${(a/1e7).toFixed(1)} Cr`:a>=1e5?`₹${(a/1e5).toFixed(1)} Lac`:`₹${a.toLocaleString("en-IN")}`,c=a=>a.builtUp?`${a.builtUp} ${a.unit}`:a.plot?`${a.plot} ${a.unit}`:a.carpet?`${a.carpet} ${a.unit}`:"N/A",u=a=>a.find(p=>p.isPrimary)?.url||a[0]?.url||"/placeholder-property.jpg";return e.jsx(j,{className:`cursor-pointer transition-all hover:shadow-md ${h?"opacity-50":""}`,onClick:h?void 0:C,children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:u(n.images),alt:n.title,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="/placeholder-property.jpg"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:n.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(ae,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[n.address.city,", ",n.address.state]})]}),e.jsx("div",{className:"text-primary font-semibold text-sm mb-2",children:o(n.price,n.listingType)}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),e.jsx("span",{children:n.bedrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"}),e.jsx("span",{children:n.bathrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),e.jsx("span",{children:c(n.area)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",className:"text-xs",children:n.type}),e.jsx(d,{variant:"outline",className:"text-xs capitalize",children:n.listingType}),h&&e.jsxs(d,{variant:"secondary",className:"text-xs",children:[e.jsx(Q,{className:"w-3 h-3 mr-1 animate-spin"}),"Adding..."]})]})]})]})})})});W.displayName="PropertyCard";const Re=()=>{te();const{isConnected:n,lastEvent:h}=je(),[C,o]=re(),[c,u]=i.useState([]),[a,m]=i.useState([]),[p,$]=i.useState(!0),[k,T]=i.useState(!1),[A,w]=i.useState(!1),P=i.useRef(!1),x=i.useCallback(async s=>{if(s.length===0){m([]),$(!1);return}try{$(!0);const t=s.map(f=>K.getProperty(f).catch(O=>(console.error(`Failed to load property ${f}:`,O),null))),v=(await Promise.all(t)).filter(f=>f!==null&&f.success).map(f=>f.data.property);m(v)}catch(t){console.error("Error loading properties:",t),g({title:"Error",description:"Failed to load properties for comparison",variant:"destructive"})}finally{$(!1)}},[]),E=i.useCallback(async()=>{c.length!==0&&(T(!0),await x(c),T(!1))},[x,c]);i.useEffect(()=>{if(!P.current){const s=C.get("properties")?.split(",").filter(Boolean)||[];u(s),x(s),P.current=!0}},[]);const S=i.useCallback(s=>{s.propertyId&&c.includes(s.propertyId)&&(console.log("Property updated via realtime, refreshing comparison"),x(c))},[c,x]),U=i.useCallback(s=>{s.propertyId&&m(t=>t.map(l=>l._id===s.propertyId?{...l,isFavorited:s.action==="add"}:l))},[]);X("property_updated",S),X("property_favorited",U);const _=i.useCallback((s,t)=>t==="rent"?`₹${s.toLocaleString("en-IN")}/month`:t==="lease"?`₹${s.toLocaleString("en-IN")}/year`:s>=1e7?`₹${(s/1e7).toFixed(1)} Cr`:s>=1e5?`₹${(s/1e5).toFixed(1)} Lac`:`₹${s.toLocaleString("en-IN")}`,[]),F=i.useCallback(s=>s.builtUp?`${s.builtUp} ${s.unit}`:s.plot?`${s.plot} ${s.unit}`:s.carpet?`${s.carpet} ${s.unit}`:"N/A",[]),z=i.useCallback(s=>{const t=s.area.builtUp||s.area.carpet||s.area.plot||0;return t===0?0:Math.round(s.price/t)},[]),V=i.useCallback(s=>s.images.find(l=>l.isPrimary)?.url||s.images[0]?.url||"/placeholder-property.jpg",[]),B=i.useCallback(s=>{const t=c.filter(l=>l!==s);u(t),m(l=>l.filter(v=>v._id!==s)),t.length>0?o({properties:t.join(",")},{replace:!0}):o({},{replace:!0})},[c,o]),L=i.useCallback(()=>{if(c.length>=10){g({title:"Comparison Limit Reached",description:"You can compare up to 10 properties at once. Remove a property to add another.",variant:"destructive"});return}w(!0)},[c.length]),D=i.useCallback(async s=>{try{if(c.includes(s)){g({title:"Already Selected",description:"This property is already in your comparison list",variant:"destructive"});return}const t=await K.getProperty(s);if(t.success){const l=[...c,s];u(l),m(v=>[...v,t.data.property]),o({properties:l.join(",")},{replace:!0}),g({title:"Property Added",description:`${t.data.property.title} has been added to comparison`})}else throw new Error("Failed to load property")}catch(t){throw console.error("Error adding property:",t),g({title:"Error",description:"Failed to add property to comparison",variant:"destructive"}),t}},[c,o]),r=i.useCallback((s,t=!1)=>{if(!s)return{display:"-",color:"text-muted-foreground"};if(t&&a.length>1){const l=a.map(O=>typeof s=="number"?s:0),v=Math.max(...l),f=Math.min(...l);if(s===v&&s!==f)return{display:s,color:"text-green-600",isBest:!0};if(s===f&&s!==v)return{display:s,color:"text-red-600",isWorst:!0}}return{display:s,color:"text-foreground"}},[a]),N=i.useMemo(()=>Array.from(new Set(a.flatMap(s=>s.amenities))),[a]);return e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsxs("div",{className:"flex items-center justify-between bg-muted/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n?"bg-green-500":"bg-red-500"}`}),h&&e.jsxs(d,{variant:"secondary",className:"text-xs",children:["Last update: ",new Date(h.timestamp).toLocaleTimeString()]})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:E,disabled:k,children:[e.jsx(se,{className:`w-4 h-4 mr-2 ${k?"animate-spin":""}`}),k?"Refreshing...":"Refresh"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Z,{className:"w-8 h-8 text-primary"}),"Compare Properties"]}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Side-by-side comparison of your selected properties (",a.length,"/10)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{to:"/customer/favorites",children:e.jsxs(b,{variant:"outline",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Back to Favorites"]})}),e.jsxs(b,{variant:"outline",disabled:a.length===0,children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Share Comparison"]})]})]}),p&&e.jsx(j,{children:e.jsx(y,{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Loading properties for comparison..."})]})})}),!p&&a.length===0?e.jsx(j,{children:e.jsxs(y,{className:"p-12 text-center",children:[e.jsx(Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No properties to compare"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add properties from your favorites or search results to start comparing"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(R,{to:"/customer/favorites",children:e.jsxs(b,{children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"View Favorites"]})}),e.jsx(R,{to:"/customer/search",children:e.jsx(b,{variant:"outline",children:"Search Properties"})})]})]})}):!p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[a.map(s=>e.jsxs(j,{className:"relative",children:[e.jsx("button",{onClick:()=>B(s._id),className:"absolute top-2 right-2 z-10 p-1 bg-destructive text-destructive-foreground rounded-full hover:bg-destructive/90",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-muted flex items-center justify-center mb-4 rounded-lg overflow-hidden",children:[e.jsx("img",{src:V(s),alt:s.title,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.style.display="none",t.currentTarget.nextElementSibling?.classList.remove("hidden")}}),e.jsx(Ne,{className:"w-8 h-8 text-muted-foreground hidden"})]}),e.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{className:"line-clamp-1",children:[s.address.city,", ",s.address.state]})]}),e.jsx("div",{className:"text-lg font-bold text-primary mb-2",children:_(s.price,s.listingType)}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[s.bedrooms," BHK"]}),e.jsx("span",{children:F(s.area)}),e.jsxs("span",{children:["₹",z(s),"/sq.ft"]})]})]})]},s._id)),a.length<10&&e.jsx(j,{className:"border-dashed border-2",children:e.jsx(y,{className:"p-4 h-full flex items-center justify-center min-h-[300px]",children:e.jsxs(b,{variant:"ghost",className:"h-full w-full flex flex-col gap-2",onClick:L,children:[e.jsx(ve,{className:"w-8 h-8 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Add Property"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",a.length,"/10)"]})]})})})]}),e.jsxs(j,{children:[e.jsx(q,{children:e.jsx(Y,{children:"Detailed Comparison"})}),e.jsx(y,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4 w-48 sticky left-0 bg-background z-10",children:"Feature"}),a.map(s=>e.jsx("th",{className:"text-left p-4 min-w-64",children:e.jsx("div",{className:"truncate max-w-64",children:s.title})},s._id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Price"}),a.map(s=>{const t=r(s.price,!0);return e.jsx("td",{className:`p-4 ${t.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[_(s.price,s.listingType),t.isBest&&e.jsx(d,{variant:"default",className:"text-xs",children:"Expensive"}),t.isWorst&&e.jsx(d,{variant:"secondary",className:"text-xs",children:"Affordable"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Price per sq.ft"}),a.map(s=>{const t=z(s),l=r(t,!0);return e.jsx("td",{className:`p-4 ${l.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:["₹",t,l.isBest&&e.jsx(d,{variant:"default",className:"text-xs",children:"Highest"}),l.isWorst&&e.jsx(d,{variant:"secondary",className:"text-xs",children:"Best Value"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Area"}),a.map(s=>{const t=s.area.builtUp||s.area.carpet||s.area.plot||0,l=r(t,!0);return e.jsx("td",{className:`p-4 ${l.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[F(s.area),l.isBest&&e.jsx(d,{variant:"default",className:"text-xs",children:"Largest"}),l.isWorst&&e.jsx(d,{variant:"secondary",className:"text-xs",children:"Smallest"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Bedrooms"}),a.map(s=>e.jsxs("td",{className:"p-4",children:[s.bedrooms," BHK"]},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Bathrooms"}),a.map(s=>e.jsx("td",{className:"p-4",children:s.bathrooms},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Property Type"}),a.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(d,{variant:"outline",className:"capitalize",children:s.type})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Listing Type"}),a.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(d,{variant:"outline",className:"capitalize",children:s.listingType})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Status"}),a.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(d,{variant:s.status==="available"?"default":"secondary",className:s.status==="available"?"bg-green-500":"",children:s.status==="available"?"Available":s.status})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Location"}),a.map(s=>e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.address.city}),e.jsx("div",{className:"text-muted-foreground",children:s.address.state})]})},s._id))]})]})]})})})]}),e.jsxs(j,{children:[e.jsx(q,{children:e.jsx(Y,{children:"Amenities Comparison"})}),e.jsx(y,{children:e.jsx("div",{className:"space-y-4",children:N.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"font-medium min-w-[200px]",children:String(s)}),e.jsx("div",{className:"flex gap-4 overflow-x-auto flex-1",children:a.map(l=>e.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[e.jsxs("span",{className:"text-xs text-muted-foreground truncate flex-1",children:[l.title.slice(0,15),"..."]}),l.amenities.includes(String(s))?e.jsx(be,{className:"w-4 h-4 text-green-500 flex-shrink-0"}):e.jsx(Pe,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"})]},l._id))})]},t))})})]}),e.jsxs(j,{children:[e.jsx(q,{children:e.jsx(Y,{children:"Contact Information"})}),e.jsx(y,{children:e.jsx("div",{className:"grid gap-4",children:a.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:s.title}),e.jsxs("div",{className:"space-y-2",children:[s.owner&&s.owner.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:I(s.owner)?"Listed by":"Owner"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:we(s)}),s.owner.profile.phone&&!I(s.owner)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.owner.profile.phone})]}),s.agent&&s.agent.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:I(s.agent)?"Listed by":"Agent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Se(s.agent)}),s.agent.profile.phone&&!I(s.agent)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.agent.profile.phone})]}),!s.owner?.profile&&!s.agent?.profile&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact information not available"})]})]},s._id))})})]}),e.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:a.map(s=>e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm truncate",title:s.title,children:s.title}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(b,{size:"sm",variant:"outline",children:[e.jsx(ye,{className:"w-4 h-4 mr-1"}),"Call"]}),e.jsx(R,{to:`/property/${s._id}`,children:e.jsx(b,{size:"sm",children:"View Details"})})]})]})},s._id))})]}),e.jsx($e,{open:A,onOpenChange:w,onPropertySelect:D,selectedPropertyIds:c,maxSelections:10})]})};export{Re as default};
