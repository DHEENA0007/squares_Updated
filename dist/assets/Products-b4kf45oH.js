import{j as e}from"./ui-DHQhougw.js";import{h as s,r as t}from"./router-Bi51YGN-.js";import{P as r,a}from"./PropertyCard-_xMtbCp1.js";import{x as i,I as l,s as o,f as n,ax as c,t as p}from"./index-B494FSRu.js";import{P as d,a as m,b as x,c as j,d as h,f as g,e as u}from"./pagination-C8Uahksb.js";import"./vendor-eVk5PToZ.js";import"./propertyUtils-41DuwCMc.js";import"./PropertyContactDialog-C2dHp4Zt.js";import"./messageService-BrTvQAMS.js";import"./uploadService-Bwy6d1dt.js";import"./send-w8K57hH5.js";import"./EnterprisePropertyContactDialog-CWxiJkbG.js";import"./dollar-sign-CW2WSPlH.js";import"./vendorService-DGP5kLWe.js";import"./reviewsService-B7Grx6TL.js";import"./square-Di7y1Mfn.js";import"./ellipsis-BgKSN2yL.js";const f=()=>{const[f]=s(),[v,y]=t.useState(1),[N,S]=t.useState(""),[P,C]=t.useState([]),[b,w]=t.useState(!0),[D,F]=t.useState(0),[k,E]=t.useState(0),[T,A]=t.useState({});t.useEffect(()=>{const e=f.get("listingType"),s=f.get("propertyType"),t=f.get("search"),r={};e&&"all"!==e&&(r.listingType=e),s&&"all"!==s&&(r.propertyType=s),t&&S(t),A(r),y(1)},[f]),t.useEffect(()=>{(async()=>{w(!0);try{const e={page:v,limit:12,search:N||void 0,...T},s=await c.getProperties(e);s.success&&(C(s.data.properties),F(s.data.pagination.totalPages),E(s.data.pagination.totalProperties))}catch(e){p({title:"Error",description:"Failed to load properties. Please try again.",variant:"destructive"})}finally{w(!1)}})()},[v,N,T]);const L=12*(v-1),M=Math.min(L+12,k);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(l,{type:"text",placeholder:"Search properties by location, type...",className:"pl-10 h-12",value:N,onChange:e=>{return s=e.target.value,S(s),void y(1);var s}})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:e.jsx(r,{onFilterChange:e=>{A(e),y(1)},initialFilters:T})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),e.jsx("p",{className:"text-muted-foreground",children:b?"Loading properties...":e.jsxs(e.Fragment,{children:["Showing ",L+1,"-",M," of ",k," properties"]})})]}),b?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(o,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):0===P.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No properties found matching your criteria."}),e.jsx(n,{onClick:()=>{A({}),S(""),y(1)},variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6 mb-8",children:P.map(s=>e.jsx(a,{property:s},s._id))}),!b&&P.length>0&&D>1&&e.jsx(d,{children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(j,{href:"#",onClick:e=>{e.preventDefault(),v>1&&y(v-1)},className:1===v?"pointer-events-none opacity-50":""})}),[...Array(D)].map((s,t)=>{const r=t+1;return 1===r||r===D||r>=v-1&&r<=v+1?e.jsx(x,{children:e.jsx(h,{href:"#",onClick:e=>{e.preventDefault(),y(r)},isActive:v===r,children:r})},r):r===v-2||r===v+2?e.jsx(x,{children:e.jsx(g,{})},r):null}),e.jsx(x,{children:e.jsx(u,{href:"#",onClick:e=>{e.preventDefault(),v<D&&y(v+1)},className:v===D?"pointer-events-none opacity-50":""})})]})})]})]})]})};export{f as default};
