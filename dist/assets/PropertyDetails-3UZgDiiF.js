import{j as e}from"./ui-BNZSgpjP.js";import{e as s,d as r,r as a,L as t}from"./router-D8v2YSKU.js";import{a2 as l,aL as i,bO as d,f as o,A as n,B as c,Q as m,k as x,ad as h,a as p,b as u,c as b,e as j,bP as g,bQ as y,bu as f,E as N,U as v,a1 as w,y as P,g as k}from"./index-CWpkTP43.js";import{P as S}from"./pen-line-LPA1UWvN.js";import{T}from"./trending-up-Dal2xZI6.js";import{E as A}from"./external-link-DE0JjkoQ.js";import{S as C}from"./share-2-DcvRqQTa.js";import"./vendor-BxThA0WO.js";const E=()=>{const{id:E}=s(),F=r(),{toast:L}=l(),[_,z]=a.useState(null),[B,U]=a.useState(!0),[D,V]=a.useState(!1),[$,O]=a.useState(null);a.useEffect(()=>{E&&(Q(E),I(E))},[E]);const Q=async e=>{try{U(!0);const s=await i.getProperty(e);z(s.data.property)}catch(s){L({title:"Error",description:"Failed to load property details",variant:"destructive"}),F("/vendor/properties")}finally{U(!1)}},I=async e=>{try{const s=await i.getPropertyInteractionStats(e);O(s)}catch(s){}},q=async()=>{if(_&&window.confirm("Are you sure you want to delete this property? This action cannot be undone."))try{V(!0),await i.deleteProperty(_._id),L({title:"Success",description:"Property deleted successfully"}),F("/vendor/properties")}catch(e){L({title:"Error",description:"Failed to delete property",variant:"destructive"})}finally{V(!1)}},M=async()=>{if(_)try{await i.togglePropertyFeatured(_._id,!_.featured),z(e=>e?{...e,featured:!e.featured}:e),L({title:"Success",description:`Property ${_.featured?"unfeatured":"promoted"} successfully`})}catch(e){L({title:"Error",description:"Failed to update property status",variant:"destructive"})}},Y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return B?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading property details..."})]})}):_?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>F("/vendor/properties"),className:"mt-1",children:e.jsx(n,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[e.jsx(c,{className:`${i.getStatusColor(_.status)} text-white border-0 px-3 py-1`,children:i.getStatusText(_.status)}),e.jsxs(c,{variant:"secondary",className:"bg-blue-50 text-blue-700 border-blue-100 px-3 py-1",children:["For ",_.listingType.charAt(0).toUpperCase()+_.listingType.slice(1)]}),_.featured&&e.jsxs(c,{className:"bg-amber-100 text-amber-700 border-amber-200 px-3 py-1",children:[e.jsx(m,{className:"w-3 h-3 mr-1 fill-current"}),"Featured"]}),_.verified&&e.jsx(c,{className:"bg-emerald-100 text-emerald-700 border-emerald-200 px-3 py-1",children:"Verified"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:_.title}),e.jsxs("p",{className:"text-muted-foreground flex items-center text-base",children:[e.jsx(x,{className:"w-4 h-4 mr-1.5 text-gray-400"}),(e=>{const s=[];return e.address.locationName&&s.push(e.address.locationName),e.address.city&&s.push(e.address.city),e.address.district&&s.push(e.address.district),e.address.state&&s.push(e.address.state),e.address.pincode&&s.push(e.address.pincode),s.join(", ")})(_)]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-4",children:[e.jsx("p",{className:"text-3xl md:text-4xl font-bold text-primary",children:i.formatPrice(_.price,_.listingType)}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx(t,{to:`/vendor/properties/edit/${_._id}`,className:"flex-1 md:flex-none",children:e.jsxs(o,{variant:"outline",className:"w-full",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Edit"]})}),e.jsxs(o,{variant:"outline",onClick:M,className:"flex-1 md:flex-none",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),_.featured?"Unfeature":"Promote"]}),e.jsx(o,{variant:"destructive",size:"icon",onClick:q,disabled:D,children:D?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(h,{className:"w-4 h-4"})})]})]})]}),_.images&&_.images.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 h-[400px] md:h-[500px]",children:[e.jsxs("div",{className:"md:col-span-2 md:row-span-2 relative rounded-xl overflow-hidden group",children:[e.jsx("img",{src:i.getPrimaryImage(_),alt:_.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105 cursor-pointer"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(c,{className:"bg-black/60 backdrop-blur-sm text-white border-0 hover:bg-black/70",children:"Primary Photo"})})]}),_.images.filter(e=>!e.isPrimary).slice(0,4).map((s,r)=>e.jsxs("div",{className:"relative rounded-xl overflow-hidden group",children:[e.jsx("img",{src:s.url,alt:s.caption||`Property image ${r+1}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105 cursor-pointer"}),s.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent text-white p-3 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("p",{className:"text-xs font-medium truncate",children:s.caption})})]},r)),_.images.length>5&&e.jsxs("div",{className:"relative rounded-xl overflow-hidden group cursor-pointer",children:[e.jsx("img",{src:_.images[5].url,alt:"More photos",className:"w-full h-full object-cover blur-sm"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center group-hover:bg-black/50 transition-colors",children:e.jsxs("p",{className:"text-white font-bold text-lg",children:["+",_.images.length-5," more"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(p,{className:"border-none shadow-md",children:[e.jsx(u,{children:e.jsxs(b,{className:"flex items-center text-xl",children:[e.jsx(d,{className:"w-5 h-5 mr-2 text-primary"}),"Property Overview"]})}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[_.bedrooms>0&&e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl border border-blue-100",children:[e.jsx(g,{className:"w-6 h-6 mx-auto mb-2 text-blue-600"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.bedrooms}),e.jsx("p",{className:"text-sm text-blue-600/80 font-medium",children:"Bedrooms"})]}),_.bathrooms>0&&e.jsxs("div",{className:"text-center p-4 bg-indigo-50 rounded-xl border border-indigo-100",children:[e.jsx(y,{className:"w-6 h-6 mx-auto mb-2 text-indigo-600"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.bathrooms}),e.jsx("p",{className:"text-sm text-indigo-600/80 font-medium",children:"Bathrooms"})]}),i.hasValidArea(_.area)&&e.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-xl border border-emerald-100",children:[e.jsx(f,{className:"w-6 h-6 mx-auto mb-2 text-emerald-600"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.formatArea(_.area).split(" ")[0]}),e.jsx("p",{className:"text-sm text-emerald-600/80 font-medium",children:"Sq Ft"})]}),_.type&&e.jsxs("div",{className:"text-center p-4 bg-amber-50 rounded-xl border border-amber-100",children:[e.jsx(d,{className:"w-6 h-6 mx-auto mb-2 text-amber-600"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:_.type}),e.jsx("p",{className:"text-sm text-amber-600/80 font-medium",children:"Type"})]})]}),_.description&&e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-100",children:[e.jsx("h3",{className:"font-semibold mb-3 text-lg",children:"Description"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed text-base",children:_.description})]})]})]}),e.jsxs(p,{className:"border-none shadow-md",children:[e.jsx(u,{children:e.jsx(b,{className:"text-xl",children:"Property Details"})}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[_.type&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-muted-foreground",children:"Property Type"}),e.jsx("span",{className:"font-semibold capitalize text-gray-900",children:_.type})]}),_.listingType&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listing Type"}),e.jsx("span",{className:"font-semibold capitalize text-gray-900",children:_.listingType})]}),_.bedrooms>0&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bedrooms"}),e.jsx("span",{className:"font-semibold text-gray-900",children:_.bedrooms})]}),_.bathrooms>0&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bathrooms"}),e.jsx("span",{className:"font-semibold text-gray-900",children:_.bathrooms})]})]}),e.jsxs("div",{className:"space-y-4",children:[i.hasValidArea(_.area)&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-muted-foreground",children:"Area"}),e.jsx("span",{className:"font-semibold text-gray-900",children:i.formatArea(_.area)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx("span",{className:"font-semibold capitalize text-gray-900",children:_.status})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listed On"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Y(_.createdAt)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Updated"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Y(_.updatedAt)})]})]})]})})]}),_.amenities&&_.amenities.length>0&&e.jsxs(p,{className:"border-none shadow-md",children:[e.jsx(u,{children:e.jsx(b,{className:"text-xl",children:"Amenities"})}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:_.amenities.map((s,r)=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg border border-gray-100 hover:border-primary/20 hover:bg-primary/5 transition-colors",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mr-3 shadow-[0_0_8px_rgba(var(--primary),0.5)]"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s})]},r))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{className:"border-none shadow-md bg-gradient-to-b from-white to-gray-50",children:[e.jsx(u,{children:e.jsxs(b,{className:"flex items-center text-xl",children:[e.jsx(T,{className:"w-5 h-5 mr-2 text-primary"}),"Performance"]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg mr-3",children:e.jsx(N,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Views"})]}),e.jsx("span",{className:"font-bold text-lg text-gray-900",children:$?.views||_.views||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-lg mr-3",children:e.jsx(v,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Leads"})]}),e.jsx("span",{className:"font-bold text-lg text-gray-900",children:$?.messageClicks||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-50 rounded-lg mr-3",children:e.jsx(w,{className:"w-4 h-4 text-red-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Favorites"})]}),e.jsx("span",{className:"font-bold text-lg text-gray-900",children:$?.favorites||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg mr-3",children:e.jsx(P,{className:"w-4 h-4 text-purple-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Phone Clicks"})]}),e.jsx("span",{className:"font-bold text-lg text-gray-900",children:$?.phoneClicks||0})]})]})]}),e.jsxs(p,{className:"border-none shadow-md",children:[e.jsx(u,{children:e.jsx(b,{className:"text-xl",children:"Quick Actions"})}),e.jsxs(j,{className:"space-y-3",children:[_.virtualTour&&e.jsxs(o,{variant:"outline",className:"w-full justify-start h-11 hover:bg-primary/5 hover:text-primary hover:border-primary/30 transition-all",onClick:()=>window.open(_.virtualTour,"_blank"),children:[e.jsx(A,{className:"w-4 h-4 mr-3"}),"Virtual Tour"]}),e.jsx(t,{to:`/vendor/properties/edit/${_._id}`,children:e.jsxs(o,{variant:"outline",className:"w-full justify-start h-11 hover:bg-primary/5 hover:text-primary hover:border-primary/30 transition-all",children:[e.jsx(S,{className:"w-4 h-4 mr-3"}),"Edit Property"]})}),e.jsxs(o,{variant:"outline",className:"w-full justify-start h-11 hover:bg-primary/5 hover:text-primary hover:border-primary/30 transition-all",onClick:M,children:[e.jsx(T,{className:"w-4 h-4 mr-3"}),_.featured?"Unfeature Property":"Promote Property"]}),e.jsxs(o,{variant:"outline",className:"w-full justify-start h-11 hover:bg-primary/5 hover:text-primary hover:border-primary/30 transition-all",children:[e.jsx(C,{className:"w-4 h-4 mr-3"}),"Share Property"]}),e.jsx(k,{className:"my-2"}),e.jsxs(o,{variant:"destructive",className:"w-full justify-start h-11 bg-red-50 text-red-600 hover:bg-red-100 border border-red-100",onClick:q,disabled:D,children:[e.jsx(h,{className:"w-4 h-4 mr-3"}),"Delete Property"]})]})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Property Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The property you're looking for doesn't exist."}),e.jsx(t,{to:"/vendor/properties",children:e.jsxs(o,{children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Back to Properties"]})})]})};export{E as default};
