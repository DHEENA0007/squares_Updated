import{j as e}from"./ui-CEt46o3G.js";import{r}from"./router-2SVJvIbS.js";import{c as k,g as c,V as D,a as E,J as L,G as x}from"./index-CiYV0Sy0.js";import{C as R,a as V,c as z,d as I,e as $}from"./command-O7w0ihSy.js";import{P as T,a as G,b as O}from"./popover-lkJ8tobj.js";import{L as Q}from"./loader-circle-Cj-dvH02.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=k("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),B=D("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),F=r.forwardRef(({className:s,variant:n,...a},o)=>e.jsx("div",{ref:o,role:"alert",className:c(B({variant:n}),s),...a}));F.displayName="Alert";const J=r.forwardRef(({className:s,...n},a)=>e.jsx("h5",{ref:a,className:c("mb-1 font-medium leading-none tracking-tight",s),...n}));J.displayName="AlertTitle";const _=r.forwardRef(({className:s,...n},a)=>e.jsx("div",{ref:a,className:c("text-sm [&_p]:leading-relaxed",s),...n}));_.displayName="AlertDescription";function Y({value:s,onChange:n,state:a,district:o,city:l,placeholder:y="Select pincode...",disabled:b=!1,className:w,error:d}){const[u,f]=r.useState(!1),[h,v]=r.useState([]),[S,g]=r.useState(!1),[m,j]=r.useState(""),[p,N]=r.useState(!1);r.useEffect(()=>{(async()=>{if(x.isReady())N(!0);else{g(!0);try{await x.initialize(),N(!0)}catch(i){console.error("Failed to initialize loca service:",i)}finally{g(!1)}}})()},[]),r.useEffect(()=>{if(!p)return;(()=>{try{const i=x.getPincodeSuggestions(a,o,l,m);v(i)}catch(i){console.error("Error loading pincode suggestions:",i),v([])}})()},[a,o,l,m,p]);const C=t=>{n(t.pincode,t),f(!1),j("")},A=()=>{if(!s)return y;const t=h.find(i=>i.pincode===s);return t?`${t.pincode} - ${t.city}`:s},P=b||!p||!a&&!o&&!l;return e.jsxs("div",{className:c("relative",w),children:[e.jsxs(T,{open:u,onOpenChange:f,children:[e.jsx(G,{asChild:!0,children:e.jsxs(E,{variant:"outline",role:"combobox","aria-expanded":u,className:c("w-full justify-between",!s&&"text-muted-foreground",d&&"border-red-500"),disabled:P,children:[e.jsx("span",{className:"truncate",children:S?e.jsxs("span",{className:"flex items-center",children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):A()}),e.jsx(U,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(O,{className:"w-full p-0",align:"start",children:e.jsxs(R,{children:[e.jsx(V,{placeholder:"Search pincode...",value:m,onValueChange:j}),e.jsx(z,{children:!a&&!o&&!l?e.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"Please select state, district, or city first"}):e.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"No pincodes found"})}),e.jsx(I,{className:"max-h-64 overflow-auto",children:h.map(t=>e.jsxs($,{value:t.pincode,onSelect:()=>C(t),children:[e.jsx(L,{className:c("mr-2 h-4 w-4",s===t.pincode?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:t.pincode}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.city,", ",t.district,", ",t.state]})]})]},`${t.pincode}-${t.city}`))})]})})]}),d&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d}),!a&&!o&&!l&&!d&&e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Select state, district, or city to see available pincodes"})]})}export{F as A,Y as P,_ as a};
