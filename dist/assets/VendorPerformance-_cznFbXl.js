import{j as e,a5 as s,a6 as a}from"./ui-s1SEoZIF.js";import{r as l}from"./router-D8v2YSKU.js";import{ai as t,_ as r,a as n,b as c,c as i,r as d,e as x,G as m,X as o,I as h,B as j,d as f,aB as p,f as g,E as N,a0 as u,a1 as v,a2 as b,a3 as w,a4 as y}from"./index-YrVmIx3a.js";import{f as S,h as R}from"./apiUtils-B8LmEMCW.js";import{T as P}from"./trending-up-DbwyOQAf.js";import{T as k}from"./trending-down-BFgVaXH2.js";import"./vendor-BxThA0WO.js";const T=l.forwardRef(({className:l,value:r,...n},c)=>e.jsx(s,{ref:c,className:t("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l),...n,children:e.jsx(a,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));T.displayName=s.displayName;const A=()=>{const[s,a]=l.useState([]),[t,A]=l.useState(!0),[D,$]=l.useState(""),[E,C]=l.useState(null),[F,M]=l.useState(!1),[V,L]=l.useState("performanceScore"),{toast:z}=r();l.useEffect(()=>{B()},[D,V]);const B=async()=>{try{A(!0);const e=await S(`/subadmin/vendors/performance?search=${D}&sortBy=${V}`),s=await R(e);a(s.data.vendors||[])}catch(e){z({title:"Error",description:e.message||"Error fetching vendor metrics",variant:"destructive"}),a([])}finally{A(!1)}},I=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600",G=e=>e>=80?{label:"Excellent",variant:"default",class:"bg-green-600"}:e>=60?{label:"Good",variant:"secondary",class:"bg-yellow-600"}:{label:"Needs Improvement",variant:"destructive",class:"bg-red-600"},J=e=>e<60?`${Math.round(e)} mins`:e<1440?`${Math.round(e/60)} hrs`:`${Math.round(e/1440)} days`;return t&&0===s.length?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Vendor Performance"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track and analyze vendor performance metrics"})]}),e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"},s))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Vendor Performance"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track and analyze vendor performance metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Vendors"}),e.jsx(d,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active property vendors"})]})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Top Performers"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.filter(e=>e.performanceScore>=80).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Excellent performance (80%+)"})]})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Average Rating"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.length>0?(s.reduce((e,s)=>e+s.averageRating,0)/s.length).toFixed(1):"0.0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overall vendor ratings"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(h,{placeholder:"Search vendors by name or email...",value:D,onChange:e=>$(e.target.value),className:"pl-10"})]}),e.jsxs("select",{value:V,onChange:e=>L(e.target.value),className:"px-4 py-2 border rounded-md bg-background w-full sm:w-auto",children:[e.jsx("option",{value:"performanceScore",children:"Sort by Performance"}),e.jsx("option",{value:"totalProperties",children:"Sort by Properties"}),e.jsx("option",{value:"averageRating",children:"Sort by Rating"})]})]}),e.jsx("div",{className:"space-y-4",children:0===s.length?e.jsx(n,{children:e.jsxs(x,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(d,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No Vendors Found"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"No vendor data available at the moment"})]})}):s.map(s=>{const a=G(s.performanceScore);return e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[e.jsx(i,{className:"text-lg sm:text-xl",children:s.name}),e.jsx(j,{className:a.class,children:a.label})]}),e.jsx(f,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 text-sm",children:[e.jsx("span",{className:"truncate",children:s.email}),s.phone&&e.jsxs("span",{className:"hidden sm:inline",children:["â€¢ ",s.phone]}),e.jsxs("span",{className:"truncate",children:["Joined ",new Date(s.joinedDate).toLocaleDateString()]})]})})]}),e.jsxs("div",{className:"text-center sm:text-right",children:[e.jsxs("div",{className:`text-2xl sm:text-3xl font-bold ${I(s.performanceScore)}`,children:[s.performanceScore,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Performance Score"})]})]})}),e.jsxs(x,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:s.totalProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Properties"})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4 text-yellow-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:s.averageRating.toFixed(1)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.totalReviews," Reviews"]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"text-xl sm:text-2xl font-bold",children:[s.responseRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response Rate"})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.performanceScore>=80?e.jsx(P,{className:"h-4 w-4 text-green-600 flex-shrink-0"}):e.jsx(k,{className:"h-4 w-4 text-red-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:J(s.averageResponseTime)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"})]})]})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Active Properties"}),e.jsxs("span",{children:[s.activeProperties," / ",s.totalProperties]})]}),e.jsx(T,{value:s.activeProperties/s.totalProperties*100,className:"h-2"})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>{C(s),M(!0)},className:"w-full sm:w-auto touch-manipulation min-h-[40px]",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"View Full Details"]})]})]},s._id)})}),e.jsx(u,{open:F,onOpenChange:M,children:e.jsxs(v,{className:"max-w-3xl mx-4 sm:mx-auto",children:[e.jsxs(b,{children:[e.jsxs(w,{className:"text-lg sm:text-xl",children:[E?.name," - Performance Details"]}),e.jsx(y,{className:"text-sm",children:"Comprehensive performance metrics and statistics"})]}),E&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Contact Information"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("span",{className:"break-words",children:E.email})]}),E.phone&&e.jsxs("li",{children:[e.jsx("strong",{children:"Phone:"})," ",E.phone]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Joined:"})," ",new Date(E.joinedDate).toLocaleDateString()]}),E.lastActive&&e.jsxs("li",{children:[e.jsx("strong",{children:"Last Active:"})," ",new Date(E.lastActive).toLocaleDateString()]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Performance Score"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl sm:text-5xl font-bold ${I(E.performanceScore)}`,children:[E.performanceScore,"%"]}),e.jsx(j,{className:`mt-2 ${G(E.performanceScore).class}`,children:G(E.performanceScore).label})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Property Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-muted p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:E.totalProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-950 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:E.activeProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-950 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:E.rejectedProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rejected"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Customer Engagement"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4 fill-yellow-500 text-yellow-500 flex-shrink-0"}),e.jsxs("span",{className:"font-semibold",children:[E.averageRating.toFixed(1)," / 5.0"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm",children:"Total Reviews"}),e.jsx("span",{className:"font-semibold",children:E.totalReviews})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm",children:"Total Messages"}),e.jsx("span",{className:"font-semibold",children:E.totalMessages})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm",children:"Response Rate"}),e.jsxs("span",{className:"font-semibold",children:[E.responseRate,"%"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm",children:"Average Response Time"}),e.jsx("span",{className:"font-semibold",children:J(E.averageResponseTime)})]})]})]})]})]})})]})};export{A as default};
