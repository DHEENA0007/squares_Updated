import{j as e}from"./ui-BNZSgpjP.js";import{d as s,r as a}from"./router-D8v2YSKU.js";import{c1 as t,bA as r,$ as i,I as l,q as c,r as n,s as d,v as o,w as m,f as x,a as p,e as g,aD as h,aE as u,aF as j,aI as b,E as f,aH as y,ad as v,B as w,c2 as k}from"./index-DNDw84E8.js";import{C as N,A as _}from"./check-check-DwoKz9Fi.js";import{E as C}from"./ellipsis-vertical-CZCfIO97.js";import"./vendor-BxThA0WO.js";const A=()=>{const{notifications:A,markAsRead:D,clearNotifications:S}=t(),$=s(),[z,E]=a.useState("all"),[I,L]=a.useState(""),M=e=>({property_alert:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",price_alert:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",new_message:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",property_update:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",service_update:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",news_update:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",broadcast:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",announcement:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",welcome:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",test:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}[e]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"),R=e=>{try{return k(new Date(e),{addSuffix:!0})}catch{return"Unknown time"}},V=e=>{if(D(e.timestamp),e.data?.action)switch(e.data.action){case"view_property":e.data.propertyId&&$(`/customer/property/${e.data.propertyId}`);break;case"view_properties":$("/customer/search");break;case"view_messages":$("/customer/messages");break;case"view_dashboard":$("/customer/dashboard");break;case"view_favorites":$("/customer/favorites");break;case"view_services":$("/customer/services")}},F=A.filter(e=>{const s="all"===z||"unread"===z&&!e.read||e.type===z,a=!I||e.title.toLowerCase().includes(I.toLowerCase())||e.message.toLowerCase().includes(I.toLowerCase());return s&&a}),P=A.filter(e=>!e.read).length;return e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(r,{className:"w-8 h-8 text-primary"}),"Notifications"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Stay updated with property alerts, messages, and important updates"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(l,{type:"text",placeholder:"Search notifications...",value:I,onChange:e=>L(e.target.value),className:"pl-10 w-64"})]}),e.jsxs(c,{value:z,onValueChange:e=>E(e),children:[e.jsx(n,{className:"w-40",children:e.jsx(d,{placeholder:"Filter"})}),e.jsxs(o,{children:[e.jsx(m,{value:"all",children:"All Notifications"}),e.jsxs(m,{value:"unread",children:["Unread (",P,")"]}),e.jsx(m,{value:"property_alert",children:"Property Alerts"}),e.jsx(m,{value:"price_alert",children:"Price Alerts"}),e.jsx(m,{value:"new_message",children:"Messages"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{A.forEach(e=>D(e.timestamp))},disabled:0===P,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Mark All Read"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:S,disabled:0===A.length,children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]}),e.jsx(p,{children:e.jsx(g,{className:"p-0",children:0===F.length?e.jsxs("div",{className:"text-center py-12 px-4 text-muted-foreground",children:[e.jsx(r,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:I?"No matching notifications":"No notifications yet"}),e.jsx("p",{className:"text-sm",children:I?"Try adjusting your search or filter settings":"You'll see updates about properties, messages, and more here"})]}):e.jsx("div",{className:"divide-y",children:F.map((s,a)=>{return e.jsx("div",{className:"p-4 transition-all duration-200 hover:bg-muted/50 "+(s.read?"opacity-70":"bg-background"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-2xl mt-1",children:(t=s.type,{property_alert:"ðŸ ",price_alert:"ðŸ’°",new_message:"ðŸ’¬",property_update:"ðŸ“‹",service_update:"ðŸ”§",news_update:"ðŸ“°",broadcast:"ðŸ“¢",announcement:"ðŸ“£",welcome:"ðŸ‘‹",test:"ðŸ§ª"}[t]||"ðŸ””")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-1 flex items-center gap-2",children:[s.title,!s.read&&e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.message})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(C,{className:"w-4 h-4"})})}),e.jsxs(j,{align:"end",children:[e.jsxs(b,{onClick:()=>V(s),children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(b,{onClick:()=>D(s.timestamp),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Mark as Read"]}),e.jsx(y,{}),e.jsxs(b,{className:"text-red-600",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{variant:"secondary",className:`text-xs ${M(s.type)}`,children:s.type.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:R(s.timestamp)})]}),e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>V(s),className:"text-xs h-7",children:"View"})]})]})]})},`${s.timestamp}-${a}`);var t})})})})]})};export{A as default};
