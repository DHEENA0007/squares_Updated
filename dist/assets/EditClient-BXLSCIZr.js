import{j as e}from"./ui-DYmpZ3pJ.js";import{g as x,d as j,r as o}from"./router-2SVJvIbS.js";import{D as v,f as u,a as g,b as f,c as C,e as y,I as r,p as b,q as N,r as S,s as D,v as m}from"./index-BbgqWuYN.js";import{L as i}from"./label-DRahLfWI.js";import{s as F}from"./subscriptionService-vz2ZVImT.js";import{A as E}from"./arrow-left-T_MLY8cb.js";import"./vendor-Dazix4UH.js";const V=()=>{const{id:l}=x(),n=j(),{toast:c}=v(),[s,a]=o.useState(null),[q,p]=o.useState(!0);o.useEffect(()=>{(async()=>{if(l)try{p(!0);const d=await F.getSubscription(l);a(d.data.subscription)}catch(d){console.error("Failed to fetch subscription:",d),c({title:"Error",description:"Failed to load client data.",variant:"destructive"}),n("/admin/clients")}finally{p(!1)}})()},[l,n,c]);const h=t=>{t.preventDefault(),c({title:"Client updated",description:"The client details have been updated successfully."}),n("/clients")};return s?e.jsxs("div",{className:"space-y-6 relative top-[60px]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>n("/clients"),children:e.jsx(E,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Client"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Update client subscription details"})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(C,{children:"Client Information"})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Client Name"}),e.jsx(r,{id:"name",value:s.user?.name||"",onChange:t=>a({...s,user:{...s.user,name:t.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(r,{id:"email",type:"email",value:s.user?.email||"",onChange:t=>a({...s,user:{...s.user,email:t.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"planName",children:"Plan"}),e.jsx(r,{id:"planName",value:s.plan?.name||"",onChange:t=>a({...s,plan:{...s.plan,name:t.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"amount",children:"Amount"}),e.jsx(r,{id:"amount",type:"number",step:"0.01",value:s.amount,onChange:t=>a({...s,amount:parseFloat(t.target.value)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"subscriptionDate",children:"Subscription Date"}),e.jsx(r,{id:"subscriptionDate",type:"date",value:s.startDate?.split("T")[0]||"",onChange:t=>a({...s,startDate:t.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(r,{id:"expiryDate",type:"date",value:s.endDate?.split("T")[0]||"",onChange:t=>a({...s,endDate:t.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"status",children:"Status"}),e.jsxs(b,{value:s.status,onValueChange:t=>a({...s,status:t}),children:[e.jsx(N,{children:e.jsx(S,{})}),e.jsxs(D,{children:[e.jsx(m,{value:"active",children:"Active"}),e.jsx(m,{value:"expired",children:"Expired"}),e.jsx(m,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(u,{type:"submit",children:"Save Changes"}),e.jsx(u,{type:"button",variant:"outline",onClick:()=>n("/clients"),children:"Cancel"})]})]})})]})]}):e.jsx("div",{children:"Client not found"})};export{V as default};
