const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D7KzNfIb.js","assets/ui-DHQhougw.js","assets/router-Bi51YGN-.js","assets/vendor-eVk5PToZ.js","assets/index-CWBuhQA1.css"])))=>i.map(i=>d[i]);
import{u as e,N as a,L as s,I as t,E as r,f as n,F as i,t as o,_ as d}from"./index-D7KzNfIb.js";import{j as l}from"./ui-DHQhougw.js";import{d as c,u as m,r as u}from"./router-Bi51YGN-.js";import{E as h}from"./eye-off-BhAYBzhN.js";import"./vendor-eVk5PToZ.js";const x=()=>{const x=c(),p=m(),{login:j}=e(),[f,v]=u.useState(""),[g,b]=u.useState(""),[N,y]=u.useState(!1),[w,S]=u.useState(!1),E=p.state?.from?.pathname||null;return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(a,{}),l.jsx("main",{className:"container mx-auto px-4 py-12",children:l.jsx("div",{className:"max-w-md mx-auto",children:l.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Welcome Back"}),l.jsx("p",{className:"text-center text-muted-foreground mb-8",children:"Sign in to your BuildHomeMart account"}),l.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),f&&g){y(!0);try{if(await j(f,g)){const e=JSON.parse(localStorage.getItem("user")||"{}");if("agent"===e.role){o({title:"Access Denied",description:"Vendors must use the vendor login portal. Redirecting...",variant:"destructive"});const{authService:e}=await d(async()=>{const{authService:e}=await import("./index-D7KzNfIb.js").then(e=>e.bh);return{authService:e}},__vite__mapDeps([0,1,2,3,4]));return e.clearAuthData(),void setTimeout(()=>{x("/vendor/login")},1500)}E?x(E,{replace:!0}):"superadmin"===e.role?x("/admin/dashboard"):"subadmin"===e.role?x("/subadmin/dashboard"):"admin"===e.role?x("/admin/dashboard"):x("/customer/dashboard")}}catch(a){}finally{y(!1)}}else o({title:"Validation Error",description:"Please enter both email and password",variant:"destructive"})},className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(s,{htmlFor:"email",children:"Email"}),l.jsx(t,{id:"email",type:"email",placeholder:"you@example.com",required:!0,value:f,onChange:e=>v(e.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(s,{htmlFor:"password",children:"Password"}),l.jsx("a",{href:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(t,{id:"password",type:w?"text":"password",placeholder:"Enter your password",required:!0,value:g,onChange:e=>b(e.target.value),className:"pr-10"}),l.jsx("button",{type:"button",onClick:()=>S(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:w?l.jsx(h,{className:"h-5 w-5"}):l.jsx(r,{className:"h-5 w-5"})})]})]}),l.jsx(n,{type:"submit",className:"w-full",disabled:N,children:N?"Signing In...":"Sign In"})]}),l.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",l.jsx("a",{href:"/signup",className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})}),l.jsx(i,{})]})};export{x as default};
