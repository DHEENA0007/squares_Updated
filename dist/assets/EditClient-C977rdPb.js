import{j as e}from"./ui-CEt46o3G.js";import{g as x,d as j,r as o}from"./router-2SVJvIbS.js";import{C as v,a as g,b as f,d as C}from"./card-YvDMUmzt.js";import{f as b,a as u,I as r}from"./index-CiYV0Sy0.js";import{L as i}from"./label-BV_cIshD.js";import{S as y,a as N,b as S,c as D,d as m}from"./select-BHWxeluH.js";import{s as F}from"./subscriptionService-D4iHcGTO.js";import{A as E}from"./arrow-left-ClppC_3T.js";import"./vendor-Dazix4UH.js";import"./index-BdQq_4o_.js";import"./index-DHzxUTm5.js";import"./chevron-down-DeDu0PPf.js";const U=()=>{const{id:l}=x(),n=j(),{toast:c}=b(),[t,a]=o.useState(null),[q,p]=o.useState(!0);o.useEffect(()=>{(async()=>{if(l)try{p(!0);const d=await F.getSubscription(l);a(d.data.subscription)}catch(d){console.error("Failed to fetch subscription:",d),c({title:"Error",description:"Failed to load client data.",variant:"destructive"}),n("/admin/clients")}finally{p(!1)}})()},[l,n,c]);const h=s=>{s.preventDefault(),c({title:"Client updated",description:"The client details have been updated successfully."}),n("/clients")};return t?e.jsxs("div",{className:"space-y-6 relative top-[60px]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>n("/clients"),children:e.jsx(E,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Client"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Update client subscription details"})]})]}),e.jsxs(v,{children:[e.jsx(g,{children:e.jsx(f,{children:"Client Information"})}),e.jsx(C,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Client Name"}),e.jsx(r,{id:"name",value:t.user?.name||"",onChange:s=>a({...t,user:{...t.user,name:s.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(r,{id:"email",type:"email",value:t.user?.email||"",onChange:s=>a({...t,user:{...t.user,email:s.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"planName",children:"Plan"}),e.jsx(r,{id:"planName",value:t.plan?.name||"",onChange:s=>a({...t,plan:{...t.plan,name:s.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"amount",children:"Amount"}),e.jsx(r,{id:"amount",type:"number",step:"0.01",value:t.amount,onChange:s=>a({...t,amount:parseFloat(s.target.value)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"subscriptionDate",children:"Subscription Date"}),e.jsx(r,{id:"subscriptionDate",type:"date",value:t.startDate?.split("T")[0]||"",onChange:s=>a({...t,startDate:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(r,{id:"expiryDate",type:"date",value:t.endDate?.split("T")[0]||"",onChange:s=>a({...t,endDate:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"status",children:"Status"}),e.jsxs(y,{value:t.status,onValueChange:s=>a({...t,status:s}),children:[e.jsx(N,{children:e.jsx(S,{})}),e.jsxs(D,{children:[e.jsx(m,{value:"active",children:"Active"}),e.jsx(m,{value:"expired",children:"Expired"}),e.jsx(m,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(u,{type:"submit",children:"Save Changes"}),e.jsx(u,{type:"button",variant:"outline",onClick:()=>n("/clients"),children:"Cancel"})]})]})})]})]}):e.jsx("div",{children:"Client not found"})};export{U as default};
