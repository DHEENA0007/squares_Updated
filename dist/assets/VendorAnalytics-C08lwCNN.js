import{j as e}from"./ui-BNZSgpjP.js";import{r as t,R as r,d as a}from"./router-D8v2YSKU.js";import{b2 as s,a2 as n,G as o,q as i,r as l,s as c,v as d,w as p,f as u,a as h,e as m,b as x,c as f,E as y,U as g,a1 as v,am as b,V as j,J as w,ap as N,aq as k,ar as P,B as S,aL as T,a3 as R,y as C,Q as A}from"./index-rSy6wPVC.js";import{T as O,a as F,b as D,c as E,d as L,e as $}from"./table-DQYMtC7D.js";import{L as z,a as V}from"./Line-BKrsFY9c.js";import{u as K}from"./use-mobile-C5fBmhy-.js";import{E as M,a as I}from"./jspdf.plugin.autotable-ZVH223mj.js";import{D as W}from"./download-Bg252IFe.js";import{T as _}from"./trending-up-DJyp6evM.js";import{T as B}from"./trending-down-C0TEKSvE.js";import{S as Y,P as U,c as G,b as q,v as J,A as H,e as Q,g as X,f as Z,E as ee,l as te,Q as re,i as ae,d as se,h as ne,k as oe,u as ie,G as le,a as ce,m as de,J as pe,B as ue,X as he,Y as me,O as xe,R as fe,C as ye,T as ge,L as ve}from"./generateCategoricalChart-BR6hIIRc.js";import{a as be,A as je}from"./AreaChart-Bt6kV7PV.js";import{B as we}from"./BarChart-Bmuadlxu.js";import{S as Ne}from"./share-BwDyaEGc.js";import"./vendor-BxThA0WO.js";import"./reviewsService-CTyx8y4P.js";function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Oe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Se(e,t,r){return t=Re(t),function(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Te()?Reflect.construct(t,r||[],Re(e).constructor):t.apply(e,r))}function Te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Te=function(){return!!e})()}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e,t){return(Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e,t,r){return(t=Oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=ke(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ke(t)?t:t+""}var Fe=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Se(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(e,t.Component),Pe(e,[{key:"render",value:function(){return null}}])}();Ae(Fe,"displayName","ZAxis"),Ae(Fe,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var De=["option","isActive"];function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ee.apply(this,arguments)}function Le(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $e(e){var r=e.option,a=e.isActive,s=Le(e,De);return"string"==typeof r?t.createElement(Y,Ee({option:t.createElement(U,Ee({type:r},s)),isActive:a,shapeType:"symbols"},s)):t.createElement(Y,Ee({option:r,isActive:a,shapeType:"symbols"},s))}function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ve.apply(this,arguments)}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach(function(t){Ue(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ie(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ge(a.key),a)}}function We(e,t,r){return t=Be(t),function(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_e()?Reflect.construct(t,r||[],Be(e).constructor):t.apply(e,r))}function _e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_e=function(){return!!e})()}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e,t,r){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ge(e){var t=function(e,t){if("object"!=ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=ze(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ze(t)?t:t+""}var qe=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return Ue(t=We(this,e,[].concat(a)),"state",{isAnimationFinished:!1}),Ue(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0})}),Ue(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1})}),Ue(t,"id",ie("recharts-scatter-")),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(e,t.PureComponent),a=e,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}}],(n=[{key:"renderSymbolsStatically",value:function(e){var t=this,a=this.props,s=a.shape,n=a.activeShape,o=a.activeIndex,i=G(this.props,!1);return e.map(function(e,a){var l=o===a,c=l?n:s,d=Me(Me({},i),e);return r.createElement(q,Ve({className:"recharts-scatter-symbol",key:"symbol-".concat(null==e?void 0:e.cx,"-").concat(null==e?void 0:e.cy,"-").concat(null==e?void 0:e.size,"-").concat(a)},J(t.props,e,a),{role:"img"}),r.createElement($e,Ve({option:c,isActive:l,key:"symbol-".concat(a)},d)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,t=this.props,a=t.points,s=t.isAnimationActive,n=t.animationBegin,o=t.animationDuration,i=t.animationEasing,l=t.animationId,c=this.state.prevPoints;return r.createElement(H,{begin:n,duration:o,isActive:s,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var s=t.t,n=a.map(function(e,t){var r=c&&c[t];if(r){var a=Q(r.cx,e.cx),n=Q(r.cy,e.cy),o=Q(r.size,e.size);return Me(Me({},e),{},{cx:a(s),cy:n(s),size:o(s)})}var i=Q(0,e.size);return Me(Me({},e),{},{size:i(s)})});return r.createElement(q,null,e.renderSymbolsStatically(n))})}},{key:"renderSymbols",value:function(){var e=this.props,t=e.points,r=e.isAnimationActive,a=this.state.prevPoints;return!(r&&t&&t.length)||a&&X(a,t)?this.renderSymbolsStatically(t):this.renderSymbolsWithAnimation()}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.points,a=e.xAxis,s=e.yAxis,n=e.children,o=Z(n,ee);return o?o.map(function(e,n){var o=e.props,i=o.direction,l=o.dataKey;return r.cloneElement(e,{key:"".concat(i,"-").concat(l,"-").concat(t[n]),data:t,xAxis:a,yAxis:s,layout:"x"===i?"vertical":"horizontal",dataPointFormatter:function(e,t){return{x:e.cx,y:e.cy,value:"x"===i?+e.node.x:+e.node.y,errorVal:te(e,t)}}})}):null}},{key:"renderLine",value:function(){var e,t,a=this.props,s=a.points,n=a.line,o=a.lineType,i=a.lineJointType,l=G(this.props,!1),c=G(n,!1);if("joint"===o)e=s.map(function(e){return{x:e.cx,y:e.cy}});else if("fitting"===o){var d=re(s),p=d.xmin,u=d.xmax,h=d.a,m=d.b,x=function(e){return h*e+m};e=[{x:p,y:x(p)},{x:u,y:x(u)}]}var f=Me(Me(Me({},l),{},{fill:"none",stroke:l&&l.fill},c),{},{points:e});return t=r.isValidElement(n)?r.cloneElement(n,f):ae(n)?n(f):r.createElement(se,Ve({},f,{type:i})),r.createElement(q,{className:"recharts-scatter-line",key:"recharts-scatter-line"},t)}},{key:"render",value:function(){var e=this.props,t=e.hide,a=e.points,n=e.line,o=e.className,i=e.xAxis,l=e.yAxis,c=e.left,d=e.top,p=e.width,u=e.height,h=e.id,m=e.isAnimationActive;if(t||!a||!a.length)return null;var x=this.state.isAnimationFinished,f=s("recharts-scatter",o),y=i&&i.allowDataOverflow,g=l&&l.allowDataOverflow,v=y||g,b=ne(h)?this.id:h;return r.createElement(q,{className:f,clipPath:v?"url(#clipPath-".concat(b,")"):null},y||g?r.createElement("defs",null,r.createElement("clipPath",{id:"clipPath-".concat(b)},r.createElement("rect",{x:y?c:c-p/2,y:g?d:d-u/2,width:y?p:2*p,height:g?u:2*u}))):null,n&&this.renderLine(),this.renderErrorBar(),r.createElement(q,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||x)&&oe.renderCallByParent(this.props,a))}}])&&Ie(a.prototype,n),o&&Ie(a,o),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,n,o}();Ue(qe,"displayName","Scatter"),Ue(qe,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!le.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"}),Ue(qe,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,a=e.zAxis,s=e.item,n=e.displayedData,o=e.xAxisTicks,i=e.yAxisTicks,l=e.offset,c=s.props.tooltipType,d=Z(s.props.children,ce),p=ne(t.dataKey)?s.props.dataKey:t.dataKey,u=ne(r.dataKey)?s.props.dataKey:r.dataKey,h=a&&a.dataKey,m=a?a.range:Fe.defaultProps.range,x=m&&m[0],f=t.scale.bandwidth?t.scale.bandwidth():0,y=r.scale.bandwidth?r.scale.bandwidth():0,g=n.map(function(e,n){var l=te(e,p),m=te(e,u),g=!ne(h)&&te(e,h)||"-",v=[{name:ne(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:l,payload:e,dataKey:p,type:c},{name:ne(r.dataKey)?s.props.name:r.name||r.dataKey,unit:r.unit||"",value:m,payload:e,dataKey:u,type:c}];"-"!==g&&v.push({name:a.name||a.dataKey,unit:a.unit||"",value:g,payload:e,dataKey:h,type:c});var b=de({axis:t,ticks:o,bandSize:f,entry:e,index:n,dataKey:p}),j=de({axis:r,ticks:i,bandSize:y,entry:e,index:n,dataKey:u}),w="-"!==g?a.scale(g):x,N=Math.sqrt(Math.max(w,0)/Math.PI);return Me(Me({},e),{},{cx:b,cy:j,x:b-N,y:j-N,xAxis:t,yAxis:r,zAxis:a,width:2*N,height:2*N,size:w,node:{x:l,y:m,z:g},tooltipPayload:v,tooltipPosition:{x:b,y:j},payload:e},d&&d[n]&&d[n].props)});return Me({points:g},l)});var Je=pe({chartName:"ComposedChart",GraphicalChild:[z,be,ue,qe],axisComponents:[{axisType:"xAxis",AxisComp:he},{axisType:"yAxis",AxisComp:me},{axisType:"zAxis",AxisComp:Fe}],formatAxisMap:xe});const He=()=>{const r=a(),{toast:s}=n(),Y=K(),[U,G]=t.useState("30days"),[q,J]=t.useState("all"),[H,Q]=t.useState(!0),[X,Z]=t.useState(null),[ee,te]=t.useState(null),[re,ae]=t.useState([]),[se,ne]=t.useState(!1),[oe,ie]=t.useState("all"),[le,ce]=t.useState("composed"),[de,pe]=t.useState([]),xe={timeframe:U,propertyId:"all"!==q?q:void 0};t.useEffect(()=>{(async()=>{try{Q(!0);const[e,t,r,a]=await Promise.all([V.getOverviewStats(xe),V.getPerformanceMetrics(xe),T.getVendorProperties({page:1,limit:100}),R.getFilterConfigurationsByType("listing_type",!1)]);Z(e),te(t);const s=r.success?r.data.properties:[];ae(s);const n=a.map(e=>({value:e.value,name:e.name,displayLabel:e.displayLabel||e.name}));pe(n),"all"===q||s.find(e=>e._id===q)||J("all")}catch(e){s({title:"Error",description:"Failed to load analytics data. Please try again.",variant:"destructive"})}finally{Q(!1)}})()},[U,q]);const ke=async e=>{try{ne(!0),"csv"===e?await Pe():"pdf"===e&&await Se(),s({title:"Success",description:`Analytics data exported as ${e.toUpperCase()}!`})}catch(t){s({title:"Error",description:`Failed to export analytics data as ${e.toUpperCase()}`,variant:"destructive"})}finally{ne(!1)}},Pe=()=>{const e=[],t=(new Date).toLocaleDateString(),r={"7days":"Last 7 Days","30days":"Last 30 Days","90days":"Last 90 Days","1year":"Last Year"}[U];if(e.push(["Advanced Analytics Report"]),e.push(["Generated on",t]),e.push(["Time Period",r]),e.push(["Report Type","Vendor Property Performance"]),e.push([]),e.push(["EXECUTIVE SUMMARY"]),X&&(e.push(["Total Properties",ee?.propertyPerformance?.length||0]),e.push(["Total Views",X.totalViews||0]),e.push(["Total Leads",X.totalLeads||0]),e.push(["Total Revenue (₹)",X.totalRevenue||0]),e.push(["Average Rating",X.averageRating?.toFixed(1)||"0.0"]),e.push(["Overall Conversion Rate",`${((X.totalLeads||0)/(X.totalViews||1)*100).toFixed(1)}%`])),e.push([]),e.push(["REVENUE BREAKDOWN BY PROPERTY TYPE"]),e.push(["Property Type","Revenue (₹)","Percentage of Total"]),X){const t=X.totalRevenue||1;e.push(["Sold Properties",X.soldPropertyRevenue||0,`${((X.soldPropertyRevenue||0)/t*100).toFixed(1)}%`]),e.push(["Leased Properties",X.leasedPropertyRevenue||0,`${((X.leasedPropertyRevenue||0)/t*100).toFixed(1)}%`]),e.push(["Rented Properties",X.rentedPropertyRevenue||0,`${((X.rentedPropertyRevenue||0)/t*100).toFixed(1)}%`]),e.push(["Total Revenue",X.totalRevenue||0,"100%"])}if(e.push([]),e.push(["KEY PERFORMANCE INDICATORS"]),e.push(["Metric","Value","Target Status","Trend"]),X&&(e.push(["Total Views",X.totalViews||0,"On Track","+12%"]),e.push(["Total Leads",X.totalLeads||0,"Above Target","+8%"]),e.push(["Total Revenue",`₹${X.totalRevenue||0}`,"Excellent","+15%"]),e.push(["Conversion Rate",`${((X.totalLeads||0)/(X.totalViews||1)*100).toFixed(1)}%`,"Good","+5%"]),e.push(["Average Rating",X.averageRating?.toFixed(1)||"0.0","Stable","0%"])),e.push([]),e.push(["PROPERTY PERFORMANCE DETAILS"]),e.push(["Property Title","Status","Views","Favorites","Conversion Rate","Revenue (₹)","Performance Rank","Engagement Score"]),ee?.propertyPerformance?.length){[...ee.propertyPerformance].sort((e,t)=>(t.revenue||0)-(e.revenue||0)).forEach((t,r)=>{const a=t.status?t.status.charAt(0).toUpperCase()+t.status.slice(1):"Pending",s=(.4*(t.views||0)+.3*(t.favorites||0)+.3*(t.conversionRate||0)).toFixed(1);e.push([t.title||"Untitled Property",a,t.views||0,t.favorites||0,`${t.conversionRate||0}%`,t.revenue||0,`#${r+1}`,s])})}e.push([]),e.push(["INSIGHTS AND RECOMMENDATIONS"]);if(["Top performing property: "+(ee?.propertyPerformance?.[0]?.title||"N/A"),"Focus on properties with conversion rates above 20%","Optimize listings with low engagement scores","Monitor response times to improve conversion rates","Properties with higher view counts perform better"].forEach(t=>e.push([t])),e.push([]),e.push(["SUMMARY STATISTICS"]),ee?.propertyPerformance?.length){const t=ee.propertyPerformance,r=t.reduce((e,t)=>e+(t.views||0),0),a=t.reduce((e,t)=>e+(t.revenue||0),0),s=t.reduce((e,t)=>e+(t.conversionRate||0),0)/t.length;e.push(["Total Properties Analyzed",t.length]),e.push(["Average Views per Property",Math.round(r/t.length)]),e.push(["Average Revenue per Property",Math.round(a/t.length)]),e.push(["Average Conversion Rate",`${s.toFixed(1)}%`]),e.push(["Highest Performing Property",t[0]?.title||"N/A"])}const a=e.map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),n=`advanced-analytics-${U}-${Date.now()}.csv`;V.downloadBlob(s,n)},Se=()=>{const e=new M,t=e.internal.pageSize.width,r=e.internal.pageSize.height,a={primary:[41,128,185],secondary:[52,152,219],success:[46,204,113],purple:[155,89,182],dark:[44,62,80],light:[245,245,245]},s=(t,r,a,s,n,o)=>{for(let i=0;i<s;i++){const l=i/s,c=Math.round(n[0]*(1-l)+o[0]*l),d=Math.round(n[1]*(1-l)+o[1]*l),p=Math.round(n[2]*(1-l)+o[2]*l);e.setFillColor(c,d,p),e.rect(t,r+i,a,1,"F")}};s(0,0,t,40,a.primary,a.secondary),e.setTextColor(255,255,255),e.setFontSize(28),e.setFont("helvetica","bold"),e.text("SQUARES",20,25),e.setFontSize(14),e.setFont("helvetica","normal"),e.text("Property Analytics Report",20,35),e.setFillColor(255,255,255),e.setDrawColor(...a.primary),e.setLineWidth(.5),e.roundedRect(120,10,70,25,3,3,"FD"),e.setTextColor(...a.dark),e.setFontSize(10),e.setFont("helvetica","bold");const n=(new Date).toLocaleDateString(),o={"7days":"Last 7 Days","30days":"Last 30 Days","90days":"Last 90 Days","1year":"Last Year"}[U];e.text("Report Period:",125,18),e.text(o,125,25),e.text(`Generated: ${n}`,125,32);let i=55;if(X){e.setFillColor(...a.light),e.setDrawColor(...a.primary),e.setLineWidth(.3),e.roundedRect(15,i-5,t-30,15,2,2,"FD"),e.setTextColor(...a.primary),e.setFontSize(16),e.setFont("helvetica","bold"),e.text("Executive Summary",20,i+5),i+=20,e.setTextColor(...a.dark),e.setFontSize(11),e.setFont("helvetica","normal");const s=`This comprehensive analytics report covers the ${o.toLowerCase()} period, showcasing ${V.formatNumber(X.totalViews||0)} total property views, ${V.formatNumber(X.totalLeads||0)} leads generated, and ₹${V.formatNumber(X.totalRevenue||0)} in total revenue across ${ee?.propertyPerformance?.length||0} properties.`,n=e.splitTextToSize(s,t-40);let l=i;for(let t=0;t<n.length;t++)l>r-30&&(e.addPage(),l=20),e.text(n[t],20,l),l+=5;i=l+5}if(X){i>r-100&&(e.addPage(),i=20),e.setFillColor(...a.secondary),e.setDrawColor(...a.secondary),e.roundedRect(15,i-5,t-30,12,2,2,"F"),e.setTextColor(255,255,255),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Key Performance Indicators",20,i+2),i+=18;const s=[["Metric","Value","Change","Target Status"],["Total Views",V.formatNumber(X.totalViews||0),"+12%","On Track"],["Total Leads",V.formatNumber(X.totalLeads||0),"+8%","Above Target"],["Total Revenue",`₹${V.formatNumber(X.totalRevenue||0)}`,"+15%","Excellent"],["Conversion Rate",`${((X.totalLeads||0)/(X.totalViews||1)*100).toFixed(1)}%`,"+5%","Good"],["Average Rating",`${X.averageRating?.toFixed(1)||"0.0"}`,"0%","Stable"]];I(e,{body:s,startY:i,theme:"grid",styles:{fontSize:10,cellPadding:4,lineColor:[200,200,200],lineWidth:.1},headStyles:{fillColor:a.primary,textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[248,249,250]},columnStyles:{0:{fontStyle:"bold",cellWidth:35},1:{halign:"right",cellWidth:30},2:{halign:"center",cellWidth:25},3:{halign:"center",cellWidth:30}},margin:{left:20,right:20}}),i=e.lastAutoTable.finalY+15}if(X&&(X.soldPropertyRevenue||X.leasedPropertyRevenue||X.rentedPropertyRevenue)){i>r-120&&(e.addPage(),i=20),e.setFillColor(...a.success),e.setDrawColor(...a.success),e.roundedRect(15,i-5,t-30,12,2,2,"F"),e.setTextColor(255,255,255),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Revenue Breakdown by Property Type",20,i+2),i+=18;const s=X.totalRevenue||1,n=[["Property Type","Revenue","Percentage","Status"],["Sold Properties",`₹${V.formatNumber(X.soldPropertyRevenue||0)}`,`${((X.soldPropertyRevenue||0)/s*100).toFixed(1)}%`,"High Performer"],["Leased Properties",`₹${V.formatNumber(X.leasedPropertyRevenue||0)}`,`${((X.leasedPropertyRevenue||0)/s*100).toFixed(1)}%`,"Steady"],["Rented Properties",`₹${V.formatNumber(X.rentedPropertyRevenue||0)}`,`${((X.rentedPropertyRevenue||0)/s*100).toFixed(1)}%`,"Growing"],["Total Revenue",`₹${V.formatNumber(X.totalRevenue||0)}`,"100%","Portfolio Total"]];I(e,{body:n,startY:i,theme:"grid",styles:{fontSize:10,cellPadding:4,lineColor:[200,200,200],lineWidth:.1},headStyles:{fillColor:a.success,textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[248,249,250]},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{halign:"right",cellWidth:35},2:{halign:"center",cellWidth:25},3:{halign:"center",cellWidth:30}},margin:{left:20,right:20}}),i=e.lastAutoTable.finalY+15}if(ee?.propertyPerformance?.length){i>r-150&&(e.addPage(),i=20),e.setFillColor(...a.purple),e.setDrawColor(...a.purple),e.roundedRect(15,i-5,t-30,12,2,2,"F"),e.setTextColor(255,255,255),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Property Performance Details",20,i+2),i+=18;const s=[["Property Title","Status","Views","Favorites","Conv. Rate","Revenue","Rank"]];[...ee.propertyPerformance].sort((e,t)=>(t.revenue||0)-(e.revenue||0)).forEach((e,t)=>{const r=e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Pending";e.status?.toLowerCase(),s.push([e.title||"Untitled Property",r,V.formatNumber(e.views||0),V.formatNumber(e.favorites||0),`${e.conversionRate||0}%`,`₹${V.formatNumber(e.revenue||0)}`,`#${t+1}`])}),I(e,{body:s,startY:i,theme:"grid",styles:{fontSize:9,cellPadding:3,lineColor:[200,200,200],lineWidth:.1},headStyles:{fillColor:a.purple,textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[248,249,250]},columnStyles:{0:{cellWidth:45,fontStyle:"bold"},1:{halign:"center",cellWidth:25},2:{halign:"right",cellWidth:20},3:{halign:"right",cellWidth:20},4:{halign:"center",cellWidth:20},5:{halign:"right",cellWidth:30},6:{halign:"center",cellWidth:15}},margin:{left:15,right:15}}),i=e.lastAutoTable.finalY+15}const l=e.getNumberOfPages();for(let d=1;d<=l;d++)e.setPage(d),s(0,r-15,t,15,a.light,[220,220,220]),e.setTextColor(...a.dark),e.setFontSize(8),e.setFont("helvetica","normal"),e.text(`Page ${d} of ${l}`,20,r-5),e.text("Generated by Squares Vendor Analytics Dashboard",t-90,r-5),e.text(`© ${(new Date).getFullYear()} Squares - Confidential Report`,t/2-35,r-5);const c=`advanced-analytics-${U}-${Date.now()}.pdf`;e.save(c)};if(H)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading analytics..."})]})});const Te=X?(e=>{if(!e)return[{title:"Total Views",value:"0",change:"0%",changeType:"neutral",icon:y,description:"Property page views"},{title:"Phone Calls",value:"0",change:"0%",changeType:"neutral",icon:C,description:"Direct calls"},{title:"Messages",value:"0",change:"0%",changeType:"neutral",icon:b,description:"Chat inquiries"},{title:"Total Revenue",value:"₹0",change:"0%",changeType:"neutral",icon:A,description:"All property revenue"},{title:"Avg. Rating",value:"0.0",change:"0%",changeType:"neutral",icon:A,description:"Customer reviews"}];const t=e=>{if(null==e||isNaN(e))return{change:"0%",changeType:"neutral"};const t=e.toFixed(1);return{change:`${e>0?"+":""}${t}%`,changeType:e>0?"increase":e<0?"decrease":"neutral"}},r=t(e.trends?.views?.growth),a=t(e.trends?.revenue?.growth);return[...[{title:"Total Views",value:V.formatNumber(e.totalViews),change:r.change,changeType:r.changeType,icon:y,description:"Property page views"},{title:"Phone Calls",value:V.formatNumber(e.totalCalls),change:"0%",changeType:"neutral",icon:C,description:"Direct calls"},{title:"Messages",value:V.formatNumber(e.totalMessages),change:"0%",changeType:"neutral",icon:b,description:"Chat inquiries"},{title:"Total Revenue",value:`₹${V.formatNumber(e.totalRevenue)}`,change:a.change,changeType:a.changeType,icon:A,description:"All property revenue"}],...(()=>{if(!ee?.propertyPerformance?.length)return[];const e={};return ee.propertyPerformance.forEach(t=>{const r=t.listingType?.toLowerCase()||"sale";e[r]||(e[r]={count:0,revenue:0}),e[r].count+=1,e[r].revenue+=t.revenue||0}),Object.entries(e).map(([e,t])=>{const r=de.find(t=>t.value.toLowerCase()===e);return{title:`${r?.displayLabel||r?.name||e.charAt(0).toUpperCase()+e.slice(1)} Revenue`,value:`₹${V.formatNumber(t.revenue)}`,change:"0%",changeType:"neutral",icon:w,description:`${t.count} ${1===t.count?"property":"properties"} listed`}})})(),{title:"Avg. Rating",value:e.averageRating?.toFixed(1)||"0.0",change:"0%",changeType:"neutral",icon:A,description:"Customer reviews"}]})(X):[];ee?.viewsData?.length?ee.viewsData:V.generateDateRange(U);const Re=ee?.leadsData?.length?ee.leadsData:V.generateDateRange(U);ee?.conversionData?.length?ee.conversionData:V.generateDateRange(U),ee?.revenueData?.length?ee.revenueData:V.generateDateRange(U);const Ce=ee?.propertyPerformance||[];!ee?.leadSources?.length||ee.leadSources,!ee?.demographicsData?.length||ee.demographicsData,!ee?.viewsData?.length||ee.viewsData.slice(0,7).map((e,t)=>({name:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][t]||e.name,favorites:Math.floor(.1*e.value),shares:Math.floor(.05*e.value),inquiries:Math.floor(.02*e.value)}));const Ae=ee?.viewsData?.length?ee.viewsData.map((e,t)=>({name:e.name,views:e.value||0,interactions:Math.floor(.15*(e.value||0)),conversions:Math.floor(.03*(e.value||0)),favorites:Math.floor(.12*(e.value||0)),shares:e.shares||0,inquiries:e.inquiries||0})):[],Oe=Ae.length?Ae:[];return ee?.propertyPerformance.slice(0,3),e.jsxs("div",{className:"space-y-8 p-6 bg-gray-50/50 dark:bg-background min-h-screen",children:[e.jsxs("div",{className:"flex "+(Y?"flex-col space-y-4":"justify-between items-center"),children:[e.jsxs("div",{children:[e.jsx("h1",{className:(Y?"text-2xl":"text-3xl")+" font-bold tracking-tight",children:"Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your property performance and marketing insights"})]}),e.jsxs("div",{className:"flex "+(Y?"flex-col space-y-2":"gap-2"),children:[e.jsxs(i,{value:U,onValueChange:e=>G(e),children:[e.jsx(l,{className:""+(Y?"w-full":"w-40"),children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(p,{value:"7days",children:"Last 7 days"}),e.jsx(p,{value:"30days",children:"Last 30 days"}),e.jsx(p,{value:"90days",children:"Last 90 Days"}),e.jsx(p,{value:"1year",children:"Last year"})]})]}),e.jsxs("div",{className:"flex "+(Y?"flex-col space-y-2":"space-x-2"),children:[e.jsxs(u,{variant:"outline",onClick:()=>ke("csv"),disabled:se,className:""+(Y?"w-full h-11":"h-9"),children:[se?e.jsx(o,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(W,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(u,{variant:"outline",onClick:()=>ke("pdf"),disabled:se,className:""+(Y?"w-full h-11":"h-9"),children:[se?e.jsx(o,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(W,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})]})]}),e.jsx("div",{className:"grid gap-6 "+(Y?"grid-cols-1":"grid-cols-2 md:grid-cols-4 lg:grid-cols-4"),children:Te.map(t=>e.jsx(h,{className:"shadow-sm hover:shadow-md transition-shadow duration-200 border-0 bg-white dark:bg-card dark:border dark:border-border",children:e.jsx(m,{className:""+(Y?"p-4":"p-6"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:(Y?"text-xs":"text-sm")+" font-medium text-muted-foreground",children:t.title}),e.jsx("p",{className:(Y?"text-xl":"text-2xl")+" font-bold",children:t.value}),e.jsxs("div",{className:"flex items-center mt-2",children:["increase"===t.changeType?e.jsx(_,{className:(Y?"w-3 h-3":"w-4 h-4")+" text-green-500 mr-1"}):"decrease"===t.changeType?e.jsx(B,{className:(Y?"w-3 h-3":"w-4 h-4")+" text-red-500 mr-1"}):null,e.jsx("span",{className:`${Y?"text-xs":"text-sm"} ${"increase"===t.changeType?"text-green-500":"decrease"===t.changeType?"text-red-500":"text-muted-foreground"}`,children:t.change})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.description})]}),e.jsx(t.icon,{className:(Y?"h-6 w-6":"h-8 w-8")+" text-muted-foreground"})]})})},t.title))}),e.jsxs("div",{className:"grid gap-6 "+(Y?"grid-cols-1":"grid-cols-2"),children:[e.jsxs(h,{className:"shadow-sm border-0 bg-white dark:bg-card dark:border dark:border-border",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(f,{children:"Property Engagement Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track views, interactions, and conversions across your properties"})]}),e.jsxs("div",{className:"flex gap-2 "+(Y?"flex-col":"flex-row"),children:[e.jsxs(i,{value:oe,onValueChange:e=>ie(e),children:[e.jsx(l,{className:""+(Y?"w-full":"w-40"),children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(p,{value:"all",children:"All Metrics"}),e.jsx(p,{value:"views",children:"Views Only"}),e.jsx(p,{value:"interactions",children:"Interactions"})]})]}),e.jsxs(i,{value:le,onValueChange:e=>ce(e),children:[e.jsx(l,{className:""+(Y?"w-full":"w-36"),children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(p,{value:"composed",children:"Combined"}),e.jsx(p,{value:"area",children:"Area Chart"}),e.jsx(p,{value:"bar",children:"Bar Chart"})]})]})]})]})}),e.jsx(m,{children:Oe.length>0?e.jsxs(e.Fragment,{children:[e.jsx(fe,{width:"100%",height:350,children:"composed"===le?e.jsxs(Je,{data:Oe,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorInteractions",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:.1})]})]}),e.jsx(ye,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(he,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(me,{stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ge,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",color:"#1f2937"}}),e.jsx(ve,{wrapperStyle:{paddingTop:"15px"},iconType:"circle"}),"all"===oe||"views"===oe?e.jsx(be,{type:"monotone",dataKey:"views",fill:"url(#colorViews)",stroke:"#3b82f6",strokeWidth:2,name:"Views"}):null,"all"===oe||"interactions"===oe?e.jsx(ue,{dataKey:"interactions",fill:"#8b5cf6",name:"Interactions",radius:[4,4,0,0]}):null,"all"===oe?e.jsxs(e.Fragment,{children:[e.jsx(z,{type:"monotone",dataKey:"favorites",stroke:"#f59e0b",strokeWidth:2,strokeDasharray:"5 5",dot:{r:4},name:"Favorites"}),e.jsx(z,{type:"monotone",dataKey:"shares",stroke:"#ec4899",strokeWidth:2,strokeDasharray:"5 5",dot:{r:4},name:"Shares"})]}):null]}):"area"===le?e.jsxs(je,{data:Oe,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"areaViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"areaInteractions",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:.1})]})]}),e.jsx(ye,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(he,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(me,{stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ge,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",color:"#1f2937"}}),e.jsx(ve,{wrapperStyle:{paddingTop:"15px"}}),"all"===oe||"views"===oe?e.jsx(be,{type:"monotone",dataKey:"views",stroke:"#3b82f6",fill:"url(#areaViews)",name:"Views"}):null,"all"===oe||"interactions"===oe?e.jsx(be,{type:"monotone",dataKey:"interactions",stroke:"#8b5cf6",fill:"url(#areaInteractions)",name:"Interactions"}):null]}):e.jsxs(we,{data:Oe,children:[e.jsx(ye,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(he,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(me,{stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ge,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",color:"#1f2937"}}),e.jsx(ve,{wrapperStyle:{paddingTop:"15px"}}),"all"===oe||"views"===oe?e.jsx(ue,{dataKey:"views",fill:"#3b82f6",name:"Views",radius:[4,4,0,0]}):null,"all"===oe||"interactions"===oe?e.jsx(ue,{dataKey:"interactions",fill:"#8b5cf6",name:"Interactions",radius:[4,4,0,0]}):null]})}),e.jsxs("div",{className:"grid gap-3 mt-6 pt-4 border-t "+(Y?"grid-cols-1":"grid-cols-3 md:grid-cols-6"),children:[e.jsxs("div",{className:"text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(y,{className:(Y?"w-4 h-4":"w-5 h-5")+" mx-auto text-blue-600 dark:text-blue-400 mb-1"}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"Views"}),e.jsx("div",{className:(Y?"text-sm":"text-lg")+" font-bold text-blue-700 dark:text-blue-300",children:Oe.reduce((e,t)=>e+(t.views||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx(g,{className:(Y?"w-4 h-4":"w-5 h-5")+" mx-auto text-purple-600 dark:text-purple-400 mb-1"}),e.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Interactions"}),e.jsx("div",{className:(Y?"text-sm":"text-lg")+" font-bold text-purple-700 dark:text-purple-300",children:Oe.reduce((e,t)=>e+(t.interactions||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[e.jsx(v,{className:(Y?"w-4 h-4":"w-5 h-5")+" mx-auto text-amber-600 dark:text-amber-400 mb-1"}),e.jsx("div",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium",children:"Favorites"}),e.jsx("div",{className:(Y?"text-sm":"text-lg")+" font-bold text-amber-700 dark:text-amber-300",children:Oe.reduce((e,t)=>e+(t.favorites||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[e.jsx(Ne,{className:(Y?"w-4 h-4":"w-5 h-5")+" mx-auto text-pink-600 dark:text-pink-400 mb-1"}),e.jsx("div",{className:"text-xs text-pink-600 dark:text-pink-400 font-medium",children:"Shares"}),e.jsx("div",{className:(Y?"text-sm":"text-lg")+" font-bold text-pink-700 dark:text-pink-300",children:Oe.reduce((e,t)=>e+(t.shares||0),0).toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg",children:[e.jsx(b,{className:(Y?"w-4 h-4":"w-5 h-5")+" mx-auto text-cyan-600 dark:text-cyan-400 mb-1"}),e.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 font-medium",children:"Inquiries"}),e.jsx("div",{className:(Y?"text-sm":"text-lg")+" font-bold text-cyan-700 dark:text-cyan-300",children:Oe.reduce((e,t)=>e+(t.inquiries||0),0).toLocaleString()})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[350px] text-center",children:[e.jsx(j,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Engagement Data"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Property engagement metrics will appear here once your properties start receiving views and interactions from potential buyers."})]})})]}),e.jsxs(h,{className:"shadow-sm border-0 bg-white dark:bg-card dark:border dark:border-border",children:[e.jsxs(x,{children:[e.jsx(f,{children:"Inquiry Response Time"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Average time to respond to customer inquiries"})]}),e.jsxs(m,{children:[e.jsx(fe,{width:"100%",height:300,children:e.jsxs(je,{data:Re,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorResponseTime",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]})}),e.jsx(ye,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(he,{dataKey:"name",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(me,{stroke:"#6b7280",tick:{fontSize:12},label:{value:"Hours",angle:-90,position:"insideLeft"}}),e.jsx(ge,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",color:"#1f2937"},formatter:e=>[`${e.toFixed(1)} hours`,"Response Time"]}),e.jsx(be,{type:"monotone",dataKey:"value",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorResponseTime)"})]})}),e.jsxs("div",{className:"grid gap-4 mt-6 pt-4 border-t "+(Y?"grid-cols-1":"grid-cols-3"),children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Response"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[Re.length>0?(Re.reduce((e,t)=>e+t.value,0)/Re.length).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fastest"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[Re.length>0?Math.min(...Re.map(e=>e.value)).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Inquiries"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:X?.totalMessages||0})]})]})]})]})]}),e.jsxs(h,{className:"shadow-sm border-0 bg-white dark:bg-card dark:border dark:border-border overflow-hidden",children:[e.jsx(x,{className:"border-b bg-gray-50/40 dark:bg-muted/40 px-6 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(f,{children:"Property Performance"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Detailed metrics per property"})]}),e.jsxs(i,{value:q,onValueChange:J,children:[e.jsx(l,{className:"w-full sm:w-[250px] bg-white dark:bg-background",children:e.jsx(c,{placeholder:"Filter by property"})}),e.jsxs(d,{children:[e.jsx(p,{value:"all",children:"All Properties"}),re.length>0?re.map(t=>e.jsxs(p,{value:t._id,children:[(t.title||"Untitled Property").substring(0,30),t.title&&t.title.length>30?"...":""]},t._id)):e.jsx(p,{value:"no-properties",disabled:!0,children:"No properties available"})]})]})]})}),e.jsx(m,{className:"p-0",children:0===re.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-center p-6",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:e.jsx(w,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mb-6",children:"You haven't added any properties yet. Add your first property to start tracking performance analytics."}),e.jsx(u,{onClick:()=>r("/vendor/properties/add"),className:"bg-primary hover:bg-primary/90",children:"Add Your First Property"})]}):Ce.length>0?e.jsxs("div",{className:"space-y-0",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(fe,{width:"100%",height:"100%",children:e.jsxs(je,{data:Ce,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),e.jsx(ye,{strokeDasharray:"3 3",stroke:"#e5e7eb",vertical:!1}),e.jsx(he,{dataKey:"title",hide:!0}),e.jsx(me,{tick:{fontSize:12,fill:"#6b7280"},axisLine:!1,tickLine:!1,width:40}),e.jsx(ge,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.96)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",color:"#1f2937"},cursor:{stroke:"#3b82f6",strokeWidth:1,strokeDasharray:"4 4"}}),e.jsx(be,{type:"monotone",dataKey:"views",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorViews)"})]})})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(O,{children:[e.jsx(F,{children:e.jsxs(D,{className:"bg-gray-50/50 dark:bg-muted/40 hover:bg-gray-50/50 dark:hover:bg-muted/40",children:[e.jsx(E,{className:"pl-6 w-[300px]",children:"Property"}),e.jsx(E,{children:"Status"}),e.jsx(E,{className:"text-right",children:"Views"}),e.jsx(E,{className:"text-right",children:"Favorites"}),e.jsx(E,{className:"text-right",children:"Conv. Rate"}),e.jsx(E,{className:"text-right pr-6",children:"Revenue"})]})}),e.jsx(L,{children:Ce.map((t,r)=>{const a=re.find(e=>e.title===t.title),s="sold"===t.status?.toLowerCase()?"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800":"leased"===t.status?.toLowerCase()?"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-800":"rented"===t.status?.toLowerCase()?"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900/30 dark:text-purple-400 dark:border-purple-800":"available"===t.status?.toLowerCase()?"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800":"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";return e.jsxs(D,{className:"hover:bg-gray-50/50 dark:hover:bg-muted/20 transition-colors group",children:[e.jsx($,{className:"pl-6 font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(N,{className:"h-10 w-10 rounded-lg border bg-muted",children:[e.jsx(k,{src:a?.images?.[0],alt:t.title,className:"object-cover"}),e.jsx(P,{className:"rounded-lg bg-primary/10 text-primary font-semibold",children:t.title.substring(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate max-w-[200px] text-sm font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary transition-colors",children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:a?.location?.address||"Location not available"})]})]})}),e.jsx($,{children:e.jsx(S,{variant:"outline",className:`${s} capitalize shadow-sm`,children:t.status||"Unknown"})}),e.jsx($,{className:"text-right",children:e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"font-medium",children:V.formatNumber(t.views||0)}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"views"})]})}),e.jsx($,{className:"text-right",children:e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"font-medium",children:V.formatNumber(t.favorites||0)}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"saves"})]})}),e.jsx($,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsxs("span",{className:"font-medium "+((t.conversionRate||0)>2?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"),children:[t.conversionRate||0,"%"]}),(t.conversionRate||0)>2&&e.jsx(_,{className:"w-3 h-3 text-green-600"})]})}),e.jsx($,{className:"text-right pr-6",children:e.jsxs("span",{className:"font-bold text-gray-900 dark:text-gray-100",children:["₹",V.formatNumber(t.revenue||0)]})})]},r)})})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-center p-6",children:[e.jsx("div",{className:"w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mb-4",children:e.jsx(j,{className:"w-8 h-8 text-muted-foreground/50"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"No Performance Data"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"Performance data for your properties will appear here once they receive views and interactions."})]})})]})]})};export{He as default};
