import{j as e}from"./ui-BHyUY8Z8.js";import{r as n}from"./router-2SVJvIbS.js";import{G as E,J as y,K as C,O as S,Q as k,a9 as D,R as P,L as w,I as T,q,ap as z,f as l,t as u,A as g,aM as F,z as $,l as N,M as v}from"./index-Bd1eLXM_.js";import{M as L}from"./messageService-CBhFp6R7.js";import{g as B,b as A}from"./propertyUtils-DZZpAHgC.js";import{S as O}from"./send-DXGW9Fle.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=E("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Q=({open:j,onOpenChange:r,property:a,onMessageSent:o})=>{const[c,x]=n.useState(`Inquiry about ${a.title}`),[t,h]=n.useState(""),[d,s]=n.useState(!1),p=async()=>{if(!t.trim()){u({title:"Error",description:"Please enter a message",variant:"destructive"});return}try{s(!0),await L.sendPropertyInquiry(a._id,c.trim(),t.trim()),u({title:"Success",description:"Your message has been sent successfully!"}),h(""),x(`Inquiry about ${a.title}`),o&&o(),r(!1)}catch(i){console.error("Failed to send message:",i)}finally{s(!1)}},m=()=>a.vendor?.name?a.vendor.name:B(a.owner);return e.jsx(y,{open:j,onOpenChange:r,children:e.jsxs(C,{className:"sm:max-w-[525px]",children:[e.jsxs(S,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Send Message"]}),e.jsxs(P,{children:["Send a message to ",m()," about this property"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:a.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.address.city,", ",a.address.state]}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-1",children:["₹",a.price.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"subject",children:"Subject"}),e.jsx(T,{id:"subject",value:c,onChange:i=>x(i.target.value),placeholder:"Enter subject"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"message",children:"Message"}),e.jsx(q,{id:"message",value:t,onChange:i=>h(i.target.value),placeholder:"Type your message here...",rows:6,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Introduce yourself and let the owner know what you're looking for"})]})]}),e.jsxs(z,{children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:d,children:"Cancel"}),e.jsx(l,{type:"button",onClick:p,disabled:d||!t.trim(),children:d?e.jsx(e.Fragment,{children:"Sending..."}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})]})})},U=({open:j,onOpenChange:r,property:a})=>{const[o,c]=n.useState(!1),[x,t]=n.useState(!1),[h,d]=n.useState(!1),s=A(a),p=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),m=(I,b)=>{navigator.clipboard.writeText(I).then(()=>{b==="phone"?(c(!0),setTimeout(()=>c(!1),2e3)):(t(!0),setTimeout(()=>t(!1),2e3)),u({title:"Copied!",description:`${b==="phone"?"Phone number":"Email"} copied to clipboard`})})},i=()=>{s.phone&&s.phone!=="Not available"&&(p()?window.location.href=`tel:${s.phone}`:(d(!0),u({title:"Phone Number",description:s.phone})))},M=()=>{s.email&&s.email!=="Not available"&&(window.location.href=`mailto:${s.email}?subject=Inquiry about ${a.title}`)};return e.jsx(y,{open:j,onOpenChange:r,children:e.jsxs(C,{className:"sm:max-w-[425px]",children:[e.jsxs(S,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Contact Information"]}),e.jsx(P,{children:"Get in touch with the property owner"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:a.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.address.city,", ",a.address.state]}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-1",children:["₹",a.price.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.type==="Vendor"?e.jsx(F,{className:"w-5 h-5 text-primary"}):e.jsx($,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.type})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(g,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium truncate",children:s.phone})]}),s.phone!=="Not available"&&e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>m(s.phone,"phone"),children:o?e.jsx(N,{className:"w-4 h-4 text-green-600"}):e.jsx(f,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(v,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm font-medium truncate",children:s.email})]}),s.email!=="Not available"&&e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>m(s.email,"email"),children:x?e.jsx(N,{className:"w-4 h-4 text-green-600"}):e.jsx(f,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsxs(l,{variant:"outline",onClick:i,disabled:s.phone==="Not available",className:"w-full",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Call Now"]}),e.jsxs(l,{variant:"outline",onClick:M,disabled:s.email==="Not available",className:"w-full",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Send Email"]})]}),h&&s.phone!=="Not available"&&e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Contact Number:"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:s.phone}),e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>m(s.phone,"phone"),children:o?e.jsx(N,{className:"w-4 h-4 text-green-600"}):e.jsx(f,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the number to copy or use the copy button"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Contact during business hours for the best response"})]})]})})};export{Q as P,U as a};
