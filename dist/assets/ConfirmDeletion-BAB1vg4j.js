import{j as e}from"./ui-BNZSgpjP.js";import{h as s,d as a,r}from"./router-D8v2YSKU.js";import{a as t,b as c,G as n,C as o,H as l,c as i,d,e as m,f as u,J as x,K as h}from"./index-Bb9pk9gg.js";import{A as j,a as g}from"./alert-CcvFTH-i.js";import"./vendor-BxThA0WO.js";const f=()=>{const[f]=s(),p=a(),[N,b]=r.useState("loading"),[w,v]=r.useState("");return r.useEffect(()=>{(async()=>{const e=f.get("token");if(!e)return b("error"),void v("Invalid or missing deletion token.");try{const s=await h.confirmAccountDeletion(e);s.success?(b("success"),v("Your account has been permanently deleted. All your data has been removed from our servers."),setTimeout(()=>{localStorage.clear(),sessionStorage.clear(),p("/")},5e3)):(b("error"),v(s.message||"Failed to delete account."))}catch(s){b("error"),v(s.message||"An error occurred while deleting your account.")}})()},[f,p]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-100 p-4",children:e.jsxs(t,{className:"w-full max-w-md",children:[e.jsxs(c,{className:"text-center",children:[e.jsxs("div",{className:"mx-auto mb-4",children:["loading"===N&&e.jsx(n,{className:"w-16 h-16 text-red-500 animate-spin"}),"success"===N&&e.jsx(o,{className:"w-16 h-16 text-green-500"}),"error"===N&&e.jsx(l,{className:"w-16 h-16 text-red-500"})]}),e.jsxs(i,{className:"text-2xl",children:["loading"===N&&"Deleting Account...","success"===N&&"Account Deleted","error"===N&&"Deletion Failed"]}),e.jsxs(d,{children:["loading"===N&&"Please wait while we permanently delete your account","success"===N&&"Your account has been permanently removed","error"===N&&"Unable to delete your account"]})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsx(j,{variant:"error"===N?"destructive":"default",children:e.jsx(g,{children:w})}),"success"===N&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-900",children:[e.jsx("strong",{children:"Important:"})," This action is permanent. All your data has been removed and cannot be recovered. You can create a new account anytime if needed."]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:["success"===N&&e.jsxs(u,{onClick:()=>p("/"),className:"w-full",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Go to Home"]}),"error"===N&&e.jsxs(e.Fragment,{children:[e.jsx(u,{onClick:()=>p("/customer/settings"),className:"w-full",children:"Back to Settings"}),e.jsxs(u,{variant:"outline",onClick:()=>p("/"),className:"w-full",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Go to Home"]})]})]})]})]})})};export{f as default};
