import{j as e}from"./ui-BNZSgpjP.js";import{r as s}from"./router-D8v2YSKU.js";import{bC as a,a3 as i,bD as l,G as t,f as c,al as n,af as r,ag as d,ah as o,by as h,Y as x,a9 as m,ai as u,a as j,b as p,c as g,B as v,e as y,bE as f,d as b,L as N,ac as w,I as S,ao as C,bF as k,bG as A,J as O,p as I,k as F,ad as U,a4 as D,a5 as B,a6 as P,a7 as V,a8 as E,T as K,j as L,ae as T,q as z,r as H,s as $,v as _,w as q,bH as M,bI as R,bJ as W,bK as G}from"./index-CbYcfsaZ.js";import"./vendor-BxThA0WO.js";const J=[{value:"Plus",label:"Plus",icon:m},{value:"Calculator",label:"Calculator",icon:k},{value:"List",label:"List",icon:A},{value:"Settings",label:"Settings",icon:x},{value:"Home",label:"Home",icon:O},{value:"Building",label:"Building",icon:I},{value:"MapPin",label:"Map Pin",icon:F}],Q=[{value:"post-property",label:"Post Property"},{value:"property-valuation",label:"Property Valuation"},{value:"quick-listing",label:"Quick Listing"},{value:"manage-properties",label:"Manage Properties"},{value:"contact",label:"Contact Page"}],Y=()=>{const[k,A]=s.useState("slides"),[O,I]=s.useState(!0),[F,Y]=s.useState(!1),[X,Z]=s.useState([]),[ee,se]=s.useState(null),[ae,ie]=s.useState(!1),[le,te]=s.useState(null),[ce,ne]=s.useState([]),[re,de]=s.useState(null),[oe,he]=s.useState(!1),[xe,me]=s.useState([]),ue=e=>{if(!e)return"";if(e.startsWith("http"))return e;if(e.startsWith("/uploads")){return`${"https://app.buildhomemartsquares.com/api".replace(/\/api\/?$/,"")}${e}`}return e.includes("Buy.jpg")?M:e.includes("Rent.jpg")?R:e.includes("Lease.jpg")?W:e.includes("commercial.jpg")?G:e.includes("hero-property.jpg")?"/assets/hero-property.B7TUyTVw.jpg":e},je=s.useCallback(async()=>{I(!0);try{const[e,s,l,t]=await Promise.all([a.getSlides(!0),a.getSettings(),a.getSellingOptions(!0),i.getFilterConfigurationsByType("listing_type",!1)]);Z(e),te(s),ne(l),me(t)}catch(e){l.error("Failed to load hero content")}finally{I(!1)}},[]);s.useEffect(()=>{je()},[je]);return O?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(t,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Hero Section Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage the hero section content displayed on the homepage"})]}),e.jsxs(c,{variant:"outline",onClick:je,children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),e.jsxs(r,{value:k,onValueChange:A,children:[e.jsxs(d,{className:"grid w-full grid-cols-3",children:[e.jsxs(o,{value:"slides",className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"Slides"]}),e.jsxs(o,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-4 h-4"}),"Settings"]}),e.jsxs(o,{value:"selling",className:"flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"Selling Options"]})]}),e.jsxs(u,{value:"slides",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Hero Slides"}),e.jsxs(c,{variant:"destructive",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to reset all slides to defaults?"))try{await a.resetSlides(),l.success("Slides reset to defaults"),je()}catch(e){l.error("Failed to reset slides")}},children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Reset to Defaults"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[...xe.map(e=>({key:e.value,label:e.displayLabel||e.name})),{key:"commercial",label:"Commercial"}].filter((e,s,a)=>s===a.findIndex(s=>s.key===e.key)).map(s=>{const a=X.find(e=>e.tabKey===s.key)||{_id:`temp-${s.key}`,tabKey:s.key,title:"",description:"",imageUrl:"",badge:{text:"",isVisible:!0},isActive:!1,displayOrder:0,createdAt:"",updatedAt:""},i=a._id.startsWith("temp-");return e.jsxs(j,{className:a.isActive||i?"":"opacity-60",children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(g,{className:"text-lg capitalize flex items-center gap-2",children:[s.label,!a.isActive&&!i&&e.jsx(v,{variant:"secondary",children:"Inactive"}),i&&e.jsx(v,{variant:"outline",className:"border-dashed",children:"Not Configured"})]}),e.jsx(c,{size:"sm",onClick:()=>{se(a),ie(!0)},children:i?"Create":"Edit"})]})}),e.jsx(y,{children:e.jsxs("div",{className:"aspect-video relative rounded-lg overflow-hidden mb-3 bg-muted",children:[a.imageUrl?e.jsx("img",{src:ue(a.imageUrl),alt:a.tabKey,className:"w-full h-full object-cover",onError:e=>{const s=e.target;s.src.includes("hero-property.jpg")||(s.src="/src/assets/hero-property.jpg")}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted text-muted-foreground",children:e.jsx(h,{className:"w-8 h-8 opacity-50"})}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 flex flex-col justify-center items-center text-white p-4",children:[a.badge?.isVisible&&a.badge.text&&e.jsxs("span",{className:"bg-primary/20 text-primary-foreground px-3 py-1 rounded-full text-xs mb-2",children:[e.jsx(f,{className:"inline w-3 h-3 mr-1"}),a.badge.text]}),e.jsx("h3",{className:"text-lg font-bold text-center",children:a.title||"No Title"}),e.jsx("p",{className:"text-sm text-center mt-1 line-clamp-2",children:a.description||"No Description"})]})]})})]},a.tabKey)})})]}),e.jsx(u,{value:"settings",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Hero Section Settings"}),e.jsx(b,{children:"Configure the behavior and visibility of hero section elements"})]}),e.jsx(y,{className:"space-y-6",children:le&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base",children:"Auto Slide"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically switch between tabs"})]}),e.jsx(w,{checked:le.autoSlide,onCheckedChange:e=>te({...le,autoSlide:e})})]}),le.autoSlide&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Auto Slide Interval (ms)"}),e.jsx(S,{type:"number",min:1e3,max:3e4,step:500,value:le.autoSlideInterval,onChange:e=>te({...le,autoSlideInterval:parseInt(e.target.value)||5e3})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base",children:"Show Search Box"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display the property search box"})]}),e.jsx(w,{checked:le.showSearchBox,onCheckedChange:e=>te({...le,showSearchBox:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base",children:"Show Sell Dropdown"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display the sell dropdown menu"})]}),e.jsx(w,{checked:le.showSellDropdown,onCheckedChange:e=>te({...le,showSellDropdown:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base",children:"Show Filters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display the filter button in search"})]}),e.jsx(w,{checked:le.showFilters,onCheckedChange:e=>te({...le,showFilters:e})})]}),e.jsxs(c,{onClick:async()=>{if(le){Y(!0);try{await a.updateSettings({autoSlide:le.autoSlide,autoSlideInterval:le.autoSlideInterval,showSearchBox:le.showSearchBox,showSellDropdown:le.showSellDropdown,showFilters:le.showFilters}),l.success("Settings saved successfully")}catch(e){l.error("Failed to save settings")}finally{Y(!1)}}},disabled:F,children:[F?e.jsx(t,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(C,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]})})]})}),e.jsxs(u,{value:"selling",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Selling Options"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{de({_id:"",optionId:`option-${Date.now()}`,label:"New Option",description:"Description",icon:"Plus",action:"post-property",isActive:!0,displayOrder:ce.length,createdAt:"",updatedAt:""}),he(!0)},children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Add Option"]}),e.jsxs(c,{variant:"destructive",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to reset all selling options to defaults?"))try{await a.resetSellingOptions(),l.success("Selling options reset to defaults"),je()}catch(e){l.error("Failed to reset options")}},children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]}),e.jsx("div",{className:"grid gap-4",children:ce.map(s=>{const i=J.find(e=>e.value===s.icon)?.icon||m;return e.jsx(j,{className:s.isActive?"":"opacity-60",children:e.jsxs(y,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(i,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.label,!s.isActive&&e.jsx(v,{variant:"secondary",children:"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>{de(s),he(!0)},children:"Edit"}),e.jsx(c,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this option?"))try{await a.deleteSellingOption(e),l.success("Option deleted successfully"),je()}catch(s){l.error("Failed to delete option")}})(s.optionId),children:e.jsx(U,{className:"w-4 h-4"})})]})]})},s._id)})})]})]}),e.jsx(D,{open:ae,onOpenChange:ie,children:e.jsxs(B,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(P,{children:[e.jsxs(V,{children:["Edit Slide - ",ee?.tabKey]}),e.jsx(E,{children:"Update the content for this hero slide"})]}),ee&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Title"}),e.jsx(S,{value:ee.title,onChange:e=>se({...ee,title:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Description"}),e.jsx(K,{value:ee.description,onChange:e=>se({...ee,description:e.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{value:ee.imageUrl,onChange:e=>se({...ee,imageUrl:e.target.value}),placeholder:"/assets/Buy.jpg or upload"}),e.jsxs(N,{className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-center px-4 py-2 border rounded-md hover:bg-muted",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Upload"]}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async e=>{const s=e.target.files?.[0];if(s)try{const e=await a.uploadSlideImage(s);ee&&se({...ee,imageUrl:e.imageUrl}),l.success("Image uploaded successfully")}catch(i){l.error("Failed to upload image")}}})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Badge Text"}),e.jsx(S,{value:ee.badge?.text||"",onChange:e=>se({...ee,badge:{...ee.badge,text:e.target.value}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"Show Badge"}),e.jsx(w,{checked:ee.badge?.isVisible??!0,onCheckedChange:e=>se({...ee,badge:{...ee.badge,isVisible:e}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"Active"}),e.jsx(w,{checked:ee.isActive,onCheckedChange:e=>se({...ee,isActive:e})})]})]}),e.jsxs(T,{children:[e.jsx(c,{variant:"outline",onClick:()=>ie(!1),children:"Cancel"}),e.jsxs(c,{onClick:async()=>{if(ee)if(ee.title?.trim())if(ee.imageUrl?.trim()){Y(!0);try{const e={tabKey:ee.tabKey,title:ee.title,description:ee.description||"",imageUrl:ee.imageUrl,isActive:ee.isActive,displayOrder:ee.displayOrder||0};ee.badge&&(e.badge={text:ee.badge.text||"",isVisible:ee.badge.isVisible}),await a.createOrUpdateSlide(e),l.success("Slide saved successfully"),ie(!1),je()}catch(e){const s=e.response?.data?.message||e.message||"Failed to save slide";l.error(`Error: ${s}`)}finally{Y(!1)}}else l.error("Image is required");else l.error("Title is required")},disabled:F,children:[F?e.jsx(t,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(C,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})}),e.jsx(D,{open:oe,onOpenChange:he,children:e.jsxs(B,{children:[e.jsx(P,{children:e.jsxs(V,{children:[re?._id?"Edit":"Add"," Selling Option"]})}),re&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Label"}),e.jsx(S,{value:re.label,onChange:e=>de({...re,label:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Description"}),e.jsx(K,{value:re.description,onChange:e=>de({...re,description:e.target.value}),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Icon"}),e.jsxs(z,{value:re.icon,onValueChange:e=>de({...re,icon:e}),children:[e.jsx(H,{children:e.jsx($,{})}),e.jsx(_,{children:J.map(s=>{const a=s.icon;return e.jsx(q,{value:s.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4"}),s.label]})},s.value)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Action"}),e.jsxs(z,{value:re.action,onValueChange:e=>de({...re,action:e}),children:[e.jsx(H,{children:e.jsx($,{})}),e.jsx(_,{children:Q.map(s=>e.jsx(q,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"Active"}),e.jsx(w,{checked:re.isActive,onCheckedChange:e=>de({...re,isActive:e})})]})]}),e.jsxs(T,{children:[e.jsx(c,{variant:"outline",onClick:()=>he(!1),children:"Cancel"}),e.jsxs(c,{onClick:async()=>{if(re){Y(!0);try{await a.createOrUpdateSellingOption({optionId:re.optionId,label:re.label,description:re.description,icon:re.icon,action:re.action,isActive:re.isActive,displayOrder:re.displayOrder}),l.success("Option saved successfully"),he(!1),je()}catch(e){l.error("Failed to save option")}finally{Y(!1)}}},disabled:F,children:[F?e.jsx(t,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(C,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})})]})};export{Y as default};
