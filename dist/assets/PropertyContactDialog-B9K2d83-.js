import{j as e}from"./ui-BNZSgpjP.js";import{r as s}from"./router-D8v2YSKU.js";import{D as a,a4 as t,a5 as r,a6 as i,a7 as n,am as l,a8 as d,L as c,I as o,T as m,ae as x,f as h,t as p,y as u,aL as j,bO as N,x as g,o as y,M as f}from"./index-DNDw84E8.js";import{M as b}from"./messageService-BoVfMsKV.js";import{g as v,b as w}from"./propertyUtils-41DuwCMc.js";import{S as C}from"./send-7f8J3x_O.js";const k=a("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),S=({open:a,onOpenChange:u,property:j,onMessageSent:N})=>{const[g,y]=s.useState(`Inquiry about ${j.title}`),[f,w]=s.useState(""),[k,S]=s.useState(!1);return e.jsx(t,{open:a,onOpenChange:u,children:e.jsxs(r,{className:"sm:max-w-[525px]",children:[e.jsxs(i,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-5 h-5"}),"Send Message"]}),e.jsxs(d,{children:["Send a message to ",j.vendor?.name?j.vendor.name:v(j.owner)," about this property"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:j.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j.address.district?`${j.address.city}, ${j.address.district}, ${j.address.state}`:`${j.address.city}, ${j.address.state}`}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-1",children:["â‚¹",j.price.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"subject",children:"Subject"}),e.jsx(o,{id:"subject",value:g,onChange:e=>y(e.target.value),placeholder:"Enter subject"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"message",children:"Message"}),e.jsx(m,{id:"message",value:f,onChange:e=>w(e.target.value),placeholder:"Type your message here...",rows:6,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Introduce yourself and let the owner know what you're looking for"})]})]}),e.jsxs(x,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>u(!1),disabled:k,children:"Cancel"}),e.jsx(h,{type:"button",onClick:async()=>{if(f.trim())try{S(!0),await b.sendPropertyInquiry(j._id,g.trim(),f.trim()),p({title:"Success",description:"Your message has been sent successfully!"}),w(""),y(`Inquiry about ${j.title}`),N&&N(),u(!1)}catch(e){}finally{S(!1)}else p({title:"Error",description:"Please enter a message",variant:"destructive"})},disabled:k||!f.trim(),children:k?e.jsx(e.Fragment,{children:"Sending..."}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})]})})},$=({open:a,onOpenChange:l,property:c})=>{const[o,m]=s.useState(!1),[x,b]=s.useState(!1),[v,C]=s.useState(!1),S=w(c),$=(e,s)=>{navigator.clipboard.writeText(e).then(()=>{"phone"===s?(m(!0),setTimeout(()=>m(!1),2e3)):(b(!0),setTimeout(()=>b(!1),2e3)),p({title:"Copied!",description:("phone"===s?"Phone number":"Email")+" copied to clipboard"})})};return e.jsx(t,{open:a,onOpenChange:l,children:e.jsxs(r,{className:"sm:max-w-[425px]",children:[e.jsxs(i,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"Contact Information"]}),e.jsx(d,{children:"Get in touch with the property owner"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:c.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.address.district?`${c.address.city}, ${c.address.district}, ${c.address.state}`:`${c.address.city}, ${c.address.state}`}),e.jsx("p",{className:"text-sm font-semibold text-primary mt-1",children:j.formatPrice(c.price,c.listingType)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:"Vendor"===S.type?e.jsx(N,{className:"w-5 h-5 text-primary"}):e.jsx(g,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:S.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:S.type})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(u,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium truncate",children:S.phone})]}),"Not available"!==S.phone&&e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>$(S.phone,"phone"),children:o?e.jsx(y,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(f,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm font-medium truncate",children:S.email})]}),"Not available"!==S.email&&e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>$(S.email,"email"),children:x?e.jsx(y,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsxs(h,{variant:"outline",onClick:async()=>{if(S.phone&&"Not available"!==S.phone){try{await j.trackInteraction(c._id,"clickedPhone")}catch(e){}/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location.href=`tel:${S.phone}`:(C(!0),p({title:"Phone Number",description:S.phone}))}},disabled:"Not available"===S.phone,className:"w-full",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Call Now"]}),e.jsxs(h,{variant:"outline",onClick:()=>{S.email&&"Not available"!==S.email&&(window.location.href=`mailto:${S.email}?subject=Inquiry about ${c.title}`)},disabled:"Not available"===S.email,className:"w-full",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Send Email"]})]}),v&&"Not available"!==S.phone&&e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Contact Number:"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:S.phone}),e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>$(S.phone,"phone"),children:o?e.jsx(y,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the number to copy or use the copy button"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Contact during business hours for the best response"})]})]})})};export{S as P,$ as a};
