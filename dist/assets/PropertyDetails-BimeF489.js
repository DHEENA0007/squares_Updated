import{j as e}from"./ui-DYmpZ3pJ.js";import{g as D,d as B,r as m,L as p}from"./router-2SVJvIbS.js";import{D as A,af as i,au as f,f as r,h as E,B as x,a9 as U,a as l,e as d,b as n,c as o,ad as z,ae as $,ac as _,E as H,U as M,ak as O,w as V}from"./index-BbgqWuYN.js";import{S as q}from"./separator-CbwKV3QQ.js";import{A as S}from"./arrow-left-T_MLY8cb.js";import{P as T}from"./pen-line-CsOTZIbM.js";import{T as N}from"./trending-up-CE6F-QOW.js";import{T as F}from"./trash-2-PyAegrM1.js";import{S as Q}from"./share-2-BhtTFs-0.js";import"./vendor-Dazix4UH.js";const se=()=>{const{id:h}=D(),u=B(),{toast:c}=A(),[s,g]=m.useState(null),[L,v]=m.useState(!0),[j,y]=m.useState(!1);m.useEffect(()=>{h&&k(h)},[h]);const k=async a=>{try{v(!0);const t=await i.getProperty(a);g(t.data.property)}catch(t){console.error("Failed to load property:",t),c({title:"Error",description:"Failed to load property details",variant:"destructive"}),u("/vendor/properties")}finally{v(!1)}},b=async()=>{if(s&&window.confirm("Are you sure you want to delete this property? This action cannot be undone."))try{y(!0),await i.deleteProperty(s._id),c({title:"Success",description:"Property deleted successfully"}),u("/vendor/properties")}catch(a){console.error("Failed to delete property:",a),c({title:"Error",description:"Failed to delete property",variant:"destructive"})}finally{y(!1)}},w=async()=>{if(s)try{await i.togglePropertyFeatured(s._id,!s.featured),g(a=>a&&{...a,featured:!a.featured}),c({title:"Success",description:`Property ${s.featured?"unfeatured":"promoted"} successfully`})}catch(a){console.error("Failed to toggle featured status:",a),c({title:"Error",description:"Failed to update property status",variant:"destructive"})}},P=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),C=a=>{const t=[];return a.address.street&&t.push(a.address.street),a.address.locationName&&t.push(a.address.locationName),a.address.taluk&&t.push(a.address.taluk),a.address.city&&t.push(a.address.city),a.address.district&&t.push(a.address.district),a.address.state&&t.push(a.address.state),a.address.pincode&&t.push(a.address.pincode),t.join(", ")};return L?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading property details..."})]})}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>u("/vendor/properties"),children:e.jsx(S,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.title}),e.jsxs("p",{className:"text-muted-foreground flex items-center mt-1",children:[e.jsx(E,{className:"w-4 h-4 mr-1"}),C(s)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{to:`/vendor/properties/edit/${s._id}`,children:e.jsxs(r,{variant:"outline",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Edit"]})}),e.jsxs(r,{variant:"outline",onClick:w,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),s.featured?"Unfeature":"Promote"]}),e.jsx(r,{variant:"destructive",onClick:b,disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:`${i.getStatusColor(s.status)} text-white`,children:i.getStatusText(s.status)}),s.featured&&e.jsxs(x,{variant:"secondary",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"Featured"]}),s.verified&&e.jsx(x,{className:"bg-green-600 text-white",children:"Verified"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-3xl font-bold text-primary",children:i.formatPrice(s.price,s.listingType)})})]}),s.images&&s.images.length>0&&e.jsx(l,{children:e.jsx(d,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.images.map((a,t)=>e.jsxs("div",{className:"relative aspect-video bg-muted rounded-lg overflow-hidden",children:[e.jsx("img",{src:a.url,alt:a.caption||`Property image ${t+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200"}),a.isPrimary&&e.jsx(x,{className:"absolute top-3 left-3 bg-primary text-white",children:"Primary Photo"}),a.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white p-2",children:e.jsx("p",{className:"text-sm",children:a.caption})})]},t))})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(o,{className:"flex items-center",children:[e.jsx(f,{className:"w-5 h-5 mr-2"}),"Property Overview"]})}),e.jsxs(d,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.bedrooms>0&&e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(z,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:s.bedrooms}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bedrooms"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx($,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:s.bathrooms}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bathrooms"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(_,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:i.formatArea(s.area).split(" ")[0]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sq Ft"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(f,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold capitalize",children:s.type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"})]})]}),s.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(o,{children:"Property Details"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Property Type:"}),e.jsx("span",{className:"font-medium capitalize",children:s.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listing Type:"}),e.jsx("span",{className:"font-medium capitalize",children:s.listingType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bedrooms:"}),e.jsx("span",{className:"font-medium",children:s.bedrooms})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bathrooms:"}),e.jsx("span",{className:"font-medium",children:s.bathrooms})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Area:"}),e.jsx("span",{className:"font-medium",children:i.formatArea(s.area)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"font-medium capitalize",children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Listed On:"}),e.jsx("span",{className:"font-medium",children:P(s.createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"}),e.jsx("span",{className:"font-medium",children:P(s.updatedAt)})]})]})]})})]}),s.amenities&&s.amenities.length>0&&e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(o,{children:"Amenities"})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.amenities.map((a,t)=>e.jsxs("div",{className:"flex items-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:a})]},t))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(o,{className:"flex items-center",children:[e.jsx(N,{className:"w-5 h-5 mr-2"}),"Performance"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"w-4 h-4 mr-2 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Views"})]}),e.jsx("span",{className:"font-semibold",children:s.views})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-4 h-4 mr-2 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Leads"})]}),e.jsx("span",{className:"font-semibold",children:"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-2 text-red-600"}),e.jsx("span",{className:"text-sm",children:"Favorites"})]}),e.jsx("span",{className:"font-semibold",children:"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-4 h-4 mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Phone Calls"})]}),e.jsx("span",{className:"font-semibold",children:"0"})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(o,{children:"Quick Actions"})}),e.jsxs(d,{className:"space-y-3",children:[e.jsx(p,{to:`/vendor/properties/edit/${s._id}`,children:e.jsxs(r,{variant:"outline",className:"w-full justify-start",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Edit Property"]})}),e.jsxs(r,{variant:"outline",className:"w-full justify-start",onClick:w,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),s.featured?"Unfeature Property":"Promote Property"]}),e.jsxs(r,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Share Property"]}),e.jsx(q,{}),e.jsxs(r,{variant:"destructive",className:"w-full justify-start",onClick:b,disabled:j,children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Delete Property"]})]})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Property Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The property you're looking for doesn't exist."}),e.jsx(p,{to:"/vendor/properties",children:e.jsxs(r,{children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Back to Properties"]})})]})};export{se as default};
