import{j as e}from"./ui-CEt46o3G.js";import{d as be,r as o,L as Ne}from"./router-2SVJvIbS.js";import{C as B,d as D}from"./card-YvDMUmzt.js";import{G as L,t as f,a as y,K as Ce,B as W,a5 as Se,J as Z,X as ee,I as j,M as Fe}from"./index-CiYV0Sy0.js";import{L as c}from"./label-BV_cIshD.js";import{T as se}from"./textarea-BbecYreM.js";import{S as m,a as p,b as u,c as x,d as t}from"./select-BHWxeluH.js";import{C as ie}from"./checkbox-6USSAlb1.js";import{R as we,a as G}from"./radio-group-Mc2GNwLw.js";import{A as Pe,a as Ae,P as Te}from"./PincodeAutocomplete-DbJsLwqr.js";import{vendorService as re}from"./vendorService-bcricvQk.js";import{p as ke}from"./propertyService-vaYzuoi1.js";import{A as Le}from"./arrow-left-ClppC_3T.js";import{L as Ue}from"./lock-DY62iqoZ.js";import{L as Ee}from"./loader-circle-Cj-dvH02.js";import{C as Ve}from"./camera-2k-Wb9vt.js";import{U as te}from"./upload-D388xALl.js";import{V as ae}from"./video-B8IjENdZ.js";import{I as H}from"./indian-rupee-CKrrHZij.js";import"./vendor-Dazix4UH.js";import"./index-BdQq_4o_.js";import"./index-DHzxUTm5.js";import"./chevron-down-DeDu0PPf.js";import"./command-O7w0ihSy.js";import"./dialog-B2oiH0OC.js";import"./popover-lkJ8tobj.js";const le=async(U,v)=>{const F=new FormData;F.append("file",U),F.append("folder",v);try{const C=await fetch("https://squares-9d84.onrender.com/api/upload/single",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:F});if(!C.ok)throw new Error("Failed to upload file");const w=await C.json();if(!w.success)throw new Error(w.message||"Upload failed");return w.data.url}catch(C){throw console.error("File upload error:",C),new Error("Failed to upload file")}},cs=()=>{const U=be(),[v,F]=o.useState(1),[C,w]=o.useState(!1),[P,K]=o.useState(!0),[E,ce]=o.useState({maxProperties:0,currentProperties:0,canAddMore:!1,planName:"",features:[]}),[M,z]=o.useState(!1),[s,l]=o.useState({title:"",description:"",propertyType:"",listingType:"",address:"",country:"India",countryCode:"IN",state:"",stateCode:"",district:"",districtCode:"",city:"",cityCode:"",taluk:"",locationName:"",pincode:"",bedrooms:"",bathrooms:"",floor:"",totalFloors:"",furnishing:"",age:"",builtUpArea:"",carpetArea:"",plotArea:"",price:"",priceNegotiable:!1,maintenanceCharges:"",securityDeposit:"",amenities:[],images:[],videos:[],virtualTour:"",availability:"",possession:"",facing:"",parkingSpaces:"",roadWidth:"",cornerPlot:""}),[b,J]=o.useState([]),[q,_]=o.useState([]),[S,V]=o.useState({country:"India",state:"",district:"",city:""}),[X,ne]=o.useState([]),[de,Q]=o.useState([]),[oe,Y]=o.useState([]),[A,T]=o.useState({states:!1,districts:!1,cities:!1,pincode:!1});o.useEffect(()=>{(async()=>{T(n=>({...n,states:!0}));try{await L.initialize();const n=L.getStates();ne(n),console.log(`Loaded ${n.length} states from loca.json`)}catch(n){console.error("Error initializing loca service:",n),f({title:"Error",description:"Failed to load location data. Please refresh the page.",variant:"destructive"})}finally{T(n=>({...n,states:!1}))}})()},[]),o.useEffect(()=>{if(!s.state){Q([]);return}T(a=>({...a,districts:!0}));try{const a=L.getDistricts(s.state);Q(a),console.log(`Loaded ${a.length} districts for ${s.state}`),l(n=>({...n,district:"",city:"",pincode:""})),V(n=>({...n,district:"",city:""})),Y([])}catch(a){console.error("Error loading districts:",a),f({title:"Error",description:"Failed to load districts. Please try again.",variant:"destructive"})}finally{T(a=>({...a,districts:!1}))}},[s.state]),o.useEffect(()=>{if(!s.state||!s.district){Y([]);return}T(a=>({...a,cities:!0}));try{const a=L.getCities(s.state,s.district);Y(a),console.log(`Loaded ${a.length} cities for ${s.district}`),l(n=>({...n,city:"",pincode:""})),V(n=>({...n,city:""}))}catch(a){console.error("Error loading cities:",a),f({title:"Error",description:"Failed to load cities. Please try again.",variant:"destructive"})}finally{T(a=>({...a,cities:!1}))}},[s.state,s.district]),o.useEffect(()=>{s.state&&V(a=>({...a,state:s.state}))},[s.state]),o.useEffect(()=>{s.district&&V(a=>({...a,district:s.district}))},[s.district]),o.useEffect(()=>{s.city&&V(a=>({...a,city:s.city}))},[s.city]),o.useEffect(()=>{const a=[];S.city&&a.push(S.city),S.district&&a.push(S.district),S.state&&a.push(S.state),s.pincode&&a.push(s.pincode),a.length>0&&!s.address.trim()&&l(n=>({...n,address:a.join(", ")}))},[S,s.pincode]);const k=o.useCallback(async()=>{K(!0);try{console.log("ðŸ”„ Checking subscription limits...");const a=await re.getSubscriptionLimits();console.log("ðŸ“Š Subscription limits received:",a),ce(a),w(a.canAddMore),a.canAddMore||(a.maxProperties===0?f({title:"Subscription Required",description:"You need an active subscription to add properties. Please upgrade your plan.",variant:"destructive"}):f({title:"Property Limit Reached",description:`You have reached your plan limit of ${a.maxProperties} properties. Please upgrade to add more.`,variant:"destructive"}))}catch(a){console.error("Error checking subscription:",a),w(!1),f({title:"Error",description:"Failed to check subscription status. Please try again.",variant:"destructive"})}finally{K(!1)}},[f]);o.useEffect(()=>{k()},[k]),o.useEffect(()=>{const a=()=>{console.log("Window focused - checking subscription limits..."),k()};return window.addEventListener("focus",a),()=>window.removeEventListener("focus",a)},[k]);const I=[{id:1,title:"Basic Details",description:"Property type and listing details"},{id:2,title:"Location",description:"Address and location information"},{id:3,title:"Property Details",description:"Specifications and measurements"},{id:4,title:"Pricing",description:"Price and financial details"},{id:5,title:"Amenities",description:"Features and facilities"},{id:6,title:"Media",description:"Photos, videos, and virtual tours"},{id:7,title:"Review",description:"Review and submit listing"}],he=[{value:"apartment",label:"Apartment"},{value:"villa",label:"Villa"},{value:"house",label:"House"},{value:"commercial",label:"Commercial"},{value:"plot",label:"Plot"},{value:"land",label:"Land"},{value:"office",label:"Office Space"},{value:"pg",label:"PG (Paying Guest)"}],me=["Swimming Pool","Gym/Fitness Center","Parking","Security","Garden/Park","Playground","Clubhouse","Power Backup","Elevator","WiFi","CCTV Surveillance","Intercom","Water Supply","Waste Management","Fire Safety","Visitor Parking","Shopping Complex","Restaurant","Spa","Jogging Track","Meals Included","Laundry Service","Room Cleaning","24/7 Security","Common Kitchen","Common Area","Study Room","Single Occupancy","Double Occupancy","Triple Occupancy","AC Rooms","Non-AC Rooms","Attached Bathroom","Common Bathroom","Wi-Fi in Rooms","TV in Rooms"],pe=()=>{v<I.length&&F(v+1)},ue=()=>{v>1&&F(v-1)},xe=async()=>{if(M)return;const a={title:s.title?.trim(),description:s.description?.trim(),propertyType:s.propertyType,listingType:s.listingType,price:s.price,builtUpArea:s.builtUpArea,pincode:s.pincode},n=Object.entries(a).filter(([h,d])=>!d).map(([h])=>h);if(n.length>0){f({title:"Missing Required Fields",description:`Please fill in: ${n.join(", ")}`,variant:"destructive"});return}if(!s.state||!s.city){f({title:"Location Required",description:"Please select state and city for your property",variant:"destructive"});return}z(!0);try{const h=[];for(const g of b)if(g.file){const N=await le(g.file,"property_images");h.push({url:N,caption:g.name,isPrimary:h.length===0})}const d=[];for(const g of q)if(g.file){const N=await le(g.file,"property_videos");d.push({url:N,caption:g.name})}const i={title:s.title.trim(),description:s.description.trim(),type:s.propertyType,listingType:s.listingType,price:parseFloat(s.price),area:{builtUp:s.builtUpArea?parseFloat(s.builtUpArea):void 0,carpet:s.carpetArea?parseFloat(s.carpetArea):void 0,plot:s.plotArea?parseFloat(s.plotArea):void 0,unit:"sqft"},bedrooms:s.bedrooms?parseInt(s.bedrooms):0,bathrooms:s.bathrooms?parseInt(s.bathrooms):0,address:{street:s.address.trim(),district:s.district||"",city:s.city||"",state:s.state||"",pincode:s.pincode},amenities:s.amenities||[],images:h||[],videos:d||[]};s.virtualTour?.trim()&&(i.virtualTour=s.virtualTour.trim()),s.furnishing&&(i.furnishing=s.furnishing),s.age&&(i.age=s.age),s.floor?.trim()&&(i.floor=s.floor.trim()),s.totalFloors?.trim()&&(i.totalFloors=s.totalFloors.trim()),s.facing&&(i.facing=s.facing),s.parkingSpaces&&(i.parkingSpaces=s.parkingSpaces),s.priceNegotiable!==void 0&&(i.priceNegotiable=s.priceNegotiable),s.maintenanceCharges?.trim()&&(i.maintenanceCharges=parseFloat(s.maintenanceCharges)),s.securityDeposit?.trim()&&(i.securityDeposit=parseFloat(s.securityDeposit)),s.availability?.trim()&&(i.availability=s.availability.trim()),s.possession?.trim()&&(i.possession=s.possession.trim()),s.roadWidth?.trim()&&(i.roadWidth=s.roadWidth.trim()),s.cornerPlot&&(i.cornerPlot=s.cornerPlot),console.log("Property data being sent:",JSON.stringify(i,null,2));const r=await ke.createProperty(i);f({title:"Success!",description:"Property submitted successfully. It will be live after admin verification."}),U("/vendor/properties")}catch(h){console.error("Error submitting property:",h);let d="Failed to submit property. Please try again.";h instanceof Error&&(d=h.message),f({title:"Error",description:d,variant:"destructive"})}finally{z(!1)}},je=a=>{l(n=>({...n,amenities:n.amenities.includes(a)?n.amenities.filter(h=>h!==a):[...n.amenities,a]}))},ge=a=>{if(a.target.files){const n=Array.from(a.target.files);J(h=>[...h,...n.map(d=>({id:Date.now()+Math.random(),name:d.name,url:URL.createObjectURL(d),file:d}))])}},ve=a=>{if(a.target.files){const n=Array.from(a.target.files);_(h=>[...h,...n.map(d=>({id:Date.now()+Math.random(),name:d.name,url:URL.createObjectURL(d),file:d}))])}},fe=a=>{J(n=>n.filter(h=>h.id!==a))},ye=()=>{switch(v){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"title",children:"Property Title *"}),e.jsx(j,{id:"title",placeholder:"e.g., Luxury 3BHK Apartment in Bandra",value:s.title,onChange:i=>l(r=>({...r,title:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"propertyType",children:"Property Type *"}),e.jsxs(m,{value:s.propertyType,onValueChange:i=>l(r=>({...r,propertyType:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select property type"})}),e.jsx(x,{children:he.map(i=>e.jsx(t,{value:i.value,children:i.label},i.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Listing Type *"}),e.jsxs(we,{value:s.listingType,onValueChange:i=>l(r=>({...r,listingType:i})),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{value:"sale",id:"sale"}),e.jsx(c,{htmlFor:"sale",children:"For Sale"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{value:"rent",id:"rent"}),e.jsx(c,{htmlFor:"rent",children:"For Rent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{value:"lease",id:"lease"}),e.jsx(c,{htmlFor:"lease",children:"For Lease"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Property Description"}),e.jsx(se,{id:"description",placeholder:"Describe your property in detail...",rows:4,value:s.description,onChange:i=>l(r=>({...r,description:i.target.value}))})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-primary/20 rounded-lg p-6 bg-transparent",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-primary"}),"Property Location"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select your property location and pincode"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"state",children:"State *"}),e.jsxs(m,{value:s.state,onValueChange:i=>{l(r=>({...r,state:i,stateCode:i}))},disabled:A.states,children:[e.jsx(p,{children:e.jsx(u,{placeholder:A.states?"Loading states...":"Select state"})}),e.jsx(x,{children:X.map(i=>e.jsx(t,{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"district",children:"District *"}),e.jsxs(m,{value:s.district,onValueChange:i=>{l(r=>({...r,district:i,districtCode:i}))},disabled:!s.state||A.districts,children:[e.jsx(p,{children:e.jsx(u,{placeholder:s.state?A.districts?"Loading districts...":"Select district":"Select state first"})}),e.jsx(x,{children:de.map(i=>e.jsx(t,{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"city",children:"City *"}),e.jsxs(m,{value:s.city,onValueChange:i=>{l(r=>({...r,city:i,cityCode:i}))},disabled:!s.district||A.cities,children:[e.jsx(p,{children:e.jsx(u,{placeholder:s.district?A.cities?"Loading cities...":"Select city":"Select district first"})}),e.jsx(x,{children:oe.map(i=>e.jsx(t,{value:i,children:i},i))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"pincode",children:"PIN Code *"}),e.jsx(Te,{value:s.pincode,onChange:(i,r)=>{console.log("Pincode selected:",i,r),l(g=>({...g,pincode:i})),r&&(console.log("Auto-filling location from pincode:",r),r.state&&X.includes(r.state.toUpperCase())&&(l(g=>({...g,state:r.state.toUpperCase(),stateCode:r.state.toUpperCase()})),setTimeout(()=>{if(r.district){const N=L.getDistricts(r.state.toUpperCase()).find(R=>R.toUpperCase()===r.district.toUpperCase());N&&(l(R=>({...R,district:N,districtCode:N})),setTimeout(()=>{if(r.city){const $=L.getCities(r.state.toUpperCase(),N).find(O=>O.toUpperCase()===r.city.toUpperCase());$&&l(O=>({...O,city:$,cityCode:$}))}},100))}},100)),f({title:"Location Auto-filled âœ“",description:`${r.city}, ${r.district}, ${r.state}`}))},state:s.state,district:s.district,city:s.city,placeholder:"Enter or select 6-digit PIN code",className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select state, district, and city above to see matching pincodes, or type to search"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"address",children:"Complete Address"}),e.jsx(se,{id:"address",placeholder:"Enter complete address with landmark",rows:3,value:s.address,onChange:i=>l(r=>({...r,address:i.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will be auto-filled from location details above"})]})]});case 3:const a=["apartment","villa","house","pg"].includes(s.propertyType),n=["commercial","office"].includes(s.propertyType),h=["plot","land"].includes(s.propertyType),d=s.propertyType==="pg";return e.jsxs("div",{className:"space-y-6",children:[a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"bedrooms",children:["Bedrooms ",!d&&"*"]}),e.jsxs(m,{value:s.bedrooms,onValueChange:i=>l(r=>({...r,bedrooms:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsx(x,{children:d?e.jsxs(e.Fragment,{children:[e.jsx(t,{value:"1",children:"Single Sharing"}),e.jsx(t,{value:"2",children:"Double Sharing"}),e.jsx(t,{value:"3",children:"Triple Sharing"}),e.jsx(t,{value:"4",children:"4+ Sharing"})]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{value:"1",children:"1 BHK"}),e.jsx(t,{value:"2",children:"2 BHK"}),e.jsx(t,{value:"3",children:"3 BHK"}),e.jsx(t,{value:"4",children:"4 BHK"}),e.jsx(t,{value:"5",children:"5+ BHK"})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsxs(m,{value:s.bathrooms,onValueChange:i=>l(r=>({...r,bathrooms:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsx(x,{children:d?e.jsxs(e.Fragment,{children:[e.jsx(t,{value:"1",children:"Attached"}),e.jsx(t,{value:"0",children:"Common"})]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{value:"1",children:"1"}),e.jsx(t,{value:"2",children:"2"}),e.jsx(t,{value:"3",children:"3"}),e.jsx(t,{value:"4",children:"4+"})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"furnishing",children:"Furnishing"}),e.jsxs(m,{value:s.furnishing,onValueChange:i=>l(r=>({...r,furnishing:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"fully-furnished",children:"Fully Furnished"}),e.jsx(t,{value:"semi-furnished",children:"Semi Furnished"}),e.jsx(t,{value:"unfurnished",children:"Unfurnished"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"builtUpArea",children:[d?"Room Area (sq ft)":"Built-up Area (sq ft)"," *"]}),e.jsx(j,{id:"builtUpArea",placeholder:d?"e.g., 150":"e.g., 1200",value:s.builtUpArea,onChange:i=>l(r=>({...r,builtUpArea:i.target.value}))})]}),!d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"carpetArea",children:"Carpet Area (sq ft)"}),e.jsx(j,{id:"carpetArea",placeholder:"e.g., 1000",value:s.carpetArea,onChange:i=>l(r=>({...r,carpetArea:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"age",children:"Property Age"}),e.jsxs(m,{value:s.age,onValueChange:i=>l(r=>({...r,age:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"new",children:"New/Under Construction"}),e.jsx(t,{value:"1-3",children:"1-3 Years"}),e.jsx(t,{value:"3-5",children:"3-5 Years"}),e.jsx(t,{value:"5-10",children:"5-10 Years"}),e.jsx(t,{value:"10+",children:"10+ Years"})]})]})]})]}),!d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"floor",children:"Floor"}),e.jsx(j,{id:"floor",placeholder:"e.g., 5th",value:s.floor,onChange:i=>l(r=>({...r,floor:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"totalFloors",children:"Total Floors"}),e.jsx(j,{id:"totalFloors",placeholder:"e.g., 20",value:s.totalFloors,onChange:i=>l(r=>({...r,totalFloors:i.target.value}))})]})]}),d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"floor",children:"Floor"}),e.jsx(j,{id:"floor",placeholder:"e.g., Ground, 1st, 2nd",value:s.floor,onChange:i=>l(r=>({...r,floor:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"availability",children:"Food Availability"}),e.jsxs(m,{value:s.availability,onValueChange:i=>l(r=>({...r,availability:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"meals-included",children:"Meals Included"}),e.jsx(t,{value:"kitchen-available",children:"Kitchen Available"}),e.jsx(t,{value:"no-meals",children:"No Meals"})]})]})]})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"builtUpArea",children:"Built-up Area (sq ft) *"}),e.jsx(j,{id:"builtUpArea",placeholder:"e.g., 2500",value:s.builtUpArea,onChange:i=>l(r=>({...r,builtUpArea:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"carpetArea",children:"Carpet Area (sq ft)"}),e.jsx(j,{id:"carpetArea",placeholder:"e.g., 2000",value:s.carpetArea,onChange:i=>l(r=>({...r,carpetArea:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"furnishing",children:"Furnishing"}),e.jsxs(m,{value:s.furnishing,onValueChange:i=>l(r=>({...r,furnishing:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"fully-furnished",children:"Fully Furnished"}),e.jsx(t,{value:"semi-furnished",children:"Semi Furnished"}),e.jsx(t,{value:"unfurnished",children:"Bare Shell"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"floor",children:"Floor"}),e.jsx(j,{id:"floor",placeholder:"e.g., 3rd, Ground",value:s.floor,onChange:i=>l(r=>({...r,floor:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"totalFloors",children:"Total Floors in Building"}),e.jsx(j,{id:"totalFloors",placeholder:"e.g., 10",value:s.totalFloors,onChange:i=>l(r=>({...r,totalFloors:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"age",children:"Property Age"}),e.jsxs(m,{value:s.age,onValueChange:i=>l(r=>({...r,age:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"new",children:"New/Under Construction"}),e.jsx(t,{value:"1-3",children:"1-3 Years"}),e.jsx(t,{value:"3-5",children:"3-5 Years"}),e.jsx(t,{value:"5-10",children:"5-10 Years"}),e.jsx(t,{value:"10+",children:"10+ Years"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"bathrooms",children:"Washrooms"}),e.jsxs(m,{value:s.bathrooms,onValueChange:i=>l(r=>({...r,bathrooms:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"1",children:"1"}),e.jsx(t,{value:"2",children:"2"}),e.jsx(t,{value:"3",children:"3"}),e.jsx(t,{value:"4",children:"4+"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"availability",children:"Possession Status"}),e.jsxs(m,{value:s.availability,onValueChange:i=>l(r=>({...r,availability:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"immediate",children:"Immediate"}),e.jsx(t,{value:"within-30-days",children:"Within 30 Days"}),e.jsx(t,{value:"within-60-days",children:"Within 60 Days"}),e.jsx(t,{value:"within-90-days",children:"Within 90 Days"})]})]})]})]})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"plotArea",children:"Plot Area (sq ft) *"}),e.jsx(j,{id:"plotArea",placeholder:"e.g., 5000",value:s.plotArea,onChange:i=>l(r=>({...r,plotArea:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"builtUpArea",children:"Total Area (sq ft) *"}),e.jsx(j,{id:"builtUpArea",placeholder:"e.g., 5000",value:s.builtUpArea,onChange:i=>l(r=>({...r,builtUpArea:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"facing",children:"Plot Facing"}),e.jsxs(m,{value:s.facing,onValueChange:i=>l(r=>({...r,facing:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"north",children:"North"}),e.jsx(t,{value:"south",children:"South"}),e.jsx(t,{value:"east",children:"East"}),e.jsx(t,{value:"west",children:"West"}),e.jsx(t,{value:"north-east",children:"North-East"}),e.jsx(t,{value:"north-west",children:"North-West"}),e.jsx(t,{value:"south-east",children:"South-East"}),e.jsx(t,{value:"south-west",children:"South-West"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"availability",children:"Land Type"}),e.jsxs(m,{value:s.availability,onValueChange:i=>l(r=>({...r,availability:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"residential",children:"Residential"}),e.jsx(t,{value:"commercial",children:"Commercial"}),e.jsx(t,{value:"agricultural",children:"Agricultural"}),e.jsx(t,{value:"industrial",children:"Industrial"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"possession",children:"Boundary Wall"}),e.jsxs(m,{value:s.possession,onValueChange:i=>l(r=>({...r,possession:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"yes",children:"Yes"}),e.jsx(t,{value:"no",children:"No"}),e.jsx(t,{value:"partial",children:"Partial"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"roadWidth",children:"Road Width (ft)"}),e.jsx(j,{id:"roadWidth",placeholder:"e.g., 30",value:s.roadWidth,onChange:i=>l(r=>({...r,roadWidth:i.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"cornerPlot",children:"Corner Plot"}),e.jsxs(m,{value:s.cornerPlot,onValueChange:i=>l(r=>({...r,cornerPlot:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"yes",children:"Yes"}),e.jsx(t,{value:"no",children:"No"})]})]})]})]})]}),!s.propertyType&&e.jsx(Pe,{children:e.jsx(Ae,{children:"Please select a property type in the Basic Details step to see relevant property specifications."})})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"price",children:"Price *"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(j,{id:"price",placeholder:"Enter price",className:"pl-10",value:s.price,onChange:i=>l(r=>({...r,price:i.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"maintenanceCharges",children:"Maintenance Charges (Monthly)"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(j,{id:"maintenanceCharges",placeholder:"Optional",className:"pl-10",value:s.maintenanceCharges,onChange:i=>l(r=>({...r,maintenanceCharges:i.target.value}))})]})]})]}),(s.listingType==="rent"||s.listingType==="lease")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"securityDeposit",children:"Security Deposit"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(j,{id:"securityDeposit",placeholder:"Enter security deposit",className:"pl-10",value:s.securityDeposit,onChange:i=>l(r=>({...r,securityDeposit:i.target.value}))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{id:"priceNegotiable",checked:s.priceNegotiable,onCheckedChange:i=>l(r=>({...r,priceNegotiable:i===!0}))}),e.jsx(c,{htmlFor:"priceNegotiable",children:"Price is negotiable"})]})]});case 5:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-base font-medium",children:"Property Amenities"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Select all amenities available in your property"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:me.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{id:i,checked:s.amenities.includes(i),onCheckedChange:()=>je(i)}),e.jsx(c,{htmlFor:i,className:"text-sm",children:i})]},i))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"facing",children:"Facing"}),e.jsxs(m,{value:s.facing,onValueChange:i=>l(r=>({...r,facing:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"north",children:"North"}),e.jsx(t,{value:"south",children:"South"}),e.jsx(t,{value:"east",children:"East"}),e.jsx(t,{value:"west",children:"West"}),e.jsx(t,{value:"north-east",children:"North-East"}),e.jsx(t,{value:"north-west",children:"North-West"}),e.jsx(t,{value:"south-east",children:"South-East"}),e.jsx(t,{value:"south-west",children:"South-West"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"parkingSpaces",children:"Parking Spaces"}),e.jsxs(m,{value:s.parkingSpaces,onValueChange:i=>l(r=>({...r,parkingSpaces:i})),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select"})}),e.jsxs(x,{children:[e.jsx(t,{value:"0",children:"No Parking"}),e.jsx(t,{value:"1",children:"1 Car"}),e.jsx(t,{value:"2",children:"2 Cars"}),e.jsx(t,{value:"3",children:"3+ Cars"})]})]})]})]})]});case 6:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-base font-medium",children:"Property Images"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload high-quality images of your property (up to 20 images)"}),e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[e.jsx(Ve,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{variant:"outline",onClick:()=>document.getElementById("image-upload").click(),children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Choose Images"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"or drag and drop images here"})]}),e.jsx("input",{id:"image-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:ge})]}),b.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:b.map(i=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:i.url,alt:i.name,className:"w-full h-24 object-cover rounded-lg"}),e.jsx(y,{size:"icon",variant:"destructive",className:"absolute -top-2 -right-2 h-6 w-6",onClick:()=>fe(i.id),children:e.jsx(ee,{className:"h-3 w-3"})})]},i.id))})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-base font-medium",children:"Property Videos (Optional)"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload videos to showcase your property better"}),e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[e.jsx(ae,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{variant:"outline",onClick:()=>document.getElementById("video-upload")?.click(),children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Upload Video"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"MP4, MOV, AVI (max 100MB)"})]}),e.jsx("input",{id:"video-upload",type:"file",multiple:!0,accept:"video/*",className:"hidden",onChange:ve})]}),q.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:q.map(i=>e.jsx("div",{className:"relative border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:i.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Video file"})]}),e.jsx(y,{size:"icon",variant:"destructive",className:"h-6 w-6",onClick:()=>_(r=>r.filter(g=>g.id!==i.id)),children:e.jsx(ee,{className:"h-3 w-3"})})]})},i.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"virtualTour",children:"Virtual Tour URL (Optional)"}),e.jsx(j,{id:"virtualTour",placeholder:"e.g., https://your-virtual-tour-link.com",value:s.virtualTour,onChange:i=>l(r=>({...r,virtualTour:i.target.value}))})]})]});case 7:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{className:"mx-auto h-16 w-16 text-green-600 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Review Your Listing"}),e.jsx("p",{className:"text-muted-foreground",children:"Please review all the details before submitting your property listing"})]}),e.jsx(B,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Basic Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",s.title]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.propertyType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Listing:"})," ",s.listingType]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Location"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," India"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"State:"})," ",s.state||"Not selected"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"District:"})," ",s.district||"Not selected"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",s.city||"Not selected"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pincode:"})," ",s.pincode||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",s.address||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Property Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",s.bedrooms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Area:"})," ",s.builtUpArea," sq ft"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Furnishing:"})," ",s.furnishing]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Pricing"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," â‚¹",s.price]}),s.maintenanceCharges&&e.jsxs("p",{children:[e.jsx("strong",{children:"Maintenance:"})," â‚¹",s.maintenanceCharges,"/month"]})]})]}),s.amenities.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.amenities.map(i=>e.jsx(W,{variant:"secondary",children:i},i))})]}),b.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-semibold mb-2",children:["Images (",b.length,")"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[b.slice(0,4).map(i=>e.jsx("img",{src:i.url,alt:i.name,className:"w-full h-16 object-cover rounded"},i.id)),b.length>4&&e.jsxs("div",{className:"w-full h-16 bg-muted rounded flex items-center justify-center text-sm",children:["+",b.length-4," more"]})]})]})]})})]});default:return null}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>U("/vendor/properties"),children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ce,{className:"w-8 h-8 text-primary"}),"Add New Property"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"List your property and connect with potential buyers/tenants"})]})]})}),P&&e.jsx(B,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"Checking subscription status..."})]})})}),!P&&!C&&e.jsx(B,{className:"border-amber-200 bg-amber-50/50",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Ue,{className:"w-8 h-8 text-amber-600"})}),e.jsxs("div",{children:[E.maxProperties===0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-amber-900 mb-2",children:"Subscription Required"}),e.jsx("p",{className:"text-amber-700 mb-4",children:"To add properties, you need an active subscription plan."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-amber-900 mb-2",children:"Property Limit Reached"}),e.jsxs("p",{className:"text-amber-700 mb-4",children:["You have reached your ",E.planName," plan limit of ",E.maxProperties," properties."]}),e.jsxs("p",{className:"text-sm text-amber-600 mb-2",children:["Current: ",E.currentProperties,"/",E.maxProperties," properties used"]})]}),e.jsxs("div",{className:"bg-amber-100 border border-amber-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-amber-800 font-medium mb-2",children:"Available Subscription Plans:"}),e.jsxs("div",{className:"text-left space-y-2 text-sm text-amber-700",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"FREE LISTING"})," - 5 Properties"]}),e.jsx(W,{variant:"secondary",className:"text-xs",children:"Current"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"â‚¹199"})," - 10 Properties + Top Rated + Verified Badge"]}),e.jsx(W,{className:"text-xs bg-green-600",children:"Popular"})]}),e.jsx("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:e.jsxs("span",{children:[e.jsx("strong",{children:"â‚¹499"})," - 15 Properties + 1 Poster + 6 Leads"]})}),e.jsx("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:e.jsxs("span",{children:[e.jsx("strong",{children:"â‚¹1999"})," - Unlimited + 4 Posters + 20 Leads"]})}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"â‚¹4999"})," - Unlimited + Videos + Marketing Manager + 30+ Leads"]}),e.jsx(W,{className:"text-xs bg-purple-600",children:"Premium"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(Ne,{to:"/vendor/subscription-plans",children:e.jsxs(y,{className:"bg-amber-600 hover:bg-amber-700 text-white",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Upgrade Plan"]})}),e.jsx(y,{variant:"outline",onClick:()=>{console.log("Manually refreshing subscription limits..."),k()},disabled:P,children:P?"Checking...":"Refresh Status"}),e.jsx(y,{variant:"outline",onClick:async()=>{console.log("Cleaning up duplicate subscriptions..."),(await re.cleanupSubscriptions()).success&&k()},disabled:P,children:"Fix Multiple Subscriptions"}),e.jsx(y,{variant:"outline",onClick:()=>U("/vendor/properties"),children:"Back to Properties"})]})]})})}),!P&&C&&e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsxs(D,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:I.map((a,n)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 mb-2 ${v>=a.id?"bg-primary border-primary text-primary-foreground":"border-muted-foreground text-muted-foreground"}`,children:v>a.id?e.jsx(Z,{className:"w-5 h-5"}):a.id}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.description})]}),n<I.length-1&&e.jsx("div",{className:`hidden md:block absolute h-0.5 w-20 top-5 left-1/2 transform translate-x-8 ${v>a.id?"bg-primary":"bg-muted-foreground"}`})]},a.id))}),e.jsx("div",{className:"min-h-96",children:ye()}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(y,{variant:"outline",onClick:ue,disabled:v===1,children:"Previous"}),v===I.length?e.jsx(y,{onClick:xe,className:"px-8",disabled:M,children:M?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Property"}):e.jsx(y,{onClick:pe,children:"Next"})]})]})})})]})};export{cs as default};
