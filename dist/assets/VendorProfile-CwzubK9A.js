import{j as e}from"./ui-DYmpZ3pJ.js";import{R as ee,r as c}from"./router-2SVJvIbS.js";import{a as u,b as h,c as g,a0 as D,e as x,M as $,Y as pe,B as I,U as se,f as S,Z as b,t as p,z as Pe,X as Ae,K as Me,L as Fe,O as Le,I as v,w as Te,a9 as Ue,T as Ve,G as ze,H as B,$ as q,p as K,q as _,r as Z,s as X,v as Q,C as re,o as De,ah as Be,h as qe,S as $e}from"./index-BbgqWuYN.js";import{L as m}from"./label-DRahLfWI.js";import{T as ne}from"./textarea-Cl1lQCIh.js";import{S as te}from"./switch-hHBms1yh.js";import{vendorService as T}from"./vendorService-B-EvAALA.js";import{m as oe}from"./messageService-C1TBUsqx.js";import{P as Oe}from"./PincodeAutocomplete-DpuhK1i5.js";import{P as Ge}from"./PasswordChangeDialog-DgnXNCUb.js";import{S as le}from"./separator-CbwKV3QQ.js";import{G as He}from"./globe-CD0dKwe2.js";import{T as O}from"./trending-up-CE6F-QOW.js";import{C as ce}from"./circle-alert-CzpJtozL.js";import{S as Je}from"./smartphone-c4d9Amjh.js";import{L as de}from"./loader-circle-DtIJ61xE.js";import{S as We}from"./save-MzbdIAk0.js";import{S as Ye}from"./square-pen-uFfo4AcD.js";import{C as Ke}from"./camera-BtNLnS3M.js";import{C as _e}from"./calendar-BL1izdXI.js";import{A as me}from"./award-Gcmm1Ecx.js";import{K as Ze}from"./key-C1VloUmj.js";import"./vendor-Dazix4UH.js";import"./command-DqNKR-gI.js";import"./dialog-DsX3mE8Q.js";import"./alert-Dw2CNFKO.js";import"./userService-BmC1RzMq.js";import"./triangle-alert-C_v7lvm2.js";import"./eye-off-B4x_R5-l.js";const Xe=({preferences:d,businessPreferences:E,onChange:M,onBusinessChange:U,onTestPushNotification:w,onTestEmail:y,showTestButtons:j=!1,supportEmail:G="support@buildhomemartsquares.com"})=>{const t=[{key:"email",icon:$,color:"text-blue-500",title:"Email Notifications",description:"Receive updates and alerts via email",isCore:!0},{key:"push",icon:D,color:"text-purple-500",title:"Push Notifications",description:"Browser notifications for instant updates",isCore:!0},{key:"newMessages",icon:pe,color:"text-indigo-500",title:"New Message Alerts",description:"Get notified when you receive new messages from customers",requiresEmail:!0},{key:"newsUpdates",icon:He,color:"text-teal-500",title:"News & Updates",description:"Real estate market news and platform updates",requiresEmail:!0},{key:"marketing",icon:O,color:"text-green-500",title:"Marketing Communications",description:"Platform announcements and promotional content",requiresEmail:!0}],C=[{key:"emailNotifications",icon:$,color:"text-blue-600",title:"Business Email Notifications",description:"General business communications and updates",isCore:!0},{key:"smsNotifications",icon:Je,color:"text-green-600",title:"SMS Notifications",description:"Urgent alerts and time-sensitive notifications via SMS",isCore:!0},{key:"leadAlerts",icon:se,color:"text-orange-600",title:"Lead Alerts",description:"Instant notifications when you receive new property inquiries",requiresBusiness:!0},{key:"weeklyReports",icon:O,color:"text-purple-600",title:"Weekly Reports",description:"Weekly performance reports and analytics",requiresBusiness:!0},{key:"marketingEmails",icon:O,color:"text-pink-600",title:"Marketing Emails",description:"Business growth tips and marketing opportunities",requiresBusiness:!0}],F=o=>o.requiresEmail&&!d.email,L=o=>o.requiresBusiness&&!E.emailNotifications;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"General Notification Preferences"]})}),e.jsx(x,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:t.map((o,R)=>e.jsxs(ee.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o.icon,{className:`w-5 h-5 ${o.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:o.title}),o.isCore&&e.jsx(I,{variant:"outline",className:"text-xs",children:"Core"}),F(o)&&e.jsx(I,{variant:"secondary",className:"text-xs",children:"Requires Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.description}),F(o)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ce,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable email notifications first"})]})]})]}),e.jsx(te,{checked:d[o.key],onCheckedChange:k=>M(o.key,k),disabled:F(o)})]}),R<t.length-1&&e.jsx(le,{})]},o.key))})})]}),e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Business Notification Preferences"]})}),e.jsx(x,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:C.map((o,R)=>e.jsxs(ee.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o.icon,{className:`w-5 h-5 ${o.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:o.title}),o.isCore&&e.jsx(I,{variant:"outline",className:"text-xs",children:"Core"}),L(o)&&e.jsx(I,{variant:"secondary",className:"text-xs",children:"Requires Business Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.description}),L(o)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ce,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable business email notifications first"})]})]})]}),e.jsx(te,{checked:E[o.key],onCheckedChange:k=>U(o.key,k),disabled:L(o)})]}),R<C.length-1&&e.jsx(le,{})]},o.key))})})]}),j&&e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Test Notifications"]})}),e.jsx(x,{children:e.jsxs("div",{className:"flex gap-2",children:[w&&e.jsxs(S,{variant:"outline",size:"sm",onClick:w,disabled:!d.push,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Test Push Notification"]}),y&&e.jsxs(S,{variant:"outline",size:"sm",onClick:y,disabled:!d.email,children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Test Email"]})]})})]})]})},ks=()=>{const[d,E]=c.useState(!1),[M,U]=c.useState(!0),[w,y]=c.useState(!1),[j,G]=c.useState(null),[t,C]=c.useState(null),[F,L]=c.useState("profile"),[o,R]=c.useState(null),[k,fe]=c.useState([]),[ue,H]=c.useState([]),[xe,J]=c.useState([]),[P,A]=c.useState({states:!1,districts:!1,cities:!1,pincode:!1}),[Qe,V]=c.useState({country:"India",state:"",district:"",city:""}),[a,W]=c.useState({notifications:{email:!0,push:!0,newMessages:!0,newsUpdates:!0,marketing:!1},business:{emailNotifications:!0,smsNotifications:!1,leadAlerts:!0,marketingEmails:!1,weeklyReports:!0,autoResponseEnabled:!1,autoResponseMessage:"Thank you for your interest! I'll get back to you soon."}}),[he,ie]=c.useState(!1),z=c.useCallback(async(s,i,r)=>{W(l=>({...l,[s]:{...l[s],[i]:r}}));try{await ve(s,i,r)}catch(l){console.error("Failed to sync setting:",l)}},[j]);c.useEffect(()=>{ae(),ge(),Se()},[]),c.useEffect(()=>{(async()=>{A(i=>({...i,states:!0}));try{await b.initialize();const i=b.getStates();fe(i),console.log(`Loaded ${i.length} states from loca.json`)}catch(i){console.error("Error initializing loca service:",i),p({title:"Error",description:"Failed to load location data. Please refresh the page.",variant:"destructive"})}finally{A(i=>({...i,states:!1}))}})()},[]),c.useEffect(()=>{if(!t?.profile?.address?.state){H([]);return}A(s=>({...s,districts:!0}));try{const s=b.getDistricts(t.profile.address.state);if(H(s),console.log(`Loaded ${s.length} districts for ${t.profile.address.state}`),t.profile.address.district){const i=t.profile.address.district;s.some(l=>l.toLowerCase()===i.toLowerCase()||l===i)?console.log(`District "${i}" found in list, keeping...`):(console.log(`District "${i}" not found in list, clearing...`),n("profile.address.district",""),n("profile.address.city",""))}}catch(s){console.error("Error loading districts:",s),p({title:"Error",description:"Failed to load districts. Please try again.",variant:"destructive"})}finally{A(s=>({...s,districts:!1}))}},[t?.profile?.address?.state]),c.useEffect(()=>{if(!t?.profile?.address?.state||!t?.profile?.address?.district){J([]);return}A(s=>({...s,cities:!0}));try{const s=b.getCities(t.profile.address.state,t.profile.address.district);J(s),console.log(`Loaded ${s.length} cities for ${t.profile.address.district}`),t.profile.address.city&&!s.includes(t.profile.address.city)&&n("profile.address.city",""),V(i=>({...i,city:""}))}catch(s){console.error("Error loading cities:",s),p({title:"Error",description:"Failed to load cities. Please try again.",variant:"destructive"})}finally{A(s=>({...s,cities:!1}))}},[t?.profile?.address?.state,t?.profile?.address?.district]),c.useEffect(()=>{t?.profile?.address?.state&&V(s=>({...s,state:t.profile.address.state}))},[t?.profile?.address?.state]),c.useEffect(()=>{t?.profile?.address?.district&&V(s=>({...s,district:t.profile.address.district}))},[t?.profile?.address?.district]),c.useEffect(()=>{t?.profile?.address?.city&&V(s=>({...s,city:t.profile.address.city}))},[t?.profile?.address?.city]),c.useEffect(()=>{if(!M){const s=setTimeout(()=>{je()},1500);return()=>clearTimeout(s)}},[a,M]);const ae=async()=>{try{U(!0);const s=await T.getVendorProfile(),i={...s,profile:{...s.profile,preferences:s.profile.preferences||{language:"en",currency:"INR",notifications:{email:!0,push:!0,newMessages:!0,newsUpdates:!0,marketing:!0}}}};console.log("Loaded vendor profile:",i),console.log("Profile address:",i.profile?.address),G(i),C(i),localStorage.setItem("user",JSON.stringify(i))}catch(s){console.error("Failed to load vendor profile:",s),p({title:"Error",description:"Failed to load vendor profile. Please try again.",variant:"destructive"})}finally{U(!1)}},ge=async()=>{try{const s=localStorage.getItem("vendorSettings");if(s){const i=JSON.parse(s);W(r=>({...r,...i}))}try{const i=await T.getVendorProfile();if(i&&i.profile.vendorInfo?.vendorPreferences){const r=i.profile.vendorInfo.vendorPreferences,l={notifications:{email:i.profile?.preferences?.notifications?.email||a.notifications.email,push:i.profile?.preferences?.notifications?.push||a.notifications.push,newMessages:i.profile?.preferences?.notifications?.newMessages||a.notifications.newMessages,newsUpdates:i.profile?.preferences?.notifications?.newsUpdates||a.notifications.newsUpdates,marketing:i.profile?.preferences?.notifications?.marketing||a.notifications.marketing},business:{emailNotifications:r.emailNotifications||a.business.emailNotifications,smsNotifications:r.smsNotifications||a.business.smsNotifications,leadAlerts:r.leadAlerts||a.business.leadAlerts,marketingEmails:r.marketingEmails||a.business.marketingEmails,weeklyReports:r.weeklyReports||a.business.weeklyReports,autoResponseEnabled:r.autoResponseEnabled||a.business.autoResponseEnabled,autoResponseMessage:r.autoResponseMessage||a.business.autoResponseMessage}};W(l),localStorage.setItem("vendorSettings",JSON.stringify(l))}}catch{console.log("Using local settings - API unavailable")}}catch(s){console.error("Settings load failed:",s),p({title:"Settings Loaded",description:"Using saved settings.",variant:"default"})}},je=async()=>{try{y(!0);const s=Ne(a);s.isValid||p({title:"Validation Warning",description:s.message,variant:"default"});try{const i={profile:{preferences:{notifications:{email:a.notifications.email,push:a.notifications.push,newMessages:a.notifications.newMessages,newsUpdates:a.notifications.newsUpdates,marketing:a.notifications.marketing}},vendorInfo:{vendorPreferences:{emailNotifications:a.business.emailNotifications,smsNotifications:a.business.smsNotifications,leadAlerts:a.business.leadAlerts,marketingEmails:a.business.marketingEmails,weeklyReports:a.business.weeklyReports,autoResponseEnabled:a.business.autoResponseEnabled,autoResponseMessage:a.business.autoResponseMessage}}}};await T.updateVendorProfile(i),localStorage.setItem("vendorSettings",JSON.stringify(a)),R(new Date().toISOString()),p({title:"Settings Saved",description:"Your preferences have been updated"})}catch(i){console.error("Failed to save settings:",i),localStorage.setItem("vendorSettings",JSON.stringify(a)),p({title:"Settings Saved",description:"Your preferences have been saved",variant:"default"})}}catch(s){console.error("Settings save failed:",s),p({title:"Save Failed",description:s.message||"Unable to save vendor settings.",variant:"destructive"})}finally{y(!1)}},Ne=s=>s.business.emailNotifications&&!s.business.leadAlerts&&!s.notifications.newMessages?{isValid:!1,message:"Business email enabled but no notification types selected. Consider enabling lead alerts or new message notifications."}:s.business.autoResponseEnabled&&!s.business.autoResponseMessage.trim()?{isValid:!1,message:"Auto-response enabled but no message set. Please provide a response message."}:{isValid:!0,message:""},ve=async(s,i,r)=>{try{y(!0),await T.updateVendorPreferences(`${s}.${i}`,r);const l=i.replace(/([A-Z])/g," $1").toLowerCase(),f=typeof r=="boolean"?r?"enabled":"disabled":"updated";R(new Date().toISOString()),i==="autoResponseEnabled"&&r===!0&&await ye(),p({title:"Setting Updated",description:`${l} ${f}`})}catch(l){console.error("Save failed:",l),p({title:"Setting Saved",description:"Your preference has been saved",variant:"default"})}finally{y(!1)}},ye=async()=>{try{const s=a.business.autoResponseMessage;if(!s.trim()){p({title:"Auto-Response Setup",description:"Please set an auto-response message below",variant:"default"});return}console.log("Auto-response integration activated:",{message:s,timestamp:new Date().toISOString(),vendorId:j?.id}),p({title:"Auto-Response Active",description:"Auto-responses will be sent to new inquiries"})}catch(s){console.error("Auto-response integration test failed:",s)}},be=async(s,i)=>{try{if(!a.business.autoResponseEnabled||!a.business.autoResponseMessage.trim())return;const r=await oe.sendAutoResponse(s,i,a.business.autoResponseMessage);r&&console.log("Auto-response sent:",{messageId:r._id,conversationId:s,recipientId:i,timestamp:new Date().toISOString()})}catch(r){console.error("Failed to send auto-response:",r)}},we=async s=>{try{(s.type==="inquiry"||s.type==="lead"||s.type==="property_inquiry")&&(oe.isAutoResponse(s)||await be(s.conversationId,s.sender._id))}catch(i){console.error("Failed to handle incoming message for auto-response:",i)}};ee.useEffect(()=>(a.business.autoResponseEnabled?window.vendorAutoResponseHandler=we:delete window.vendorAutoResponseHandler,()=>{delete window.vendorAutoResponseHandler}),[a.business.autoResponseEnabled,a.business.autoResponseMessage]);const Se=async()=>{try{b.isReady()||await b.initialize()}catch(s){console.error("Failed to initialize location service:",s)}},Ce=()=>{const s=t?.profile?.address;return s&&s.zipCode&&s.state&&s.district&&s.city&&!b.getLocationByPincode(s.zipCode).some(l=>l.state.toUpperCase()===s.state?.toUpperCase()&&l.district.toUpperCase()===s.district?.toUpperCase()&&l.city.toUpperCase()===s.city?.toUpperCase())?(console.warn("Location mismatch detected between pincode and selected location"),!1):!0},Ie=async()=>{if(t){Ce()||p({title:"Location Validation",description:"Please verify that your PIN code matches the selected location",variant:"default"});try{y(!0);const s={profile:{firstName:t.profile.firstName,lastName:t.profile.lastName,phone:t.profile.phone,bio:t.profile.bio,preferences:t.profile.preferences,address:{...t.profile.address,street:t.profile.address?.street||"",state:t.profile.address?.state||"",district:t.profile.address?.district||"",city:t.profile.address?.city||"",zipCode:t.profile.address?.zipCode||"",country:t.profile.address?.country||"India"},vendorInfo:t.profile.vendorInfo}};console.log("Saving vendor profile with address:",s.profile.address);const i=await T.updateVendorProfile(s);console.log("Received updated profile:",i),console.log("Updated profile address:",i.profile?.address),G(i),C(i),E(!1),p({title:"Success",description:"Profile updated successfully!"})}catch(s){console.error("Failed to update profile:",s)}finally{y(!1)}}},Ee=()=>{C(j),E(!1)},n=(s,i)=>{if(!t)return;const r=s.split("."),l={...t};let f=l;for(let N=0;N<r.length-1;N++)f[r[N]]||(f[r[N]]={}),f=f[r[N]];f[r[r.length-1]]=i,console.log(`Updated ${s} to:`,i),console.log("Full address after update:",l.profile?.address),C(l)};if(M)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading vendor profile..."})]})});if(!j||!t)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:"Failed to load vendor profile"}),e.jsx(S,{onClick:ae,children:"Retry"})]})});`${t.profile.firstName}${t.profile.lastName}`;const Re=t.profile.vendorInfo?.memberSince?new Date(t.profile.vendorInfo.memberSince).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Unknown";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Pe,{className:"w-8 h-8 text-primary"}),"My Profile"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile information and preferences."})]}),e.jsx("div",{className:"flex gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsxs(S,{variant:"outline",onClick:Ee,disabled:w,children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(S,{onClick:Ie,disabled:w,children:[w?e.jsx(de,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(We,{className:"w-4 h-4 mr-2"}),"Save Profile"]})]}):e.jsxs(S,{onClick:()=>E(!0),children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),e.jsx(u,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Me,{className:"h-24 w-24",children:[e.jsx(Fe,{src:t.profile.avatar||""}),e.jsxs(Le,{className:"text-lg",children:[t.profile.firstName.charAt(0),t.profile.lastName.charAt(0)]})]}),d&&e.jsx(S,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0",children:e.jsx(Ke,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"firstName",children:"First Name"}),d?e.jsx(v,{id:"firstName",value:t.profile.firstName,onChange:s=>n("profile.firstName",s.target.value)}):e.jsx("p",{className:"text-lg font-semibold",children:t.profile.firstName})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"lastName",children:"Last Name"}),d?e.jsx(v,{id:"lastName",value:t.profile.lastName,onChange:s=>n("profile.lastName",s.target.value)}):e.jsx("p",{className:"text-lg font-semibold",children:t.profile.lastName})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),t.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"w-4 h-4 mr-1"}),d?e.jsx(v,{value:t.profile.phone,onChange:s=>n("profile.phone",s.target.value),className:"h-6 text-sm w-32"}):t.profile.phone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),"Member since ",Re]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ue,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"font-medium",children:(t.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",t.profile.vendorInfo?.rating?.count||0," reviews)"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm",children:[t.profile.vendorInfo?.responseTime||"Not calculated"," avg response"]})})]})]})]})})}),e.jsxs(Ve,{value:F,onValueChange:L,className:"space-y-6",children:[e.jsxs(ze,{className:"grid w-full grid-cols-4",children:[e.jsx(B,{value:"profile",children:"Personal Info"}),e.jsx(B,{value:"company",children:"Company Details"}),e.jsx(B,{value:"specializations",children:"Specializations"}),e.jsx(B,{value:"notifications",children:"Settings"})]}),e.jsx(q,{value:"profile",className:"space-y-6",children:e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(se,{className:"w-5 h-5 mr-2"}),"Personal Information"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"bio",children:"Bio"}),d?e.jsx(ne,{id:"bio",value:t.profile.bio||"",onChange:s=>n("profile.bio",s.target.value),placeholder:"Tell us about yourself and your experience...",rows:4}):e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.profile.bio||"No bio provided"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"street",children:"Street Address"}),d?e.jsx(v,{id:"street",value:t.profile.address?.street||"",onChange:s=>n("profile.address.street",s.target.value),placeholder:"Enter street address..."}):e.jsx("p",{className:"text-sm",children:t.profile.address?.street||"Not provided"})]}),d?e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium",children:"Location Details"}),e.jsxs("div",{className:"mt-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"state",children:"State"}),e.jsxs(K,{value:t.profile.address?.state||"",onValueChange:s=>{n("profile.address.state",s),n("profile.address.district",""),n("profile.address.city",""),n("profile.address.zipCode","")},disabled:P.states,children:[e.jsx(_,{children:e.jsx(Z,{placeholder:P.states?"Loading states...":"Select state"})}),e.jsx(X,{children:k.map(s=>e.jsx(Q,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"district",children:"District"}),e.jsxs(K,{value:t.profile.address?.district||"",onValueChange:s=>{n("profile.address.district",s),n("profile.address.city",""),n("profile.address.zipCode","")},disabled:!t.profile.address?.state||P.districts,children:[e.jsx(_,{children:e.jsx(Z,{placeholder:t.profile.address?.state?P.districts?"Loading districts...":"Select district":"Select state first"})}),e.jsx(X,{children:ue.map(s=>e.jsx(Q,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"city",children:"City"}),e.jsxs(K,{value:t.profile.address?.city||"",onValueChange:s=>{n("profile.address.city",s),n("profile.address.zipCode","")},disabled:!t.profile.address?.district||P.cities,children:[e.jsx(_,{children:e.jsx(Z,{placeholder:t.profile.address?.district?P.cities?"Loading cities...":"Select city":"Select district first"})}),e.jsx(X,{children:xe.map(s=>e.jsx(Q,{value:s,children:s},s))})]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"State"}),e.jsx("p",{className:"text-sm",children:t.profile.address?.state||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"District"}),e.jsx("p",{className:"text-sm",children:t.profile.address?.district||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"City"}),e.jsx("p",{className:"text-sm",children:t.profile.address?.city||"Not provided"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zipCode",children:"PIN Code"}),d?e.jsx(Oe,{value:t.profile.address?.zipCode||"",onChange:(s,i)=>{if(n("profile.address.zipCode",s),i&&(console.log("Auto-filling location from pincode:",i),i.state)){const r=i.state.toUpperCase();k.includes(r)&&(n("profile.address.state",r),n("profile.address.stateCode",r),setTimeout(()=>{const l=b.getDistricts(r);if(H(l),i.district){const f=l.find(N=>N.toUpperCase()===i.district.toUpperCase());f&&(n("profile.address.district",f),n("profile.address.districtCode",f),setTimeout(()=>{const N=b.getCities(r,f);if(J(N),i.city){const Y=N.find(ke=>ke.toUpperCase()===i.city.toUpperCase());Y&&(n("profile.address.city",Y),n("profile.address.cityCode",Y))}},100))}},100))}},state:t.profile.address?.state,district:t.profile.address?.district,city:t.profile.address?.city,placeholder:t.profile.address?.city?`Enter PIN code for ${t.profile.address.city}...`:"Enter PIN code to auto-fill location...",className:"w-full"}):e.jsx("p",{className:"text-sm",children:t.profile.address?.zipCode||"Not provided"}),d&&e.jsxs("div",{className:"space-y-1 mt-1",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"ðŸ’¡ Select your location first or enter PIN code to auto-fill location details"}),t.profile.address?.zipCode&&t.profile.address?.city&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3"}),"Location validated with PIN code"]})]})]})]})]})]})}),e.jsx(q,{value:"company",className:"space-y-6",children:e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(De,{className:"w-5 h-5 mr-2"}),"Company Information"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"companyName",children:"Company Name"}),d?e.jsx(v,{id:"companyName",value:t.profile.vendorInfo?.companyName||"",onChange:s=>n("profile.vendorInfo.companyName",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.companyName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"experience",children:"Experience (Years)"}),d?e.jsx(v,{id:"experience",type:"number",value:t.profile.vendorInfo?.experience||0,onChange:s=>n("profile.vendorInfo.experience",parseInt(s.target.value)||0)}):e.jsxs("p",{className:"text-sm",children:[t.profile.vendorInfo?.experience||0," years"]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"website",children:"Website"}),d?e.jsx(v,{id:"website",value:t.profile.vendorInfo?.website||"",onChange:s=>n("profile.vendorInfo.website",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.website||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"licenseNumber",children:"License Number"}),d?e.jsx(v,{id:"licenseNumber",value:t.profile.vendorInfo?.licenseNumber||"",onChange:s=>n("profile.vendorInfo.licenseNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.licenseNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"gstNumber",children:"GST Number"}),d?e.jsx(v,{id:"gstNumber",value:t.profile.vendorInfo?.gstNumber||"",onChange:s=>n("profile.vendorInfo.gstNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.gstNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"panNumber",children:"PAN Number"}),d?e.jsx(v,{id:"panNumber",value:t.profile.vendorInfo?.panNumber||"",onChange:s=>n("profile.vendorInfo.panNumber",s.target.value)}):e.jsx("p",{className:"text-sm",children:t.profile.vendorInfo?.panNumber||"Not provided"})]})]})})]})}),e.jsxs(q,{value:"specializations",className:"space-y-6",children:[e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(Be,{className:"w-5 h-5 mr-2"}),"Specializations"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(t.profile.vendorInfo?.specializations||[]).length>0?t.profile.vendorInfo.specializations.map((s,i)=>e.jsx(I,{variant:"secondary",className:"flex items-center",children:s},i)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No specializations added yet"})})})})]}),e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(qe,{className:"w-5 h-5 mr-2"}),"Service Areas"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(t.profile.vendorInfo?.serviceAreas||[]).length>0?t.profile.vendorInfo.serviceAreas.map((s,i)=>e.jsx(I,{variant:"outline",className:"flex items-center",children:s},i)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No service areas added yet"})})})})]}),e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(me,{className:"w-5 h-5 mr-2"}),"Certifications"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:(t.profile.vendorInfo?.certifications||[]).length>0?t.profile.vendorInfo.certifications.map((s,i)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(me,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Issued by ",s.issuedBy," â€¢ ",s.date]})]})]}),s.verified&&e.jsxs(I,{className:"bg-green-100 text-green-800",children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),"Verified"]})]},i)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No certifications added yet"})})})]})]}),e.jsxs(q,{value:"notifications",className:"space-y-6",children:[e.jsx(Xe,{preferences:a.notifications,businessPreferences:{emailNotifications:a.business.emailNotifications,smsNotifications:a.business.smsNotifications,leadAlerts:a.business.leadAlerts,marketingEmails:a.business.marketingEmails,weeklyReports:a.business.weeklyReports},onChange:(s,i)=>z("notifications",s,i),onBusinessChange:(s,i)=>z("business",s,i),showTestButtons:!0,onTestPushNotification:()=>{p({title:"Test Push Notification",description:"Push notification test sent successfully!"})},onTestEmail:()=>{p({title:"Test Email",description:"Test email sent successfully!"})}}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5"}),"Auto-Response Settings"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure automatic replies to new customer inquiries."})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"autoResponse",children:"Enable Auto-Response"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic replies to new inquiries"})]}),e.jsx(te,{id:"autoResponse",checked:a.business.autoResponseEnabled,onCheckedChange:async s=>{await z("business","autoResponseEnabled",s)},disabled:w})]}),a.business.autoResponseEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"autoResponseMessage",children:"Auto-Response Message"}),e.jsx(ne,{id:"autoResponseMessage",value:a.business.autoResponseMessage,onChange:async s=>{const i=s.target.value;await z("business","autoResponseMessage",i)},placeholder:"Enter your automatic response message...",rows:3,disabled:w}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This message will be automatically sent to new inquiries"})]})]})]}),e.jsxs(u,{className:"mb-6",children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Security Settings"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Change Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your account password with secure OTP verification"})]}),e.jsxs(S,{variant:"outline",onClick:()=>ie(!0),className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),"Change Password"]})]})})]}),e.jsx(Ge,{open:he,onOpenChange:ie})]})]}),j.statistics&&e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Performance Statistics"]})}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.statistics.totalProperties}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Listed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.statistics.totalValue||"???0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(t.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:j.statistics.totalMessages}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Messages"})]})]})})]})]})};export{ks as default};
