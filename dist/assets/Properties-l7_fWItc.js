import{j as e}from"./ui-s1SEoZIF.js";import{d as s,r as a}from"./router-D8v2YSKU.js";import{D as r,z as t,t as i,a4 as l,a5 as n,a6 as c,a7 as d,a8 as o,k as m,B as p,aL as h,aM as u,aN as x,g as j,a2 as v,G as f,Z as g,f as y,a9 as N,a as b,b as w,c as C,e as P,d as k,L as S,at as F,av as R,aw as E,ax as A,ay as T,az as O,aA as $,aB as V,I as _,T as L,ae as q,a3 as I,aO as D,aE as U,aF as z,aG as M,aH as Q,aI as B,aJ as H,E as J,ad as G,Q as W}from"./index-xsqbJ4m0.js";import{u as Z}from"./usePagination-1Z845fFX.js";import{P as K,a as X,b as Y,c as ee,d as se,e as ae}from"./pagination-DNg3_yq7.js";import{D as re}from"./DataTable-C_10tUL1.js";import{u as te,S as ie}from"./usePermissions-P7JlPuC-.js";import{S as le}from"./slider-BeSWBqA3.js";import{C as ne}from"./checkbox-B8OQMtjB.js";import{g as ce}from"./propertyUtils-41DuwCMc.js";import{V as de}from"./VirtualTourViewer-DUg5o24U.js";import{I as oe}from"./indian-rupee-B5w9mpiT.js";import{E as me}from"./ellipsis-CERJHrr0.js";import{S as pe}from"./square-pen-CXP2h9yh.js";import"./vendor-BxThA0WO.js";import"./table-B_mPL_j-.js";import"./external-link-BAap8F3q.js";const he=r("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const ue=new class{async makeRequest(e,s={}){const a=t.getToken(),r={headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...s.headers},...s},i=await fetch(`https://app.buildhomemartsquares.com/api/admin${e}`,r);if(!i.ok){const e=await i.json().catch(()=>({}));throw new Error(e.message||`HTTP error! status: ${i.status}`)}return i.json()}async getProperties(e={}){try{const s=new URLSearchParams;Object.entries(e).forEach(([e,a])=>{null!=a&&""!==a&&s.append(e,String(a))});const a="/properties"+(s.toString()?`?${s.toString()}`:"");return await this.makeRequest(a)}catch(s){const e=s instanceof Error?s.message:"Failed to fetch properties";throw i({title:"Error",description:e,variant:"destructive"}),s}}async approveProperty(e){try{await this.makeRequest(`/properties/${e}/approve`,{method:"POST"}),i({title:"Success",description:"Property approved successfully!"})}catch(s){const e=s instanceof Error?s.message:"Failed to approve property";throw i({title:"Error",description:e,variant:"destructive"}),s}}async rejectProperty(e,s){try{await this.makeRequest(`/properties/${e}/reject`,{method:"POST",body:JSON.stringify({reason:s})}),i({title:"Success",description:"Property rejected successfully!"})}catch(a){const e=a instanceof Error?a.message:"Failed to reject property";throw i({title:"Error",description:e,variant:"destructive"}),a}}async deleteProperty(e){try{await this.makeRequest(`/properties/${e}`,{method:"DELETE"}),i({title:"Success",description:"Property deleted successfully!"})}catch(s){const e=s instanceof Error?s.message:"Failed to delete property";throw i({title:"Error",description:e,variant:"destructive"}),s}}async togglePropertyFeatured(e,s){try{await this.makeRequest(`/properties/${e}/featured`,{method:"PATCH",body:JSON.stringify({featured:s})}),i({title:"Success",description:`Property ${s?"marked as featured":"removed from featured"}!`})}catch(a){const e=a.response?.data||a,s=e.message||a.message||"Failed to update property";throw e.upgradeRequired||e.limitReached?i({title:e.limitReached?"Featured Limit Reached":"Upgrade Required",description:`${s} Visit the Subscription Plans page to upgrade.`,variant:"destructive"}):i({title:"Error",description:s,variant:"destructive"}),a}}getStatusOptions(){return[{label:"Active",value:"active"},{label:"Available",value:"available"},{label:"Pending",value:"pending"},{label:"Sold",value:"sold"},{label:"Rented",value:"rented"},{label:"Rejected",value:"rejected"}]}getStatusColor(e){switch(e.toLowerCase()){case"active":case"available":return"bg-green-500";case"pending":return"bg-yellow-500";case"sold":return"bg-blue-500";case"rented":return"bg-purple-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}getStatusText(e){return{available:"Available",pending:"Pending Review",sold:"Sold",rented:"Rented",rejected:"Rejected"}[e.toLowerCase()]||e.charAt(0).toUpperCase()+e.slice(1)}getPropertyTypeOptions(){return[{label:"Apartment",value:"apartment"},{label:"House",value:"house"},{label:"Villa",value:"villa"},{label:"Plot",value:"plot"},{label:"Commercial",value:"commercial"},{label:"Office",value:"office"}]}},xe=({property:s,open:a,onOpenChange:r})=>{if(!s)return null;return e.jsx(l,{open:a,onOpenChange:r,children:e.jsxs(n,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(c,{children:[e.jsx(d,{className:"text-2xl",children:s.title}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(m,{className:"w-4 h-4"}),s.address.street,", ",s.address.city,", ",s.address.state," - ",s.address.pincode]})})]}),e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(p,{variant:"available"===s.status?"default":"pending"===s.status?"outline":"destructive",children:["Status: ",s.status]}),e.jsx(p,{variant:"secondary",className:"capitalize",children:s.type?s.type.replace("_"," "):"property"}),e.jsxs(p,{variant:"sale"===s.listingType?"default":"outline",children:["For ","sale"===s.listingType?"Sale":"Rent"]}),s.featured&&e.jsx(p,{variant:"default",children:"Featured"}),s.verified&&e.jsx(p,{variant:"default",children:"Verified"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),e.jsx("p",{className:"font-semibold",children:((e,s)=>{const a=new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e);return"rent"===s?`₹${a}/month`:`₹${a}`})(s.price,s.listingType)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Area"}),e.jsx("p",{className:"font-semibold",children:(t=s.area,t?.builtUp?`${t.builtUp} ${t.unit||"sqft"}`:t?.carpet?`${t.carpet} ${t.unit||"sqft"}`:t?.plot?`${t.plot} ${t.unit||"sqft"}`:"N/A")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bedrooms"}),e.jsx("p",{className:"font-semibold",children:s.bedrooms||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bathrooms"}),e.jsx("p",{className:"font-semibold",children:s.bathrooms||"N/A"})]})]})]}),e.jsx(j,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),s.amenities&&s.amenities.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.amenities.map((s,a)=>e.jsx(p,{variant:"outline",className:"capitalize",children:s.replace("_"," ")},a))})]})]}),e.jsx(j,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Owner Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium",children:ce(s.owner)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.owner?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Contact Number"}),e.jsx("p",{className:"font-medium",children:s.owner?.profile?.phone||"N/A"})]})]})]}),s.images&&s.images.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:s.images.map((s,a)=>e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden border",children:[e.jsx("img",{src:s.url,alt:s.caption||`Property ${a+1}`,className:"w-full h-full object-cover"}),s.isPrimary&&e.jsx(p,{className:"absolute top-2 left-2",variant:"default",children:"Primary"})]},a))})]})]}),s.videos&&s.videos.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Videos"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.videos.map((s,a)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden border bg-black",children:s.url.includes("youtube.com")||s.url.includes("youtu.be")?e.jsx("iframe",{src:s.url.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/"),className:"w-full h-full",allowFullScreen:!0,title:s.caption||`Video ${a+1}`}):e.jsx("video",{src:s.url,controls:!0,className:"w-full h-full object-contain",poster:s.thumbnail})}),s.caption&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.caption})]},a))})]})]}),s.virtualTour&&e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Virtual Tour"}),e.jsx(de,{url:s.virtualTour})]})]}),"rejected"===s.status&&s.rejectionReason&&e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-red-700 mb-2",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-600",children:s.rejectionReason})]})]})]})]})});var t},je=()=>{const r=s(),{toast:i}=v(),{hasPermission:m}=te(),[h,u]=a.useState(""),[x,j]=a.useState("all"),[ce,de]=a.useState("all"),[oe,je]=a.useState([0,5e7]),[ve,fe]=a.useState([]),[ge,ye]=a.useState(!0),[Ne,be]=a.useState(!1),[we,Ce]=a.useState(!1),[Pe,ke]=a.useState(!1),[Se,Fe]=a.useState(!1),[Re,Ee]=a.useState(null),[Ae,Te]=a.useState(""),[Oe,$e]=a.useState(null),[Ve,_e]=a.useState([]),[Le,qe]=a.useState(!0),[Ie,De]=a.useState(""),[Ue,ze]=a.useState({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),[Me,Qe]=a.useState("");a.useEffect(()=>{(async()=>{const e=await t.getCurrentUser(),s=e?.data?.user||e;$e(s),s?.profile&&De(`${s.profile.firstName||""} ${s.profile.lastName||""}`.trim()),Be()})();(async()=>{try{qe(!0);const e=(await I.getAllPropertyTypes(!1)).sort((e,s)=>(e.displayOrder||0)-(s.displayOrder||0)).map(e=>({value:e.value,label:e.name}));_e(e)}catch(e){i({title:"Warning",description:"Failed to load property types from configuration. Using defaults.",variant:"default"}),_e([{value:"house",label:"House"},{value:"apartment",label:"Apartment"},{value:"land",label:"Land"},{value:"commercial",label:"Commercial"}])}finally{qe(!1)}})()},[]);const Be=async()=>{try{ye(!0);const e=await ue.getProperties({limit:1e3});e.success&&fe(e.data.properties)}catch(e){i({title:"Error",description:"Failed to load properties",variant:"destructive"})}finally{ye(!1)}},He=a.useMemo(()=>ve.filter(e=>{const s=e.title.toLowerCase().includes(h.toLowerCase())||e.address.city.toLowerCase().includes(h.toLowerCase())||e.address.state.toLowerCase().includes(h.toLowerCase()),a="all"===x||e.type===x,r="all"===ce||e.status===ce,t=e.price>=oe[0]&&e.price<=oe[1];return s&&a&&r&&t}),[ve,h,x,ce,oe]),{paginatedItems:Je,currentPage:Ge,totalPages:We,goToPage:Ze,nextPage:Ke,previousPage:Xe}=Z(He,10),Ye=()=>{ze({documentsVerified:!1,locationVerified:!1,priceReasonable:!1,imagesQuality:!1,descriptionComplete:!1,ownershipConfirmed:!1}),Qe(""),Oe?.profile&&De(`${Oe.profile.firstName||""} ${Oe.profile.lastName||""}`.trim())},es=[{key:"sNo",label:"S.no",render:s=>e.jsx("span",{className:"font-medium",children:s.sNo})},{key:"title",label:"Property Title",render:s=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.address.district?`${s.address.city}, ${s.address.district}, ${s.address.state}`:`${s.address.city}, ${s.address.state}`})]})},{key:"type",label:"Type",render:s=>e.jsx(p,{variant:"secondary",className:"capitalize",children:s.type?s.type.replace("_"," "):"property"})},{key:"listingType",label:"Listing",render:s=>e.jsx(p,{variant:"sale"===s.listingType?"default":"outline",children:"sale"===s.listingType?"For Sale":"For Rent"})},{key:"price",label:"Price",render:s=>e.jsx("span",{className:"font-semibold",children:D.formatPrice(s.price,s.listingType)})},{key:"area",label:"Area",render:s=>e.jsx("span",{children:D.formatArea(s.area)})},{key:"status",label:"Status",render:s=>e.jsx(p,{variant:{available:"default",pending:"outline",rejected:"destructive",sold:"secondary",rented:"secondary"}[s.status]||"secondary",children:s.status})},{key:"featured",label:"Featured",render:s=>e.jsx(p,{variant:s.featured?"default":"secondary",children:s.featured?"Featured":"Regular"})},{key:"actions",label:"Actions",render:s=>{const a=(e=>!!e.owner&&(!(!Oe||e.owner._id!==Oe.id)||!e.vendor&&"available"===e.status))(s),t="pending"===s.status;return e.jsxs(U,{children:[e.jsx(z,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"sm",children:e.jsx(me,{className:"w-4 h-4"})})}),e.jsxs(M,{align:"end",children:[e.jsx(Q,{children:"Actions"}),e.jsx(B,{}),m(g.PROPERTIES_VIEW)&&e.jsxs(H,{onClick:()=>(e=>{Ee(e),Fe(!0)})(s),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"View Details"]}),a&&m(g.PROPERTIES_EDIT)&&e.jsxs(H,{onClick:()=>r(`/admin/properties/edit/${s._id}`),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Edit Property"]}),!a&&t&&m(g.PROPERTIES_APPROVE)&&e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsxs(H,{onClick:()=>(e=>{Ee(e),Ye(),ke(!0)})(s),className:"text-green-600",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Approve & Publish"]}),e.jsxs(H,{onClick:()=>(e=>{Ee(e),Ye(),Ce(!0)})(s),className:"text-red-600",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),"available"===s.status&&m(g.PROPERTIES_EDIT)&&e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsx(H,{onClick:()=>(async e=>{try{await ue.togglePropertyFeatured(e._id,!e.featured),fe(ve.map(s=>s._id===e._id?{...s,featured:!s.featured}:s)),i({title:"Success",description:`Property ${e.featured?"removed from":"marked as"} featured`})}catch(s){i({title:"Error",description:"Failed to update featured status",variant:"destructive"})}})(s),children:s.featured?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Remove Featured"]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Mark Featured"]})})]}),m(g.PROPERTIES_DELETE)&&e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsxs(H,{onClick:()=>(e=>{Ee(e),be(!0)})(s),className:"text-red-600",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}}];return ge?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(f,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"dashboard-header-responsive",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"dashboard-title-responsive",children:"Property Management"}),e.jsx("p",{className:"text-muted-foreground mt-1 md:mt-2 text-sm md:text-base",children:"Manage property listings and details"})]}),m(g.PROPERTIES_CREATE)&&e.jsxs(y,{onClick:()=>r("/admin/properties/add"),className:"w-full sm:w-auto",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Property"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs(b,{className:"stats-card-responsive",children:[e.jsx(w,{className:"pb-2",children:e.jsx(C,{className:"stats-label-responsive",children:"Total Properties"})}),e.jsx(P,{children:e.jsx("div",{className:"stats-value-responsive",children:ve.length})})]}),e.jsxs(b,{className:"stats-card-responsive",children:[e.jsx(w,{className:"pb-2",children:e.jsx(C,{className:"stats-label-responsive",children:"Pending Approval"})}),e.jsx(P,{children:e.jsx("div",{className:"stats-value-responsive text-yellow-600",children:ve.filter(e=>"pending"===e.status).length})})]}),e.jsxs(b,{className:"stats-card-responsive",children:[e.jsx(w,{className:"pb-2",children:e.jsx(C,{className:"stats-label-responsive",children:"Available Properties"})}),e.jsx(P,{children:e.jsx("div",{className:"stats-value-responsive text-green-600",children:ve.filter(e=>"available"===e.status).length})})]}),e.jsxs(b,{className:"stats-card-responsive",children:[e.jsx(w,{className:"pb-2",children:e.jsx(C,{className:"stats-label-responsive",children:"Featured"})}),e.jsx(P,{children:e.jsx("div",{className:"stats-value-responsive text-blue-600",children:ve.filter(e=>e.featured).length})})]})]}),e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(C,{className:"text-lg md:text-xl",children:"Property Approvals"}),e.jsxs(k,{className:"text-sm md:text-base",children:[He.length," propert",1!==He.length?"ies":"y"," found"]})]}),e.jsxs(P,{children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ie,{searchTerm:h,onSearchChange:u})}),e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(S,{htmlFor:"type-filter",className:"text-sm font-medium",children:"Property Type"}),e.jsxs("select",{id:"type-filter",value:x,onChange:e=>j(e.target.value),className:"w-full p-2 border rounded-md mt-1",disabled:Le,children:[e.jsx("option",{value:"all",children:Le?"Loading...":"All Types"}),Ve.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(S,{htmlFor:"status-filter",className:"text-sm font-medium",children:"Property Status"}),e.jsxs("select",{id:"status-filter",value:ce,onChange:e=>de(e.target.value),className:"w-full p-2 border rounded-md mt-1",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"sold",children:"Sold"}),e.jsx("option",{value:"rented",children:"Rented"}),e.jsx("option",{value:"leased",children:"Leased"})]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(S,{className:"text-sm font-medium",children:"Price Range"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["₹",oe[0].toLocaleString()]}),e.jsx(le,{min:0,max:5e7,step:1e5,value:oe,onValueChange:e=>je([e[0],e[1]]),className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",oe[1].toLocaleString()]})]})]})]}),e.jsx("div",{className:"table-responsive-wrapper",children:e.jsx(re,{columns:es,data:Je.map((e,s)=>({...e,id:e._id,sNo:10*(Ge-1)+s+1})),hideDefaultActions:!0})}),We>1&&e.jsx("div",{className:"mt-4 md:mt-6",children:e.jsx(K,{children:e.jsxs(X,{className:"pagination-responsive",children:[e.jsx(Y,{children:e.jsx(ee,{onClick:Xe,className:"pagination-button-responsive "+(1===Ge?"pointer-events-none opacity-50":"cursor-pointer")})}),Array.from({length:We},(e,s)=>s+1).map(s=>e.jsx(Y,{children:e.jsx(se,{onClick:()=>Ze(s),isActive:Ge===s,className:"pagination-button-responsive cursor-pointer",children:s})},s)),e.jsx(Y,{children:e.jsx(ae,{onClick:Ke,className:"pagination-button-responsive "+(Ge===We?"pointer-events-none opacity-50":"cursor-pointer")})})]})})})]})]}),e.jsx(F,{open:Ne,onOpenChange:be,children:e.jsxs(R,{children:[e.jsxs(E,{children:[e.jsx(A,{children:"Delete Property"}),e.jsxs(T,{children:['Are you sure you want to delete "',Re?.title,'"? This action cannot be undone.']})]}),e.jsxs(O,{children:[e.jsx($,{children:"Cancel"}),e.jsx(V,{onClick:async()=>{if(Re)try{await ue.deleteProperty(Re._id),fe(ve.filter(e=>e._id!==Re._id)),be(!1),Ee(null),i({title:"Success",description:"Property deleted successfully"})}catch(e){i({title:"Error",description:"Failed to delete property",variant:"destructive"})}},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(l,{open:Pe,onOpenChange:ke,children:e.jsxs(n,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(c,{children:[e.jsx(d,{children:"Approve Property"}),e.jsxs(o,{children:['Complete the verification checklist and provide your approval for "',Re?.title,'".']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"approver-name",children:"Approver Name *"}),e.jsx(_,{id:"approver-name",placeholder:"Enter your full name",value:Ie,readOnly:!0,className:"mt-1 bg-muted cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"text-base font-semibold",children:"Verification Checklist"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"documents",checked:Ue.documentsVerified,onCheckedChange:e=>ze({...Ue,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents",className:"text-sm font-medium cursor-pointer",children:"All required documents are verified"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"location",checked:Ue.locationVerified,onCheckedChange:e=>ze({...Ue,locationVerified:e})}),e.jsx("label",{htmlFor:"location",className:"text-sm font-medium cursor-pointer",children:"Property location is verified and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"price",checked:Ue.priceReasonable,onCheckedChange:e=>ze({...Ue,priceReasonable:e})}),e.jsx("label",{htmlFor:"price",className:"text-sm font-medium cursor-pointer",children:"Price is reasonable and competitive"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"images",checked:Ue.imagesQuality,onCheckedChange:e=>ze({...Ue,imagesQuality:e})}),e.jsx("label",{htmlFor:"images",className:"text-sm font-medium cursor-pointer",children:"Images are of good quality and relevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"description",checked:Ue.descriptionComplete,onCheckedChange:e=>ze({...Ue,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description",className:"text-sm font-medium cursor-pointer",children:"Description is complete and accurate"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"ownership",checked:Ue.ownershipConfirmed,onCheckedChange:e=>ze({...Ue,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership",className:"text-sm font-medium cursor-pointer",children:"Ownership is confirmed and legitimate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"handwritten-comments",children:"Additional Comments"}),e.jsx(L,{id:"handwritten-comments",placeholder:"Type your handwritten comments or notes here...",value:Me,onChange:e=>Qe(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional observations, notes, or special remarks about this property"})]})]}),e.jsxs(q,{children:[e.jsx(y,{variant:"outline",onClick:()=>ke(!1),children:"Cancel"}),e.jsx(y,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{if(Re&&Ie.trim())try{await ue.approveProperty(Re._id),fe(ve.map(e=>e._id===Re._id?{...e,status:"available",verified:!0}:e)),ke(!1),Ee(null),Ye(),i({title:"Success",description:"Property approved and listed successfully!"})}catch(e){i({title:"Error",description:"Failed to approve property",variant:"destructive"})}else i({title:"Error",description:"Approver name is required",variant:"destructive"})},disabled:!Ie.trim(),children:"Approve & Publish Property"})]})]})}),e.jsx(l,{open:we,onOpenChange:Ce,children:e.jsxs(n,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(c,{children:[e.jsx(d,{children:"Reject Property"}),e.jsxs(o,{children:['Complete the form and provide a reason for rejecting "',Re?.title,'". The vendor will be notified.']})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"approver-name-reject",children:"Approver Name *"}),e.jsx(_,{id:"approver-name-reject",placeholder:"Enter your full name",value:Ie,readOnly:!0,className:"mt-1 bg-muted cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"text-base font-semibold",children:"Issues Found (Check applicable items)"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"documents-reject",checked:Ue.documentsVerified,onCheckedChange:e=>ze({...Ue,documentsVerified:e})}),e.jsx("label",{htmlFor:"documents-reject",className:"text-sm font-medium cursor-pointer",children:"Documents are incomplete or invalid"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"location-reject",checked:Ue.locationVerified,onCheckedChange:e=>ze({...Ue,locationVerified:e})}),e.jsx("label",{htmlFor:"location-reject",className:"text-sm font-medium cursor-pointer",children:"Property location is incorrect or unclear"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"price-reject",checked:Ue.priceReasonable,onCheckedChange:e=>ze({...Ue,priceReasonable:e})}),e.jsx("label",{htmlFor:"price-reject",className:"text-sm font-medium cursor-pointer",children:"Price is unreasonable or suspicious"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"images-reject",checked:Ue.imagesQuality,onCheckedChange:e=>ze({...Ue,imagesQuality:e})}),e.jsx("label",{htmlFor:"images-reject",className:"text-sm font-medium cursor-pointer",children:"Images are poor quality or irrelevant"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"description-reject",checked:Ue.descriptionComplete,onCheckedChange:e=>ze({...Ue,descriptionComplete:e})}),e.jsx("label",{htmlFor:"description-reject",className:"text-sm font-medium cursor-pointer",children:"Description is incomplete or misleading"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{id:"ownership-reject",checked:Ue.ownershipConfirmed,onCheckedChange:e=>ze({...Ue,ownershipConfirmed:e})}),e.jsx("label",{htmlFor:"ownership-reject",className:"text-sm font-medium cursor-pointer",children:"Ownership cannot be confirmed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"rejection-reason",children:"Rejection Reason *"}),e.jsx(L,{id:"rejection-reason",placeholder:"Enter the detailed reason for rejection...",value:Ae,onChange:e=>Te(e.target.value),className:"mt-1",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"handwritten-comments-reject",children:"Additional Comments"}),e.jsx(L,{id:"handwritten-comments-reject",placeholder:"Type your handwritten comments or notes here...",value:Me,onChange:e=>Qe(e.target.value),className:"mt-1 min-h-[120px] font-handwriting",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add any additional feedback or suggestions for the vendor"})]})]}),e.jsxs(q,{children:[e.jsx(y,{variant:"outline",onClick:()=>Ce(!1),children:"Cancel"}),e.jsx(y,{variant:"destructive",onClick:async()=>{if(Re&&Ae.trim()&&Ie.trim())try{await ue.rejectProperty(Re._id,Ae),fe(ve.map(e=>e._id===Re._id?{...e,status:"rejected"}:e)),Ce(!1),Ee(null),Te(""),Ye(),i({title:"Property Rejected",description:"Property has been rejected and vendor has been notified."})}catch(e){i({title:"Error",description:"Failed to reject property",variant:"destructive"})}else i({title:"Error",description:"Approver name and rejection reason are required",variant:"destructive"})},disabled:!Ae.trim()||!Ie.trim(),children:"Reject Property"})]})]})}),e.jsx(xe,{property:Re,open:Se,onOpenChange:Fe})]})};export{je as default};
